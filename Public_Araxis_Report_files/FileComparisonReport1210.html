<!--?xml version="1.0"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:mg="http://www.araxis.com/2002/Merge/Reporting" xmlns="http://www.w3.org/1999/xhtml">
 <head> 
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> 
  <!--The layout and design of this report is Copyright Â© 2003-2016 Araxis Ltd. All rights reserved.--> 
  <!--The copyright of the data content of this report belongs to the relevant copyright holders.--> 
  <title>1210. EPMO Open Source Coordination Office Redaction File Detail Report</title> 
  <style type="text/css">
body { background: #fff;  color: #000; margin: 0px 14px 14px 14px; }
h1, h2, h3, h4, h5 {
  padding: 0em;
  margin: 1.5em 0em .25em 0em;
  text-align: left;
  font-weight: normal;
  font-family: Arial, Helvetica, sans-serif;
  font-size: 70%;
  max-width: 55em;
}
body, h4, h5, p, ol, ul, li, td, th { font-family: Verdana, Arial, Helvetica, sans-serif; text-align: left; }

h4, h5, p, ol, ul, li { font-size: 70%; }
input {
  font-family: Arial, Helvetica, sans-serif;
  font-size: 120%;
}

h1 { margin: 14px 0em 1.2em 0em; font-size: 112%; line-height: 130%;}
h2 { font-size: 125%; line-height: 84%;}
h3 { margin-top: 1.4em; font-size: 81%; }
h4 { margin-top: 1em; font-size: 70%; }
h5 { margin-top: 1em; font-size: 100%; font-style: italic;}
h1 strong, h2 strong, h3 strong, h4 strong { font-weight: bold; }

p { margin: 6px 0em 6px 0em; max-width: 55em;}
p.code, code {}
p { font-size: 70%; line-height: 125%; }
table { font-size: 70%;}

p.copyright, .small { font-size: 60%; line-height: 120%; }
p.copyright { margin: 3px 0px 0px 0px; padding: 0px; text-align: left; }
acronym { font-variant: small-caps; }
div.pad { padding: 3px; }
span.lineEndings { color: red; font-size: 70%; }

table.mgRowGroup, table.mgRowGroupFolder { border: 1px solid #a0a0a0; margin: 10px 0px 10px 0px; width: 100%; table-layout: fixed; border-collapse: collapse; }
table.mgRowGroup td { vertical-align: top; padding: 0; }
table.mgRowGroupFolder td { vertical-align: top; padding: 1px 0 1px 0; }
div.IP { width: 2px; height: 1em; float: left; }

img.mgFldrIcon {float: left; text-align: left; margin: -1px 2px 0px 0px;  height: 16px; width: 16px; border: none; vertical-align: top; background-color: transparent;}
div.mgFldrIcon {float: left; width: auto;}
span.left {float: left;width: auto;}
span.right {float: right;width: auto;}

table.bordered { border-collapse: collapse; border: 1px solid #a0a0a0; margin: 10px 0px 10px 0px;}
table.bordered th, table.bordered td { vertical-align: top; padding: 3px; border: 1px solid #a0a0a0;}
table.bordered th { background-color: #e5e5e5; }
table.bordered td.group { background-color: #f5f5f5; }
span.disabledNavigation { color: #a0a0a0; }
div.navigation { margin-top: 14px; font-size: 70%; }
div.comment { font-weight: normal; color: #000; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fcfed8; padding: 2px 5px 2px 5px; border: 1px solid #E3E5C3; margin: 1px 2px 3px 2px; -moz-border-radius: 7px; border-radius: 7px; }

                span.U1, span.U1 a {float: left; width: auto;color: #000000; background-color: #FFFFFF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.U1 a {text-decoration: underline;}
td.U1 {color: #000000; background-color: #FFFFFF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.R1, span.R1 a {float: left; width: auto;color: #800000; background-color: #F3E6D8; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.R1 a {text-decoration: underline;}
td.R1 {color: #800000; background-color: #F3E6D8; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.I1, span.I1 a {float: left; width: auto;color: #800000; background-color: #D1E8CF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.I1 a {text-decoration: underline;}
td.I1 {color: #800000; background-color: #D1E8CF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.C1, span.C1 a {float: left; width: auto;color: #800000; background-color: #DACDE6; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.C1 a {text-decoration: underline;}
td.C1 {color: #800000; background-color: #DACDE6; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
td.nbgC1 {color: #800000; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; background-color: #FFFFFF; }
span.U2, span.U2 a {float: left; width: auto;color: #000000; background-color: #FFFFFF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.U2 a {text-decoration: underline;}
td.U2 {color: #000000; background-color: #FFFFFF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.R2, span.R2 a {float: left; width: auto;color: #800000; background-color: #F3E6D8; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.R2 a {text-decoration: underline;}
td.R2 {color: #800000; background-color: #F3E6D8; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.I2, span.I2 a {float: left; width: auto;color: #800000; background-color: #D1E8CF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.I2 a {text-decoration: underline;}
td.I2 {color: #800000; background-color: #D1E8CF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.C2, span.C2 a {float: left; width: auto;color: #800000; background-color: #DACDE6; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.C2 a {text-decoration: underline;}
td.C2 {color: #800000; background-color: #DACDE6; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
td.nbgC2 {color: #800000; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; background-color: #FFFFFF; }

span.selected {background-color: #3d80df; color: #fff;}
span.selected a {background-color: #3d80df; color: #fff; text-decoration: underline;}
span.symbol {cursor: pointer;}
      </style> 
 </head> 
 <body> 
  <h1><strong>1210. EPMO Open Source Coordination Office Redaction File Detail Report</strong></h1> 
  <p>Produced by <strong>Araxis Merge</strong> on <strong>10/13/2017 11:28:46 AM Central Daylight Time</strong>. See <a href="http://www.araxis.com/" title="Link to the Araxis corporate web site">www.araxis.com</a> for information about Merge. This report uses XHTML and CSS2, and is best viewed with a modern standards-compliant browser. For optimum results when printing this report, use landscape orientation and enable printing of background images and colours in your browser.</p> 
  <h3><strong>1210.1&nbsp;Files compared</strong></h3> 
  <table class="bordered"> 
   <tbody>
    <tr> 
     <th>#</th> 
     <th>Location</th> 
     <th>File</th> 
     <th>Last Modified</th> 
    </tr> 
    <tr> 
     <td>1</td> 
     <td>ehmp.zip\ehmp\ehmp\product\production\vx-sync\subsystems\vista</td> 
     <td>vista-client.js</td> 
     <td>Mon Jul 10 17:46:22 2017 UTC</td> 
    </tr> 
    <tr> 
     <td>2</td> 
     <td>ehmp.zip\ehmp\ehmp\product\production\vx-sync\subsystems\vista</td> 
     <td>vista-client.js</td> 
     <td>Tue Oct 10 17:58:20 2017 UTC</td> 
    </tr> 
   </tbody>
  </table> 
  <h3><strong>1210.2&nbsp;Comparison summary</strong></h3> 
  <table class="bordered"> 
   <tbody>
    <tr> 
     <th rowspan="2" style="vertical-align: bottom;">Description</th> 
     <th colspan="2">Between<br>Files 1 and 2</th> 
    </tr> 
    <tr> 
     <th style="text-align: right;">Text Blocks</th> 
     <th style="text-align: right;">Lines</th> 
    </tr> 
    <tr> 
     <td>Unchanged</td> 
     <td style="text-align: right;">3</td> 
     <td style="text-align: right;">2374</td> 
    </tr> 
    <tr> 
     <td>Changed</td> 
     <td style="text-align: right;">2</td> 
     <td style="text-align: right;">4</td> 
    </tr> 
    <tr> 
     <td>Inserted</td> 
     <td style="text-align: right;">0</td> 
     <td style="text-align: right;">0</td> 
    </tr> 
    <tr> 
     <td>Removed</td> 
     <td style="text-align: right;">0</td> 
     <td style="text-align: right;">0</td> 
    </tr> 
   </tbody>
  </table> 
  <h3><strong>1210.3&nbsp;Comparison options</strong></h3> 
  <table class="bordered" style="width: 55em;"> 
   <tbody>
    <tr> 
     <th>Whitespace</th> 
     <td></td> 
    </tr> 
    <tr> 
     <th>Character case</th> 
     <td>Differences in character case are significant</td> 
    </tr> 
    <tr> 
     <th>Line endings</th> 
     <td>Differences in line endings (<code>CR</code> and <code>LF</code> characters) are ignored</td> 
    </tr> 
    <tr> 
     <th>CR/LF characters</th> 
     <td>Not shown in the comparison detail</td> 
    </tr> 
   </tbody>
  </table> 
  <h3><strong>1210.4&nbsp;Active regular expressions</strong></h3> 
  <p>No regular expressions were active.</p> 
  <h3><strong>1210.5&nbsp;Comparison detail</strong></h3> 
  <table class="mgRowGroup"> 
   <colgroup>
    <col style="width: 5em;"> 
    <col style="width: 1em;"> 
    <col width="*"> 
    <col style="width: 1em;"> 
    <col style="width: 5em;"> 
    <col style="width: 1em;"> 
    <col width="*"> 
   </colgroup>
   <tbody>
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">'use&nbsp;stric</span> <span class="U2">t';</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">2</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">3</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;_&nbsp;=&nbsp;re</span> <span class="U2">quire('und</span> <span class="U2">erscore');</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">4</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;util&nbsp;=</span> <span class="U2">&nbsp;require('</span> <span class="U2">util');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">5</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;objUti</span> <span class="U2">l&nbsp;=&nbsp;requir</span> <span class="U2">e(global.V</span> <span class="U2">X_UTILS&nbsp;+&nbsp;</span> <span class="U2">'object-ut</span> <span class="U2">ils');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">6</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;idUtil</span> <span class="U2">&nbsp;=&nbsp;require</span> <span class="U2">(global.VX</span> <span class="U2">_UTILS&nbsp;+&nbsp;'</span> <span class="U2">patient-id</span> <span class="U2">entifier-u</span> <span class="U2">tils');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">7</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;logUti</span> <span class="U2">l&nbsp;=&nbsp;requir</span> <span class="U2">e(global.V</span> <span class="U2">X_UTILS&nbsp;+&nbsp;</span> <span class="U2">'log');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">8</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;uuid&nbsp;=</span> <span class="U2">&nbsp;require('</span> <span class="U2">node-uuid'</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">9</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;vistaS</span> <span class="U2">yncUtil&nbsp;=&nbsp;</span> <span class="U2">require(gl</span> <span class="U2">obal.VX_UT</span> <span class="U2">ILS&nbsp;+&nbsp;'vis</span> <span class="U2">ta-sync-ut</span> <span class="U2">il');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">10</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//var&nbsp;asyn</span> <span class="U2">c&nbsp;=&nbsp;requir</span> <span class="U2">e('async')</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">11</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">12</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;rpcCli</span> <span class="U2">ents&nbsp;=&nbsp;[];</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">13</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">14</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">15</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-------</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">16</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;Constru</span> <span class="U2">ctor&nbsp;for&nbsp;V</span> <span class="U2">istaClient</span> <span class="U2">.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">17</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">18</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;log&nbsp;-&nbsp;T</span> <span class="U2">he&nbsp;logger&nbsp;</span> <span class="U2">to&nbsp;be&nbsp;used</span> <span class="U2">&nbsp;to&nbsp;log&nbsp;me</span> <span class="U2">ssages.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">19</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;config&nbsp;</span> <span class="U2">-&nbsp;The&nbsp;conf</span> <span class="U2">iguration&nbsp;</span> <span class="U2">informatio</span> <span class="U2">n&nbsp;that&nbsp;was</span> <span class="U2">&nbsp;establish</span> <span class="U2">ed&nbsp;for&nbsp;thi</span> <span class="U2">s&nbsp;environm</span> <span class="U2">ent.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">20</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;rpcClie</span> <span class="U2">nt&nbsp;-&nbsp;The&nbsp;h</span> <span class="U2">andle&nbsp;to&nbsp;t</span> <span class="U2">he&nbsp;client&nbsp;</span> <span class="U2">used&nbsp;to&nbsp;ma</span> <span class="U2">ke&nbsp;RPC&nbsp;cal</span> <span class="U2">ls&nbsp;to&nbsp;Vist</span> <span class="U2">A.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">21</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-------</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">22</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">function&nbsp;V</span> <span class="U2">istaClient</span> <span class="U2">(log,&nbsp;metr</span> <span class="U2">ics,&nbsp;confi</span> <span class="U2">g,&nbsp;rpcClie</span> <span class="U2">nt)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">23</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">lf&nbsp;=&nbsp;this;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">24</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!(</span> <span class="U2">this&nbsp;insta</span> <span class="U2">nceof&nbsp;Vist</span> <span class="U2">aClient))&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">25</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;new&nbsp;V</span> <span class="U2">istaClient</span> <span class="U2">(log,&nbsp;metr</span> <span class="U2">ics,&nbsp;confi</span> <span class="U2">g,&nbsp;rpcClie</span> <span class="U2">nt);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">26</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">27</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">28</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Set</span> <span class="U2">&nbsp;up&nbsp;our&nbsp;er</span> <span class="U2">ror&nbsp;consta</span> <span class="U2">nts</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">29</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">30</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;this.E</span> <span class="U2">RROR_LIST&nbsp;</span> <span class="U2">=&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">31</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IN</span> <span class="U2">VALID_JSON</span> <span class="U2">_ERROR:&nbsp;'I</span> <span class="U2">nvalid&nbsp;JSO</span> <span class="U2">N&nbsp;with&nbsp;hmp</span> <span class="U2">BatchSize&nbsp;</span> <span class="U2">=&nbsp;1',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">32</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RP</span> <span class="U2">C_ERROR:&nbsp;'</span> <span class="U2">RPC&nbsp;Error'</span> <span class="U2">,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">33</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IN</span> <span class="U2">VALID_CONF</span> <span class="U2">IGURATION_</span> <span class="U2">ERROR:&nbsp;'In</span> <span class="U2">valid&nbsp;Conf</span> <span class="U2">iguration'</span> <span class="U2">,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">34</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VI</span> <span class="U2">STA_LOCK_D</span> <span class="U2">OWN_MODE:&nbsp;</span> <span class="U2">'VistA&nbsp;All</span> <span class="U2">ocations&nbsp;L</span> <span class="U2">ocked',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">35</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IN</span> <span class="U2">VALID_BATC</span> <span class="U2">H_SIZE:&nbsp;'I</span> <span class="U2">nvalid&nbsp;bat</span> <span class="U2">ch&nbsp;size'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">36</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">37</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">38</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;this.l</span> <span class="U2">og&nbsp;=&nbsp;log;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">39</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;thi</span> <span class="U2">s.log&nbsp;=&nbsp;re</span> <span class="U2">quire('bun</span> <span class="U2">yan').crea</span> <span class="U2">teLogger({</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">40</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;name:&nbsp;'vi</span> <span class="U2">sta-client</span> <span class="U2">',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">41</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;level:&nbsp;'d</span> <span class="U2">ebug'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">42</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;});</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">43</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;this.r</span> <span class="U2">pcLog&nbsp;=&nbsp;lo</span> <span class="U2">gUtil.get(</span> <span class="U2">'rpc',&nbsp;log</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">44</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;this.c</span> <span class="U2">onfig&nbsp;=&nbsp;co</span> <span class="U2">nfig;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">45</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;this.m</span> <span class="U2">etrics&nbsp;=&nbsp;m</span> <span class="U2">etrics;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">46</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;this.h</span> <span class="U2">mpServerId</span> <span class="U2">&nbsp;=&nbsp;config[</span> <span class="U2">'hmp.serve</span> <span class="U2">r.id'];</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">47</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;this.h</span> <span class="U2">mpVersion&nbsp;</span> <span class="U2">=&nbsp;config['</span> <span class="U2">hmp.versio</span> <span class="U2">n'];</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">48</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;this.h</span> <span class="U2">mpBatchSiz</span> <span class="U2">e&nbsp;=&nbsp;config</span> <span class="U2">['hmp.batc</span> <span class="U2">h.size'];</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">49</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;this.e</span> <span class="U2">xtractSche</span> <span class="U2">ma&nbsp;=&nbsp;confi</span> <span class="U2">g['hmp.ext</span> <span class="U2">ract.schem</span> <span class="U2">a'];</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">50</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;log.de</span> <span class="U2">bug('vista</span> <span class="U2">-client.co</span> <span class="U2">nstructor:</span> <span class="U2">&nbsp;creating&nbsp;</span> <span class="U2">vista&nbsp;subs</span> <span class="U2">cribe&nbsp;prox</span> <span class="U2">y');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">51</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rp</span> <span class="U2">cClient)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">52</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;th</span> <span class="U2">is.rpcClie</span> <span class="U2">nt&nbsp;=&nbsp;rpcCl</span> <span class="U2">ient;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">53</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">54</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;th</span> <span class="U2">is.rpcClie</span> <span class="U2">nt&nbsp;=&nbsp;requi</span> <span class="U2">re('vista-</span> <span class="U2">js').RpcCl</span> <span class="U2">ient;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">55</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">56</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;_.each</span> <span class="U2">(config.vi</span> <span class="U2">staSites,&nbsp;</span> <span class="U2">function&nbsp;(</span> <span class="U2">siteConfig</span> <span class="U2">,&nbsp;siteId)&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">57</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">g.debug('v</span> <span class="U2">ista-clien</span> <span class="U2">t.construc</span> <span class="U2">tor:&nbsp;siteI</span> <span class="U2">d:&nbsp;%s,&nbsp;sit</span> <span class="U2">eConfig:&nbsp;%</span> <span class="U2">j',&nbsp;siteId</span> <span class="U2">,&nbsp;siteConf</span> <span class="U2">ig);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">58</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;(!rpcClie</span> <span class="U2">nts[siteId</span> <span class="U2">])&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">59</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;var&nbsp;vist</span> <span class="U2">aConfig&nbsp;=&nbsp;</span> <span class="U2">_.clone(si</span> <span class="U2">teConfig);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">60</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;vistaCon</span> <span class="U2">fig.contex</span> <span class="U2">t&nbsp;=&nbsp;'HMP&nbsp;S</span> <span class="U2">YNCHRONIZA</span> <span class="U2">TION&nbsp;CONTE</span> <span class="U2">XT';</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">61</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;rpcClien</span> <span class="U2">ts[siteId]</span> <span class="U2">&nbsp;=&nbsp;new&nbsp;sel</span> <span class="U2">f.rpcClien</span> <span class="U2">t(self.rpc</span> <span class="U2">Log,&nbsp;vista</span> <span class="U2">Config);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">62</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;log.debu</span> <span class="U2">g('vista-c</span> <span class="U2">lient.cons</span> <span class="U2">tructor:&nbsp;r</span> <span class="U2">pcClient&nbsp;f</span> <span class="U2">or&nbsp;siteId:</span> <span class="U2">&nbsp;%s&nbsp;added&nbsp;</span> <span class="U2">to&nbsp;rpcClie</span> <span class="U2">nts&nbsp;array.</span> <span class="U2">',&nbsp;siteId)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">63</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span> <span class="U2">else&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">64</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;log.debu</span> <span class="U2">g('vista-c</span> <span class="U2">lient.cons</span> <span class="U2">tructor:&nbsp;r</span> <span class="U2">pcClient&nbsp;f</span> <span class="U2">or&nbsp;siteId:</span> <span class="U2">&nbsp;%s&nbsp;Failed</span> <span class="U2">&nbsp;to&nbsp;be&nbsp;add</span> <span class="U2">ed&nbsp;to&nbsp;rpcC</span> <span class="U2">lients&nbsp;arr</span> <span class="U2">ay.',&nbsp;site</span> <span class="U2">Id);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">65</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">66</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;});</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">67</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">68</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">69</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">VistaClien</span> <span class="U2">t.prototyp</span> <span class="U2">e.childIns</span> <span class="U2">tance&nbsp;=&nbsp;fu</span> <span class="U2">nction&nbsp;(lo</span> <span class="U2">g)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">70</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ne</span> <span class="U2">wInstance&nbsp;</span> <span class="U2">=&nbsp;new&nbsp;Vist</span> <span class="U2">aClient(lo</span> <span class="U2">g,&nbsp;this.me</span> <span class="U2">trics,&nbsp;thi</span> <span class="U2">s.config);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">71</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">72</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="U2">&nbsp;newInstan</span> <span class="U2">ce;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">73</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">74</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">75</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">VistaClien</span> <span class="U2">t.prototyp</span> <span class="U2">e._getRpcC</span> <span class="U2">lient&nbsp;=&nbsp;fu</span> <span class="U2">nction&nbsp;(vi</span> <span class="U2">staId)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">76</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rp</span> <span class="U2">cClients[v</span> <span class="U2">istaId])&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">77</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;rpcCl</span> <span class="U2">ients[vist</span> <span class="U2">aId];</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">78</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">79</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;null;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">80</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">81</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">82</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">83</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">/**</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">84</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;This&nbsp;fu</span> <span class="U2">nction&nbsp;inv</span> <span class="U2">okes&nbsp;the&nbsp;H</span> <span class="U2">MP&nbsp;SUBSCRI</span> <span class="U2">PTION&nbsp;STAT</span> <span class="U2">US&nbsp;RPC&nbsp;to&nbsp;</span> <span class="U2">determine&nbsp;</span> <span class="U2">the&nbsp;subscr</span> <span class="U2">iptiong</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">85</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;status&nbsp;</span> <span class="U2">of&nbsp;the&nbsp;pro</span> <span class="U2">vided&nbsp;DFN&nbsp;</span> <span class="U2">on&nbsp;the&nbsp;cli</span> <span class="U2">ent's&nbsp;conn</span> <span class="U2">ected&nbsp;serv</span> <span class="U2">er.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">86</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">87</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;patient</span> <span class="U2">Identifier</span> <span class="U2">&nbsp;-&nbsp;Should&nbsp;</span> <span class="U2">be&nbsp;a&nbsp;PID&nbsp;v</span> <span class="U2">alue&nbsp;for&nbsp;a</span> <span class="U2">&nbsp;VistA&nbsp;sou</span> <span class="U2">rce</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">88</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;statusC</span> <span class="U2">allback&nbsp;-&nbsp;</span> <span class="U2">Callback&nbsp;f</span> <span class="U2">unction&nbsp;to</span> <span class="U2">&nbsp;receive&nbsp;r</span> <span class="U2">esults</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">89</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*/</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">90</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">VistaClien</span> <span class="U2">t.prototyp</span> <span class="U2">e.status&nbsp;=</span> <span class="U2">&nbsp;function&nbsp;</span> <span class="U2">(patientId</span> <span class="U2">entifier,&nbsp;</span> <span class="U2">statusCall</span> <span class="U2">back)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">91</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;vi</span> <span class="U2">staId&nbsp;=&nbsp;pa</span> <span class="U2">tientIdent</span> <span class="U2">ifier.spli</span> <span class="U2">t(';')[0];</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">92</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;df</span> <span class="U2">n&nbsp;=&nbsp;patien</span> <span class="U2">tIdentifie</span> <span class="U2">r.split(';</span> <span class="U2">')[1];</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">93</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">lf&nbsp;=&nbsp;this;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">94</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;rp</span> <span class="U2">cClient&nbsp;=&nbsp;</span> <span class="U2">self._getR</span> <span class="U2">pcClient(v</span> <span class="U2">istaId);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">95</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">96</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;pa</span> <span class="U2">rams&nbsp;=&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">97</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'"</span> <span class="U2">server"':&nbsp;</span> <span class="U2">self.hmpSe</span> <span class="U2">rverId,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">98</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'"</span> <span class="U2">localId"':</span> <span class="U2">&nbsp;dfn</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">99</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">100</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">101</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;rpcCli</span> <span class="U2">ent.execut</span> <span class="U2">e('HMP&nbsp;SUB</span> <span class="U2">SCRIPTION&nbsp;</span> <span class="U2">STATUS',&nbsp;p</span> <span class="U2">arams,&nbsp;fun</span> <span class="U2">ction&nbsp;(err</span> <span class="U2">or,&nbsp;respon</span> <span class="U2">se)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">102</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;(!error)&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">103</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;try&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">104</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span> <span class="U2">result&nbsp;=&nbsp;J</span> <span class="U2">SON.parse(</span> <span class="U2">response);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">105</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resu</span> <span class="U2">lt.siteId&nbsp;</span> <span class="U2">=&nbsp;vistaId;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">106</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;statusC</span> <span class="U2">allback(nu</span> <span class="U2">ll,&nbsp;result</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">107</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}&nbsp;catch&nbsp;</span> <span class="U2">(e)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">108</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self</span> <span class="U2">.log.error</span> <span class="U2">('VistaCli</span> <span class="U2">ent.status</span> <span class="U2">()&nbsp;:&nbsp;ERROR</span> <span class="U2">&nbsp;-&nbsp;%j',&nbsp;e)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">109</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erro</span> <span class="U2">r&nbsp;=&nbsp;e;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">110</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">111</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">112</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">113</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;st</span> <span class="U2">atusCallba</span> <span class="U2">ck(error);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">114</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;});</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">115</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">116</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">117</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-------</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">118</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;This&nbsp;fu</span> <span class="U2">nction&nbsp;mak</span> <span class="U2">es&nbsp;an&nbsp;RPC&nbsp;</span> <span class="U2">call&nbsp;to&nbsp;Vi</span> <span class="U2">stA&nbsp;to&nbsp;sub</span> <span class="U2">scribe&nbsp;the</span> <span class="U2">&nbsp;patient.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">119</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">120</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;vistaId</span> <span class="U2">&nbsp;-&nbsp;The&nbsp;sit</span> <span class="U2">e&nbsp;hash&nbsp;for</span> <span class="U2">&nbsp;the&nbsp;vista</span> <span class="U2">Id&nbsp;that&nbsp;th</span> <span class="U2">is&nbsp;handler</span> <span class="U2">&nbsp;is&nbsp;config</span> <span class="U2">ured&nbsp;to&nbsp;pr</span> <span class="U2">ocess.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">121</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;patient</span> <span class="U2">Identifier</span> <span class="U2">&nbsp;-&nbsp;This&nbsp;is</span> <span class="U2">&nbsp;an&nbsp;object</span> <span class="U2">&nbsp;that&nbsp;repr</span> <span class="U2">esents&nbsp;the</span> <span class="U2">&nbsp;patient&nbsp;i</span> <span class="U2">dentifier.</span> <span class="U2">&nbsp;&nbsp;It</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">122</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;must&nbsp;be</span> <span class="U2">&nbsp;a&nbsp;pid&nbsp;for</span> <span class="U2">&nbsp;the&nbsp;site&nbsp;</span> <span class="U2">represente</span> <span class="U2">d&nbsp;in&nbsp;vista</span> <span class="U2">Id.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">123</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;rootJob</span> <span class="U2">Id&nbsp;-&nbsp;This&nbsp;</span> <span class="U2">is&nbsp;the&nbsp;job</span> <span class="U2">&nbsp;Id&nbsp;of&nbsp;the</span> <span class="U2">&nbsp;root&nbsp;job&nbsp;</span> <span class="U2">that&nbsp;trigg</span> <span class="U2">ered&nbsp;this&nbsp;</span> <span class="U2">subscripti</span> <span class="U2">on</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">124</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;jobId&nbsp;-</span> <span class="U2">&nbsp;This&nbsp;is&nbsp;t</span> <span class="U2">he&nbsp;job&nbsp;Id&nbsp;</span> <span class="U2">of&nbsp;the&nbsp;job</span> <span class="U2">&nbsp;that&nbsp;repr</span> <span class="U2">esents&nbsp;the</span> <span class="U2">&nbsp;poller's&nbsp;</span> <span class="U2">job&nbsp;when&nbsp;i</span> <span class="U2">t</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">125</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;receives&nbsp;</span> <span class="U2">the&nbsp;data&nbsp;f</span> <span class="U2">or&nbsp;this&nbsp;pa</span> <span class="U2">tient.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">126</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;priorit</span> <span class="U2">y&nbsp;-&nbsp;The&nbsp;pr</span> <span class="U2">iority&nbsp;of&nbsp;</span> <span class="U2">the&nbsp;job.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">127</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;referen</span> <span class="U2">ceInfo&nbsp;-&nbsp;R</span> <span class="U2">eference&nbsp;i</span> <span class="U2">nformation</span> <span class="U2">&nbsp;that&nbsp;shou</span> <span class="U2">ld&nbsp;be&nbsp;pass</span> <span class="U2">ed&nbsp;to&nbsp;Vist</span> <span class="U2">a.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">128</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;subscri</span> <span class="U2">beCallback</span> <span class="U2">&nbsp;-&nbsp;The&nbsp;is&nbsp;</span> <span class="U2">the&nbsp;functi</span> <span class="U2">on&nbsp;that&nbsp;is</span> <span class="U2">&nbsp;called&nbsp;wh</span> <span class="U2">en&nbsp;the&nbsp;RPC</span> <span class="U2">&nbsp;call&nbsp;is&nbsp;c</span> <span class="U2">ompleted.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">129</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-------</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">130</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">VistaClien</span> <span class="U2">t.prototyp</span> <span class="U2">e.subscrib</span> <span class="U2">e&nbsp;=&nbsp;functi</span> <span class="U2">on&nbsp;(vistaI</span> <span class="U2">d,&nbsp;patient</span> <span class="U2">Identifier</span> <span class="U2">,&nbsp;rootJobI</span> <span class="U2">d,&nbsp;jobId,&nbsp;</span> <span class="U2">priority,&nbsp;</span> <span class="U2">referenceI</span> <span class="U2">nfo,&nbsp;subsc</span> <span class="U2">ribeCallba</span> <span class="U2">ck)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">131</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">lf&nbsp;=&nbsp;this;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">132</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me</span> <span class="U2">tricsObj&nbsp;=</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">133</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'s</span> <span class="U2">ubsystem':</span> <span class="U2">&nbsp;'Vista',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">134</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'a</span> <span class="U2">ction':&nbsp;'s</span> <span class="U2">ubscribe',</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">135</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'p</span> <span class="U2">id':&nbsp;patie</span> <span class="U2">ntIdentifi</span> <span class="U2">er.value,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">136</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'s</span> <span class="U2">ite':&nbsp;vist</span> <span class="U2">aId,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">137</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'j</span> <span class="U2">obId':&nbsp;job</span> <span class="U2">Id,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">138</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'p</span> <span class="U2">riority':&nbsp;</span> <span class="U2">priority,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">139</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'r</span> <span class="U2">ootJobId':</span> <span class="U2">&nbsp;rootJobId</span> <span class="U2">,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">140</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'p</span> <span class="U2">rocess':&nbsp;u</span> <span class="U2">uid.v4(),</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">141</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'t</span> <span class="U2">imer':&nbsp;'st</span> <span class="U2">art'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">142</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">143</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.m</span> <span class="U2">etrics.deb</span> <span class="U2">ug('Vista&nbsp;</span> <span class="U2">Subscribe'</span> <span class="U2">,&nbsp;metricsO</span> <span class="U2">bj);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">144</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;metric</span> <span class="U2">sObj.timer</span> <span class="U2">&nbsp;=&nbsp;'stop';</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">145</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.l</span> <span class="U2">og.debug('</span> <span class="U2">vista-clie</span> <span class="U2">nt.subscri</span> <span class="U2">be:&nbsp;vistaI</span> <span class="U2">d:&nbsp;%s;&nbsp;pat</span> <span class="U2">ient:&nbsp;%j;&nbsp;</span> <span class="U2">rootJobId:</span> <span class="U2">&nbsp;%s;&nbsp;jobId</span> <span class="U2">:&nbsp;%s',&nbsp;vis</span> <span class="U2">taId,&nbsp;pati</span> <span class="U2">entIdentif</span> <span class="U2">ier,&nbsp;rootJ</span> <span class="U2">obId,&nbsp;jobI</span> <span class="U2">d);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">146</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;pi</span> <span class="U2">d&nbsp;=&nbsp;patien</span> <span class="U2">tIdentifie</span> <span class="U2">r.value;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">147</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;df</span> <span class="U2">n&nbsp;=&nbsp;idUtil</span> <span class="U2">.extractDf</span> <span class="U2">nFromPid(p</span> <span class="U2">id);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">148</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">149</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.l</span> <span class="U2">og.debug('</span> <span class="U2">vista-clie</span> <span class="U2">nt.subscri</span> <span class="U2">be:&nbsp;rpcCon</span> <span class="U2">fig&nbsp;for&nbsp;pi</span> <span class="U2">d:&nbsp;%s',&nbsp;pi</span> <span class="U2">d);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">150</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;rp</span> <span class="U2">cClient&nbsp;=&nbsp;</span> <span class="U2">self._getR</span> <span class="U2">pcClient(v</span> <span class="U2">istaId);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">151</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">152</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;pa</span> <span class="U2">rams;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">153</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">154</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rp</span> <span class="U2">cClient)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">155</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pa</span> <span class="U2">rams&nbsp;=&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">156</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"server</span> <span class="U2">"':&nbsp;self.h</span> <span class="U2">mpServerId</span> <span class="U2">,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">157</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"comman</span> <span class="U2">d"':&nbsp;'putP</span> <span class="U2">tSubscript</span> <span class="U2">ion',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">158</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"localI</span> <span class="U2">d"':&nbsp;dfn,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">159</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"rootJo</span> <span class="U2">bId"':&nbsp;roo</span> <span class="U2">tJobId,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">160</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;//'"jobI</span> <span class="U2">d"':&nbsp;jobId</span> <span class="U2">,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">161</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"HMPSVE</span> <span class="U2">RS"':&nbsp;'1'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">162</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">163</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;(priority</span> <span class="U2">)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">164</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;params['</span> <span class="U2">\"HMPPrior</span> <span class="U2">ity\"']&nbsp;=&nbsp;</span> <span class="U2">priority.t</span> <span class="U2">oString();</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">165</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">166</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;(!_.isEmp</span> <span class="U2">ty(referen</span> <span class="U2">ceInfo))&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">167</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;_.each(r</span> <span class="U2">eferenceIn</span> <span class="U2">fo,&nbsp;functi</span> <span class="U2">on&nbsp;(value,</span> <span class="U2">&nbsp;key)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">168</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span> <span class="U2">(value)&nbsp;&amp;&amp;</span> <span class="U2">&nbsp;(key))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">169</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">params['\"</span> <span class="U2">refInfo-'&nbsp;</span> <span class="U2">+&nbsp;key&nbsp;+&nbsp;'\</span> <span class="U2">"']&nbsp;=&nbsp;valu</span> <span class="U2">e;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">170</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">171</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;});</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">172</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">173</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_.</span> <span class="U2">each(jobId</span> <span class="U2">,&nbsp;function</span> <span class="U2">&nbsp;(domainAn</span> <span class="U2">dJobId)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">174</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;params['</span> <span class="U2">\"jobDomai</span> <span class="U2">nId-'&nbsp;+&nbsp;do</span> <span class="U2">mainAndJob</span> <span class="U2">Id.domain&nbsp;</span> <span class="U2">+&nbsp;'\"']&nbsp;=&nbsp;</span> <span class="U2">domainAndJ</span> <span class="U2">obId.jobId</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">175</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">176</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.log.deb</span> <span class="U2">ug('putPtS</span> <span class="U2">ubscriptio</span> <span class="U2">n&nbsp;param&nbsp;%j</span> <span class="U2">',&nbsp;params)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">177</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rp</span> <span class="U2">cClient.ex</span> <span class="U2">ecute('HMP</span> <span class="U2">DJFS&nbsp;API',</span> <span class="U2">&nbsp;params,&nbsp;f</span> <span class="U2">unction&nbsp;(e</span> <span class="U2">rror,&nbsp;resp</span> <span class="U2">onse)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">178</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;self.log</span> <span class="U2">.debug('vi</span> <span class="U2">sta-client</span> <span class="U2">.subscribe</span> <span class="U2">:&nbsp;Complete</span> <span class="U2">d&nbsp;calling&nbsp;</span> <span class="U2">RPC&nbsp;for&nbsp;pi</span> <span class="U2">d:&nbsp;%s;&nbsp;err</span> <span class="U2">or:&nbsp;%s',&nbsp;p</span> <span class="U2">id,&nbsp;error)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">179</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;var&nbsp;resp</span> <span class="U2">onseWithou</span> <span class="U2">tPwd&nbsp;=&nbsp;obj</span> <span class="U2">Util.remov</span> <span class="U2">eProperty(</span> <span class="U2">objUtil.re</span> <span class="U2">moveProper</span> <span class="U2">ty(respons</span> <span class="U2">e,&nbsp;'access</span> <span class="U2">Code'),&nbsp;'v</span> <span class="U2">erifyCode'</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">180</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;self.log</span> <span class="U2">.debug('vi</span> <span class="U2">sta-client</span> <span class="U2">.subscribe</span> <span class="U2">:&nbsp;Complete</span> <span class="U2">d&nbsp;calling&nbsp;</span> <span class="U2">RPC&nbsp;for&nbsp;pi</span> <span class="U2">d:&nbsp;%s;&nbsp;res</span> <span class="U2">ult:&nbsp;%j',&nbsp;</span> <span class="U2">pid,&nbsp;respo</span> <span class="U2">nseWithout</span> <span class="U2">Pwd);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">181</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;(!_.i</span> <span class="U2">sObject(re</span> <span class="U2">sponse))&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">182</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">183</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">response&nbsp;=</span> <span class="U2">&nbsp;JSON.pars</span> <span class="U2">e(response</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">184</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;ca</span> <span class="U2">tch&nbsp;(parse</span> <span class="U2">Error)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">185</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">error&nbsp;=&nbsp;'C</span> <span class="U2">ould&nbsp;not&nbsp;p</span> <span class="U2">arse&nbsp;respo</span> <span class="U2">nse:&nbsp;'&nbsp;+&nbsp;r</span> <span class="U2">esponse&nbsp;+&nbsp;</span> <span class="U2">'.&nbsp;Error&nbsp;i</span> <span class="U2">s:&nbsp;'&nbsp;+&nbsp;par</span> <span class="U2">seError;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">186</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">187</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">188</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;(resp</span> <span class="U2">onse&nbsp;&amp;&amp;&nbsp;re</span> <span class="U2">sponse.err</span> <span class="U2">or&nbsp;&amp;&amp;&nbsp;resp</span> <span class="U2">onse.error</span> <span class="U2">.message)&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">189</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erro</span> <span class="U2">r&nbsp;=&nbsp;respon</span> <span class="U2">se.error.m</span> <span class="U2">essage;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">190</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">191</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;(!err</span> <span class="U2">or)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">192</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;handleS</span> <span class="U2">uccessfulR</span> <span class="U2">esponse(re</span> <span class="U2">sponse,&nbsp;pi</span> <span class="U2">d);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">193</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}&nbsp;else&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">194</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;handleF</span> <span class="U2">ailedReque</span> <span class="U2">stResponse</span> <span class="U2">(error,&nbsp;re</span> <span class="U2">sponse,&nbsp;pi</span> <span class="U2">d);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">195</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">196</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">197</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">198</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.metrics</span> <span class="U2">.debug('Vi</span> <span class="U2">sta&nbsp;Subscr</span> <span class="U2">ibe&nbsp;in&nbsp;Err</span> <span class="U2">or',&nbsp;metri</span> <span class="U2">csObj);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">199</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;handl</span> <span class="U2">eFailedReq</span> <span class="U2">uestRespon</span> <span class="U2">se('Failed</span> <span class="U2">&nbsp;to&nbsp;subscr</span> <span class="U2">ibe&nbsp;patien</span> <span class="U2">t&nbsp;for&nbsp;pid:</span> <span class="U2">&nbsp;'&nbsp;+&nbsp;pid&nbsp;+</span> <span class="U2">&nbsp;',&nbsp;invali</span> <span class="U2">d&nbsp;config',</span> <span class="U2">&nbsp;null,&nbsp;pid</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">200</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">201</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">202</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">203</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Thi</span> <span class="U2">s&nbsp;function</span> <span class="U2">&nbsp;handles&nbsp;c</span> <span class="U2">alling&nbsp;the</span> <span class="U2">&nbsp;callback&nbsp;</span> <span class="U2">for&nbsp;a&nbsp;suce</span> <span class="U2">ssful&nbsp;resp</span> <span class="U2">onse&nbsp;from&nbsp;</span> <span class="U2">the&nbsp;RPC.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">204</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">205</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;vis</span> <span class="U2">taResponse</span> <span class="U2">&nbsp;-&nbsp;the&nbsp;res</span> <span class="U2">ult&nbsp;return</span> <span class="U2">ed&nbsp;from&nbsp;Vi</span> <span class="U2">stA&nbsp;throug</span> <span class="U2">h&nbsp;the&nbsp;RPC.</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">206</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;pid</span> <span class="U2">&nbsp;-&nbsp;The&nbsp;pid</span> <span class="U2">&nbsp;that&nbsp;iden</span> <span class="U2">tifies&nbsp;the</span> <span class="U2">&nbsp;patient.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">207</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">208</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;functi</span> <span class="U2">on&nbsp;handleS</span> <span class="U2">uccessfulR</span> <span class="U2">esponse(vi</span> <span class="U2">staRespons</span> <span class="U2">e,&nbsp;pid)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">209</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.log.inf</span> <span class="U2">o('vista-c</span> <span class="U2">lient.hand</span> <span class="U2">leSuccessf</span> <span class="U2">ulResponse</span> <span class="U2">:&nbsp;successf</span> <span class="U2">ully&nbsp;subsc</span> <span class="U2">ribed&nbsp;for&nbsp;</span> <span class="U2">patient&nbsp;%s</span> <span class="U2">',&nbsp;pid);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">210</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;vistaRes</span> <span class="U2">ponseWitho</span> <span class="U2">utPwd&nbsp;=&nbsp;ob</span> <span class="U2">jUtil.remo</span> <span class="U2">veProperty</span> <span class="U2">(objUtil.r</span> <span class="U2">emovePrope</span> <span class="U2">rty(vistaR</span> <span class="U2">esponse,&nbsp;'</span> <span class="U2">accessCode</span> <span class="U2">'),&nbsp;'verif</span> <span class="U2">yCode');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">211</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.metrics</span> <span class="U2">.debug('Vi</span> <span class="U2">sta&nbsp;Subscr</span> <span class="U2">ibe',&nbsp;metr</span> <span class="U2">icsObj);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">212</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.log.deb</span> <span class="U2">ug('vista-</span> <span class="U2">client.han</span> <span class="U2">dleSuccess</span> <span class="U2">fulRespons</span> <span class="U2">e:&nbsp;respons</span> <span class="U2">e&nbsp;for&nbsp;pid:</span> <span class="U2">&nbsp;%s;&nbsp;respo</span> <span class="U2">nse:&nbsp;%s',&nbsp;</span> <span class="U2">pid,&nbsp;vista</span> <span class="U2">ResponseWi</span> <span class="U2">thoutPwd);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">213</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;subsc</span> <span class="U2">ribeCallba</span> <span class="U2">ck(null,&nbsp;'</span> <span class="U2">success');</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">214</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">215</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">216</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">217</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Thi</span> <span class="U2">s&nbsp;function</span> <span class="U2">&nbsp;handles&nbsp;c</span> <span class="U2">alling&nbsp;the</span> <span class="U2">&nbsp;callback&nbsp;</span> <span class="U2">for&nbsp;a&nbsp;fail</span> <span class="U2">ed&nbsp;respons</span> <span class="U2">e&nbsp;from&nbsp;the</span> <span class="U2">&nbsp;RPC.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">218</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">219</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;err</span> <span class="U2">or&nbsp;-&nbsp;The&nbsp;e</span> <span class="U2">rror&nbsp;messa</span> <span class="U2">ge&nbsp;to&nbsp;be&nbsp;s</span> <span class="U2">ent&nbsp;-&nbsp;beca</span> <span class="U2">use&nbsp;of&nbsp;the</span> <span class="U2">&nbsp;failed&nbsp;rP</span> <span class="U2">C&nbsp;call.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">220</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;res</span> <span class="U2">ponse&nbsp;-&nbsp;Th</span> <span class="U2">e&nbsp;result&nbsp;r</span> <span class="U2">eturned&nbsp;fr</span> <span class="U2">om&nbsp;VistA&nbsp;t</span> <span class="U2">hrough&nbsp;the</span> <span class="U2">&nbsp;RPC</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">221</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;pid</span> <span class="U2">&nbsp;-&nbsp;The&nbsp;pid</span> <span class="U2">&nbsp;that&nbsp;iden</span> <span class="U2">tifies&nbsp;the</span> <span class="U2">&nbsp;patient.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">222</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">223</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;functi</span> <span class="U2">on&nbsp;handleF</span> <span class="U2">ailedReque</span> <span class="U2">stResponse</span> <span class="U2">(error,&nbsp;re</span> <span class="U2">sponse,&nbsp;pi</span> <span class="U2">d)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">224</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;errorMes</span> <span class="U2">sage&nbsp;=&nbsp;'Su</span> <span class="U2">bscribe&nbsp;er</span> <span class="U2">ror&nbsp;for&nbsp;pi</span> <span class="U2">d:&nbsp;'&nbsp;+&nbsp;pid</span> <span class="U2">&nbsp;+&nbsp;';&nbsp;erro</span> <span class="U2">r:&nbsp;'&nbsp;+&nbsp;err</span> <span class="U2">or;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">225</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.metrics</span> <span class="U2">.debug('Vi</span> <span class="U2">sta&nbsp;Subscr</span> <span class="U2">ibe&nbsp;in&nbsp;Err</span> <span class="U2">or',&nbsp;metri</span> <span class="U2">csObj);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">226</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.log.err</span> <span class="U2">or('vista-</span> <span class="U2">client.han</span> <span class="U2">dleFailedR</span> <span class="U2">equestResp</span> <span class="U2">onse:&nbsp;%s&nbsp;r</span> <span class="U2">esponse:&nbsp;%</span> <span class="U2">j',&nbsp;errorM</span> <span class="U2">essage,&nbsp;re</span> <span class="U2">sponse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">227</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;subsc</span> <span class="U2">ribeCallba</span> <span class="U2">ck(errorMe</span> <span class="U2">ssage,&nbsp;nul</span> <span class="U2">l);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">228</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">229</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">230</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">231</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-------</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">232</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;This&nbsp;me</span> <span class="U2">thod&nbsp;fetch</span> <span class="U2">es&nbsp;the&nbsp;nex</span> <span class="U2">t&nbsp;batch&nbsp;of</span> <span class="U2">&nbsp;messages&nbsp;</span> <span class="U2">from&nbsp;a&nbsp;Vis</span> <span class="U2">tA&nbsp;site.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">233</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">234</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;vistaId</span> <span class="U2">:&nbsp;The&nbsp;vist</span> <span class="U2">a&nbsp;site&nbsp;to&nbsp;</span> <span class="U2">fetch&nbsp;from</span> <span class="U2">.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">235</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;lastUpd</span> <span class="U2">ateTime:&nbsp;T</span> <span class="U2">he&nbsp;last&nbsp;ti</span> <span class="U2">me&nbsp;a&nbsp;fetch</span> <span class="U2">&nbsp;was&nbsp;done&nbsp;</span> <span class="U2">to&nbsp;this&nbsp;si</span> <span class="U2">te.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">236</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;hmpBatc</span> <span class="U2">hSize:&nbsp;&nbsp;Th</span> <span class="U2">is&nbsp;is&nbsp;the&nbsp;</span> <span class="U2">setting&nbsp;fo</span> <span class="U2">r&nbsp;hmpBatch</span> <span class="U2">Size.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">237</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;batchCa</span> <span class="U2">llBack:&nbsp;Th</span> <span class="U2">e&nbsp;callback</span> <span class="U2">&nbsp;function&nbsp;</span> <span class="U2">to&nbsp;call&nbsp;wh</span> <span class="U2">en&nbsp;the&nbsp;fet</span> <span class="U2">ch&nbsp;complet</span> <span class="U2">es.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">238</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-------</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">239</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">VistaClien</span> <span class="U2">t.prototyp</span> <span class="U2">e.fetchNex</span> <span class="U2">tBatch&nbsp;=&nbsp;f</span> <span class="U2">unction&nbsp;(v</span> <span class="U2">istaId,&nbsp;la</span> <span class="U2">stUpdateTi</span> <span class="U2">me,&nbsp;hmpBat</span> <span class="U2">chSize,&nbsp;ba</span> <span class="U2">tchCallbac</span> <span class="U2">k)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">240</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">lf&nbsp;=&nbsp;this;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">241</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me</span> <span class="U2">tricsObj&nbsp;=</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">242</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'s</span> <span class="U2">ubsystem':</span> <span class="U2">&nbsp;'Vista',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">243</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'a</span> <span class="U2">ction':&nbsp;'f</span> <span class="U2">etchNextBa</span> <span class="U2">tch',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">244</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'s</span> <span class="U2">ite':&nbsp;vist</span> <span class="U2">aId,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">245</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'p</span> <span class="U2">rocess':&nbsp;u</span> <span class="U2">uid.v4(),</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">246</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'t</span> <span class="U2">imer':&nbsp;'st</span> <span class="U2">art'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">247</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">248</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.m</span> <span class="U2">etrics.deb</span> <span class="U2">ug('Vista&nbsp;</span> <span class="U2">Fetch&nbsp;Next</span> <span class="U2">',&nbsp;metrics</span> <span class="U2">Obj);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">249</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;metric</span> <span class="U2">sObj.timer</span> <span class="U2">&nbsp;=&nbsp;'stop';</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">250</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.l</span> <span class="U2">og.debug('</span> <span class="U2">vista-clie</span> <span class="U2">nt.fetchNe</span> <span class="U2">xtBatch:&nbsp;E</span> <span class="U2">ntering&nbsp;Vi</span> <span class="U2">staClient.</span> <span class="U2">fetchNextB</span> <span class="U2">atch&nbsp;vista</span> <span class="U2">Id:&nbsp;%s.&nbsp;&nbsp;l</span> <span class="U2">astUpdateT</span> <span class="U2">ime:&nbsp;%s',&nbsp;</span> <span class="U2">vistaId,&nbsp;l</span> <span class="U2">astUpdateT</span> <span class="U2">ime);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">251</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">252</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.l</span> <span class="U2">og.debug('</span> <span class="U2">vista-clie</span> <span class="U2">nt.fetchNe</span> <span class="U2">xtBatch:&nbsp;r</span> <span class="U2">pcConfig&nbsp;f</span> <span class="U2">or&nbsp;fetchNe</span> <span class="U2">xtBranch:&nbsp;</span> <span class="U2">%s',&nbsp;vista</span> <span class="U2">Id);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">253</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;rp</span> <span class="U2">cClient&nbsp;=&nbsp;</span> <span class="U2">self._getR</span> <span class="U2">pcClient(v</span> <span class="U2">istaId);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">254</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">255</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;pa</span> <span class="U2">rams;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">256</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">257</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rp</span> <span class="U2">cClient)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">258</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pa</span> <span class="U2">rams&nbsp;=&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">259</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"comman</span> <span class="U2">d"':&nbsp;'getP</span> <span class="U2">tUpdates',</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">260</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"lastUp</span> <span class="U2">date"':&nbsp;la</span> <span class="U2">stUpdateTi</span> <span class="U2">me,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">261</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"getSta</span> <span class="U2">tus"':&nbsp;tru</span> <span class="U2">e,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">262</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"max"':</span> <span class="U2">&nbsp;String(hm</span> <span class="U2">pBatchSize</span> <span class="U2">),</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">263</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"hmpVer</span> <span class="U2">sion"':&nbsp;se</span> <span class="U2">lf.hmpVers</span> <span class="U2">ion,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">264</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"extrac</span> <span class="U2">tSchema"':</span> <span class="U2">&nbsp;self.extr</span> <span class="U2">actSchema,</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">265</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"server</span> <span class="U2">"':&nbsp;self.h</span> <span class="U2">mpServerId</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">266</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">267</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rp</span> <span class="U2">cClient.ex</span> <span class="U2">ecute('HMP</span> <span class="U2">DJFS&nbsp;API',</span> <span class="U2">&nbsp;params,&nbsp;f</span> <span class="U2">unction&nbsp;(e</span> <span class="U2">rror,&nbsp;resp</span> <span class="U2">onse)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">268</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;self.log</span> <span class="U2">.info('vis</span> <span class="U2">ta-client.</span> <span class="U2">fetchNextB</span> <span class="U2">atch:&nbsp;Comp</span> <span class="U2">leted&nbsp;call</span> <span class="U2">ing&nbsp;RPC:&nbsp;g</span> <span class="U2">etPtUpdate</span> <span class="U2">s:&nbsp;for&nbsp;vis</span> <span class="U2">taId:&nbsp;%s;&nbsp;</span> <span class="U2">error:&nbsp;%s'</span> <span class="U2">,&nbsp;vistaId,</span> <span class="U2">&nbsp;error);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">269</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;self.log</span> <span class="U2">.trace('vi</span> <span class="U2">sta-client</span> <span class="U2">.fetchNext</span> <span class="U2">Batch:&nbsp;Com</span> <span class="U2">pleted&nbsp;cal</span> <span class="U2">ling&nbsp;RPC:&nbsp;</span> <span class="U2">getPtUpdat</span> <span class="U2">es:&nbsp;for&nbsp;vi</span> <span class="U2">staId:&nbsp;%s;</span> <span class="U2">&nbsp;response&nbsp;</span> <span class="U2">(String):&nbsp;</span> <span class="U2">%s',&nbsp;vista</span> <span class="U2">Id,&nbsp;respon</span> <span class="U2">se);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">270</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;((!er</span> <span class="U2">ror)&nbsp;&amp;&amp;&nbsp;(r</span> <span class="U2">esponse))&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">271</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span> <span class="U2">jsonRespon</span> <span class="U2">se;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">272</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">273</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">jsonRespon</span> <span class="U2">se&nbsp;=&nbsp;JSON.</span> <span class="U2">parse(resp</span> <span class="U2">onse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">274</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">self.log.d</span> <span class="U2">ebug('vist</span> <span class="U2">a-client.f</span> <span class="U2">etchNextBa</span> <span class="U2">tch:&nbsp;Compl</span> <span class="U2">eted&nbsp;calli</span> <span class="U2">ng&nbsp;RPC:&nbsp;ge</span> <span class="U2">tPtUpdates</span> <span class="U2">:&nbsp;for&nbsp;vist</span> <span class="U2">aId:&nbsp;%s',&nbsp;</span> <span class="U2">vistaId);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">275</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">self.log.t</span> <span class="U2">race('vist</span> <span class="U2">a-client.f</span> <span class="U2">etchNextBa</span> <span class="U2">tch:&nbsp;Compl</span> <span class="U2">eted&nbsp;calli</span> <span class="U2">ng&nbsp;RPC:&nbsp;ge</span> <span class="U2">tPtUpdates</span> <span class="U2">:&nbsp;for&nbsp;vist</span> <span class="U2">aId:&nbsp;%s;&nbsp;j</span> <span class="U2">sonRespons</span> <span class="U2">e:&nbsp;%j',&nbsp;vi</span> <span class="U2">staId,&nbsp;jso</span> <span class="U2">nResponse)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">276</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;ca</span> <span class="U2">tch&nbsp;(e)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">277</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">if&nbsp;((hmpBa</span> <span class="U2">tchSize&nbsp;==</span> <span class="U2">=&nbsp;1)&nbsp;||&nbsp;(h</span> <span class="U2">mpBatchSiz</span> <span class="U2">e&nbsp;===&nbsp;'1')</span> <span class="U2">)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">278</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="U2">&nbsp;handleFai</span> <span class="U2">ledRequest</span> <span class="U2">WithRawRes</span> <span class="U2">ponse(util</span> <span class="U2">.format('F</span> <span class="U2">ailed&nbsp;to&nbsp;p</span> <span class="U2">arse&nbsp;the&nbsp;v</span> <span class="U2">ista&nbsp;respo</span> <span class="U2">nse&nbsp;into&nbsp;J</span> <span class="U2">SON&nbsp;for&nbsp;vi</span> <span class="U2">staId:&nbsp;%s;</span> <span class="U2">&nbsp;hmpBatchS</span> <span class="U2">ize:&nbsp;%s;&nbsp;e</span> <span class="U2">xception:&nbsp;</span> <span class="U2">%j',&nbsp;vista</span> <span class="U2">Id,&nbsp;hmpBat</span> <span class="U2">chSize,&nbsp;e)</span> <span class="U2">,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">279</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hm</span> <span class="U2">pBatchSize</span> <span class="U2">,&nbsp;response</span> <span class="U2">,&nbsp;{message</span> <span class="U2">:&nbsp;self.ERR</span> <span class="U2">OR_LIST.IN</span> <span class="U2">VALID_JSON</span> <span class="U2">_ERROR});</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">280</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">}&nbsp;else&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">281</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.l</span> <span class="U2">og.error('</span> <span class="U2">vista-clie</span> <span class="U2">nt.fetchNe</span> <span class="U2">xtBatch:&nbsp;F</span> <span class="U2">ailed&nbsp;to&nbsp;p</span> <span class="U2">arse&nbsp;the&nbsp;v</span> <span class="U2">ista&nbsp;respo</span> <span class="U2">nse&nbsp;into&nbsp;J</span> <span class="U2">SON&nbsp;for&nbsp;vi</span> <span class="U2">staId:&nbsp;%s;</span> <span class="U2">&nbsp;hmpBatchS</span> <span class="U2">ize:&nbsp;%s.&nbsp;&nbsp;</span> <span class="U2">Attempting</span> <span class="U2">&nbsp;retry&nbsp;wit</span> <span class="U2">h&nbsp;smaller&nbsp;</span> <span class="U2">batch&nbsp;size</span> <span class="U2">&nbsp;of&nbsp;%s.&nbsp;re</span> <span class="U2">sponse:&nbsp;%s</span> <span class="U2">',&nbsp;vistaId</span> <span class="U2">,&nbsp;hmpBatch</span> <span class="U2">Size,&nbsp;hmpB</span> <span class="U2">atchSize&nbsp;/</span> <span class="U2">&nbsp;2,&nbsp;respon</span> <span class="U2">se);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">282</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="U2">&nbsp;self.fetc</span> <span class="U2">hNextBatch</span> <span class="U2">(vistaId,&nbsp;</span> <span class="U2">lastUpdate</span> <span class="U2">Time,&nbsp;Stri</span> <span class="U2">ng(Math.ce</span> <span class="U2">il(hmpBatc</span> <span class="U2">hSize&nbsp;/&nbsp;2)</span> <span class="U2">),&nbsp;batchCa</span> <span class="U2">llback);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">283</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">284</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">285</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;T</span> <span class="U2">his&nbsp;condit</span> <span class="U2">ion&nbsp;is&nbsp;gen</span> <span class="U2">erally&nbsp;a&nbsp;s</span> <span class="U2">erver&nbsp;erro</span> <span class="U2">r&nbsp;conditio</span> <span class="U2">n.&nbsp;&nbsp;Setup&nbsp;</span> <span class="U2">is&nbsp;not&nbsp;rig</span> <span class="U2">ht.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">286</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//--</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">287</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span> <span class="U2">(jsonRespo</span> <span class="U2">nse)&nbsp;&amp;&amp;&nbsp;(j</span> <span class="U2">sonRespons</span> <span class="U2">e.error))&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">288</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">return&nbsp;han</span> <span class="U2">dleFailedR</span> <span class="U2">equestWith</span> <span class="U2">ParsedResp</span> <span class="U2">onse('vist</span> <span class="U2">a-client.f</span> <span class="U2">etchNextBa</span> <span class="U2">tch:&nbsp;Vista</span> <span class="U2">&nbsp;returned&nbsp;</span> <span class="U2">an&nbsp;error&nbsp;c</span> <span class="U2">ondition.'</span> <span class="U2">,&nbsp;hmpBatch</span> <span class="U2">Size,&nbsp;json</span> <span class="U2">Response,&nbsp;</span> <span class="U2">jsonRespon</span> <span class="U2">se.error);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">289</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">290</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">//&nbsp;Batch&nbsp;l</span> <span class="U2">evel&nbsp;error</span> <span class="U2">&nbsp;message&nbsp;-</span> <span class="U2">&nbsp;most&nbsp;like</span> <span class="U2">ly&nbsp;server&nbsp;</span> <span class="U2">lock&nbsp;down&nbsp;</span> <span class="U2">mode.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">291</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-----</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">292</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;el</span> <span class="U2">se&nbsp;if&nbsp;((js</span> <span class="U2">onResponse</span> <span class="U2">)&nbsp;&amp;&amp;&nbsp;(json</span> <span class="U2">Response.d</span> <span class="U2">ata)&nbsp;&amp;&amp;&nbsp;(j</span> <span class="U2">sonRespons</span> <span class="U2">e.data.err</span> <span class="U2">or))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">293</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">return&nbsp;han</span> <span class="U2">dleFailedR</span> <span class="U2">equestWith</span> <span class="U2">ParsedResp</span> <span class="U2">onse('vist</span> <span class="U2">a-client.f</span> <span class="U2">etchNextBa</span> <span class="U2">tch:&nbsp;Vista</span> <span class="U2">&nbsp;returned&nbsp;</span> <span class="U2">a&nbsp;batch&nbsp;le</span> <span class="U2">vel&nbsp;error&nbsp;</span> <span class="U2">condition.</span> <span class="U2">&nbsp;',&nbsp;hmpBat</span> <span class="U2">chSize,&nbsp;js</span> <span class="U2">onResponse</span> <span class="U2">,&nbsp;jsonResp</span> <span class="U2">onse.data.</span> <span class="U2">error);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">294</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">295</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">//&nbsp;In&nbsp;some</span> <span class="U2">&nbsp;cases&nbsp;we&nbsp;</span> <span class="U2">may&nbsp;get&nbsp;no</span> <span class="U2">&nbsp;data&nbsp;-&nbsp;bu</span> <span class="U2">t&nbsp;it&nbsp;is&nbsp;no</span> <span class="U2">t&nbsp;an&nbsp;error</span> <span class="U2">.&nbsp;&nbsp;One&nbsp;cas</span> <span class="U2">e&nbsp;is&nbsp;if&nbsp;st</span> <span class="U2">aging&nbsp;is&nbsp;n</span> <span class="U2">ot&nbsp;complet</span> <span class="U2">e&nbsp;yet.&nbsp;&nbsp;&nbsp;S</span> <span class="U2">o&nbsp;look&nbsp;for</span> <span class="U2">&nbsp;this&nbsp;spec</span> <span class="U2">ial&nbsp;case.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">296</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">//&nbsp;If&nbsp;it&nbsp;o</span> <span class="U2">ccurs&nbsp;-&nbsp;it</span> <span class="U2">&nbsp;is&nbsp;not&nbsp;an</span> <span class="U2">&nbsp;error&nbsp;sit</span> <span class="U2">uation.&nbsp;&nbsp;W</span> <span class="U2">e&nbsp;just&nbsp;wan</span> <span class="U2">t&nbsp;to&nbsp;ignor</span> <span class="U2">e&nbsp;it.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">297</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">298</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;el</span> <span class="U2">se&nbsp;if&nbsp;((js</span> <span class="U2">onResponse</span> <span class="U2">)&nbsp;&amp;&amp;&nbsp;(json</span> <span class="U2">Response.w</span> <span class="U2">arning)&nbsp;&amp;&amp;</span> <span class="U2">&nbsp;(jsonResp</span> <span class="U2">onse.warni</span> <span class="U2">ng&nbsp;===&nbsp;'St</span> <span class="U2">aging&nbsp;is&nbsp;n</span> <span class="U2">ot&nbsp;complet</span> <span class="U2">e&nbsp;yet!'))&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">299</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">self.log.d</span> <span class="U2">ebug('vist</span> <span class="U2">a-client.f</span> <span class="U2">etchNextBa</span> <span class="U2">tch.handle</span> <span class="U2">FailedRequ</span> <span class="U2">estRespons</span> <span class="U2">e:&nbsp;Staging</span> <span class="U2">&nbsp;is&nbsp;not&nbsp;ye</span> <span class="U2">t&nbsp;complete</span> <span class="U2">');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">300</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">return&nbsp;han</span> <span class="U2">dleSuccess</span> <span class="U2">fulRespons</span> <span class="U2">e(jsonResp</span> <span class="U2">onse,&nbsp;hmpB</span> <span class="U2">atchSize);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">301</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">302</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">//&nbsp;Valid&nbsp;r</span> <span class="U2">esponse</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">303</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">//--------</span> <span class="U2">-------</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">304</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;el</span> <span class="U2">se&nbsp;if&nbsp;((js</span> <span class="U2">onResponse</span> <span class="U2">)&nbsp;&amp;&amp;&nbsp;(json</span> <span class="U2">Response.d</span> <span class="U2">ata))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">305</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">return&nbsp;han</span> <span class="U2">dleSuccess</span> <span class="U2">fulRespons</span> <span class="U2">e(jsonResp</span> <span class="U2">onse,&nbsp;hmpB</span> <span class="U2">atchSize);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">306</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">307</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">//&nbsp;Any&nbsp;oth</span> <span class="U2">er&nbsp;error&nbsp;c</span> <span class="U2">onditions.</span> <span class="U2">..</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">308</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">---</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">309</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;el</span> <span class="U2">se&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">310</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">return&nbsp;han</span> <span class="U2">dleFailedR</span> <span class="U2">equestWith</span> <span class="U2">ParsedResp</span> <span class="U2">onse('vist</span> <span class="U2">a-client.f</span> <span class="U2">etchNextBa</span> <span class="U2">tch:&nbsp;jsonR</span> <span class="U2">esponse&nbsp;di</span> <span class="U2">d&nbsp;not&nbsp;cont</span> <span class="U2">ain&nbsp;any&nbsp;da</span> <span class="U2">ta&nbsp;attribu</span> <span class="U2">te.',&nbsp;hmpB</span> <span class="U2">atchSize,&nbsp;</span> <span class="U2">jsonRespon</span> <span class="U2">se,&nbsp;null);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">311</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">312</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}&nbsp;else&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">313</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;handleF</span> <span class="U2">ailedReque</span> <span class="U2">stWithRawR</span> <span class="U2">esponse(ut</span> <span class="U2">il.format(</span> <span class="U2">'vista-cli</span> <span class="U2">ent.fetchN</span> <span class="U2">extBatch:&nbsp;</span> <span class="U2">Error&nbsp;rece</span> <span class="U2">ived&nbsp;from&nbsp;</span> <span class="U2">RPC&nbsp;call.&nbsp;</span> <span class="U2">&nbsp;Error:&nbsp;%s</span> <span class="U2">',&nbsp;error),</span> <span class="U2">&nbsp;hmpBatchS</span> <span class="U2">ize,&nbsp;respo</span> <span class="U2">nse,&nbsp;{mess</span> <span class="U2">age:&nbsp;self.</span> <span class="U2">ERROR_LIST</span> <span class="U2">.RPC_ERROR</span> <span class="U2">});</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">314</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">315</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">316</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">317</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;handl</span> <span class="U2">eFailedReq</span> <span class="U2">uestWithRa</span> <span class="U2">wResponse(</span> <span class="U2">'vista-cli</span> <span class="U2">ent.fetchN</span> <span class="U2">extBatch:&nbsp;</span> <span class="U2">Failed&nbsp;to&nbsp;</span> <span class="U2">call&nbsp;RPC&nbsp;g</span> <span class="U2">etPtUpdate</span> <span class="U2">s&nbsp;for&nbsp;vist</span> <span class="U2">aId:&nbsp;'&nbsp;+&nbsp;v</span> <span class="U2">istaId&nbsp;+&nbsp;'</span> <span class="U2">,&nbsp;invalid&nbsp;</span> <span class="U2">configurat</span> <span class="U2">ion&nbsp;inform</span> <span class="U2">ation.',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">318</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;hmpBatch</span> <span class="U2">Size,&nbsp;null</span> <span class="U2">,&nbsp;{message</span> <span class="U2">:&nbsp;self.ERR</span> <span class="U2">OR_LIST.IN</span> <span class="U2">VALID_CONF</span> <span class="U2">IGURATION_</span> <span class="U2">ERROR});</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">319</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">320</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">321</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">322</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Thi</span> <span class="U2">s&nbsp;function</span> <span class="U2">&nbsp;handles&nbsp;c</span> <span class="U2">alling&nbsp;the</span> <span class="U2">&nbsp;callback&nbsp;</span> <span class="U2">for&nbsp;a&nbsp;suce</span> <span class="U2">ssful&nbsp;resp</span> <span class="U2">onse&nbsp;from&nbsp;</span> <span class="U2">the&nbsp;RPC.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">323</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">324</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;jso</span> <span class="U2">nResponse&nbsp;</span> <span class="U2">-&nbsp;the&nbsp;resu</span> <span class="U2">lt&nbsp;returne</span> <span class="U2">d&nbsp;from&nbsp;Vis</span> <span class="U2">tA&nbsp;through</span> <span class="U2">&nbsp;the&nbsp;RPC&nbsp;i</span> <span class="U2">n&nbsp;JSON&nbsp;for</span> <span class="U2">mat.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">325</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;hmp</span> <span class="U2">BatchSize&nbsp;</span> <span class="U2">-&nbsp;The&nbsp;batc</span> <span class="U2">h&nbsp;size&nbsp;tha</span> <span class="U2">t&nbsp;was&nbsp;used</span> <span class="U2">&nbsp;when&nbsp;call</span> <span class="U2">ing&nbsp;the&nbsp;RP</span> <span class="U2">C.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">326</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">327</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;functi</span> <span class="U2">on&nbsp;handleS</span> <span class="U2">uccessfulR</span> <span class="U2">esponse(js</span> <span class="U2">onResponse</span> <span class="U2">,&nbsp;hmpBatch</span> <span class="U2">Size)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">328</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.log.deb</span> <span class="U2">ug('vista-</span> <span class="U2">client.fet</span> <span class="U2">chNextBatc</span> <span class="U2">h:&nbsp;Success</span> <span class="U2">fully&nbsp;call</span> <span class="U2">ed&nbsp;RPC&nbsp;for</span> <span class="U2">&nbsp;getPtUpda</span> <span class="U2">tes.');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">329</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.metrics</span> <span class="U2">.debug('Vi</span> <span class="U2">sta&nbsp;Fetch&nbsp;</span> <span class="U2">Next',&nbsp;met</span> <span class="U2">ricsObj);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">330</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;wrappedR</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">331</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;data:&nbsp;js</span> <span class="U2">onResponse</span> <span class="U2">.data,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">332</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;hmpBatch</span> <span class="U2">Size:&nbsp;hmpB</span> <span class="U2">atchSize,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">333</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;rawRespo</span> <span class="U2">nse:&nbsp;null,</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">334</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;errorDat</span> <span class="U2">a:&nbsp;null</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">335</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">336</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;batch</span> <span class="U2">Callback(n</span> <span class="U2">ull,&nbsp;wrapp</span> <span class="U2">edResponse</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">337</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">338</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">339</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">340</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Thi</span> <span class="U2">s&nbsp;function</span> <span class="U2">&nbsp;handles&nbsp;c</span> <span class="U2">alling&nbsp;the</span> <span class="U2">&nbsp;callback&nbsp;</span> <span class="U2">for&nbsp;a&nbsp;fail</span> <span class="U2">ed&nbsp;respons</span> <span class="U2">e&nbsp;from&nbsp;the</span> <span class="U2">&nbsp;RPC.&nbsp;&nbsp;Whe</span> <span class="U2">n</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">341</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;we&nbsp;</span> <span class="U2">have&nbsp;to&nbsp;lo</span> <span class="U2">g&nbsp;an&nbsp;error</span> <span class="U2">&nbsp;where&nbsp;we&nbsp;</span> <span class="U2">have&nbsp;not&nbsp;o</span> <span class="U2">r&nbsp;cannot&nbsp;p</span> <span class="U2">arse&nbsp;the&nbsp;r</span> <span class="U2">esponse&nbsp;-&nbsp;</span> <span class="U2">so&nbsp;we&nbsp;need</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">342</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;to&nbsp;</span> <span class="U2">deal&nbsp;with&nbsp;</span> <span class="U2">it&nbsp;as&nbsp;a&nbsp;ra</span> <span class="U2">w&nbsp;response</span> <span class="U2">.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">343</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">344</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;err</span> <span class="U2">or&nbsp;-&nbsp;The&nbsp;e</span> <span class="U2">rror&nbsp;messa</span> <span class="U2">ge&nbsp;to&nbsp;be&nbsp;s</span> <span class="U2">ent&nbsp;-&nbsp;beca</span> <span class="U2">use&nbsp;of&nbsp;the</span> <span class="U2">&nbsp;failed&nbsp;rP</span> <span class="U2">C&nbsp;call.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">345</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;hmp</span> <span class="U2">BatchSize&nbsp;</span> <span class="U2">-&nbsp;The&nbsp;batc</span> <span class="U2">h&nbsp;size&nbsp;tha</span> <span class="U2">t&nbsp;was&nbsp;used</span> <span class="U2">&nbsp;when&nbsp;call</span> <span class="U2">ing&nbsp;the&nbsp;RP</span> <span class="U2">C.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">346</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;raw</span> <span class="U2">VistaRespo</span> <span class="U2">nse&nbsp;-&nbsp;The&nbsp;</span> <span class="U2">result&nbsp;ret</span> <span class="U2">urned&nbsp;from</span> <span class="U2">&nbsp;VistA&nbsp;thr</span> <span class="U2">ough&nbsp;the&nbsp;R</span> <span class="U2">PC&nbsp;in&nbsp;its&nbsp;</span> <span class="U2">original&nbsp;f</span> <span class="U2">orm.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">347</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;err</span> <span class="U2">orData:&nbsp;&nbsp;A</span> <span class="U2">n&nbsp;object&nbsp;c</span> <span class="U2">ontaining&nbsp;</span> <span class="U2">more&nbsp;infor</span> <span class="U2">mation&nbsp;reg</span> <span class="U2">arding&nbsp;the</span> <span class="U2">&nbsp;error&nbsp;tha</span> <span class="U2">t&nbsp;occurred</span> <span class="U2">.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">348</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">349</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;functi</span> <span class="U2">on&nbsp;handleF</span> <span class="U2">ailedReque</span> <span class="U2">stWithRawR</span> <span class="U2">esponse(er</span> <span class="U2">ror,&nbsp;hmpBa</span> <span class="U2">tchSize,&nbsp;r</span> <span class="U2">awVistaRes</span> <span class="U2">ponse,&nbsp;err</span> <span class="U2">orData)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">350</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;localErr</span> <span class="U2">or&nbsp;=&nbsp;util.</span> <span class="U2">format('%s</span> <span class="U2">&nbsp;rawVistaR</span> <span class="U2">esponse:&nbsp;%</span> <span class="U2">s',&nbsp;error,</span> <span class="U2">&nbsp;rawVistaR</span> <span class="U2">esponse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">351</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.metrics</span> <span class="U2">.debug('Vi</span> <span class="U2">sta&nbsp;Fetch&nbsp;</span> <span class="U2">Next&nbsp;(raw&nbsp;</span> <span class="U2">response)&nbsp;</span> <span class="U2">in&nbsp;Error',</span> <span class="U2">&nbsp;metricsOb</span> <span class="U2">j);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">352</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;wrappedR</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">353</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;data:&nbsp;nu</span> <span class="U2">ll,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">354</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;hmpBatch</span> <span class="U2">Size:&nbsp;hmpB</span> <span class="U2">atchSize,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">355</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;rawRespo</span> <span class="U2">nse:&nbsp;rawVi</span> <span class="U2">staRespons</span> <span class="U2">e,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">356</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;errorDat</span> <span class="U2">a:&nbsp;errorDa</span> <span class="U2">ta</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">357</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">358</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;batch</span> <span class="U2">Callback(l</span> <span class="U2">ocalError,</span> <span class="U2">&nbsp;wrappedRe</span> <span class="U2">sponse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">359</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">360</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">361</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">362</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Thi</span> <span class="U2">s&nbsp;function</span> <span class="U2">&nbsp;handles&nbsp;c</span> <span class="U2">alling&nbsp;the</span> <span class="U2">&nbsp;callback&nbsp;</span> <span class="U2">for&nbsp;a&nbsp;fail</span> <span class="U2">ed&nbsp;respons</span> <span class="U2">e&nbsp;from&nbsp;the</span> <span class="U2">&nbsp;RPC.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">363</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">364</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;err</span> <span class="U2">or&nbsp;-&nbsp;The&nbsp;e</span> <span class="U2">rror&nbsp;messa</span> <span class="U2">ge&nbsp;to&nbsp;be&nbsp;s</span> <span class="U2">ent&nbsp;-&nbsp;beca</span> <span class="U2">use&nbsp;of&nbsp;the</span> <span class="U2">&nbsp;failed&nbsp;rP</span> <span class="U2">C&nbsp;call.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">365</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;hmp</span> <span class="U2">BatchSize&nbsp;</span> <span class="U2">-&nbsp;The&nbsp;batc</span> <span class="U2">h&nbsp;size&nbsp;tha</span> <span class="U2">t&nbsp;was&nbsp;used</span> <span class="U2">&nbsp;when&nbsp;call</span> <span class="U2">ing&nbsp;the&nbsp;RP</span> <span class="U2">C.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">366</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;vis</span> <span class="U2">taResponse</span> <span class="U2">&nbsp;-&nbsp;The&nbsp;res</span> <span class="U2">ult&nbsp;return</span> <span class="U2">ed&nbsp;from&nbsp;Vi</span> <span class="U2">stA&nbsp;throug</span> <span class="U2">h&nbsp;the&nbsp;RPC</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">367</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;vis</span> <span class="U2">taError&nbsp;-&nbsp;</span> <span class="U2">The&nbsp;error&nbsp;</span> <span class="U2">that&nbsp;Vista</span> <span class="U2">&nbsp;returned.</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">368</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">369</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;functi</span> <span class="U2">on&nbsp;handleF</span> <span class="U2">ailedReque</span> <span class="U2">stWithPars</span> <span class="U2">edResponse</span> <span class="U2">(error,&nbsp;hm</span> <span class="U2">pBatchSize</span> <span class="U2">,&nbsp;vistaRes</span> <span class="U2">ponse,&nbsp;vis</span> <span class="U2">taError)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">370</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;localErr</span> <span class="U2">or&nbsp;=&nbsp;util.</span> <span class="U2">format('%s</span> <span class="U2">&nbsp;vistaResp</span> <span class="U2">onse:&nbsp;%j',</span> <span class="U2">&nbsp;error,&nbsp;vi</span> <span class="U2">staRespons</span> <span class="U2">e);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">371</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.metrics</span> <span class="U2">.debug('Vi</span> <span class="U2">sta&nbsp;Fetch&nbsp;</span> <span class="U2">Next&nbsp;(pars</span> <span class="U2">ed&nbsp;respons</span> <span class="U2">e)&nbsp;in&nbsp;Erro</span> <span class="U2">r',&nbsp;metric</span> <span class="U2">sObj);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">372</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;wrappedR</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">373</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;data:&nbsp;nu</span> <span class="U2">ll,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">374</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;hmpBatch</span> <span class="U2">Size:&nbsp;hmpB</span> <span class="U2">atchSize,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">375</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;rawRespo</span> <span class="U2">nse:&nbsp;null,</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">376</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;errorDat</span> <span class="U2">a:&nbsp;vistaEr</span> <span class="U2">ror</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">377</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">378</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;batch</span> <span class="U2">Callback(l</span> <span class="U2">ocalError,</span> <span class="U2">&nbsp;wrappedRe</span> <span class="U2">sponse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">379</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">380</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">381</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">382</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">383</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">384</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-------</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">385</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;This&nbsp;me</span> <span class="U2">thod&nbsp;fetch</span> <span class="U2">es&nbsp;the&nbsp;nex</span> <span class="U2">t&nbsp;batch&nbsp;of</span> <span class="U2">&nbsp;messages&nbsp;</span> <span class="U2">from&nbsp;a&nbsp;Vis</span> <span class="U2">tA&nbsp;site.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">386</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">387</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;vistaId</span> <span class="U2">:&nbsp;The&nbsp;vist</span> <span class="U2">a&nbsp;site&nbsp;to&nbsp;</span> <span class="U2">fetch&nbsp;from</span> <span class="U2">.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">388</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;allocat</span> <span class="U2">ionToken:&nbsp;</span> <span class="U2">The&nbsp;last&nbsp;t</span> <span class="U2">ime&nbsp;a&nbsp;fetc</span> <span class="U2">h&nbsp;was&nbsp;done</span> <span class="U2">&nbsp;to&nbsp;this&nbsp;s</span> <span class="U2">ite.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">389</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;hmpBatc</span> <span class="U2">hSize:&nbsp;&nbsp;Th</span> <span class="U2">is&nbsp;is&nbsp;the&nbsp;</span> <span class="U2">setting&nbsp;fo</span> <span class="U2">r&nbsp;hmpBatch</span> <span class="U2">Size.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">390</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;allocat</span> <span class="U2">ionStatus:</span> <span class="U2">&nbsp;The&nbsp;statu</span> <span class="U2">s&nbsp;to&nbsp;pass&nbsp;</span> <span class="U2">in&nbsp;as&nbsp;the&nbsp;</span> <span class="U2">allocation</span> <span class="U2">Status&nbsp;val</span> <span class="U2">ue.&nbsp;&nbsp;Valid</span> <span class="U2">&nbsp;values&nbsp;ar</span> <span class="U2">e:</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">391</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;'complete</span> <span class="U2">',&nbsp;'reduce</span> <span class="U2">',&nbsp;'reject</span> <span class="U2">'.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">392</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;batchCa</span> <span class="U2">llBack:&nbsp;Th</span> <span class="U2">e&nbsp;callback</span> <span class="U2">&nbsp;function&nbsp;</span> <span class="U2">to&nbsp;call&nbsp;wh</span> <span class="U2">en&nbsp;the&nbsp;fet</span> <span class="U2">ch&nbsp;complet</span> <span class="U2">es.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">393</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-------</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">394</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">VistaClien</span> <span class="U2">t.prototyp</span> <span class="U2">e.fetchNex</span> <span class="U2">tBatchMult</span> <span class="U2">ipleMode&nbsp;=</span> <span class="U2">&nbsp;function&nbsp;</span> <span class="U2">(vistaId,&nbsp;</span> <span class="U2">allocation</span> <span class="U2">Token,&nbsp;all</span> <span class="U2">ocationSta</span> <span class="U2">tus,&nbsp;hmpBa</span> <span class="U2">tchSize,&nbsp;b</span> <span class="U2">atchCallba</span> <span class="U2">ck)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">395</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">lf&nbsp;=&nbsp;this;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">396</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me</span> <span class="U2">tricsObj&nbsp;=</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">397</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'s</span> <span class="U2">ubsystem':</span> <span class="U2">&nbsp;'Vista',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">398</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'a</span> <span class="U2">ction':&nbsp;'f</span> <span class="U2">etchNextBa</span> <span class="U2">tchMultipl</span> <span class="U2">eMode',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">399</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'s</span> <span class="U2">ite':&nbsp;vist</span> <span class="U2">aId,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">400</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'p</span> <span class="U2">rocess':&nbsp;u</span> <span class="U2">uid.v4(),</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">401</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'t</span> <span class="U2">imer':&nbsp;'st</span> <span class="U2">art'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">402</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">403</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.m</span> <span class="U2">etrics.deb</span> <span class="U2">ug('Vista&nbsp;</span> <span class="U2">Fetch&nbsp;Next</span> <span class="U2">',&nbsp;metrics</span> <span class="U2">Obj);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">404</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;metric</span> <span class="U2">sObj.timer</span> <span class="U2">&nbsp;=&nbsp;'stop';</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">405</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.l</span> <span class="U2">og.debug('</span> <span class="U2">vista-clie</span> <span class="U2">nt.fetchNe</span> <span class="U2">xtBatchMul</span> <span class="U2">tipleMode:</span> <span class="U2">&nbsp;Entering&nbsp;</span> <span class="U2">VistaClien</span> <span class="U2">t.fetchNex</span> <span class="U2">tBatchMult</span> <span class="U2">ipleMode&nbsp;v</span> <span class="U2">istaId:&nbsp;%s</span> <span class="U2">.&nbsp;&nbsp;allocat</span> <span class="U2">ionToken:&nbsp;</span> <span class="U2">%s',&nbsp;vista</span> <span class="U2">Id,&nbsp;alloca</span> <span class="U2">tionToken)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">406</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">407</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.l</span> <span class="U2">og.debug('</span> <span class="U2">vista-clie</span> <span class="U2">nt.fetchNe</span> <span class="U2">xtBatchMul</span> <span class="U2">tipleMode:</span> <span class="U2">&nbsp;rpcConfig</span> <span class="U2">&nbsp;for&nbsp;fetch</span> <span class="U2">NextBatchM</span> <span class="U2">ultipleMod</span> <span class="U2">e:&nbsp;%s',&nbsp;vi</span> <span class="U2">staId);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">408</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;rp</span> <span class="U2">cClient&nbsp;=&nbsp;</span> <span class="U2">self._getR</span> <span class="U2">pcClient(v</span> <span class="U2">istaId);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">409</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">410</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;If&nbsp;</span> <span class="U2">hmpBatchSi</span> <span class="U2">ze&nbsp;is&nbsp;not&nbsp;</span> <span class="U2">a&nbsp;numeric&nbsp;</span> <span class="U2">value&nbsp;-&nbsp;we</span> <span class="U2">&nbsp;have&nbsp;a&nbsp;se</span> <span class="U2">rious&nbsp;issu</span> <span class="U2">e...</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">411</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-----</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">412</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is</span> <span class="U2">NaN(hmpBat</span> <span class="U2">chSize))&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">413</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;handl</span> <span class="U2">eFailedReq</span> <span class="U2">uestWithRa</span> <span class="U2">wResponse(</span> <span class="U2">'vista-cli</span> <span class="U2">ent.fetchN</span> <span class="U2">extBatchMu</span> <span class="U2">ltipleMode</span> <span class="U2">:&nbsp;Failed&nbsp;t</span> <span class="U2">o&nbsp;call&nbsp;RPC</span> <span class="U2">&nbsp;getPtUpda</span> <span class="U2">tes&nbsp;for&nbsp;vi</span> <span class="U2">staId:&nbsp;'&nbsp;+</span> <span class="U2">&nbsp;vistaId&nbsp;+</span> <span class="U2">&nbsp;',&nbsp;hmpBat</span> <span class="U2">chSize&nbsp;was</span> <span class="U2">&nbsp;not&nbsp;numer</span> <span class="U2">ic.&nbsp;&nbsp;hmpBa</span> <span class="U2">tchSize:&nbsp;\</span> <span class="U2">''&nbsp;+&nbsp;hmpBa</span> <span class="U2">tchSize&nbsp;+&nbsp;</span> <span class="U2">'\'',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">414</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;hmpBatch</span> <span class="U2">Size,&nbsp;null</span> <span class="U2">,&nbsp;{message</span> <span class="U2">:&nbsp;self.ERR</span> <span class="U2">OR_LIST.IN</span> <span class="U2">VALID_BATC</span> <span class="U2">H_SIZE});</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">415</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">416</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">417</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(_.</span> <span class="U2">isString(h</span> <span class="U2">mpBatchSiz</span> <span class="U2">e))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">418</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hm</span> <span class="U2">pBatchSize</span> <span class="U2">&nbsp;=&nbsp;parseIn</span> <span class="U2">t(hmpBatch</span> <span class="U2">Size);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">419</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">420</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">421</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;pa</span> <span class="U2">rams;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">422</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">423</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rp</span> <span class="U2">cClient)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">424</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pa</span> <span class="U2">rams&nbsp;=&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">425</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"comman</span> <span class="U2">d"':&nbsp;'getP</span> <span class="U2">tUpdates',</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">426</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"getSta</span> <span class="U2">tus"':&nbsp;tru</span> <span class="U2">e,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">427</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"alloca</span> <span class="U2">tionSize"'</span> <span class="U2">:&nbsp;String(h</span> <span class="U2">mpBatchSiz</span> <span class="U2">e),</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">428</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"hmpVer</span> <span class="U2">sion"':&nbsp;se</span> <span class="U2">lf.hmpVers</span> <span class="U2">ion,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">429</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"extrac</span> <span class="U2">tSchema"':</span> <span class="U2">&nbsp;self.extr</span> <span class="U2">actSchema,</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">430</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"server</span> <span class="U2">"':&nbsp;self.h</span> <span class="U2">mpServerId</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">431</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">432</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">433</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;(allocati</span> <span class="U2">onToken)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">434</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;params['</span> <span class="U2">"allocatio</span> <span class="U2">nToken"']&nbsp;</span> <span class="U2">=&nbsp;allocati</span> <span class="U2">onToken;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">435</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">436</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;(allo</span> <span class="U2">cationStat</span> <span class="U2">us)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">437</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;para</span> <span class="U2">ms['"alloc</span> <span class="U2">ationStatu</span> <span class="U2">s"']&nbsp;=&nbsp;all</span> <span class="U2">ocationSta</span> <span class="U2">tus;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">438</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">439</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">440</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">441</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rp</span> <span class="U2">cClient.ex</span> <span class="U2">ecute('HMP</span> <span class="U2">DJFS&nbsp;API',</span> <span class="U2">&nbsp;params,&nbsp;f</span> <span class="U2">unction&nbsp;(e</span> <span class="U2">rror,&nbsp;resp</span> <span class="U2">onse)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">442</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;self.log</span> <span class="U2">.info('vis</span> <span class="U2">ta-client.</span> <span class="U2">fetchNextB</span> <span class="U2">atchMultip</span> <span class="U2">leMode:&nbsp;Co</span> <span class="U2">mpleted&nbsp;ca</span> <span class="U2">lling&nbsp;RPC:</span> <span class="U2">&nbsp;getPtUpda</span> <span class="U2">tes:&nbsp;for&nbsp;v</span> <span class="U2">istaId:&nbsp;%s</span> <span class="U2">;&nbsp;error:&nbsp;%</span> <span class="U2">s',&nbsp;vistaI</span> <span class="U2">d,&nbsp;error);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">443</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;self.log</span> <span class="U2">.trace('vi</span> <span class="U2">sta-client</span> <span class="U2">.fetchNext</span> <span class="U2">BatchMulti</span> <span class="U2">pleMode:&nbsp;C</span> <span class="U2">ompleted&nbsp;c</span> <span class="U2">alling&nbsp;RPC</span> <span class="U2">:&nbsp;getPtUpd</span> <span class="U2">ates:&nbsp;for&nbsp;</span> <span class="U2">vistaId:&nbsp;%</span> <span class="U2">s;&nbsp;respons</span> <span class="U2">e&nbsp;(String)</span> <span class="U2">:&nbsp;%s',&nbsp;vis</span> <span class="U2">taId,&nbsp;resp</span> <span class="U2">onse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">444</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;((!er</span> <span class="U2">ror)&nbsp;&amp;&amp;&nbsp;(r</span> <span class="U2">esponse))&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">445</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span> <span class="U2">jsonRespon</span> <span class="U2">se;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">446</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">447</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">jsonRespon</span> <span class="U2">se&nbsp;=&nbsp;JSON.</span> <span class="U2">parse(resp</span> <span class="U2">onse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">448</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">self.log.d</span> <span class="U2">ebug('vist</span> <span class="U2">a-client.f</span> <span class="U2">etchNextBa</span> <span class="U2">tchMultipl</span> <span class="U2">eMode:&nbsp;Com</span> <span class="U2">pleted&nbsp;cal</span> <span class="U2">ling&nbsp;RPC:&nbsp;</span> <span class="U2">getPtUpdat</span> <span class="U2">es:&nbsp;for&nbsp;vi</span> <span class="U2">staId:&nbsp;%s'</span> <span class="U2">,&nbsp;vistaId)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">449</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">self.log.t</span> <span class="U2">race('vist</span> <span class="U2">a-client.f</span> <span class="U2">etchNextBa</span> <span class="U2">tchMultipl</span> <span class="U2">eMode:&nbsp;Com</span> <span class="U2">pleted&nbsp;cal</span> <span class="U2">ling&nbsp;RPC:&nbsp;</span> <span class="U2">getPtUpdat</span> <span class="U2">es:&nbsp;for&nbsp;vi</span> <span class="U2">staId:&nbsp;%s;</span> <span class="U2">&nbsp;jsonRespo</span> <span class="U2">nse:&nbsp;%j',&nbsp;</span> <span class="U2">vistaId,&nbsp;j</span> <span class="U2">sonRespons</span> <span class="U2">e);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">450</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;ca</span> <span class="U2">tch&nbsp;(e)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">451</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">if&nbsp;((hmpBa</span> <span class="U2">tchSize&nbsp;==</span> <span class="U2">=&nbsp;1)&nbsp;||&nbsp;(h</span> <span class="U2">mpBatchSiz</span> <span class="U2">e&nbsp;===&nbsp;'1')</span> <span class="U2">)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">452</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="U2">&nbsp;handleFai</span> <span class="U2">ledRequest</span> <span class="U2">WithRawRes</span> <span class="U2">ponse(util</span> <span class="U2">.format('F</span> <span class="U2">ailed&nbsp;to&nbsp;p</span> <span class="U2">arse&nbsp;the&nbsp;v</span> <span class="U2">ista&nbsp;respo</span> <span class="U2">nse&nbsp;into&nbsp;J</span> <span class="U2">SON&nbsp;for&nbsp;vi</span> <span class="U2">staId:&nbsp;%s;</span> <span class="U2">&nbsp;hmpBatchS</span> <span class="U2">ize:&nbsp;%s;&nbsp;e</span> <span class="U2">xception:&nbsp;</span> <span class="U2">%j',&nbsp;vista</span> <span class="U2">Id,&nbsp;hmpBat</span> <span class="U2">chSize,&nbsp;e)</span> <span class="U2">,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">453</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hm</span> <span class="U2">pBatchSize</span> <span class="U2">,&nbsp;response</span> <span class="U2">,&nbsp;{message</span> <span class="U2">:&nbsp;self.ERR</span> <span class="U2">OR_LIST.IN</span> <span class="U2">VALID_JSON</span> <span class="U2">_ERROR});</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">454</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">}&nbsp;else&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">455</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;If&nbsp;</span> <span class="U2">we&nbsp;have&nbsp;a&nbsp;</span> <span class="U2">bad&nbsp;JSON&nbsp;-</span> <span class="U2">&nbsp;we&nbsp;want&nbsp;t</span> <span class="U2">o&nbsp;reduce&nbsp;f</span> <span class="U2">ast...&nbsp;&nbsp;So</span> <span class="U2">&nbsp;if&nbsp;we&nbsp;ask</span> <span class="U2">ed&nbsp;for&nbsp;500</span> <span class="U2">,&nbsp;but&nbsp;only</span> <span class="U2">&nbsp;got&nbsp;back&nbsp;</span> <span class="U2">20&nbsp;and&nbsp;the</span> <span class="U2">y&nbsp;were&nbsp;bad</span> <span class="U2">.&nbsp;&nbsp;No&nbsp;need</span> <span class="U2">&nbsp;to&nbsp;reduce</span> <span class="U2">&nbsp;to&nbsp;250,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">456</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;let</span> <span class="U2">s&nbsp;reduce&nbsp;t</span> <span class="U2">o&nbsp;1/2&nbsp;the&nbsp;</span> <span class="U2">size&nbsp;we&nbsp;ac</span> <span class="U2">tually&nbsp;got</span> <span class="U2">&nbsp;back.&nbsp;&nbsp;If</span> <span class="U2">&nbsp;we&nbsp;cannot</span> <span class="U2">&nbsp;figure&nbsp;ou</span> <span class="U2">t&nbsp;how&nbsp;many</span> <span class="U2">&nbsp;is&nbsp;in&nbsp;the</span> <span class="U2">re&nbsp;-&nbsp;we&nbsp;wi</span> <span class="U2">ll&nbsp;just&nbsp;do</span> <span class="U2">&nbsp;simple&nbsp;re</span> <span class="U2">duction&nbsp;of</span> <span class="U2">&nbsp;what&nbsp;we</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">457</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;ask</span> <span class="U2">ed&nbsp;for.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">458</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">---------</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">459</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;to</span> <span class="U2">talItems&nbsp;=</span> <span class="U2">&nbsp;self._ext</span> <span class="U2">ractTotalI</span> <span class="U2">temsFromRa</span> <span class="U2">wResponse(</span> <span class="U2">response);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">460</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(to</span> <span class="U2">talItems&nbsp;=</span> <span class="U2">==&nbsp;1)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">461</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;handl</span> <span class="U2">eFailedReq</span> <span class="U2">uestWithRa</span> <span class="U2">wResponse(</span> <span class="U2">util.forma</span> <span class="U2">t('Failed&nbsp;</span> <span class="U2">to&nbsp;parse&nbsp;t</span> <span class="U2">he&nbsp;vista&nbsp;r</span> <span class="U2">esponse&nbsp;in</span> <span class="U2">to&nbsp;JSON&nbsp;fo</span> <span class="U2">r&nbsp;vistaId:</span> <span class="U2">&nbsp;%s;&nbsp;total</span> <span class="U2">Items:&nbsp;%s;</span> <span class="U2">&nbsp;exception</span> <span class="U2">:&nbsp;%j',&nbsp;vis</span> <span class="U2">taId,&nbsp;tota</span> <span class="U2">lItems,&nbsp;e)</span> <span class="U2">,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">462</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;1,&nbsp;respo</span> <span class="U2">nse,&nbsp;{mess</span> <span class="U2">age:&nbsp;self.</span> <span class="U2">ERROR_LIST</span> <span class="U2">.INVALID_J</span> <span class="U2">SON_ERROR}</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">463</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">464</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">465</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ne</span> <span class="U2">wBatchSize</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">466</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((t</span> <span class="U2">otalItems)</span> <span class="U2">&nbsp;&amp;&amp;&nbsp;(total</span> <span class="U2">Items&nbsp;&lt;=&nbsp;h</span> <span class="U2">mpBatchSiz</span> <span class="U2">e))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">467</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ne</span> <span class="U2">wBatchSize</span> <span class="U2">&nbsp;=&nbsp;String(</span> <span class="U2">Math.ceil(</span> <span class="U2">totalItems</span> <span class="U2">&nbsp;/&nbsp;2));</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">468</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">469</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ne</span> <span class="U2">wBatchSize</span> <span class="U2">&nbsp;=&nbsp;String(</span> <span class="U2">Math.ceil(</span> <span class="U2">hmpBatchSi</span> <span class="U2">ze&nbsp;/&nbsp;2));</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">470</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">471</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">472</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Ret</span> <span class="U2">reive&nbsp;allo</span> <span class="U2">cationToke</span> <span class="U2">n&nbsp;from&nbsp;the</span> <span class="U2">&nbsp;message.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">473</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">---------</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">474</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;al</span> <span class="U2">locationTo</span> <span class="U2">kenFromRes</span> <span class="U2">ponse&nbsp;=&nbsp;vi</span> <span class="U2">staSyncUti</span> <span class="U2">l.extractA</span> <span class="U2">llocationT</span> <span class="U2">okenFromRa</span> <span class="U2">wResponse(</span> <span class="U2">self.log,&nbsp;</span> <span class="U2">response);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">475</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">476</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Wit</span> <span class="U2">hout&nbsp;an&nbsp;al</span> <span class="U2">locationTo</span> <span class="U2">ken&nbsp;in&nbsp;the</span> <span class="U2">&nbsp;response&nbsp;</span> <span class="U2">-&nbsp;we&nbsp;canno</span> <span class="U2">t&nbsp;correctl</span> <span class="U2">y&nbsp;tell&nbsp;Vis</span> <span class="U2">tA&nbsp;what&nbsp;to</span> <span class="U2">&nbsp;do&nbsp;with&nbsp;i</span> <span class="U2">t.&nbsp;&nbsp;The&nbsp;er</span> <span class="U2">ror&nbsp;respon</span> <span class="U2">se&nbsp;here&nbsp;wi</span> <span class="U2">ll&nbsp;end&nbsp;up&nbsp;</span> <span class="U2">skipping&nbsp;t</span> <span class="U2">his&nbsp;messag</span> <span class="U2">e.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">477</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;On&nbsp;</span> <span class="U2">the&nbsp;VistA&nbsp;</span> <span class="U2">side,&nbsp;that</span> <span class="U2">&nbsp;will&nbsp;resu</span> <span class="U2">lt&nbsp;in&nbsp;this</span> <span class="U2">&nbsp;allocatio</span> <span class="U2">n&nbsp;being&nbsp;"t</span> <span class="U2">imed&nbsp;out".</span> <span class="U2">&nbsp;&nbsp;That&nbsp;wil</span> <span class="U2">l&nbsp;cause&nbsp;th</span> <span class="U2">e&nbsp;'reducti</span> <span class="U2">on"&nbsp;algori</span> <span class="U2">thm&nbsp;to&nbsp;be&nbsp;</span> <span class="U2">handled&nbsp;by</span> <span class="U2">&nbsp;VistA&nbsp;and</span> <span class="U2">&nbsp;if&nbsp;that&nbsp;d</span> <span class="U2">oes</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">478</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;not</span> <span class="U2">&nbsp;resolve&nbsp;i</span> <span class="U2">t,&nbsp;it&nbsp;will</span> <span class="U2">&nbsp;end&nbsp;up&nbsp;in</span> <span class="U2">&nbsp;Vista-Syn</span> <span class="U2">c&nbsp;going&nbsp;in</span> <span class="U2">to&nbsp;"Lock&nbsp;D</span> <span class="U2">own"&nbsp;mode.</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">479</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">---</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">480</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!a</span> <span class="U2">llocationT</span> <span class="U2">okenFromRe</span> <span class="U2">sponse)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">481</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;handl</span> <span class="U2">eFailedReq</span> <span class="U2">uestWithRa</span> <span class="U2">wResponse(</span> <span class="U2">util.forma</span> <span class="U2">t('Failed&nbsp;</span> <span class="U2">to&nbsp;parse&nbsp;t</span> <span class="U2">he&nbsp;vista&nbsp;r</span> <span class="U2">esponse&nbsp;in</span> <span class="U2">to&nbsp;JSON&nbsp;fo</span> <span class="U2">r&nbsp;vistaId:</span> <span class="U2">&nbsp;%s.&nbsp;&nbsp;Ther</span> <span class="U2">e&nbsp;is&nbsp;no&nbsp;al</span> <span class="U2">locationTo</span> <span class="U2">ken.&nbsp;&nbsp;tota</span> <span class="U2">lItems:&nbsp;%s</span> <span class="U2">;&nbsp;exceptio</span> <span class="U2">n:&nbsp;%j',&nbsp;vi</span> <span class="U2">staId,&nbsp;tot</span> <span class="U2">alItems,&nbsp;e</span> <span class="U2">),</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">482</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;hmpBatch</span> <span class="U2">Size,&nbsp;resp</span> <span class="U2">onse,&nbsp;{mes</span> <span class="U2">sage:&nbsp;self</span> <span class="U2">.ERROR_LIS</span> <span class="U2">T.INVALID_</span> <span class="U2">JSON_ERROR</span> <span class="U2">});</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">483</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">484</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">485</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.l</span> <span class="U2">og.error('</span> <span class="U2">vista-clie</span> <span class="U2">nt.fetchNe</span> <span class="U2">xtBatchMul</span> <span class="U2">tipleMode:</span> <span class="U2">&nbsp;Failed&nbsp;to</span> <span class="U2">&nbsp;parse&nbsp;the</span> <span class="U2">&nbsp;vista&nbsp;res</span> <span class="U2">ponse&nbsp;into</span> <span class="U2">&nbsp;JSON&nbsp;for&nbsp;</span> <span class="U2">vistaId:&nbsp;%</span> <span class="U2">s;&nbsp;hmpBatc</span> <span class="U2">hSize:&nbsp;%s;</span> <span class="U2">&nbsp;allocatio</span> <span class="U2">nTokenFrom</span> <span class="U2">Response:&nbsp;</span> <span class="U2">%s.&nbsp;&nbsp;Attem</span> <span class="U2">pting&nbsp;retr</span> <span class="U2">y&nbsp;with&nbsp;sma</span> <span class="U2">ller&nbsp;batch</span> <span class="U2">&nbsp;size&nbsp;of&nbsp;%</span> <span class="U2">s.&nbsp;respons</span> <span class="U2">e:&nbsp;%s',&nbsp;vi</span> <span class="U2">staId,&nbsp;hmp</span> <span class="U2">BatchSize,</span> <span class="U2">&nbsp;allocatio</span> <span class="U2">nTokenFrom</span> <span class="U2">Response,&nbsp;</span> <span class="U2">newBatchSi</span> <span class="U2">ze,&nbsp;respon</span> <span class="U2">se);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">486</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">487</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="U2">&nbsp;self.fetc</span> <span class="U2">hNextBatch</span> <span class="U2">MultipleMo</span> <span class="U2">de(vistaId</span> <span class="U2">,&nbsp;allocati</span> <span class="U2">onTokenFro</span> <span class="U2">mResponse,</span> <span class="U2">&nbsp;'reduce',</span> <span class="U2">&nbsp;newBatchS</span> <span class="U2">ize,&nbsp;batch</span> <span class="U2">Callback);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">488</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">489</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">490</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">491</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;T</span> <span class="U2">his&nbsp;condit</span> <span class="U2">ion&nbsp;is&nbsp;gen</span> <span class="U2">erally&nbsp;a&nbsp;s</span> <span class="U2">erver&nbsp;erro</span> <span class="U2">r&nbsp;conditio</span> <span class="U2">n.&nbsp;&nbsp;Setup&nbsp;</span> <span class="U2">is&nbsp;not&nbsp;rig</span> <span class="U2">ht.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">492</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//--</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">493</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span> <span class="U2">(jsonRespo</span> <span class="U2">nse)&nbsp;&amp;&amp;&nbsp;(j</span> <span class="U2">sonRespons</span> <span class="U2">e.error))&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">494</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">return&nbsp;han</span> <span class="U2">dleFailedR</span> <span class="U2">equestWith</span> <span class="U2">ParsedResp</span> <span class="U2">onse('vist</span> <span class="U2">a-client.f</span> <span class="U2">etchNextBa</span> <span class="U2">tchMultipl</span> <span class="U2">eMode:&nbsp;Vis</span> <span class="U2">ta&nbsp;returne</span> <span class="U2">d&nbsp;an&nbsp;error</span> <span class="U2">&nbsp;condition</span> <span class="U2">.',&nbsp;hmpBat</span> <span class="U2">chSize,&nbsp;js</span> <span class="U2">onResponse</span> <span class="U2">,&nbsp;jsonResp</span> <span class="U2">onse.error</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">495</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">496</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">//&nbsp;Batch&nbsp;l</span> <span class="U2">evel&nbsp;error</span> <span class="U2">&nbsp;message&nbsp;-</span> <span class="U2">&nbsp;most&nbsp;like</span> <span class="U2">ly&nbsp;server&nbsp;</span> <span class="U2">lock&nbsp;down&nbsp;</span> <span class="U2">mode.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">497</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-----</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">498</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;el</span> <span class="U2">se&nbsp;if&nbsp;((js</span> <span class="U2">onResponse</span> <span class="U2">)&nbsp;&amp;&amp;&nbsp;(json</span> <span class="U2">Response.d</span> <span class="U2">ata)&nbsp;&amp;&amp;&nbsp;(j</span> <span class="U2">sonRespons</span> <span class="U2">e.data.err</span> <span class="U2">or))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">499</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">return&nbsp;han</span> <span class="U2">dleFailedR</span> <span class="U2">equestWith</span> <span class="U2">ParsedResp</span> <span class="U2">onse('vist</span> <span class="U2">a-client.f</span> <span class="U2">etchNextBa</span> <span class="U2">tchMultipl</span> <span class="U2">eMode:&nbsp;Vis</span> <span class="U2">ta&nbsp;returne</span> <span class="U2">d&nbsp;a&nbsp;batch&nbsp;</span> <span class="U2">level&nbsp;erro</span> <span class="U2">r&nbsp;conditio</span> <span class="U2">n.&nbsp;',&nbsp;hmpB</span> <span class="U2">atchSize,&nbsp;</span> <span class="U2">jsonRespon</span> <span class="U2">se,&nbsp;jsonRe</span> <span class="U2">sponse.dat</span> <span class="U2">a.error);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">500</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">501</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">//&nbsp;In&nbsp;some</span> <span class="U2">&nbsp;cases&nbsp;we&nbsp;</span> <span class="U2">may&nbsp;get&nbsp;no</span> <span class="U2">&nbsp;data&nbsp;-&nbsp;bu</span> <span class="U2">t&nbsp;it&nbsp;is&nbsp;no</span> <span class="U2">t&nbsp;an&nbsp;error</span> <span class="U2">.&nbsp;&nbsp;One&nbsp;cas</span> <span class="U2">e&nbsp;is&nbsp;if&nbsp;st</span> <span class="U2">aging&nbsp;is&nbsp;n</span> <span class="U2">ot&nbsp;complet</span> <span class="U2">e&nbsp;yet.&nbsp;&nbsp;&nbsp;S</span> <span class="U2">o&nbsp;look&nbsp;for</span> <span class="U2">&nbsp;this&nbsp;spec</span> <span class="U2">ial&nbsp;case.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">502</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">//&nbsp;If&nbsp;it&nbsp;o</span> <span class="U2">ccurs&nbsp;-&nbsp;it</span> <span class="U2">&nbsp;is&nbsp;not&nbsp;an</span> <span class="U2">&nbsp;error&nbsp;sit</span> <span class="U2">uation.&nbsp;&nbsp;W</span> <span class="U2">e&nbsp;just&nbsp;wan</span> <span class="U2">t&nbsp;to&nbsp;ignor</span> <span class="U2">e&nbsp;it.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">503</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">504</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;el</span> <span class="U2">se&nbsp;if&nbsp;((js</span> <span class="U2">onResponse</span> <span class="U2">)&nbsp;&amp;&amp;&nbsp;(json</span> <span class="U2">Response.w</span> <span class="U2">arning)&nbsp;&amp;&amp;</span> <span class="U2">&nbsp;(jsonResp</span> <span class="U2">onse.warni</span> <span class="U2">ng&nbsp;===&nbsp;'St</span> <span class="U2">aging&nbsp;is&nbsp;n</span> <span class="U2">ot&nbsp;complet</span> <span class="U2">e&nbsp;yet!'))&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">505</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">self.log.d</span> <span class="U2">ebug('vist</span> <span class="U2">a-client.f</span> <span class="U2">etchNextBa</span> <span class="U2">tchMultipl</span> <span class="U2">eMode.hand</span> <span class="U2">leFailedRe</span> <span class="U2">questRespo</span> <span class="U2">nse:&nbsp;Stagi</span> <span class="U2">ng&nbsp;is&nbsp;not&nbsp;</span> <span class="U2">yet&nbsp;comple</span> <span class="U2">te');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">506</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">return&nbsp;han</span> <span class="U2">dleSuccess</span> <span class="U2">fulRespons</span> <span class="U2">e(jsonResp</span> <span class="U2">onse,&nbsp;hmpB</span> <span class="U2">atchSize);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">507</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">508</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">//&nbsp;Valid&nbsp;r</span> <span class="U2">esponse</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">509</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">//--------</span> <span class="U2">-------</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">510</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;el</span> <span class="U2">se&nbsp;if&nbsp;((js</span> <span class="U2">onResponse</span> <span class="U2">)&nbsp;&amp;&amp;&nbsp;(json</span> <span class="U2">Response.d</span> <span class="U2">ata))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">511</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">return&nbsp;han</span> <span class="U2">dleSuccess</span> <span class="U2">fulRespons</span> <span class="U2">e(jsonResp</span> <span class="U2">onse,&nbsp;hmpB</span> <span class="U2">atchSize);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">512</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">513</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">//&nbsp;Any&nbsp;oth</span> <span class="U2">er&nbsp;error&nbsp;c</span> <span class="U2">onditions.</span> <span class="U2">..</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">514</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">---</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">515</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;el</span> <span class="U2">se&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">516</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">return&nbsp;han</span> <span class="U2">dleFailedR</span> <span class="U2">equestWith</span> <span class="U2">ParsedResp</span> <span class="U2">onse('vist</span> <span class="U2">a-client.f</span> <span class="U2">etchNextBa</span> <span class="U2">tchMultipl</span> <span class="U2">eMode:&nbsp;jso</span> <span class="U2">nResponse&nbsp;</span> <span class="U2">did&nbsp;not&nbsp;co</span> <span class="U2">ntain&nbsp;any&nbsp;</span> <span class="U2">data&nbsp;attri</span> <span class="U2">bute.',&nbsp;hm</span> <span class="U2">pBatchSize</span> <span class="U2">,&nbsp;jsonResp</span> <span class="U2">onse,&nbsp;null</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">517</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">518</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}&nbsp;else&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">519</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;handleF</span> <span class="U2">ailedReque</span> <span class="U2">stWithRawR</span> <span class="U2">esponse(ut</span> <span class="U2">il.format(</span> <span class="U2">'vista-cli</span> <span class="U2">ent.fetchN</span> <span class="U2">extBatchMu</span> <span class="U2">ltipleMode</span> <span class="U2">:&nbsp;Error&nbsp;re</span> <span class="U2">ceived&nbsp;fro</span> <span class="U2">m&nbsp;RPC&nbsp;call</span> <span class="U2">.&nbsp;&nbsp;Error:&nbsp;</span> <span class="U2">%s',&nbsp;error</span> <span class="U2">),</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">520</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">hmpBatchSi</span> <span class="U2">ze,&nbsp;respon</span> <span class="U2">se,&nbsp;{messa</span> <span class="U2">ge:&nbsp;self.E</span> <span class="U2">RROR_LIST.</span> <span class="U2">RPC_ERROR}</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">521</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">522</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">523</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">524</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;handl</span> <span class="U2">eFailedReq</span> <span class="U2">uestWithRa</span> <span class="U2">wResponse(</span> <span class="U2">'vista-cli</span> <span class="U2">ent.fetchN</span> <span class="U2">extBatchMu</span> <span class="U2">ltipleMode</span> <span class="U2">:&nbsp;Failed&nbsp;t</span> <span class="U2">o&nbsp;call&nbsp;RPC</span> <span class="U2">&nbsp;getPtUpda</span> <span class="U2">tes&nbsp;for&nbsp;vi</span> <span class="U2">staId:&nbsp;'&nbsp;+</span> <span class="U2">&nbsp;vistaId&nbsp;+</span> <span class="U2">&nbsp;',&nbsp;invali</span> <span class="U2">d&nbsp;configur</span> <span class="U2">ation&nbsp;info</span> <span class="U2">rmation.',</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">525</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;hmpBatch</span> <span class="U2">Size,&nbsp;null</span> <span class="U2">,&nbsp;{message</span> <span class="U2">:&nbsp;self.ERR</span> <span class="U2">OR_LIST.IN</span> <span class="U2">VALID_CONF</span> <span class="U2">IGURATION_</span> <span class="U2">ERROR});</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">526</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">527</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">528</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">529</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Thi</span> <span class="U2">s&nbsp;function</span> <span class="U2">&nbsp;handles&nbsp;c</span> <span class="U2">alling&nbsp;the</span> <span class="U2">&nbsp;callback&nbsp;</span> <span class="U2">for&nbsp;a&nbsp;suce</span> <span class="U2">ssful&nbsp;resp</span> <span class="U2">onse&nbsp;from&nbsp;</span> <span class="U2">the&nbsp;RPC.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">530</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">531</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;jso</span> <span class="U2">nResponse&nbsp;</span> <span class="U2">-&nbsp;the&nbsp;resu</span> <span class="U2">lt&nbsp;returne</span> <span class="U2">d&nbsp;from&nbsp;Vis</span> <span class="U2">tA&nbsp;through</span> <span class="U2">&nbsp;the&nbsp;RPC&nbsp;i</span> <span class="U2">n&nbsp;JSON&nbsp;for</span> <span class="U2">mat.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">532</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;hmp</span> <span class="U2">BatchSize&nbsp;</span> <span class="U2">-&nbsp;The&nbsp;batc</span> <span class="U2">h&nbsp;size&nbsp;tha</span> <span class="U2">t&nbsp;was&nbsp;used</span> <span class="U2">&nbsp;when&nbsp;call</span> <span class="U2">ing&nbsp;the&nbsp;RP</span> <span class="U2">C.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">533</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">534</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;functi</span> <span class="U2">on&nbsp;handleS</span> <span class="U2">uccessfulR</span> <span class="U2">esponse(js</span> <span class="U2">onResponse</span> <span class="U2">,&nbsp;hmpBatch</span> <span class="U2">Size)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">535</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.log.deb</span> <span class="U2">ug('vista-</span> <span class="U2">client.fet</span> <span class="U2">chNextBatc</span> <span class="U2">hMultipleM</span> <span class="U2">ode:&nbsp;Succe</span> <span class="U2">ssfully&nbsp;ca</span> <span class="U2">lled&nbsp;RPC&nbsp;f</span> <span class="U2">or&nbsp;getPtUp</span> <span class="U2">dates.');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">536</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.metrics</span> <span class="U2">.debug('Vi</span> <span class="U2">sta&nbsp;Fetch&nbsp;</span> <span class="U2">Next',&nbsp;met</span> <span class="U2">ricsObj);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">537</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;wrappedR</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">538</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;data:&nbsp;js</span> <span class="U2">onResponse</span> <span class="U2">.data,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">539</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;hmpBatch</span> <span class="U2">Size:&nbsp;hmpB</span> <span class="U2">atchSize,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">540</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;rawRespo</span> <span class="U2">nse:&nbsp;null,</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">541</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;errorDat</span> <span class="U2">a:&nbsp;null</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">542</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">543</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;batch</span> <span class="U2">Callback(n</span> <span class="U2">ull,&nbsp;wrapp</span> <span class="U2">edResponse</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">544</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">545</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">546</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">547</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Thi</span> <span class="U2">s&nbsp;function</span> <span class="U2">&nbsp;handles&nbsp;c</span> <span class="U2">alling&nbsp;the</span> <span class="U2">&nbsp;callback&nbsp;</span> <span class="U2">for&nbsp;a&nbsp;fail</span> <span class="U2">ed&nbsp;respons</span> <span class="U2">e&nbsp;from&nbsp;the</span> <span class="U2">&nbsp;RPC.&nbsp;&nbsp;Whe</span> <span class="U2">n</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">548</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;we&nbsp;</span> <span class="U2">have&nbsp;to&nbsp;lo</span> <span class="U2">g&nbsp;an&nbsp;error</span> <span class="U2">&nbsp;where&nbsp;we&nbsp;</span> <span class="U2">have&nbsp;not&nbsp;o</span> <span class="U2">r&nbsp;cannot&nbsp;p</span> <span class="U2">arse&nbsp;the&nbsp;r</span> <span class="U2">esponse&nbsp;-&nbsp;</span> <span class="U2">so&nbsp;we&nbsp;need</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">549</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;to&nbsp;</span> <span class="U2">deal&nbsp;with&nbsp;</span> <span class="U2">it&nbsp;as&nbsp;a&nbsp;ra</span> <span class="U2">w&nbsp;response</span> <span class="U2">.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">550</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">551</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;err</span> <span class="U2">or&nbsp;-&nbsp;The&nbsp;e</span> <span class="U2">rror&nbsp;messa</span> <span class="U2">ge&nbsp;to&nbsp;be&nbsp;s</span> <span class="U2">ent&nbsp;-&nbsp;beca</span> <span class="U2">use&nbsp;of&nbsp;the</span> <span class="U2">&nbsp;failed&nbsp;rP</span> <span class="U2">C&nbsp;call.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">552</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;hmp</span> <span class="U2">BatchSize&nbsp;</span> <span class="U2">-&nbsp;The&nbsp;batc</span> <span class="U2">h&nbsp;size&nbsp;tha</span> <span class="U2">t&nbsp;was&nbsp;used</span> <span class="U2">&nbsp;when&nbsp;call</span> <span class="U2">ing&nbsp;the&nbsp;RP</span> <span class="U2">C.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">553</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;raw</span> <span class="U2">VistaRespo</span> <span class="U2">nse&nbsp;-&nbsp;The&nbsp;</span> <span class="U2">result&nbsp;ret</span> <span class="U2">urned&nbsp;from</span> <span class="U2">&nbsp;VistA&nbsp;thr</span> <span class="U2">ough&nbsp;the&nbsp;R</span> <span class="U2">PC&nbsp;in&nbsp;its&nbsp;</span> <span class="U2">original&nbsp;f</span> <span class="U2">orm.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">554</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;err</span> <span class="U2">orData:&nbsp;&nbsp;A</span> <span class="U2">n&nbsp;object&nbsp;c</span> <span class="U2">ontaining&nbsp;</span> <span class="U2">more&nbsp;infor</span> <span class="U2">mation&nbsp;reg</span> <span class="U2">arding&nbsp;the</span> <span class="U2">&nbsp;error&nbsp;tha</span> <span class="U2">t&nbsp;occurred</span> <span class="U2">.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">555</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">556</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;functi</span> <span class="U2">on&nbsp;handleF</span> <span class="U2">ailedReque</span> <span class="U2">stWithRawR</span> <span class="U2">esponse(er</span> <span class="U2">ror,&nbsp;hmpBa</span> <span class="U2">tchSize,&nbsp;r</span> <span class="U2">awVistaRes</span> <span class="U2">ponse,&nbsp;err</span> <span class="U2">orData)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">557</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;localErr</span> <span class="U2">or&nbsp;=&nbsp;util.</span> <span class="U2">format('%s</span> <span class="U2">&nbsp;rawVistaR</span> <span class="U2">esponse:&nbsp;%</span> <span class="U2">s',&nbsp;error,</span> <span class="U2">&nbsp;rawVistaR</span> <span class="U2">esponse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">558</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.metrics</span> <span class="U2">.debug('Vi</span> <span class="U2">sta&nbsp;Fetch&nbsp;</span> <span class="U2">Next&nbsp;(raw&nbsp;</span> <span class="U2">response)&nbsp;</span> <span class="U2">in&nbsp;Error',</span> <span class="U2">&nbsp;metricsOb</span> <span class="U2">j);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">559</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;wrappedR</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">560</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;data:&nbsp;nu</span> <span class="U2">ll,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">561</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;hmpBatch</span> <span class="U2">Size:&nbsp;hmpB</span> <span class="U2">atchSize,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">562</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;rawRespo</span> <span class="U2">nse:&nbsp;rawVi</span> <span class="U2">staRespons</span> <span class="U2">e,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">563</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;errorDat</span> <span class="U2">a:&nbsp;errorDa</span> <span class="U2">ta</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">564</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">565</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;batch</span> <span class="U2">Callback(l</span> <span class="U2">ocalError,</span> <span class="U2">&nbsp;wrappedRe</span> <span class="U2">sponse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">566</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">567</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">568</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">569</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Thi</span> <span class="U2">s&nbsp;function</span> <span class="U2">&nbsp;handles&nbsp;c</span> <span class="U2">alling&nbsp;the</span> <span class="U2">&nbsp;callback&nbsp;</span> <span class="U2">for&nbsp;a&nbsp;fail</span> <span class="U2">ed&nbsp;respons</span> <span class="U2">e&nbsp;from&nbsp;the</span> <span class="U2">&nbsp;RPC.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">570</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">571</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;err</span> <span class="U2">or&nbsp;-&nbsp;The&nbsp;e</span> <span class="U2">rror&nbsp;messa</span> <span class="U2">ge&nbsp;to&nbsp;be&nbsp;s</span> <span class="U2">ent&nbsp;-&nbsp;beca</span> <span class="U2">use&nbsp;of&nbsp;the</span> <span class="U2">&nbsp;failed&nbsp;rP</span> <span class="U2">C&nbsp;call.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">572</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;hmp</span> <span class="U2">BatchSize&nbsp;</span> <span class="U2">-&nbsp;The&nbsp;batc</span> <span class="U2">h&nbsp;size&nbsp;tha</span> <span class="U2">t&nbsp;was&nbsp;used</span> <span class="U2">&nbsp;when&nbsp;call</span> <span class="U2">ing&nbsp;the&nbsp;RP</span> <span class="U2">C.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">573</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;vis</span> <span class="U2">taResponse</span> <span class="U2">&nbsp;-&nbsp;The&nbsp;res</span> <span class="U2">ult&nbsp;return</span> <span class="U2">ed&nbsp;from&nbsp;Vi</span> <span class="U2">stA&nbsp;throug</span> <span class="U2">h&nbsp;the&nbsp;RPC</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">574</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;vis</span> <span class="U2">taError&nbsp;-&nbsp;</span> <span class="U2">The&nbsp;error&nbsp;</span> <span class="U2">that&nbsp;Vista</span> <span class="U2">&nbsp;returned.</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">575</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">576</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;functi</span> <span class="U2">on&nbsp;handleF</span> <span class="U2">ailedReque</span> <span class="U2">stWithPars</span> <span class="U2">edResponse</span> <span class="U2">(error,&nbsp;hm</span> <span class="U2">pBatchSize</span> <span class="U2">,&nbsp;vistaRes</span> <span class="U2">ponse,&nbsp;vis</span> <span class="U2">taError)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">577</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;localErr</span> <span class="U2">or&nbsp;=&nbsp;util.</span> <span class="U2">format('%s</span> <span class="U2">&nbsp;vistaResp</span> <span class="U2">onse:&nbsp;%j',</span> <span class="U2">&nbsp;error,&nbsp;vi</span> <span class="U2">staRespons</span> <span class="U2">e);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">578</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.metrics</span> <span class="U2">.debug('Vi</span> <span class="U2">sta&nbsp;Fetch&nbsp;</span> <span class="U2">Next&nbsp;(pars</span> <span class="U2">ed&nbsp;respons</span> <span class="U2">e)&nbsp;in&nbsp;Erro</span> <span class="U2">r',&nbsp;metric</span> <span class="U2">sObj);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">579</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;wrappedR</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">580</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;data:&nbsp;nu</span> <span class="U2">ll,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">581</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;hmpBatch</span> <span class="U2">Size:&nbsp;hmpB</span> <span class="U2">atchSize,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">582</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;rawRespo</span> <span class="U2">nse:&nbsp;null,</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">583</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;errorDat</span> <span class="U2">a:&nbsp;vistaEr</span> <span class="U2">ror</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">584</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">585</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;batch</span> <span class="U2">Callback(l</span> <span class="U2">ocalError,</span> <span class="U2">&nbsp;wrappedRe</span> <span class="U2">sponse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">586</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">587</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">588</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">589</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">590</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">---</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">591</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;If&nbsp;Vist</span> <span class="U2">A&nbsp;sends&nbsp;ba</span> <span class="U2">ck&nbsp;a&nbsp;respo</span> <span class="U2">nse&nbsp;that&nbsp;c</span> <span class="U2">annot&nbsp;be&nbsp;p</span> <span class="U2">arsed&nbsp;as&nbsp;J</span> <span class="U2">SON,&nbsp;we&nbsp;ne</span> <span class="U2">ed&nbsp;to&nbsp;see&nbsp;</span> <span class="U2">if&nbsp;we&nbsp;can</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">592</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;find&nbsp;th</span> <span class="U2">e&nbsp;totalIte</span> <span class="U2">ms&nbsp;value&nbsp;i</span> <span class="U2">n&nbsp;this&nbsp;-&nbsp;b</span> <span class="U2">y&nbsp;simply&nbsp;l</span> <span class="U2">ocating&nbsp;it</span> <span class="U2">&nbsp;through&nbsp;a</span> <span class="U2">&nbsp;string&nbsp;se</span> <span class="U2">arch.&nbsp;&nbsp;If&nbsp;</span> <span class="U2">we</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">593</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;find&nbsp;it</span> <span class="U2">,&nbsp;then&nbsp;ext</span> <span class="U2">ract&nbsp;it&nbsp;an</span> <span class="U2">d&nbsp;return&nbsp;i</span> <span class="U2">t.&nbsp;&nbsp;Otherw</span> <span class="U2">ise&nbsp;return</span> <span class="U2">&nbsp;-1.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">594</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">595</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;rawResp</span> <span class="U2">onse:&nbsp;The&nbsp;</span> <span class="U2">string&nbsp;for</span> <span class="U2">m&nbsp;of&nbsp;the&nbsp;r</span> <span class="U2">esponse&nbsp;fr</span> <span class="U2">om&nbsp;VistA.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">596</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;returns</span> <span class="U2">:&nbsp;The&nbsp;'tot</span> <span class="U2">alItems'&nbsp;i</span> <span class="U2">n&nbsp;the&nbsp;batc</span> <span class="U2">h&nbsp;returned</span> <span class="U2">&nbsp;as&nbsp;a&nbsp;nume</span> <span class="U2">ric&nbsp;value&nbsp;</span> <span class="U2">or&nbsp;null&nbsp;if</span> <span class="U2">&nbsp;it&nbsp;coud&nbsp;n</span> <span class="U2">ot</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">597</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;be&nbsp;extra</span> <span class="U2">cted.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">598</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">---</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">599</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">VistaClien</span> <span class="U2">t.prototyp</span> <span class="U2">e._extract</span> <span class="U2">TotalItems</span> <span class="U2">FromRawRes</span> <span class="U2">ponse&nbsp;=&nbsp;fu</span> <span class="U2">nction&nbsp;(ra</span> <span class="U2">wResponse)</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">600</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">lf&nbsp;=&nbsp;this;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">601</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">602</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;to</span> <span class="U2">talItems&nbsp;=</span> <span class="U2">&nbsp;null;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">603</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((_</span> <span class="U2">.isString(</span> <span class="U2">rawRespons</span> <span class="U2">e))&nbsp;&amp;&amp;&nbsp;(!_</span> <span class="U2">.isEmpty(r</span> <span class="U2">awResponse</span> <span class="U2">)))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">604</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span> <span class="U2">&nbsp;Quickest&nbsp;</span> <span class="U2">way&nbsp;to&nbsp;get</span> <span class="U2">&nbsp;this,&nbsp;is&nbsp;</span> <span class="U2">to&nbsp;extract</span> <span class="U2">&nbsp;just&nbsp;the&nbsp;</span> <span class="U2">allocation</span> <span class="U2">Token&nbsp;fiel</span> <span class="U2">ds.&nbsp;&nbsp;Ours&nbsp;</span> <span class="U2">should&nbsp;alw</span> <span class="U2">ays&nbsp;be&nbsp;fir</span> <span class="U2">st.&nbsp;&nbsp;So&nbsp;ge</span> <span class="U2">t&nbsp;them,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">605</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span> <span class="U2">&nbsp;if&nbsp;we&nbsp;get</span> <span class="U2">&nbsp;an&nbsp;array&nbsp;</span> <span class="U2">of&nbsp;them&nbsp;th</span> <span class="U2">row&nbsp;away&nbsp;a</span> <span class="U2">ll&nbsp;but&nbsp;the</span> <span class="U2">&nbsp;first.&nbsp;&nbsp;W</span> <span class="U2">rap&nbsp;it&nbsp;in&nbsp;</span> <span class="U2">{}&nbsp;and&nbsp;par</span> <span class="U2">se&nbsp;it&nbsp;as&nbsp;J</span> <span class="U2">SON.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">606</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">--</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">607</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;totalIte</span> <span class="U2">msFields&nbsp;=</span> <span class="U2">&nbsp;rawRespon</span> <span class="U2">se.match(/</span> <span class="U2">\"totalIte</span> <span class="U2">ms\"\s*\:\</span> <span class="U2">s*\"*\d+\"</span> <span class="U2">*/g);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">608</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;(_.isArra</span> <span class="U2">y(totalIte</span> <span class="U2">msFields))</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">609</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;totalIte</span> <span class="U2">msFields&nbsp;=</span> <span class="U2">&nbsp;totalItem</span> <span class="U2">sFields[0]</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">610</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">611</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;((_.isStr</span> <span class="U2">ing(totalI</span> <span class="U2">temsFields</span> <span class="U2">))&nbsp;&amp;&amp;&nbsp;(!_.</span> <span class="U2">isEmpty(to</span> <span class="U2">talItemsFi</span> <span class="U2">elds)))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">612</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;var&nbsp;tota</span> <span class="U2">lItemsObj&nbsp;</span> <span class="U2">=&nbsp;null;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">613</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;try&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">614</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tota</span> <span class="U2">lItemsObj&nbsp;</span> <span class="U2">=&nbsp;JSON.par</span> <span class="U2">se('{'&nbsp;+&nbsp;t</span> <span class="U2">otalItemsF</span> <span class="U2">ields&nbsp;+&nbsp;'}</span> <span class="U2">');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">615</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span> <span class="U2">!isNaN(tot</span> <span class="U2">alItemsObj</span> <span class="U2">.totalItem</span> <span class="U2">s))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">616</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">totalItems</span> <span class="U2">&nbsp;=&nbsp;parseIn</span> <span class="U2">t(totalIte</span> <span class="U2">msObj.tota</span> <span class="U2">lItems);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">617</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">618</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">619</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;catch&nbsp;(e</span> <span class="U2">)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">620</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self</span> <span class="U2">.log.error</span> <span class="U2">('viata-cl</span> <span class="U2">ient._extr</span> <span class="U2">actTotalIt</span> <span class="U2">emsFromRaw</span> <span class="U2">Response:&nbsp;</span> <span class="U2">Failed&nbsp;to&nbsp;</span> <span class="U2">extract&nbsp;th</span> <span class="U2">e&nbsp;totalIte</span> <span class="U2">ms&nbsp;value&nbsp;f</span> <span class="U2">rom&nbsp;the&nbsp;ra</span> <span class="U2">w&nbsp;response</span> <span class="U2">.&nbsp;&nbsp;rawResp</span> <span class="U2">onse:&nbsp;%s',</span> <span class="U2">&nbsp;rawRespon</span> <span class="U2">se);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">621</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">622</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">623</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">624</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">625</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="U2">&nbsp;totalItem</span> <span class="U2">s;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">626</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">627</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">628</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">629</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;This&nbsp;fu</span> <span class="U2">nction&nbsp;ret</span> <span class="U2">rieves&nbsp;the</span> <span class="U2">&nbsp;patient&nbsp;d</span> <span class="U2">emographic</span> <span class="U2">s&nbsp;for&nbsp;the&nbsp;</span> <span class="U2">given&nbsp;site</span> <span class="U2">&nbsp;and&nbsp;dfn&nbsp;f</span> <span class="U2">rom&nbsp;VistA</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">630</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;and&nbsp;ret</span> <span class="U2">urns&nbsp;it&nbsp;as</span> <span class="U2">&nbsp;the&nbsp;respo</span> <span class="U2">nse&nbsp;in&nbsp;the</span> <span class="U2">&nbsp;callback.</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">631</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">632</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;vistaId</span> <span class="U2">:&nbsp;The&nbsp;vist</span> <span class="U2">aId&nbsp;of&nbsp;the</span> <span class="U2">&nbsp;site.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">633</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;dfn:&nbsp;Th</span> <span class="U2">e&nbsp;dfn&nbsp;of&nbsp;t</span> <span class="U2">he&nbsp;patient</span> <span class="U2">.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">634</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;callbac</span> <span class="U2">k:&nbsp;The&nbsp;han</span> <span class="U2">dler&nbsp;to&nbsp;ca</span> <span class="U2">ll&nbsp;when&nbsp;th</span> <span class="U2">e&nbsp;data&nbsp;is&nbsp;</span> <span class="U2">received.&nbsp;</span> <span class="U2">&nbsp;It&nbsp;will&nbsp;p</span> <span class="U2">ass&nbsp;the&nbsp;in</span> <span class="U2">formation</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">635</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;in&nbsp;the&nbsp;</span> <span class="U2">response&nbsp;p</span> <span class="U2">arameter&nbsp;o</span> <span class="U2">f&nbsp;the&nbsp;call</span> <span class="U2">back.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">636</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">637</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">VistaClien</span> <span class="U2">t.prototyp</span> <span class="U2">e.getDemog</span> <span class="U2">raphics&nbsp;=&nbsp;</span> <span class="U2">function&nbsp;(</span> <span class="U2">vistaId,&nbsp;d</span> <span class="U2">fn,&nbsp;callba</span> <span class="U2">ck)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">638</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">lf&nbsp;=&nbsp;this;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">639</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me</span> <span class="U2">tricsObj&nbsp;=</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">640</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'s</span> <span class="U2">ubsystem':</span> <span class="U2">&nbsp;'Vista',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">641</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'a</span> <span class="U2">ction':&nbsp;'g</span> <span class="U2">etDemograp</span> <span class="U2">hics',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">642</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'s</span> <span class="U2">ite':&nbsp;vist</span> <span class="U2">aId,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">643</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'p</span> <span class="U2">id':&nbsp;vista</span> <span class="U2">Id&nbsp;+&nbsp;';'&nbsp;+</span> <span class="U2">&nbsp;dfn,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">644</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'p</span> <span class="U2">rocess':&nbsp;u</span> <span class="U2">uid.v4(),</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">645</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'t</span> <span class="U2">imer':&nbsp;'st</span> <span class="U2">art'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">646</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">647</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.m</span> <span class="U2">etrics.deb</span> <span class="U2">ug('Vista&nbsp;</span> <span class="U2">Get&nbsp;Demogr</span> <span class="U2">aphics',&nbsp;m</span> <span class="U2">etricsObj)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">648</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;metric</span> <span class="U2">sObj.timer</span> <span class="U2">&nbsp;=&nbsp;'stop';</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">649</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.l</span> <span class="U2">og.debug('</span> <span class="U2">vista-clie</span> <span class="U2">nt.getDemo</span> <span class="U2">graphics:&nbsp;</span> <span class="U2">vistaId:&nbsp;%</span> <span class="U2">s;&nbsp;dfn:&nbsp;%s</span> <span class="U2">',&nbsp;vistaId</span> <span class="U2">,&nbsp;dfn);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">650</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;pi</span> <span class="U2">d&nbsp;=&nbsp;vistaI</span> <span class="U2">d&nbsp;+&nbsp;';'&nbsp;+&nbsp;</span> <span class="U2">dfn;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">651</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">652</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.l</span> <span class="U2">og.debug('</span> <span class="U2">vista-clie</span> <span class="U2">nt.getDemo</span> <span class="U2">graphics:&nbsp;</span> <span class="U2">rpcConfig&nbsp;</span> <span class="U2">for&nbsp;pid:&nbsp;%</span> <span class="U2">s;',&nbsp;pid);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">653</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;rp</span> <span class="U2">cClient&nbsp;=&nbsp;</span> <span class="U2">self._getR</span> <span class="U2">pcClient(v</span> <span class="U2">istaId);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">654</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">655</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;pa</span> <span class="U2">rams;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">656</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">657</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rp</span> <span class="U2">cClient)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">658</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pa</span> <span class="U2">rams&nbsp;=&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">659</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"patien</span> <span class="U2">tId"':&nbsp;dfn</span> <span class="U2">,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">660</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"domain</span> <span class="U2">"':&nbsp;'patie</span> <span class="U2">nt',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">661</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"extrac</span> <span class="U2">tSchema"':</span> <span class="U2">&nbsp;self.extr</span> <span class="U2">actSchema</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">662</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">663</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rp</span> <span class="U2">cClient.ex</span> <span class="U2">ecute('HMP</span> <span class="U2">&nbsp;GET&nbsp;PATIE</span> <span class="U2">NT&nbsp;DATA&nbsp;JS</span> <span class="U2">ON',&nbsp;param</span> <span class="U2">s,&nbsp;functio</span> <span class="U2">n&nbsp;(error,&nbsp;</span> <span class="U2">response)&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">664</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;self.log</span> <span class="U2">.debug('vi</span> <span class="U2">sta-client</span> <span class="U2">.getDemogr</span> <span class="U2">aphics:&nbsp;Co</span> <span class="U2">mpleted&nbsp;ca</span> <span class="U2">lling&nbsp;RPC&nbsp;</span> <span class="U2">for&nbsp;pid:&nbsp;%</span> <span class="U2">s;&nbsp;error:&nbsp;</span> <span class="U2">%s',&nbsp;pid,&nbsp;</span> <span class="U2">error);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">665</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;self.log</span> <span class="U2">.trace('vi</span> <span class="U2">sta-client</span> <span class="U2">.getDemogr</span> <span class="U2">aphics:&nbsp;Co</span> <span class="U2">mpleted&nbsp;ca</span> <span class="U2">lling&nbsp;RPC&nbsp;</span> <span class="U2">for&nbsp;pid:&nbsp;%</span> <span class="U2">s;&nbsp;result:</span> <span class="U2">&nbsp;%j',&nbsp;pid,</span> <span class="U2">&nbsp;response)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">666</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;(!err</span> <span class="U2">or)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">667</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;handleS</span> <span class="U2">uccessfulR</span> <span class="U2">esponse(re</span> <span class="U2">sponse,&nbsp;pi</span> <span class="U2">d);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">668</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}&nbsp;else&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">669</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;handleF</span> <span class="U2">ailedReque</span> <span class="U2">stResponse</span> <span class="U2">(error,&nbsp;re</span> <span class="U2">sponse,&nbsp;pi</span> <span class="U2">d);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">670</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">671</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">672</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">673</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">674</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;handl</span> <span class="U2">eFailedReq</span> <span class="U2">uestRespon</span> <span class="U2">se('Failed</span> <span class="U2">&nbsp;to&nbsp;subscr</span> <span class="U2">ibe&nbsp;patien</span> <span class="U2">t&nbsp;for&nbsp;pid:</span> <span class="U2">&nbsp;'&nbsp;+&nbsp;pid&nbsp;+</span> <span class="U2">&nbsp;',&nbsp;invali</span> <span class="U2">d&nbsp;configur</span> <span class="U2">ation&nbsp;info</span> <span class="U2">rmation',&nbsp;</span> <span class="U2">null,&nbsp;pid)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">675</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">676</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">677</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">678</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Thi</span> <span class="U2">s&nbsp;function</span> <span class="U2">&nbsp;handles&nbsp;c</span> <span class="U2">alling&nbsp;the</span> <span class="U2">&nbsp;callback&nbsp;</span> <span class="U2">for&nbsp;a&nbsp;suce</span> <span class="U2">ssful&nbsp;resp</span> <span class="U2">onse&nbsp;from&nbsp;</span> <span class="U2">the&nbsp;RPC.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">679</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">680</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;vis</span> <span class="U2">taResponse</span> <span class="U2">&nbsp;-&nbsp;the&nbsp;res</span> <span class="U2">ult&nbsp;return</span> <span class="U2">ed&nbsp;from&nbsp;Vi</span> <span class="U2">stA&nbsp;throug</span> <span class="U2">h&nbsp;the&nbsp;RPC.</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">681</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;pid</span> <span class="U2">&nbsp;-&nbsp;The&nbsp;pid</span> <span class="U2">&nbsp;that&nbsp;iden</span> <span class="U2">tifies&nbsp;the</span> <span class="U2">&nbsp;patient.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">682</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">683</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;functi</span> <span class="U2">on&nbsp;handleS</span> <span class="U2">uccessfulR</span> <span class="U2">esponse(vi</span> <span class="U2">staRespons</span> <span class="U2">e,&nbsp;pid)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">684</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.metrics</span> <span class="U2">.debug('Vi</span> <span class="U2">sta&nbsp;Get&nbsp;De</span> <span class="U2">mographics</span> <span class="U2">',&nbsp;metrics</span> <span class="U2">Obj);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">685</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;(typeof&nbsp;v</span> <span class="U2">istaRespon</span> <span class="U2">se&nbsp;===&nbsp;'st</span> <span class="U2">ring')&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">686</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;try&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">687</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self</span> <span class="U2">.log.debug</span> <span class="U2">('vista-cl</span> <span class="U2">ient.getDe</span> <span class="U2">mographics</span> <span class="U2">.handleSuc</span> <span class="U2">cessfulRes</span> <span class="U2">ponse:&nbsp;Res</span> <span class="U2">ponse&nbsp;was&nbsp;</span> <span class="U2">a&nbsp;string&nbsp;-</span> <span class="U2">&nbsp;parse&nbsp;to&nbsp;</span> <span class="U2">an&nbsp;object.</span> <span class="U2">');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">688</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vist</span> <span class="U2">aResponse&nbsp;</span> <span class="U2">=&nbsp;JSON.par</span> <span class="U2">se(vistaRe</span> <span class="U2">sponse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">689</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}&nbsp;catch&nbsp;</span> <span class="U2">(e)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">690</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self</span> <span class="U2">.log.error</span> <span class="U2">('vista-cl</span> <span class="U2">ient.getDe</span> <span class="U2">mographics</span> <span class="U2">.handleSuc</span> <span class="U2">cessfulRes</span> <span class="U2">ponse:&nbsp;Fai</span> <span class="U2">led&nbsp;to&nbsp;par</span> <span class="U2">se&nbsp;respons</span> <span class="U2">e&nbsp;for&nbsp;pid:</span> <span class="U2">&nbsp;%s;&nbsp;vista</span> <span class="U2">Response:&nbsp;</span> <span class="U2">%s',&nbsp;pid,&nbsp;</span> <span class="U2">vistaRespo</span> <span class="U2">nse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">691</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;callbac</span> <span class="U2">k('Failed&nbsp;</span> <span class="U2">to&nbsp;parse&nbsp;r</span> <span class="U2">esponse.',</span> <span class="U2">&nbsp;vistaResp</span> <span class="U2">onse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">692</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">693</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">694</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">695</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span> <span class="U2">&nbsp;Find&nbsp;the&nbsp;</span> <span class="U2">actual&nbsp;Dem</span> <span class="U2">ographics&nbsp;</span> <span class="U2">data&nbsp;and&nbsp;r</span> <span class="U2">eturn&nbsp;that</span> <span class="U2">...</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">696</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">---</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">697</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;((vistaRe</span> <span class="U2">sponse)&nbsp;&amp;&amp;</span> <span class="U2">&nbsp;(vistaRes</span> <span class="U2">ponse.data</span> <span class="U2">)&nbsp;&amp;&amp;&nbsp;(vist</span> <span class="U2">aResponse.</span> <span class="U2">data.total</span> <span class="U2">Items)&nbsp;&amp;&amp;&nbsp;</span> <span class="U2">(vistaResp</span> <span class="U2">onse.data.</span> <span class="U2">totalItems</span> <span class="U2">&nbsp;===&nbsp;1)&nbsp;&amp;&amp;</span> <span class="U2">&nbsp;(vistaRes</span> <span class="U2">ponse.data</span> <span class="U2">.items)&nbsp;&amp;&amp;</span> <span class="U2">&nbsp;(vistaRes</span> <span class="U2">ponse.data</span> <span class="U2">.items.len</span> <span class="U2">gth&nbsp;===&nbsp;1)</span> <span class="U2">)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">698</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;self.log</span> <span class="U2">.debug('vi</span> <span class="U2">sta-client</span> <span class="U2">.getDemogr</span> <span class="U2">aphics.han</span> <span class="U2">dleSuccess</span> <span class="U2">fulRespons</span> <span class="U2">e:&nbsp;success</span> <span class="U2">fully&nbsp;retr</span> <span class="U2">ieved&nbsp;demo</span> <span class="U2">graphics&nbsp;f</span> <span class="U2">or&nbsp;patient</span> <span class="U2">&nbsp;%s;&nbsp;vista</span> <span class="U2">Response:&nbsp;</span> <span class="U2">%s',&nbsp;pid,&nbsp;</span> <span class="U2">vistaRespo</span> <span class="U2">nse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">699</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;c</span> <span class="U2">allback(nu</span> <span class="U2">ll,&nbsp;vistaR</span> <span class="U2">esponse.da</span> <span class="U2">ta.items[0</span> <span class="U2">]);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">700</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">701</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">702</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.log.err</span> <span class="U2">or('vista-</span> <span class="U2">client.get</span> <span class="U2">Demographi</span> <span class="U2">cs.handleS</span> <span class="U2">uccessfulR</span> <span class="U2">esponse:&nbsp;&nbsp;</span> <span class="U2">Response&nbsp;d</span> <span class="U2">id&nbsp;not&nbsp;con</span> <span class="U2">tain&nbsp;the&nbsp;e</span> <span class="U2">xpected&nbsp;da</span> <span class="U2">ta.&nbsp;&nbsp;pid:&nbsp;</span> <span class="U2">%s;&nbsp;vistaR</span> <span class="U2">esponse:&nbsp;%</span> <span class="U2">j',&nbsp;pid,&nbsp;v</span> <span class="U2">istaRespon</span> <span class="U2">se);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">703</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;callb</span> <span class="U2">ack(util.f</span> <span class="U2">ormat('Res</span> <span class="U2">ponse&nbsp;did&nbsp;</span> <span class="U2">not&nbsp;contai</span> <span class="U2">n&nbsp;the&nbsp;expe</span> <span class="U2">cted&nbsp;data.</span> <span class="U2">&nbsp;&nbsp;pid:&nbsp;%s;</span> <span class="U2">&nbsp;vistaResp</span> <span class="U2">onse:&nbsp;%j',</span> <span class="U2">&nbsp;pid,&nbsp;vist</span> <span class="U2">aResponse)</span> <span class="U2">,&nbsp;vistaRes</span> <span class="U2">ponse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">704</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">705</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">706</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">707</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Thi</span> <span class="U2">s&nbsp;function</span> <span class="U2">&nbsp;handles&nbsp;c</span> <span class="U2">alling&nbsp;the</span> <span class="U2">&nbsp;callback&nbsp;</span> <span class="U2">for&nbsp;a&nbsp;fail</span> <span class="U2">ed&nbsp;respons</span> <span class="U2">e&nbsp;from&nbsp;the</span> <span class="U2">&nbsp;RPC.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">708</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">709</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;err</span> <span class="U2">or&nbsp;-&nbsp;The&nbsp;e</span> <span class="U2">rror&nbsp;messa</span> <span class="U2">ge&nbsp;to&nbsp;be&nbsp;s</span> <span class="U2">ent&nbsp;-&nbsp;beca</span> <span class="U2">use&nbsp;of&nbsp;the</span> <span class="U2">&nbsp;failed&nbsp;rP</span> <span class="U2">C&nbsp;call.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">710</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;vis</span> <span class="U2">taResponse</span> <span class="U2">&nbsp;-&nbsp;The&nbsp;res</span> <span class="U2">ult&nbsp;return</span> <span class="U2">ed&nbsp;from&nbsp;Vi</span> <span class="U2">stA&nbsp;throug</span> <span class="U2">h&nbsp;the&nbsp;RPC</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">711</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;pid</span> <span class="U2">&nbsp;-&nbsp;The&nbsp;pid</span> <span class="U2">&nbsp;that&nbsp;iden</span> <span class="U2">tifies&nbsp;the</span> <span class="U2">&nbsp;patient.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">712</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">713</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;functi</span> <span class="U2">on&nbsp;handleF</span> <span class="U2">ailedReque</span> <span class="U2">stResponse</span> <span class="U2">(error,&nbsp;vi</span> <span class="U2">staRespons</span> <span class="U2">e,&nbsp;pid)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">714</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.metrics</span> <span class="U2">.debug('Vi</span> <span class="U2">sta&nbsp;Get&nbsp;De</span> <span class="U2">mographics</span> <span class="U2">&nbsp;in&nbsp;Error'</span> <span class="U2">,&nbsp;metricsO</span> <span class="U2">bj);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">715</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;errorMes</span> <span class="U2">sage&nbsp;=&nbsp;'Fa</span> <span class="U2">iled&nbsp;to&nbsp;re</span> <span class="U2">trieve&nbsp;dem</span> <span class="U2">ographics&nbsp;</span> <span class="U2">for&nbsp;pid:&nbsp;'</span> <span class="U2">&nbsp;+&nbsp;pid&nbsp;+&nbsp;'</span> <span class="U2">;&nbsp;error:&nbsp;'</span> <span class="U2">&nbsp;+&nbsp;error;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">716</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.log.err</span> <span class="U2">or('vista-</span> <span class="U2">client.get</span> <span class="U2">Demographi</span> <span class="U2">cs.handleF</span> <span class="U2">ailedReque</span> <span class="U2">stResponse</span> <span class="U2">:&nbsp;%s&nbsp;vista</span> <span class="U2">Response:&nbsp;</span> <span class="U2">%j',&nbsp;error</span> <span class="U2">Message,&nbsp;v</span> <span class="U2">istaRespon</span> <span class="U2">se);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">717</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;callb</span> <span class="U2">ack(errorM</span> <span class="U2">essage,&nbsp;nu</span> <span class="U2">ll);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">718</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">719</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">720</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">721</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">722</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;This&nbsp;fu</span> <span class="U2">nction&nbsp;ret</span> <span class="U2">rieves&nbsp;the</span> <span class="U2">&nbsp;patient&nbsp;d</span> <span class="U2">ata&nbsp;by&nbsp;dom</span> <span class="U2">ain&nbsp;from&nbsp;a</span> <span class="U2">&nbsp;VistA&nbsp;sit</span> <span class="U2">e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">723</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">724</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;vistaId</span> <span class="U2">:&nbsp;The&nbsp;vist</span> <span class="U2">aId&nbsp;of&nbsp;the</span> <span class="U2">&nbsp;site.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">725</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;dfn:&nbsp;Th</span> <span class="U2">e&nbsp;dfn&nbsp;of&nbsp;t</span> <span class="U2">he&nbsp;patient</span> <span class="U2">.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">726</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;callbac</span> <span class="U2">k:&nbsp;The&nbsp;han</span> <span class="U2">dler&nbsp;to&nbsp;ca</span> <span class="U2">ll&nbsp;when&nbsp;th</span> <span class="U2">e&nbsp;data&nbsp;is&nbsp;</span> <span class="U2">received.&nbsp;</span> <span class="U2">&nbsp;It&nbsp;will&nbsp;p</span> <span class="U2">ass&nbsp;the&nbsp;in</span> <span class="U2">formation</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">727</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;in&nbsp;the&nbsp;</span> <span class="U2">response&nbsp;p</span> <span class="U2">arameter&nbsp;o</span> <span class="U2">f&nbsp;the&nbsp;call</span> <span class="U2">back.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">728</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">729</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">VistaClien</span> <span class="U2">t.prototyp</span> <span class="U2">e.getPatie</span> <span class="U2">ntDataByDo</span> <span class="U2">main&nbsp;=&nbsp;fun</span> <span class="U2">ction&nbsp;(vis</span> <span class="U2">taId,&nbsp;dfn,</span> <span class="U2">&nbsp;domain,&nbsp;c</span> <span class="U2">allback)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">730</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">lf&nbsp;=&nbsp;this;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">731</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me</span> <span class="U2">tricsObj&nbsp;=</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">732</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'s</span> <span class="U2">ubsystem':</span> <span class="U2">&nbsp;'Vista',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">733</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'a</span> <span class="U2">ction':&nbsp;'g</span> <span class="U2">etPatientD</span> <span class="U2">ataByDomai</span> <span class="U2">n',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">734</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'s</span> <span class="U2">ite':&nbsp;vist</span> <span class="U2">aId,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">735</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'p</span> <span class="U2">id':&nbsp;vista</span> <span class="U2">Id&nbsp;+&nbsp;';'&nbsp;+</span> <span class="U2">&nbsp;dfn,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">736</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'p</span> <span class="U2">rocess':&nbsp;u</span> <span class="U2">uid.v4(),</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">737</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'t</span> <span class="U2">imer':&nbsp;'st</span> <span class="U2">art'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">738</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">739</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.m</span> <span class="U2">etrics.deb</span> <span class="U2">ug('Vista&nbsp;</span> <span class="U2">Get&nbsp;Patien</span> <span class="U2">t&nbsp;Data',&nbsp;m</span> <span class="U2">etricsObj)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">740</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;metric</span> <span class="U2">sObj.timer</span> <span class="U2">&nbsp;=&nbsp;'stop';</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">741</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.l</span> <span class="U2">og.debug('</span> <span class="U2">vista-clie</span> <span class="U2">nt.getPati</span> <span class="U2">entDataByD</span> <span class="U2">omain:&nbsp;vis</span> <span class="U2">taId:&nbsp;%s;&nbsp;</span> <span class="U2">dfn:&nbsp;%s',&nbsp;</span> <span class="U2">vistaId,&nbsp;d</span> <span class="U2">fn);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">742</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;pi</span> <span class="U2">d&nbsp;=&nbsp;vistaI</span> <span class="U2">d&nbsp;+&nbsp;';'&nbsp;+&nbsp;</span> <span class="U2">dfn;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">743</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">744</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.l</span> <span class="U2">og.debug('</span> <span class="U2">vista-clie</span> <span class="U2">nt.getPati</span> <span class="U2">entDataByD</span> <span class="U2">omain:&nbsp;rpc</span> <span class="U2">Config&nbsp;for</span> <span class="U2">&nbsp;pid:&nbsp;%s;'</span> <span class="U2">,&nbsp;pid);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">745</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;rp</span> <span class="U2">cClient&nbsp;=&nbsp;</span> <span class="U2">self._getR</span> <span class="U2">pcClient(v</span> <span class="U2">istaId);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">746</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">747</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;pa</span> <span class="U2">rams;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">748</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">749</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rp</span> <span class="U2">cClient)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">750</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pa</span> <span class="U2">rams&nbsp;=&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">751</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"patien</span> <span class="U2">tId"':&nbsp;dfn</span> <span class="U2">,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">752</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"domain</span> <span class="U2">"':&nbsp;domain</span> <span class="U2">,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">753</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"extrac</span> <span class="U2">tSchema"':</span> <span class="U2">&nbsp;self.extr</span> <span class="U2">actSchema</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">754</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">755</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rp</span> <span class="U2">cClient.ex</span> <span class="U2">ecute('HMP</span> <span class="U2">&nbsp;GET&nbsp;PATIE</span> <span class="U2">NT&nbsp;DATA&nbsp;JS</span> <span class="U2">ON',&nbsp;param</span> <span class="U2">s,&nbsp;functio</span> <span class="U2">n&nbsp;(error,&nbsp;</span> <span class="U2">response)&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">756</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;self.log</span> <span class="U2">.debug('vi</span> <span class="U2">sta-client</span> <span class="U2">.getPatien</span> <span class="U2">tDataByDom</span> <span class="U2">ain:&nbsp;Compl</span> <span class="U2">eted&nbsp;calli</span> <span class="U2">ng&nbsp;RPC&nbsp;for</span> <span class="U2">&nbsp;pid:&nbsp;%s;&nbsp;</span> <span class="U2">error:&nbsp;%s'</span> <span class="U2">,&nbsp;pid,&nbsp;err</span> <span class="U2">or);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">757</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;self.log</span> <span class="U2">.trace('vi</span> <span class="U2">sta-client</span> <span class="U2">.getPatien</span> <span class="U2">tDataByDom</span> <span class="U2">ain:&nbsp;Compl</span> <span class="U2">eted&nbsp;calli</span> <span class="U2">ng&nbsp;RPC&nbsp;for</span> <span class="U2">&nbsp;pid:&nbsp;%s;&nbsp;</span> <span class="U2">result:&nbsp;%j</span> <span class="U2">',&nbsp;pid,&nbsp;re</span> <span class="U2">sponse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">758</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;(!err</span> <span class="U2">or)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">759</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;handleS</span> <span class="U2">uccessfulR</span> <span class="U2">esponse(re</span> <span class="U2">sponse,&nbsp;pi</span> <span class="U2">d);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">760</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}&nbsp;else&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">761</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;handleF</span> <span class="U2">ailedReque</span> <span class="U2">stResponse</span> <span class="U2">(error,&nbsp;re</span> <span class="U2">sponse,&nbsp;pi</span> <span class="U2">d);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">762</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">763</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">764</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">765</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">766</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;handl</span> <span class="U2">eFailedReq</span> <span class="U2">uestRespon</span> <span class="U2">se('Failed</span> <span class="U2">&nbsp;to&nbsp;subscr</span> <span class="U2">ibe&nbsp;patien</span> <span class="U2">t&nbsp;for&nbsp;pid:</span> <span class="U2">&nbsp;'&nbsp;+&nbsp;pid&nbsp;+</span> <span class="U2">&nbsp;',&nbsp;invali</span> <span class="U2">d&nbsp;configur</span> <span class="U2">ation&nbsp;info</span> <span class="U2">rmation',&nbsp;</span> <span class="U2">null,&nbsp;pid)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">767</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">768</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">769</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">770</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Thi</span> <span class="U2">s&nbsp;function</span> <span class="U2">&nbsp;handles&nbsp;c</span> <span class="U2">alling&nbsp;the</span> <span class="U2">&nbsp;callback&nbsp;</span> <span class="U2">for&nbsp;a&nbsp;suce</span> <span class="U2">ssful&nbsp;resp</span> <span class="U2">onse&nbsp;from&nbsp;</span> <span class="U2">the&nbsp;RPC.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">771</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">772</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;vis</span> <span class="U2">taResponse</span> <span class="U2">&nbsp;-&nbsp;the&nbsp;res</span> <span class="U2">ult&nbsp;return</span> <span class="U2">ed&nbsp;from&nbsp;Vi</span> <span class="U2">stA&nbsp;throug</span> <span class="U2">h&nbsp;the&nbsp;RPC.</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">773</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;pid</span> <span class="U2">&nbsp;-&nbsp;The&nbsp;pid</span> <span class="U2">&nbsp;that&nbsp;iden</span> <span class="U2">tifies&nbsp;the</span> <span class="U2">&nbsp;patient.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">774</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">775</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;functi</span> <span class="U2">on&nbsp;handleS</span> <span class="U2">uccessfulR</span> <span class="U2">esponse(vi</span> <span class="U2">staRespons</span> <span class="U2">e,&nbsp;pid)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">776</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.metrics</span> <span class="U2">.debug('Vi</span> <span class="U2">sta&nbsp;Get&nbsp;Pa</span> <span class="U2">tient&nbsp;Data</span> <span class="U2">',&nbsp;metrics</span> <span class="U2">Obj);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">777</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;(typeof&nbsp;v</span> <span class="U2">istaRespon</span> <span class="U2">se&nbsp;===&nbsp;'st</span> <span class="U2">ring')&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">778</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;try&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">779</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self</span> <span class="U2">.log.debug</span> <span class="U2">('vista-cl</span> <span class="U2">ient.getPa</span> <span class="U2">tientDataB</span> <span class="U2">yDomain.ha</span> <span class="U2">ndleSucces</span> <span class="U2">sfulRespon</span> <span class="U2">se:&nbsp;Respon</span> <span class="U2">se&nbsp;was&nbsp;a&nbsp;s</span> <span class="U2">tring&nbsp;-&nbsp;pa</span> <span class="U2">rse&nbsp;to&nbsp;an&nbsp;</span> <span class="U2">object.');</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">780</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vist</span> <span class="U2">aResponse&nbsp;</span> <span class="U2">=&nbsp;JSON.par</span> <span class="U2">se(vistaRe</span> <span class="U2">sponse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">781</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}&nbsp;catch&nbsp;</span> <span class="U2">(e)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">782</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self</span> <span class="U2">.log.error</span> <span class="U2">('vista-cl</span> <span class="U2">ient.getPa</span> <span class="U2">tientDataB</span> <span class="U2">yDomain.ha</span> <span class="U2">ndleSucces</span> <span class="U2">sfulRespon</span> <span class="U2">se:&nbsp;Failed</span> <span class="U2">&nbsp;to&nbsp;parse&nbsp;</span> <span class="U2">response&nbsp;f</span> <span class="U2">or&nbsp;pid:&nbsp;%s</span> <span class="U2">;&nbsp;vistaRes</span> <span class="U2">ponse:&nbsp;%s'</span> <span class="U2">,&nbsp;pid,&nbsp;vis</span> <span class="U2">taResponse</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">783</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;callbac</span> <span class="U2">k('Failed&nbsp;</span> <span class="U2">to&nbsp;parse&nbsp;r</span> <span class="U2">esponse.',</span> <span class="U2">&nbsp;vistaResp</span> <span class="U2">onse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">784</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">785</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">786</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">787</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span> <span class="U2">&nbsp;Find&nbsp;the&nbsp;</span> <span class="U2">actual&nbsp;dat</span> <span class="U2">a&nbsp;and&nbsp;retu</span> <span class="U2">rn&nbsp;that...</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">788</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">---</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">789</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;(vistaRes</span> <span class="U2">ponse&nbsp;&amp;&amp;&nbsp;v</span> <span class="U2">istaRespon</span> <span class="U2">se.data&nbsp;&amp;&amp;</span> <span class="U2">&nbsp;!_.isUnde</span> <span class="U2">fined(vist</span> <span class="U2">aResponse.</span> <span class="U2">data.items</span> <span class="U2">))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">790</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;self.log</span> <span class="U2">.debug('vi</span> <span class="U2">sta-client</span> <span class="U2">.getPatien</span> <span class="U2">tDataByDom</span> <span class="U2">ain.handle</span> <span class="U2">Successful</span> <span class="U2">Response:&nbsp;</span> <span class="U2">successful</span> <span class="U2">ly&nbsp;retriev</span> <span class="U2">ed&nbsp;domain&nbsp;</span> <span class="U2">data&nbsp;for&nbsp;p</span> <span class="U2">atient&nbsp;%s;</span> <span class="U2">&nbsp;vistaResp</span> <span class="U2">onse:&nbsp;%s',</span> <span class="U2">&nbsp;pid,&nbsp;vist</span> <span class="U2">aResponse)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">791</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;c</span> <span class="U2">allback(nu</span> <span class="U2">ll,&nbsp;vistaR</span> <span class="U2">esponse.da</span> <span class="U2">ta.items);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">792</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">793</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">794</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.log.err</span> <span class="U2">or('vista-</span> <span class="U2">client.get</span> <span class="U2">PatientDat</span> <span class="U2">aByDomain.</span> <span class="U2">handleSucc</span> <span class="U2">essfulResp</span> <span class="U2">onse:&nbsp;&nbsp;Res</span> <span class="U2">ponse&nbsp;did&nbsp;</span> <span class="U2">not&nbsp;contai</span> <span class="U2">n&nbsp;the&nbsp;expe</span> <span class="U2">cted&nbsp;data.</span> <span class="U2">&nbsp;&nbsp;pid:&nbsp;%s;</span> <span class="U2">&nbsp;vistaResp</span> <span class="U2">onse:&nbsp;%j',</span> <span class="U2">&nbsp;pid,&nbsp;vist</span> <span class="U2">aResponse)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">795</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;callb</span> <span class="U2">ack(util.f</span> <span class="U2">ormat('Res</span> <span class="U2">ponse&nbsp;did&nbsp;</span> <span class="U2">not&nbsp;contai</span> <span class="U2">n&nbsp;the&nbsp;expe</span> <span class="U2">cted&nbsp;data.</span> <span class="U2">&nbsp;&nbsp;pid:&nbsp;%s;</span> <span class="U2">&nbsp;vistaResp</span> <span class="U2">onse:&nbsp;%j',</span> <span class="U2">&nbsp;pid,&nbsp;vist</span> <span class="U2">aResponse)</span> <span class="U2">,&nbsp;vistaRes</span> <span class="U2">ponse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">796</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">797</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">798</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">799</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Thi</span> <span class="U2">s&nbsp;function</span> <span class="U2">&nbsp;handles&nbsp;c</span> <span class="U2">alling&nbsp;the</span> <span class="U2">&nbsp;callback&nbsp;</span> <span class="U2">for&nbsp;a&nbsp;fail</span> <span class="U2">ed&nbsp;respons</span> <span class="U2">e&nbsp;from&nbsp;the</span> <span class="U2">&nbsp;RPC.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">800</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">801</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;err</span> <span class="U2">or&nbsp;-&nbsp;The&nbsp;e</span> <span class="U2">rror&nbsp;messa</span> <span class="U2">ge&nbsp;to&nbsp;be&nbsp;s</span> <span class="U2">ent&nbsp;-&nbsp;beca</span> <span class="U2">use&nbsp;of&nbsp;the</span> <span class="U2">&nbsp;failed&nbsp;rP</span> <span class="U2">C&nbsp;call.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">802</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;vis</span> <span class="U2">taResponse</span> <span class="U2">&nbsp;-&nbsp;The&nbsp;res</span> <span class="U2">ult&nbsp;return</span> <span class="U2">ed&nbsp;from&nbsp;Vi</span> <span class="U2">stA&nbsp;throug</span> <span class="U2">h&nbsp;the&nbsp;RPC</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">803</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;pid</span> <span class="U2">&nbsp;-&nbsp;The&nbsp;pid</span> <span class="U2">&nbsp;that&nbsp;iden</span> <span class="U2">tifies&nbsp;the</span> <span class="U2">&nbsp;patient.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">804</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">805</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;functi</span> <span class="U2">on&nbsp;handleF</span> <span class="U2">ailedReque</span> <span class="U2">stResponse</span> <span class="U2">(error,&nbsp;vi</span> <span class="U2">staRespons</span> <span class="U2">e,&nbsp;pid)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">806</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.metrics</span> <span class="U2">.debug('Vi</span> <span class="U2">sta&nbsp;Get&nbsp;Pa</span> <span class="U2">tient&nbsp;Data</span> <span class="U2">&nbsp;in&nbsp;Error'</span> <span class="U2">,&nbsp;metricsO</span> <span class="U2">bj);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">807</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;errorMes</span> <span class="U2">sage&nbsp;=&nbsp;'Fa</span> <span class="U2">iled&nbsp;to&nbsp;re</span> <span class="U2">trieve&nbsp;pat</span> <span class="U2">ient&nbsp;data&nbsp;</span> <span class="U2">for&nbsp;pid:&nbsp;'</span> <span class="U2">&nbsp;+&nbsp;pid&nbsp;+&nbsp;'</span> <span class="U2">;&nbsp;error:&nbsp;'</span> <span class="U2">&nbsp;+&nbsp;error;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">808</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.log.err</span> <span class="U2">or('vista-</span> <span class="U2">client.get</span> <span class="U2">PatientDat</span> <span class="U2">aByDomain.</span> <span class="U2">handleFail</span> <span class="U2">edRequestR</span> <span class="U2">esponse:&nbsp;%</span> <span class="U2">s&nbsp;vistaRes</span> <span class="U2">ponse:&nbsp;%j'</span> <span class="U2">,&nbsp;errorMes</span> <span class="U2">sage,&nbsp;vist</span> <span class="U2">aResponse)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">809</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;callb</span> <span class="U2">ack(errorM</span> <span class="U2">essage,&nbsp;nu</span> <span class="U2">ll);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">810</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">811</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">812</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">813</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">VistaClien</span> <span class="U2">t.prototyp</span> <span class="U2">e.fetchApp</span> <span class="U2">ointment&nbsp;=</span> <span class="U2">&nbsp;function&nbsp;</span> <span class="U2">(vistaId,&nbsp;</span> <span class="U2">batchCallb</span> <span class="U2">ack)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">814</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">lf&nbsp;=&nbsp;this;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">815</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me</span> <span class="U2">tricsObj&nbsp;=</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">816</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'s</span> <span class="U2">ubsystem':</span> <span class="U2">&nbsp;'Vista',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">817</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'a</span> <span class="U2">ction':&nbsp;'g</span> <span class="U2">etDemograp</span> <span class="U2">hics',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">818</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'s</span> <span class="U2">ite':&nbsp;vist</span> <span class="U2">aId,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">819</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'p</span> <span class="U2">rocess':&nbsp;u</span> <span class="U2">uid.v4(),</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">820</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'t</span> <span class="U2">imer':&nbsp;'st</span> <span class="U2">art'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">821</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">822</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.m</span> <span class="U2">etrics.deb</span> <span class="U2">ug('Vista&nbsp;</span> <span class="U2">Fetch&nbsp;Appo</span> <span class="U2">intment',&nbsp;</span> <span class="U2">metricsObj</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">823</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;metric</span> <span class="U2">sObj.timer</span> <span class="U2">&nbsp;=&nbsp;'stop';</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">824</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;rp</span> <span class="U2">cClient&nbsp;=&nbsp;</span> <span class="U2">self._getR</span> <span class="U2">pcClient(v</span> <span class="U2">istaId);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">825</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">826</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.l</span> <span class="U2">og.debug('</span> <span class="U2">vista-clie</span> <span class="U2">nt.fetchAp</span> <span class="U2">pointment:</span> <span class="U2">&nbsp;rpcConfig</span> <span class="U2">&nbsp;for&nbsp;fetch</span> <span class="U2">Appointmen</span> <span class="U2">t');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">827</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rp</span> <span class="U2">cClient)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">828</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;paramete</span> <span class="U2">r&nbsp;=&nbsp;[];</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">829</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rp</span> <span class="U2">cClient.ex</span> <span class="U2">ecute('HMP</span> <span class="U2">&nbsp;PATIENT&nbsp;A</span> <span class="U2">CTIVITY',&nbsp;</span> <span class="U2">parameter,</span> <span class="U2">&nbsp;function&nbsp;</span> <span class="U2">(error,&nbsp;re</span> <span class="U2">sponse)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">830</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;(erro</span> <span class="U2">r)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">831</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;handleF</span> <span class="U2">ailedReque</span> <span class="U2">stWithRawR</span> <span class="U2">esponse(ut</span> <span class="U2">il.format(</span> <span class="U2">'vista-cli</span> <span class="U2">ent.fetchA</span> <span class="U2">ppointment</span> <span class="U2">:&nbsp;Error&nbsp;re</span> <span class="U2">ceived&nbsp;fro</span> <span class="U2">m&nbsp;RPC&nbsp;call</span> <span class="U2">.&nbsp;&nbsp;Error:&nbsp;</span> <span class="U2">%s',&nbsp;error</span> <span class="U2">),&nbsp;respons</span> <span class="U2">e);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">832</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">833</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">834</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;(_.is</span> <span class="U2">Empty(resp</span> <span class="U2">onse)&nbsp;||&nbsp;(</span> <span class="U2">_.isString</span> <span class="U2">(response)</span> <span class="U2">&nbsp;&amp;&amp;&nbsp;_.isEm</span> <span class="U2">pty(respon</span> <span class="U2">se.trim())</span> <span class="U2">))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">835</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;handleS</span> <span class="U2">uccessfulR</span> <span class="U2">esponse(JS</span> <span class="U2">ON.parse('</span> <span class="U2">[]'));</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">836</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}&nbsp;else&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">837</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self</span> <span class="U2">.log.debug</span> <span class="U2">('vista-cl</span> <span class="U2">ient.fetch</span> <span class="U2">Appointmen</span> <span class="U2">t:&nbsp;Complet</span> <span class="U2">ed&nbsp;calling</span> <span class="U2">&nbsp;RPC.&nbsp;Got&nbsp;</span> <span class="U2">response&nbsp;b</span> <span class="U2">ack&nbsp;for&nbsp;vi</span> <span class="U2">staId:&nbsp;%s;</span> <span class="U2">&nbsp;response&nbsp;</span> <span class="U2">(String):&nbsp;</span> <span class="U2">%s',&nbsp;vista</span> <span class="U2">Id,&nbsp;respon</span> <span class="U2">se);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">838</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span> <span class="U2">jsonRespon</span> <span class="U2">se;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">839</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">840</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">jsonRespon</span> <span class="U2">se&nbsp;=&nbsp;JSON.</span> <span class="U2">parse(resp</span> <span class="U2">onse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">841</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">self.log.d</span> <span class="U2">ebug('vist</span> <span class="U2">a-client.f</span> <span class="U2">etchAppoin</span> <span class="U2">tment:&nbsp;Com</span> <span class="U2">pleted&nbsp;cal</span> <span class="U2">ling&nbsp;RPC:&nbsp;</span> <span class="U2">getPtUpdat</span> <span class="U2">es:&nbsp;for&nbsp;vi</span> <span class="U2">staId:&nbsp;%s;</span> <span class="U2">&nbsp;jsonRespo</span> <span class="U2">nse:&nbsp;%j',&nbsp;</span> <span class="U2">vistaId,&nbsp;j</span> <span class="U2">sonRespons</span> <span class="U2">e);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">842</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">return&nbsp;han</span> <span class="U2">dleSuccess</span> <span class="U2">fulRespons</span> <span class="U2">e(jsonResp</span> <span class="U2">onse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">843</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;ca</span> <span class="U2">tch&nbsp;(e)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">844</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">return&nbsp;han</span> <span class="U2">dleFailedR</span> <span class="U2">equestWith</span> <span class="U2">RawRespons</span> <span class="U2">e(util.for</span> <span class="U2">mat('vista</span> <span class="U2">-client.fe</span> <span class="U2">tchAppoint</span> <span class="U2">ment:&nbsp;Fail</span> <span class="U2">ed&nbsp;to&nbsp;pars</span> <span class="U2">e&nbsp;the&nbsp;vist</span> <span class="U2">a&nbsp;response</span> <span class="U2">&nbsp;into&nbsp;JSON</span> <span class="U2">&nbsp;for&nbsp;vista</span> <span class="U2">Id:&nbsp;%s;&nbsp;ex</span> <span class="U2">ception:&nbsp;%</span> <span class="U2">j',&nbsp;vistaI</span> <span class="U2">d,&nbsp;e),&nbsp;res</span> <span class="U2">ponse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">845</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">846</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">847</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;C</span> <span class="U2">ommenting&nbsp;</span> <span class="U2">this&nbsp;code&nbsp;</span> <span class="U2">out...&nbsp;It&nbsp;</span> <span class="U2">should&nbsp;hav</span> <span class="U2">e&nbsp;been&nbsp;dea</span> <span class="U2">d&nbsp;code&nbsp;-&nbsp;b</span> <span class="U2">ut&nbsp;could&nbsp;a</span> <span class="U2">lso&nbsp;have&nbsp;b</span> <span class="U2">een&nbsp;bad&nbsp;co</span> <span class="U2">de.&nbsp;&nbsp;The&nbsp;h</span> <span class="U2">andleSucce</span> <span class="U2">ssfulRespo</span> <span class="U2">nse&nbsp;call&nbsp;a</span> <span class="U2">bove&nbsp;did&nbsp;n</span> <span class="U2">ot&nbsp;have&nbsp;a&nbsp;</span> <span class="U2">return</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">848</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;o</span> <span class="U2">n&nbsp;it.&nbsp;&nbsp;Tha</span> <span class="U2">t&nbsp;would&nbsp;po</span> <span class="U2">tentially&nbsp;</span> <span class="U2">cause&nbsp;two&nbsp;</span> <span class="U2">call&nbsp;backs</span> <span class="U2">&nbsp;from&nbsp;ths&nbsp;</span> <span class="U2">routine.&nbsp;&nbsp;</span> <span class="U2">Not&nbsp;a&nbsp;good</span> <span class="U2">&nbsp;idea.&nbsp;&nbsp;I&nbsp;</span> <span class="U2">fixed&nbsp;the&nbsp;</span> <span class="U2">one&nbsp;above&nbsp;</span> <span class="U2">-&nbsp;which&nbsp;ma</span> <span class="U2">kes&nbsp;this&nbsp;c</span> <span class="U2">ode&nbsp;never&nbsp;</span> <span class="U2">called.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">849</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;c</span> <span class="U2">ommenting&nbsp;</span> <span class="U2">it&nbsp;out&nbsp;-&nbsp;j</span> <span class="U2">ust&nbsp;in&nbsp;cas</span> <span class="U2">e&nbsp;there&nbsp;wa</span> <span class="U2">s&nbsp;some&nbsp;rea</span> <span class="U2">son&nbsp;some&nbsp;o</span> <span class="U2">f&nbsp;this&nbsp;beh</span> <span class="U2">avior&nbsp;was&nbsp;</span> <span class="U2">really&nbsp;wan</span> <span class="U2">ted.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">850</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//--</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-------</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">851</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;i</span> <span class="U2">f&nbsp;(!_.isAr</span> <span class="U2">ray(jsonRe</span> <span class="U2">sponse))&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">852</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;return&nbsp;</span> <span class="U2">handleFail</span> <span class="U2">edRequestR</span> <span class="U2">esponse('v</span> <span class="U2">ista-clien</span> <span class="U2">t.fetchApp</span> <span class="U2">ointment:&nbsp;</span> <span class="U2">jsonRespon</span> <span class="U2">se&nbsp;did&nbsp;not</span> <span class="U2">&nbsp;contain&nbsp;a</span> <span class="U2">ny&nbsp;data&nbsp;at</span> <span class="U2">tribute.',</span> <span class="U2">&nbsp;jsonRespo</span> <span class="U2">nse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">853</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;}</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">854</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">855</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">856</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">857</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">858</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;handl</span> <span class="U2">eFailedReq</span> <span class="U2">uestWithRa</span> <span class="U2">wResponse(</span> <span class="U2">'vista-cli</span> <span class="U2">ent.fetchA</span> <span class="U2">ppointment</span> <span class="U2">:&nbsp;Failed&nbsp;t</span> <span class="U2">o&nbsp;call&nbsp;RPC</span> <span class="U2">&nbsp;getPtUpda</span> <span class="U2">tes&nbsp;for&nbsp;vi</span> <span class="U2">staId:&nbsp;'&nbsp;+</span> <span class="U2">&nbsp;vistaId&nbsp;+</span> <span class="U2">&nbsp;',&nbsp;invali</span> <span class="U2">d&nbsp;configur</span> <span class="U2">ation&nbsp;info</span> <span class="U2">rmation.',</span> <span class="U2">&nbsp;null);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">859</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">860</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">861</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">862</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">863</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Thi</span> <span class="U2">s&nbsp;function</span> <span class="U2">&nbsp;handles&nbsp;c</span> <span class="U2">alling&nbsp;the</span> <span class="U2">&nbsp;callback&nbsp;</span> <span class="U2">for&nbsp;a&nbsp;suce</span> <span class="U2">ssful&nbsp;resp</span> <span class="U2">onse&nbsp;from&nbsp;</span> <span class="U2">the&nbsp;RPC.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">864</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">865</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;jso</span> <span class="U2">nResponse&nbsp;</span> <span class="U2">-&nbsp;the&nbsp;resu</span> <span class="U2">lt&nbsp;returne</span> <span class="U2">d&nbsp;from&nbsp;Vis</span> <span class="U2">tA&nbsp;through</span> <span class="U2">&nbsp;the&nbsp;RPC&nbsp;i</span> <span class="U2">n&nbsp;JSON&nbsp;for</span> <span class="U2">mat.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">866</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">867</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;functi</span> <span class="U2">on&nbsp;handleS</span> <span class="U2">uccessfulR</span> <span class="U2">esponse(js</span> <span class="U2">onResponse</span> <span class="U2">)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">868</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.metrics</span> <span class="U2">.debug('Vi</span> <span class="U2">sta&nbsp;Fetch&nbsp;</span> <span class="U2">Appointmen</span> <span class="U2">t',&nbsp;metric</span> <span class="U2">sObj);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">869</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.log.deb</span> <span class="U2">ug('vista-</span> <span class="U2">subscribe.</span> <span class="U2">fetchAppoi</span> <span class="U2">ntment.han</span> <span class="U2">dleSuccess</span> <span class="U2">fulRespons</span> <span class="U2">e:&nbsp;Success</span> <span class="U2">fully&nbsp;call</span> <span class="U2">ed&nbsp;RPC.',&nbsp;</span> <span class="U2">jsonRespon</span> <span class="U2">se);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">870</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;batch</span> <span class="U2">Callback(n</span> <span class="U2">ull,&nbsp;jsonR</span> <span class="U2">esponse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">871</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">872</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">873</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">874</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Thi</span> <span class="U2">s&nbsp;function</span> <span class="U2">&nbsp;handles&nbsp;c</span> <span class="U2">alling&nbsp;the</span> <span class="U2">&nbsp;callback&nbsp;</span> <span class="U2">for&nbsp;a&nbsp;fail</span> <span class="U2">ed&nbsp;respons</span> <span class="U2">e&nbsp;from&nbsp;the</span> <span class="U2">&nbsp;RPC.&nbsp;&nbsp;Whe</span> <span class="U2">n</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">875</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;we&nbsp;</span> <span class="U2">have&nbsp;to&nbsp;lo</span> <span class="U2">g&nbsp;an&nbsp;error</span> <span class="U2">&nbsp;where&nbsp;we&nbsp;</span> <span class="U2">have&nbsp;not&nbsp;o</span> <span class="U2">r&nbsp;cannot&nbsp;p</span> <span class="U2">arse&nbsp;the&nbsp;r</span> <span class="U2">esponse&nbsp;-&nbsp;</span> <span class="U2">so&nbsp;we&nbsp;need</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">876</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;to&nbsp;</span> <span class="U2">deal&nbsp;with&nbsp;</span> <span class="U2">it&nbsp;as&nbsp;a&nbsp;ra</span> <span class="U2">w&nbsp;response</span> <span class="U2">.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">877</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">878</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;err</span> <span class="U2">or&nbsp;-&nbsp;The&nbsp;e</span> <span class="U2">rror&nbsp;messa</span> <span class="U2">ge&nbsp;to&nbsp;be&nbsp;s</span> <span class="U2">ent&nbsp;-&nbsp;beca</span> <span class="U2">use&nbsp;of&nbsp;the</span> <span class="U2">&nbsp;failed&nbsp;rP</span> <span class="U2">C&nbsp;call.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">879</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;raw</span> <span class="U2">VistaRespo</span> <span class="U2">nse&nbsp;-&nbsp;The&nbsp;</span> <span class="U2">result&nbsp;ret</span> <span class="U2">urned&nbsp;from</span> <span class="U2">&nbsp;VistA&nbsp;thr</span> <span class="U2">ough&nbsp;the&nbsp;R</span> <span class="U2">PC&nbsp;in&nbsp;its&nbsp;</span> <span class="U2">original&nbsp;f</span> <span class="U2">orm.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">880</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">881</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;functi</span> <span class="U2">on&nbsp;handleF</span> <span class="U2">ailedReque</span> <span class="U2">stWithRawR</span> <span class="U2">esponse(er</span> <span class="U2">ror,&nbsp;rawVi</span> <span class="U2">staRespons</span> <span class="U2">e)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">882</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.metrics</span> <span class="U2">.debug('Vi</span> <span class="U2">sta&nbsp;Fetch&nbsp;</span> <span class="U2">Appointmen</span> <span class="U2">t&nbsp;in&nbsp;Error</span> <span class="U2">',&nbsp;metrics</span> <span class="U2">Obj);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">883</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.log.err</span> <span class="U2">or('%s&nbsp;raw</span> <span class="U2">VistaRespo</span> <span class="U2">nse:&nbsp;%s',&nbsp;</span> <span class="U2">error,&nbsp;raw</span> <span class="U2">VistaRespo</span> <span class="U2">nse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">884</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;batch</span> <span class="U2">Callback(e</span> <span class="U2">rror,&nbsp;rawV</span> <span class="U2">istaRespon</span> <span class="U2">se);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">885</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">886</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">887</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">888</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-------</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">889</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;This&nbsp;fu</span> <span class="U2">nction&nbsp;mak</span> <span class="U2">es&nbsp;an&nbsp;RPC&nbsp;</span> <span class="U2">call&nbsp;to&nbsp;Vi</span> <span class="U2">stA&nbsp;to&nbsp;uns</span> <span class="U2">ubscribe&nbsp;t</span> <span class="U2">he&nbsp;patient</span> <span class="U2">.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">890</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">891</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;pid&nbsp;-&nbsp;T</span> <span class="U2">he&nbsp;pid&nbsp;of&nbsp;</span> <span class="U2">the&nbsp;patien</span> <span class="U2">t&nbsp;to&nbsp;be&nbsp;un</span> <span class="U2">subscribed</span> <span class="U2">.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">892</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;unsubsc</span> <span class="U2">ribeCallba</span> <span class="U2">ck&nbsp;-&nbsp;The&nbsp;i</span> <span class="U2">s&nbsp;the&nbsp;func</span> <span class="U2">tion&nbsp;that&nbsp;</span> <span class="U2">is&nbsp;called&nbsp;</span> <span class="U2">when&nbsp;the&nbsp;R</span> <span class="U2">PC&nbsp;call&nbsp;is</span> <span class="U2">&nbsp;completed</span> <span class="U2">.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">893</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-------</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">894</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">VistaClien</span> <span class="U2">t.prototyp</span> <span class="U2">e.unsubscr</span> <span class="U2">ibe&nbsp;=&nbsp;func</span> <span class="U2">tion&nbsp;(pid,</span> <span class="U2">&nbsp;unsubscri</span> <span class="U2">beCallback</span> <span class="U2">)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">895</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">lf&nbsp;=&nbsp;this;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">896</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me</span> <span class="U2">tricsObj&nbsp;=</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">897</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'s</span> <span class="U2">ubsystem':</span> <span class="U2">&nbsp;'Vista',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">898</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'a</span> <span class="U2">ction':&nbsp;'u</span> <span class="U2">nsubscribe</span> <span class="U2">',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">899</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'p</span> <span class="U2">id':&nbsp;pid,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">900</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'p</span> <span class="U2">rocess':&nbsp;u</span> <span class="U2">uid.v4(),</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">901</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'t</span> <span class="U2">imer':&nbsp;'st</span> <span class="U2">art'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">902</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">903</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.m</span> <span class="U2">etrics.deb</span> <span class="U2">ug('Vista&nbsp;</span> <span class="U2">Unsubscrib</span> <span class="U2">e',&nbsp;metric</span> <span class="U2">sObj);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">904</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;metric</span> <span class="U2">sObj.timer</span> <span class="U2">&nbsp;=&nbsp;'stop';</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">905</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.l</span> <span class="U2">og.debug('</span> <span class="U2">vista-clie</span> <span class="U2">nt.unsubsc</span> <span class="U2">ribe:&nbsp;pid:</span> <span class="U2">&nbsp;%s',&nbsp;pid)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">906</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;vi</span> <span class="U2">staId&nbsp;=&nbsp;id</span> <span class="U2">Util.extra</span> <span class="U2">ctSiteFrom</span> <span class="U2">Pid(pid);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">907</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">908</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.l</span> <span class="U2">og.debug('</span> <span class="U2">vista-clie</span> <span class="U2">nt.unsubsc</span> <span class="U2">ribe:&nbsp;rpcC</span> <span class="U2">onfig&nbsp;for&nbsp;</span> <span class="U2">pid:&nbsp;%s',&nbsp;</span> <span class="U2">pid);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">909</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;rp</span> <span class="U2">cClient&nbsp;=&nbsp;</span> <span class="U2">self._getR</span> <span class="U2">pcClient(v</span> <span class="U2">istaId);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">910</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">911</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;pa</span> <span class="U2">rams;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">912</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">913</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rp</span> <span class="U2">cClient)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">914</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pa</span> <span class="U2">rams&nbsp;=&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">915</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"hmpSrv</span> <span class="U2">Id"':&nbsp;self</span> <span class="U2">.hmpServer</span> <span class="U2">Id,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">916</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"pid"':</span> <span class="U2">&nbsp;pid</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">917</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">918</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rp</span> <span class="U2">cClient.ex</span> <span class="U2">ecute('HMP</span> <span class="U2">DJFS&nbsp;DELSU</span> <span class="U2">B',&nbsp;params</span> <span class="U2">,&nbsp;function</span> <span class="U2">&nbsp;(error,&nbsp;r</span> <span class="U2">esponse)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">919</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;self.log</span> <span class="U2">.debug('vi</span> <span class="U2">sta-client</span> <span class="U2">.unsubscri</span> <span class="U2">be:&nbsp;Comple</span> <span class="U2">ted&nbsp;callin</span> <span class="U2">g&nbsp;RPC&nbsp;for&nbsp;</span> <span class="U2">pid:&nbsp;%s;&nbsp;e</span> <span class="U2">rror:&nbsp;%s',</span> <span class="U2">&nbsp;pid,&nbsp;erro</span> <span class="U2">r);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">920</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;self.log</span> <span class="U2">.debug('vi</span> <span class="U2">sta-client</span> <span class="U2">.unsubscri</span> <span class="U2">be:&nbsp;Comple</span> <span class="U2">ted&nbsp;callin</span> <span class="U2">g&nbsp;RPC&nbsp;for&nbsp;</span> <span class="U2">pid:&nbsp;%s;&nbsp;r</span> <span class="U2">esult:&nbsp;%j'</span> <span class="U2">,&nbsp;pid,&nbsp;res</span> <span class="U2">ponse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">921</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;(!err</span> <span class="U2">or)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">922</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;handleS</span> <span class="U2">uccessfulR</span> <span class="U2">esponse(re</span> <span class="U2">sponse,&nbsp;pi</span> <span class="U2">d);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">923</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}&nbsp;else&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">924</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;handleF</span> <span class="U2">ailedReque</span> <span class="U2">stResponse</span> <span class="U2">(util.form</span> <span class="U2">at('vista-</span> <span class="U2">client.uns</span> <span class="U2">ubscribe:&nbsp;</span> <span class="U2">Error&nbsp;rece</span> <span class="U2">ived&nbsp;from&nbsp;</span> <span class="U2">VistA&nbsp;when</span> <span class="U2">&nbsp;attemptin</span> <span class="U2">g&nbsp;to&nbsp;unsub</span> <span class="U2">scribe&nbsp;pat</span> <span class="U2">ient.&nbsp;&nbsp;err</span> <span class="U2">or:&nbsp;%s;&nbsp;pi</span> <span class="U2">d:&nbsp;%s.',&nbsp;e</span> <span class="U2">rror,&nbsp;pid)</span> <span class="U2">,&nbsp;response</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">925</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">926</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">927</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">928</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">929</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;handl</span> <span class="U2">eFailedReq</span> <span class="U2">uestRespon</span> <span class="U2">se(util.fo</span> <span class="U2">rmat('vist</span> <span class="U2">a-client.u</span> <span class="U2">nsubscribe</span> <span class="U2">:&nbsp;Failed&nbsp;t</span> <span class="U2">o&nbsp;unsubscr</span> <span class="U2">ibe&nbsp;patien</span> <span class="U2">t&nbsp;for&nbsp;pid:</span> <span class="U2">&nbsp;%s&nbsp;-&nbsp;inva</span> <span class="U2">lid&nbsp;config</span> <span class="U2">uration&nbsp;in</span> <span class="U2">formation.</span> <span class="U2">',&nbsp;pid),&nbsp;n</span> <span class="U2">ull);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">930</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">931</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">932</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">933</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Thi</span> <span class="U2">s&nbsp;function</span> <span class="U2">&nbsp;handles&nbsp;c</span> <span class="U2">alling&nbsp;the</span> <span class="U2">&nbsp;callback&nbsp;</span> <span class="U2">for&nbsp;a&nbsp;suce</span> <span class="U2">ssful&nbsp;resp</span> <span class="U2">onse&nbsp;from&nbsp;</span> <span class="U2">the&nbsp;RPC.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">934</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">935</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;vis</span> <span class="U2">taResponse</span> <span class="U2">&nbsp;-&nbsp;the&nbsp;res</span> <span class="U2">ult&nbsp;return</span> <span class="U2">ed&nbsp;from&nbsp;Vi</span> <span class="U2">stA&nbsp;throug</span> <span class="U2">h&nbsp;the&nbsp;RPC.</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">936</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;pid</span> <span class="U2">&nbsp;-&nbsp;The&nbsp;pid</span> <span class="U2">&nbsp;that&nbsp;iden</span> <span class="U2">tifies&nbsp;the</span> <span class="U2">&nbsp;patient.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">937</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">938</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;functi</span> <span class="U2">on&nbsp;handleS</span> <span class="U2">uccessfulR</span> <span class="U2">esponse(vi</span> <span class="U2">staRespons</span> <span class="U2">e,&nbsp;pid)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">939</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.metrics</span> <span class="U2">.debug('Vi</span> <span class="U2">sta&nbsp;Unsubs</span> <span class="U2">cribe',&nbsp;me</span> <span class="U2">tricsObj);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">940</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.log.deb</span> <span class="U2">ug('vista-</span> <span class="U2">client.uns</span> <span class="U2">ubscribe.h</span> <span class="U2">andleSucce</span> <span class="U2">ssfulRespo</span> <span class="U2">nse:&nbsp;succe</span> <span class="U2">ssfully&nbsp;un</span> <span class="U2">subscribed</span> <span class="U2">&nbsp;for&nbsp;patie</span> <span class="U2">nt&nbsp;%s;&nbsp;vis</span> <span class="U2">taResponse</span> <span class="U2">:&nbsp;%s',&nbsp;pid</span> <span class="U2">,&nbsp;vistaRes</span> <span class="U2">ponse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">941</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;unsub</span> <span class="U2">scribeCall</span> <span class="U2">back(null,</span> <span class="U2">&nbsp;'success'</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">942</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">943</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">944</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">945</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Thi</span> <span class="U2">s&nbsp;function</span> <span class="U2">&nbsp;handles&nbsp;c</span> <span class="U2">alling&nbsp;the</span> <span class="U2">&nbsp;callback&nbsp;</span> <span class="U2">for&nbsp;a&nbsp;fail</span> <span class="U2">ed&nbsp;respons</span> <span class="U2">e&nbsp;from&nbsp;the</span> <span class="U2">&nbsp;RPC.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">946</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">947</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;err</span> <span class="U2">or&nbsp;-&nbsp;The&nbsp;e</span> <span class="U2">rror&nbsp;messa</span> <span class="U2">ge&nbsp;to&nbsp;be&nbsp;s</span> <span class="U2">ent&nbsp;-&nbsp;beca</span> <span class="U2">use&nbsp;of&nbsp;the</span> <span class="U2">&nbsp;failed&nbsp;rP</span> <span class="U2">C&nbsp;call.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">948</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;res</span> <span class="U2">ponse&nbsp;-&nbsp;Th</span> <span class="U2">e&nbsp;result&nbsp;r</span> <span class="U2">eturned&nbsp;fr</span> <span class="U2">om&nbsp;VistA&nbsp;t</span> <span class="U2">hrough&nbsp;the</span> <span class="U2">&nbsp;RPC</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">949</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//----</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">950</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;functi</span> <span class="U2">on&nbsp;handleF</span> <span class="U2">ailedReque</span> <span class="U2">stResponse</span> <span class="U2">(error,&nbsp;re</span> <span class="U2">sponse)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">951</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.metrics</span> <span class="U2">.debug('Vi</span> <span class="U2">sta&nbsp;Unsubs</span> <span class="U2">cribe&nbsp;in&nbsp;E</span> <span class="U2">rror',&nbsp;met</span> <span class="U2">ricsObj);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">952</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.log.err</span> <span class="U2">or('%s&nbsp;res</span> <span class="U2">ponse:&nbsp;%s'</span> <span class="U2">,&nbsp;error,&nbsp;r</span> <span class="U2">esponse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">953</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;unsub</span> <span class="U2">scribeCall</span> <span class="U2">back(error</span> <span class="U2">,&nbsp;null);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">954</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">955</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">956</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">957</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">------</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">958</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;This&nbsp;me</span> <span class="U2">thod&nbsp;creat</span> <span class="U2">es&nbsp;the&nbsp;con</span> <span class="U2">figuration</span> <span class="U2">&nbsp;context&nbsp;t</span> <span class="U2">hat&nbsp;is&nbsp;to&nbsp;</span> <span class="U2">be&nbsp;sent&nbsp;to</span> <span class="U2">&nbsp;the&nbsp;RPC.&nbsp;</span> <span class="U2">&nbsp;Most</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">959</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;of&nbsp;the&nbsp;</span> <span class="U2">context&nbsp;is</span> <span class="U2">&nbsp;the&nbsp;same&nbsp;</span> <span class="U2">for&nbsp;every&nbsp;</span> <span class="U2">RPC&nbsp;call&nbsp;a</span> <span class="U2">nd&nbsp;can&nbsp;be&nbsp;</span> <span class="U2">obtained&nbsp;f</span> <span class="U2">rom&nbsp;the</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">960</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;configu</span> <span class="U2">ration.&nbsp;&nbsp;B</span> <span class="U2">ut&nbsp;some&nbsp;it</span> <span class="U2">ems&nbsp;are&nbsp;sp</span> <span class="U2">ecific&nbsp;to&nbsp;</span> <span class="U2">the&nbsp;RPC&nbsp;ca</span> <span class="U2">ll.&nbsp;&nbsp;This&nbsp;</span> <span class="U2">adds&nbsp;in&nbsp;th</span> <span class="U2">e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">961</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;items&nbsp;t</span> <span class="U2">hat&nbsp;are&nbsp;sp</span> <span class="U2">ecific&nbsp;to&nbsp;</span> <span class="U2">the&nbsp;RPC&nbsp;ca</span> <span class="U2">ll.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">962</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">------</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">963</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">function&nbsp;_</span> <span class="U2">createRpcC</span> <span class="U2">onfigVprCo</span> <span class="U2">ntext(conf</span> <span class="U2">ig,&nbsp;vistaI</span> <span class="U2">d)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">964</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;si</span> <span class="U2">teConfig&nbsp;=</span> <span class="U2">&nbsp;config[vi</span> <span class="U2">staId];</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">965</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;rp</span> <span class="U2">cConfig&nbsp;=&nbsp;</span> <span class="U2">_.clone(si</span> <span class="U2">teConfig);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">966</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;rpcCon</span> <span class="U2">fig.contex</span> <span class="U2">t&nbsp;=&nbsp;'HMP&nbsp;S</span> <span class="U2">YNCHRONIZA</span> <span class="U2">TION&nbsp;CONTE</span> <span class="U2">XT';</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">967</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="U2">&nbsp;(rpcConfi</span> <span class="U2">g);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">968</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">969</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">970</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">971</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">972</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;This&nbsp;fu</span> <span class="U2">nction&nbsp;ret</span> <span class="U2">rieves&nbsp;all</span> <span class="U2">&nbsp;the&nbsp;ids&nbsp;t</span> <span class="U2">his&nbsp;patien</span> <span class="U2">t&nbsp;has&nbsp;in&nbsp;a</span> <span class="U2">ll&nbsp;sites&nbsp;s</span> <span class="U2">he&nbsp;has</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">973</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;records</span> <span class="U2">&nbsp;in.&nbsp;Used&nbsp;</span> <span class="U2">by&nbsp;mviClie</span> <span class="U2">nt&nbsp;...</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">974</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">975</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;dfn:&nbsp;Th</span> <span class="U2">e&nbsp;dfn&nbsp;of&nbsp;t</span> <span class="U2">he&nbsp;patient</span> <span class="U2">.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">976</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;station</span> <span class="U2">Number:&nbsp;st</span> <span class="U2">ation&nbsp;numb</span> <span class="U2">er&nbsp;for&nbsp;the</span> <span class="U2">&nbsp;patient</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">977</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;Typical</span> <span class="U2">&nbsp;input:</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">978</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;3^PI^USV</span> <span class="U2">HA^500</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">979</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;callbac</span> <span class="U2">k:&nbsp;The&nbsp;han</span> <span class="U2">dler&nbsp;to&nbsp;ca</span> <span class="U2">ll&nbsp;when&nbsp;th</span> <span class="U2">e&nbsp;data&nbsp;is&nbsp;</span> <span class="U2">received.&nbsp;</span> <span class="U2">&nbsp;It&nbsp;will&nbsp;p</span> <span class="U2">ass&nbsp;the&nbsp;in</span> <span class="U2">formation</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">980</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;in&nbsp;the&nbsp;</span> <span class="U2">response&nbsp;p</span> <span class="U2">arameter&nbsp;o</span> <span class="U2">f&nbsp;the&nbsp;call</span> <span class="U2">back.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">981</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;Respons</span> <span class="U2">e&nbsp;is&nbsp;a&nbsp;str</span> <span class="U2">ing&nbsp;such&nbsp;a</span> <span class="U2">s:</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="C2 ln-no" style="text-align: right;">982</td>  
     <td class="nbgC2"><span class="I2">&nbsp;</span> <span class="U2">//&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">10108V4208</span> <span class="U2">71^NI^200M</span> <span class="U2">^USVHA^A\r</span> <span class="U2">\n3^PI^</span> <span class="C2">SIT</span> <span class="U2">E</span> <span class="R2"> 
       <div class="IP"> 
       </div> </span> <span class="U2">^USVHA^A\r</span> <span class="U2">\n00000000</span> <span class="U2">03^NI^200D</span> <span class="U2">OD^USDOD^A</span> <span class="U2">\r\n</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">983</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">Where&nbsp;this</span> <span class="U2">&nbsp;represent</span> <span class="U2">s&nbsp;the&nbsp;foll</span> <span class="U2">owing:</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">984</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;icn&nbsp;1010</span> <span class="U2">8V420871</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="C2 ln-no" style="text-align: right;">985</td>  
     <td class="nbgC2"><span class="I2">&nbsp;</span> <span class="U2">//&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">pid&nbsp;</span> <span class="C2">SIT</span> <span class="U2">E</span> <span class="R2"> 
       <div class="IP"> 
       </div> </span> <span class="U2">;3</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">986</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;edipi&nbsp;00</span> <span class="U2">00000003</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">987</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">988</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">VistaClien</span> <span class="U2">t.prototyp</span> <span class="U2">e.getIds&nbsp;=</span> <span class="U2">&nbsp;function&nbsp;</span> <span class="U2">(vistaId,&nbsp;</span> <span class="U2">dfn,&nbsp;stati</span> <span class="U2">onNumber,&nbsp;</span> <span class="U2">callback)&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">989</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">lf&nbsp;=&nbsp;this;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">990</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me</span> <span class="U2">tricsObj&nbsp;=</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">991</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'s</span> <span class="U2">ubsystem':</span> <span class="U2">&nbsp;'Vista',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">992</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'a</span> <span class="U2">ction':&nbsp;'g</span> <span class="U2">etIds',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">993</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'s</span> <span class="U2">ite':&nbsp;vist</span> <span class="U2">aId,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">994</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'p</span> <span class="U2">id':&nbsp;vista</span> <span class="U2">Id&nbsp;+&nbsp;';'&nbsp;+</span> <span class="U2">&nbsp;dfn,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">995</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'p</span> <span class="U2">rocess':&nbsp;u</span> <span class="U2">uid.v4(),</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">996</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'t</span> <span class="U2">imer':&nbsp;'st</span> <span class="U2">art'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">997</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">998</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.m</span> <span class="U2">etrics.deb</span> <span class="U2">ug('Vista&nbsp;</span> <span class="U2">Get&nbsp;IDs',&nbsp;</span> <span class="U2">metricsObj</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">999</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;metric</span> <span class="U2">sObj.timer</span> <span class="U2">&nbsp;=&nbsp;'stop';</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1000</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.l</span> <span class="U2">og.debug('</span> <span class="U2">vista-clie</span> <span class="U2">nt.getIds:</span> <span class="U2">&nbsp;dfn:&nbsp;%s;&nbsp;</span> <span class="U2">stationNum</span> <span class="U2">ber:&nbsp;%s',&nbsp;</span> <span class="U2">dfn,&nbsp;stati</span> <span class="U2">onNumber);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1001</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1002</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(_.</span> <span class="U2">isUndefine</span> <span class="U2">d(vistaId)</span> <span class="U2">&nbsp;||&nbsp;_.isUn</span> <span class="U2">defined(df</span> <span class="U2">n)&nbsp;||&nbsp;_.is</span> <span class="U2">Undefined(</span> <span class="U2">stationNum</span> <span class="U2">ber))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1003</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.log.err</span> <span class="U2">or('vista-</span> <span class="U2">client.get</span> <span class="U2">Ids:&nbsp;calle</span> <span class="U2">d&nbsp;with&nbsp;mis</span> <span class="U2">sing&nbsp;param</span> <span class="U2">eters...')</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1004</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;callb</span> <span class="U2">ack('Faile</span> <span class="U2">d&nbsp;to&nbsp;getId</span> <span class="U2">s');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1005</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1006</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;rp</span> <span class="U2">cClient&nbsp;=&nbsp;</span> <span class="U2">self._getR</span> <span class="U2">pcClient(v</span> <span class="U2">istaId);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1007</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1008</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;pa</span> <span class="U2">rams&nbsp;=&nbsp;dfn</span> <span class="U2">&nbsp;+&nbsp;'^PI^US</span> <span class="U2">VHA^'&nbsp;+&nbsp;st</span> <span class="U2">ationNumbe</span> <span class="U2">r;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1009</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1010</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rp</span> <span class="U2">cClient)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1011</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rp</span> <span class="U2">cClient.ex</span> <span class="U2">ecute('VAF</span> <span class="U2">C&nbsp;LOCAL&nbsp;GE</span> <span class="U2">TCORRESPON</span> <span class="U2">DINGIDS',&nbsp;</span> <span class="U2">params,&nbsp;fu</span> <span class="U2">nction&nbsp;(er</span> <span class="U2">ror,&nbsp;respo</span> <span class="U2">nse)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1012</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;(erro</span> <span class="U2">r)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1013</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self</span> <span class="U2">.metrics.d</span> <span class="U2">ebug('Vist</span> <span class="U2">a&nbsp;Get&nbsp;IDs&nbsp;</span> <span class="U2">in&nbsp;Error',</span> <span class="U2">&nbsp;metricsOb</span> <span class="U2">j);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1014</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self</span> <span class="U2">.log.error</span> <span class="U2">('vista-cl</span> <span class="U2">ient.getId</span> <span class="U2">s:&nbsp;Error&nbsp;r</span> <span class="U2">eceived&nbsp;wh</span> <span class="U2">en&nbsp;call&nbsp;RP</span> <span class="U2">C&nbsp;for&nbsp;dfn:</span> <span class="U2">&nbsp;%s;&nbsp;error</span> <span class="U2">:&nbsp;%s',&nbsp;dfn</span> <span class="U2">,&nbsp;error);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1015</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;callbac</span> <span class="U2">k(error);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1016</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}&nbsp;else&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1017</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self</span> <span class="U2">.metrics.d</span> <span class="U2">ebug('Vist</span> <span class="U2">a&nbsp;Get&nbsp;IDs'</span> <span class="U2">,&nbsp;metricsO</span> <span class="U2">bj);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1018</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self</span> <span class="U2">.log.debug</span> <span class="U2">('vista-cl</span> <span class="U2">ient.getId</span> <span class="U2">s:&nbsp;Success</span> <span class="U2">ful&nbsp;call&nbsp;t</span> <span class="U2">o&nbsp;RPC&nbsp;for&nbsp;</span> <span class="U2">dfn:&nbsp;%s;&nbsp;r</span> <span class="U2">esult:&nbsp;%j'</span> <span class="U2">,&nbsp;dfn,&nbsp;res</span> <span class="U2">ponse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1019</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;callbac</span> <span class="U2">k(null,&nbsp;re</span> <span class="U2">sponse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1020</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1021</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1022</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1023</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.metrics</span> <span class="U2">.debug('Vi</span> <span class="U2">sta&nbsp;Get&nbsp;ID</span> <span class="U2">s&nbsp;in&nbsp;Error</span> <span class="U2">',&nbsp;metrics</span> <span class="U2">Obj);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1024</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.log.err</span> <span class="U2">or('vista-</span> <span class="U2">client.get</span> <span class="U2">Ids:&nbsp;Unabl</span> <span class="U2">e&nbsp;to&nbsp;find&nbsp;</span> <span class="U2">RPC&nbsp;client</span> <span class="U2">&nbsp;for&nbsp;vista</span> <span class="U2">Id:&nbsp;%s',&nbsp;v</span> <span class="U2">istaId);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1025</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ca</span> <span class="U2">llback('No</span> <span class="U2">&nbsp;RPC&nbsp;clien</span> <span class="U2">t&nbsp;found&nbsp;fo</span> <span class="U2">r&nbsp;Vista&nbsp;'&nbsp;</span> <span class="U2">+&nbsp;vistaId)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1026</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1027</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1028</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1029</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1030</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;This&nbsp;fu</span> <span class="U2">nction&nbsp;ret</span> <span class="U2">rieves&nbsp;all</span> <span class="U2">&nbsp;admission</span> <span class="U2">s&nbsp;for&nbsp;a&nbsp;gi</span> <span class="U2">ven&nbsp;site</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1031</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1032</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;site:&nbsp;T</span> <span class="U2">he&nbsp;dfn&nbsp;of&nbsp;</span> <span class="U2">the&nbsp;patien</span> <span class="U2">t.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1033</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;callbac</span> <span class="U2">k:&nbsp;The&nbsp;han</span> <span class="U2">dler&nbsp;to&nbsp;ca</span> <span class="U2">ll&nbsp;when&nbsp;th</span> <span class="U2">e&nbsp;data&nbsp;is&nbsp;</span> <span class="U2">received.&nbsp;</span> <span class="U2">&nbsp;It&nbsp;will&nbsp;p</span> <span class="U2">ass&nbsp;the&nbsp;in</span> <span class="U2">formation</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1034</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;in&nbsp;the&nbsp;</span> <span class="U2">response&nbsp;p</span> <span class="U2">arameter&nbsp;o</span> <span class="U2">f&nbsp;the&nbsp;call</span> <span class="U2">back.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1035</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;Respons</span> <span class="U2">e&nbsp;is&nbsp;a&nbsp;str</span> <span class="U2">ing&nbsp;such&nbsp;a</span> <span class="U2">s:</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1036</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3^</span> <span class="U2">3140814.13</span> <span class="U2">073^7A&nbsp;GEN</span> <span class="U2">&nbsp;MED^722-B</span> <span class="U2">^38\r\n6^2</span> <span class="U2">950418.083</span> <span class="U2">04^4E&nbsp;NORT</span> <span class="U2">H^403-1^31</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1037</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">Where&nbsp;this</span> <span class="U2">&nbsp;represent</span> <span class="U2">s&nbsp;the&nbsp;foll</span> <span class="U2">owing:</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1038</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;DFN</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1039</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;Admissio</span> <span class="U2">n&nbsp;Date/Tim</span> <span class="U2">e&nbsp;in&nbsp;VA&nbsp;Fi</span> <span class="U2">leMan&nbsp;form</span> <span class="U2">at</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1040</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;Ward&nbsp;Nam</span> <span class="U2">e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1041</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;Room-Bed</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1042</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;Location</span> <span class="U2">&nbsp;IEN&nbsp;from&nbsp;</span> <span class="U2">the&nbsp;VistA&nbsp;</span> <span class="U2">Ward&nbsp;file</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1043</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1044</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">VistaClien</span> <span class="U2">t.prototyp</span> <span class="U2">e.fetchAdm</span> <span class="U2">issionsFor</span> <span class="U2">Site&nbsp;=&nbsp;fun</span> <span class="U2">ction&nbsp;(vis</span> <span class="U2">taId,&nbsp;call</span> <span class="U2">back)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1045</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">lf&nbsp;=&nbsp;this;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1046</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;me</span> <span class="U2">tricsObj&nbsp;=</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1047</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'s</span> <span class="U2">ubsystem':</span> <span class="U2">&nbsp;'Vista',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1048</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'a</span> <span class="U2">ction':&nbsp;'g</span> <span class="U2">etfetchAdm</span> <span class="U2">issionsFor</span> <span class="U2">Site',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1049</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'s</span> <span class="U2">ite':&nbsp;vist</span> <span class="U2">aId,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1050</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'p</span> <span class="U2">rocess':&nbsp;u</span> <span class="U2">uid.v4(),</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1051</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'t</span> <span class="U2">imer':&nbsp;'st</span> <span class="U2">art'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1052</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1053</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.m</span> <span class="U2">etrics.deb</span> <span class="U2">ug('Vista&nbsp;</span> <span class="U2">Fetch&nbsp;Admi</span> <span class="U2">ssions&nbsp;for</span> <span class="U2">&nbsp;Site',&nbsp;me</span> <span class="U2">tricsObj);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1054</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;metric</span> <span class="U2">sObj.timer</span> <span class="U2">&nbsp;=&nbsp;'stop';</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1055</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1056</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(_.</span> <span class="U2">isUndefine</span> <span class="U2">d(vistaId)</span> <span class="U2">)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1057</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.log.err</span> <span class="U2">or('vista-</span> <span class="U2">client.fet</span> <span class="U2">chAdmissio</span> <span class="U2">nsForSite:</span> <span class="U2">&nbsp;called&nbsp;wi</span> <span class="U2">th&nbsp;missing</span> <span class="U2">&nbsp;parameter</span> <span class="U2">s...');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1058</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;callb</span> <span class="U2">ack('Faile</span> <span class="U2">d&nbsp;to&nbsp;fetch</span> <span class="U2">Admissions</span> <span class="U2">ForSite');</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1059</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1060</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;rp</span> <span class="U2">cClient&nbsp;=&nbsp;</span> <span class="U2">self._getR</span> <span class="U2">pcClient(v</span> <span class="U2">istaId);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1061</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1062</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rp</span> <span class="U2">cClient)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1063</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span> <span class="U2">&nbsp;RPC&nbsp;Param</span> <span class="U2">eters:</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1064</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span> <span class="U2">&nbsp;IEN:&nbsp;opti</span> <span class="U2">onal&nbsp;(this</span> <span class="U2">&nbsp;call&nbsp;will</span> <span class="U2">&nbsp;never&nbsp;pas</span> <span class="U2">s&nbsp;this&nbsp;par</span> <span class="U2">ameter),&nbsp;i</span> <span class="U2">f&nbsp;''&nbsp;proce</span> <span class="U2">ss&nbsp;all&nbsp;war</span> <span class="U2">ds,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1065</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;othe</span> <span class="U2">rwise&nbsp;the&nbsp;</span> <span class="U2">IEN&nbsp;in&nbsp;the</span> <span class="U2">&nbsp;Ward&nbsp;loca</span> <span class="U2">tion&nbsp;file&nbsp;</span> <span class="U2">(#42)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1066</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span> <span class="U2">&nbsp;RETURN:&nbsp;D</span> <span class="U2">FN^Admissi</span> <span class="U2">on&nbsp;Date/Ti</span> <span class="U2">me&nbsp;in&nbsp;VA&nbsp;F</span> <span class="U2">ileMan&nbsp;for</span> <span class="U2">mat^Ward&nbsp;N</span> <span class="U2">ame^Room-B</span> <span class="U2">ed^Locatio</span> <span class="U2">n&nbsp;IEN&nbsp;from</span> <span class="U2">&nbsp;the&nbsp;VistA</span> <span class="U2">&nbsp;Ward&nbsp;file</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1067</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rp</span> <span class="U2">cClient.ex</span> <span class="U2">ecute('HMP</span> <span class="U2">&nbsp;PATIENT&nbsp;A</span> <span class="U2">DMIT&nbsp;SYNC'</span> <span class="U2">,&nbsp;'',&nbsp;func</span> <span class="U2">tion&nbsp;(erro</span> <span class="U2">r,&nbsp;respons</span> <span class="U2">e)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1068</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;(erro</span> <span class="U2">r)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1069</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self</span> <span class="U2">.metrics.d</span> <span class="U2">ebug('Vist</span> <span class="U2">a&nbsp;Fetch&nbsp;Ad</span> <span class="U2">missions&nbsp;f</span> <span class="U2">or&nbsp;Site&nbsp;in</span> <span class="U2">&nbsp;Error',&nbsp;m</span> <span class="U2">etricsObj)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1070</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self</span> <span class="U2">.log.error</span> <span class="U2">('vista-cl</span> <span class="U2">ient.fetch</span> <span class="U2">Admissions</span> <span class="U2">ForSite:&nbsp;E</span> <span class="U2">rror&nbsp;recei</span> <span class="U2">ved&nbsp;from&nbsp;R</span> <span class="U2">PC&nbsp;for&nbsp;vis</span> <span class="U2">taId:&nbsp;%s;&nbsp;</span> <span class="U2">error:&nbsp;%s'</span> <span class="U2">,&nbsp;vistaId,</span> <span class="U2">&nbsp;error);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1071</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;callbac</span> <span class="U2">k(error);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1072</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}&nbsp;else&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1073</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self</span> <span class="U2">.metrics.d</span> <span class="U2">ebug('Vist</span> <span class="U2">a&nbsp;Fetch&nbsp;Ad</span> <span class="U2">missions&nbsp;f</span> <span class="U2">or&nbsp;Site',&nbsp;</span> <span class="U2">metricsObj</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1074</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self</span> <span class="U2">.log.debug</span> <span class="U2">('vista-cl</span> <span class="U2">ient.fetch</span> <span class="U2">Admissions</span> <span class="U2">ForSite:&nbsp;S</span> <span class="U2">uccessful&nbsp;</span> <span class="U2">call&nbsp;to&nbsp;RP</span> <span class="U2">C&nbsp;for&nbsp;vist</span> <span class="U2">aId:&nbsp;%s;&nbsp;r</span> <span class="U2">esult:&nbsp;%j'</span> <span class="U2">,&nbsp;vistaId,</span> <span class="U2">&nbsp;response)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1075</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;callbac</span> <span class="U2">k(null,&nbsp;re</span> <span class="U2">sponse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1076</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1077</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1078</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1079</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.metrics</span> <span class="U2">.debug('Vi</span> <span class="U2">sta&nbsp;Fetch&nbsp;</span> <span class="U2">Admissions</span> <span class="U2">&nbsp;for&nbsp;Site&nbsp;</span> <span class="U2">in&nbsp;Error',</span> <span class="U2">&nbsp;metricsOb</span> <span class="U2">j);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1080</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.log.err</span> <span class="U2">or('vista-</span> <span class="U2">client.fet</span> <span class="U2">chAdmissio</span> <span class="U2">nsForSite:</span> <span class="U2">&nbsp;Unable&nbsp;to</span> <span class="U2">&nbsp;find&nbsp;RPC&nbsp;</span> <span class="U2">client&nbsp;for</span> <span class="U2">&nbsp;vistaId:&nbsp;</span> <span class="U2">%s',&nbsp;vista</span> <span class="U2">Id);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1081</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ca</span> <span class="U2">llback('No</span> <span class="U2">&nbsp;RPC&nbsp;clien</span> <span class="U2">t&nbsp;found&nbsp;fo</span> <span class="U2">r&nbsp;Vista&nbsp;'&nbsp;</span> <span class="U2">+&nbsp;vistaId)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1082</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1083</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1084</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1085</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1086</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;This&nbsp;me</span> <span class="U2">thod&nbsp;can&nbsp;b</span> <span class="U2">e&nbsp;used&nbsp;to&nbsp;</span> <span class="U2">make&nbsp;API&nbsp;c</span> <span class="U2">alls&nbsp;to&nbsp;a&nbsp;</span> <span class="U2">site&nbsp;that&nbsp;</span> <span class="U2">is&nbsp;configu</span> <span class="U2">red&nbsp;to&nbsp;run</span> <span class="U2">&nbsp;in&nbsp;multip</span> <span class="U2">le&nbsp;poller&nbsp;</span> <span class="U2">mode.&nbsp;&nbsp;It</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1087</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;is&nbsp;prim</span> <span class="U2">arily&nbsp;used</span> <span class="U2">&nbsp;by&nbsp;comman</span> <span class="U2">d&nbsp;line&nbsp;too</span> <span class="U2">ls&nbsp;that&nbsp;ca</span> <span class="U2">n&nbsp;be&nbsp;used&nbsp;</span> <span class="U2">to&nbsp;inspect</span> <span class="U2">&nbsp;and&nbsp;manag</span> <span class="U2">e&nbsp;allocati</span> <span class="U2">ons&nbsp;within</span> <span class="U2">&nbsp;Vista.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1088</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1089</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;vistaId</span> <span class="U2">:&nbsp;The&nbsp;Site</span> <span class="U2">&nbsp;hash&nbsp;for&nbsp;</span> <span class="U2">the&nbsp;VistA&nbsp;</span> <span class="U2">site.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1090</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;allocat</span> <span class="U2">ionSize:&nbsp;T</span> <span class="U2">he&nbsp;value&nbsp;t</span> <span class="U2">o&nbsp;place&nbsp;in</span> <span class="U2">&nbsp;the&nbsp;alloc</span> <span class="U2">ationSize.</span> <span class="U2">&nbsp;&nbsp;If&nbsp;this&nbsp;</span> <span class="U2">is&nbsp;not&nbsp;pas</span> <span class="U2">sed,&nbsp;then&nbsp;</span> <span class="U2">it&nbsp;will&nbsp;de</span> <span class="U2">fault&nbsp;to&nbsp;1</span> <span class="U2">000.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1091</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;allocat</span> <span class="U2">ionToken:&nbsp;</span> <span class="U2">The&nbsp;value&nbsp;</span> <span class="U2">to&nbsp;send&nbsp;fo</span> <span class="U2">r&nbsp;the&nbsp;allo</span> <span class="U2">cationToke</span> <span class="U2">n.&nbsp;&nbsp;If&nbsp;thi</span> <span class="U2">s&nbsp;is&nbsp;not&nbsp;p</span> <span class="U2">assed,&nbsp;the</span> <span class="U2">n&nbsp;no&nbsp;alloc</span> <span class="U2">ationToken</span> <span class="U2">&nbsp;will</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1092</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">be&nbsp;sent&nbsp;to</span> <span class="U2">&nbsp;VistA.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1093</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;allocat</span> <span class="U2">ionStatus:</span> <span class="U2">&nbsp;The&nbsp;value</span> <span class="U2">&nbsp;to&nbsp;send&nbsp;f</span> <span class="U2">or&nbsp;allocaa</span> <span class="U2">tionStatus</span> <span class="U2">.&nbsp;&nbsp;If&nbsp;this</span> <span class="U2">&nbsp;is&nbsp;is&nbsp;not</span> <span class="U2">&nbsp;passed,&nbsp;t</span> <span class="U2">hen&nbsp;no&nbsp;all</span> <span class="U2">ocationSta</span> <span class="U2">tus</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1094</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;will&nbsp;be&nbsp;s</span> <span class="U2">ent&nbsp;to&nbsp;Vis</span> <span class="U2">tA.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1095</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;max:&nbsp;Th</span> <span class="U2">e&nbsp;value&nbsp;to</span> <span class="U2">&nbsp;send&nbsp;for&nbsp;</span> <span class="U2">max.&nbsp;&nbsp;If&nbsp;t</span> <span class="U2">his&nbsp;is&nbsp;not</span> <span class="U2">&nbsp;passed,&nbsp;t</span> <span class="U2">hen&nbsp;no&nbsp;max</span> <span class="U2">&nbsp;will&nbsp;be&nbsp;s</span> <span class="U2">ent&nbsp;to&nbsp;Vis</span> <span class="U2">tA.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1096</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;maxSize</span> <span class="U2">:&nbsp;The&nbsp;valu</span> <span class="U2">e&nbsp;to&nbsp;send&nbsp;</span> <span class="U2">for&nbsp;maxSiz</span> <span class="U2">e.&nbsp;&nbsp;if&nbsp;thi</span> <span class="U2">s&nbsp;is&nbsp;not&nbsp;p</span> <span class="U2">assed,&nbsp;the</span> <span class="U2">n&nbsp;no&nbsp;maxSi</span> <span class="U2">ze&nbsp;will&nbsp;be</span> <span class="U2">&nbsp;sent&nbsp;to&nbsp;V</span> <span class="U2">istA.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1097</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;callbac</span> <span class="U2">k:&nbsp;&nbsp;The&nbsp;fu</span> <span class="U2">nction&nbsp;cal</span> <span class="U2">led&nbsp;when&nbsp;t</span> <span class="U2">he&nbsp;RPC&nbsp;cal</span> <span class="U2">l&nbsp;is&nbsp;compl</span> <span class="U2">ete.&nbsp;&nbsp;Its&nbsp;</span> <span class="U2">signature&nbsp;</span> <span class="U2">is:</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1098</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;functi</span> <span class="U2">on(error,&nbsp;</span> <span class="U2">response)&nbsp;</span> <span class="U2">where&nbsp;both</span> <span class="U2">&nbsp;are&nbsp;strin</span> <span class="U2">g&nbsp;values.&nbsp;</span> <span class="U2">&nbsp;&nbsp;Although</span> <span class="U2">&nbsp;response&nbsp;</span> <span class="U2">is&nbsp;a&nbsp;strin</span> <span class="U2">g,&nbsp;unless</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1099</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">there&nbsp;is&nbsp;a</span> <span class="U2">&nbsp;functiona</span> <span class="U2">l&nbsp;issue&nbsp;it</span> <span class="U2">&nbsp;is&nbsp;in&nbsp;the</span> <span class="U2">&nbsp;from&nbsp;of&nbsp;a</span> <span class="U2">&nbsp;JSON&nbsp;stri</span> <span class="U2">ng&nbsp;that&nbsp;ca</span> <span class="U2">n&nbsp;be&nbsp;parse</span> <span class="U2">d.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1100</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-----</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1101</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">VistaClien</span> <span class="U2">t.prototyp</span> <span class="U2">e.multiple</span> <span class="U2">PollerMode</span> <span class="U2">Api&nbsp;=&nbsp;func</span> <span class="U2">tion&nbsp;(vist</span> <span class="U2">aId,&nbsp;alloc</span> <span class="U2">ationSize,</span> <span class="U2">&nbsp;allocatio</span> <span class="U2">nToken,&nbsp;al</span> <span class="U2">locationSt</span> <span class="U2">atus,&nbsp;max,</span> <span class="U2">&nbsp;maxSize,&nbsp;</span> <span class="U2">callback)&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1102</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">lf&nbsp;=&nbsp;this;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1103</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.l</span> <span class="U2">og.debug('</span> <span class="U2">vista-clie</span> <span class="U2">nt.multipl</span> <span class="U2">ePollerMod</span> <span class="U2">eApi:&nbsp;Ente</span> <span class="U2">red&nbsp;method</span> <span class="U2">.&nbsp;&nbsp;&nbsp;vistaI</span> <span class="U2">d:&nbsp;%s,&nbsp;all</span> <span class="U2">ocationSiz</span> <span class="U2">e:&nbsp;%s,&nbsp;'&nbsp;+</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1104</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'a</span> <span class="U2">llocationT</span> <span class="U2">oken:&nbsp;%s,&nbsp;</span> <span class="U2">allocation</span> <span class="U2">Status:&nbsp;%s</span> <span class="U2">;&nbsp;max:&nbsp;%s;</span> <span class="U2">&nbsp;maxSize:&nbsp;</span> <span class="U2">%s',&nbsp;vista</span> <span class="U2">Id,&nbsp;alloca</span> <span class="U2">tionSize,&nbsp;</span> <span class="U2">allocation</span> <span class="U2">Token,&nbsp;all</span> <span class="U2">ocationSta</span> <span class="U2">tus,&nbsp;max,&nbsp;</span> <span class="U2">maxSize);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1105</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1106</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!v</span> <span class="U2">istaId)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1107</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.log.err</span> <span class="U2">or('vista-</span> <span class="U2">client.mul</span> <span class="U2">tiplePolle</span> <span class="U2">rModeApi:&nbsp;</span> <span class="U2">Called&nbsp;wit</span> <span class="U2">h&nbsp;missing&nbsp;</span> <span class="U2">vistaId&nbsp;pa</span> <span class="U2">rameter...</span> <span class="U2">');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1108</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;callb</span> <span class="U2">ack('Calle</span> <span class="U2">d&nbsp;with&nbsp;mis</span> <span class="U2">sing&nbsp;vista</span> <span class="U2">Id&nbsp;paramet</span> <span class="U2">er');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1109</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1110</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;rp</span> <span class="U2">cClient&nbsp;=&nbsp;</span> <span class="U2">self._getR</span> <span class="U2">pcClient(v</span> <span class="U2">istaId);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1111</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1112</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;pa</span> <span class="U2">rams;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1113</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rp</span> <span class="U2">cClient)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1114</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pa</span> <span class="U2">rams&nbsp;=&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1115</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"comman</span> <span class="U2">d"':&nbsp;'getP</span> <span class="U2">tUpdates',</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1116</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"server</span> <span class="U2">"':&nbsp;self.c</span> <span class="U2">onfig['hmp</span> <span class="U2">.server.id</span> <span class="U2">']&nbsp;||&nbsp;'hmp</span> <span class="U2">-developme</span> <span class="U2">nt-box',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1117</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"extrac</span> <span class="U2">tSchema"':</span> <span class="U2">&nbsp;self.conf</span> <span class="U2">ig['hmp.ex</span> <span class="U2">tract.sche</span> <span class="U2">ma']&nbsp;||&nbsp;'3</span> <span class="U2">.001',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1118</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"hmpVer</span> <span class="U2">sion"':&nbsp;se</span> <span class="U2">lf.config[</span> <span class="U2">'hmp.versi</span> <span class="U2">on']&nbsp;||&nbsp;'0</span> <span class="U2">.7-S65'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1119</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1120</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1121</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;((_.isStr</span> <span class="U2">ing(alloca</span> <span class="U2">tionSize))</span> <span class="U2">&nbsp;||&nbsp;(_.isF</span> <span class="U2">inite(allo</span> <span class="U2">cationSize</span> <span class="U2">)))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1122</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;params['</span> <span class="U2">"allocatio</span> <span class="U2">nSize"']&nbsp;=</span> <span class="U2">&nbsp;String(al</span> <span class="U2">locationSi</span> <span class="U2">ze);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1123</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1124</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1125</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;((_.isStr</span> <span class="U2">ing(alloca</span> <span class="U2">tionToken)</span> <span class="U2">)&nbsp;||&nbsp;(_.is</span> <span class="U2">Finite(all</span> <span class="U2">ocationTok</span> <span class="U2">en)))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1126</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;params['</span> <span class="U2">"allocatio</span> <span class="U2">nToken"']&nbsp;</span> <span class="U2">=&nbsp;String(a</span> <span class="U2">llocationT</span> <span class="U2">oken);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1127</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1128</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1129</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;(_.isStri</span> <span class="U2">ng(allocat</span> <span class="U2">ionStatus)</span> <span class="U2">)&nbsp;&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1130</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;params['</span> <span class="U2">"allocatio</span> <span class="U2">nStatus"']</span> <span class="U2">&nbsp;=&nbsp;allocat</span> <span class="U2">ionStatus;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1131</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1132</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1133</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;((_.isStr</span> <span class="U2">ing(max))&nbsp;</span> <span class="U2">||&nbsp;(_.isFi</span> <span class="U2">nite(max))</span> <span class="U2">)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1134</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;params['</span> <span class="U2">"max"']&nbsp;=&nbsp;</span> <span class="U2">String(max</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1135</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1136</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1137</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;((_.isStr</span> <span class="U2">ing(maxSiz</span> <span class="U2">e))&nbsp;||&nbsp;(_.</span> <span class="U2">isFinite(m</span> <span class="U2">axSize)))&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1138</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;params['</span> <span class="U2">"maxSize"'</span> <span class="U2">]&nbsp;=&nbsp;String</span> <span class="U2">(maxSize);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1139</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1140</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1141</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rp</span> <span class="U2">cClient.ex</span> <span class="U2">ecute('HMP</span> <span class="U2">DJFS&nbsp;API',</span> <span class="U2">&nbsp;params,&nbsp;f</span> <span class="U2">unction&nbsp;(e</span> <span class="U2">rror,&nbsp;resp</span> <span class="U2">onse)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1142</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;self.log</span> <span class="U2">.info('vis</span> <span class="U2">ta-client.</span> <span class="U2">multiplePo</span> <span class="U2">llerModeAp</span> <span class="U2">i:&nbsp;Complet</span> <span class="U2">ed&nbsp;calling</span> <span class="U2">&nbsp;RPC:&nbsp;getP</span> <span class="U2">tUpdates:&nbsp;</span> <span class="U2">for&nbsp;vistaI</span> <span class="U2">d:&nbsp;%s;&nbsp;err</span> <span class="U2">or:&nbsp;%s',&nbsp;v</span> <span class="U2">istaId,&nbsp;er</span> <span class="U2">ror);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1143</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;self.log</span> <span class="U2">.trace('vi</span> <span class="U2">sta-client</span> <span class="U2">.multipleP</span> <span class="U2">ollerModeA</span> <span class="U2">pi:&nbsp;Comple</span> <span class="U2">ted&nbsp;callin</span> <span class="U2">g&nbsp;RPC:&nbsp;get</span> <span class="U2">PtUpdates:</span> <span class="U2">&nbsp;for&nbsp;vista</span> <span class="U2">Id:&nbsp;%s;&nbsp;re</span> <span class="U2">sponse&nbsp;(St</span> <span class="U2">ring):&nbsp;%s'</span> <span class="U2">,&nbsp;vistaId,</span> <span class="U2">&nbsp;response)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1144</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1145</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;c</span> <span class="U2">allback(er</span> <span class="U2">ror,&nbsp;respo</span> <span class="U2">nse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1146</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1147</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1148</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1149</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1150</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1151</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;This&nbsp;me</span> <span class="U2">thod&nbsp;retri</span> <span class="U2">eves&nbsp;the&nbsp;A</span> <span class="U2">PI&nbsp;version</span> <span class="U2">&nbsp;that&nbsp;the&nbsp;</span> <span class="U2">Vista&nbsp;site</span> <span class="U2">&nbsp;is&nbsp;runnin</span> <span class="U2">g.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1152</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1153</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;vistaId</span> <span class="U2">:&nbsp;The&nbsp;Site</span> <span class="U2">&nbsp;hash&nbsp;for&nbsp;</span> <span class="U2">the&nbsp;VistA&nbsp;</span> <span class="U2">site.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1154</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;callbac</span> <span class="U2">k:&nbsp;&nbsp;The&nbsp;fu</span> <span class="U2">nction&nbsp;cal</span> <span class="U2">led&nbsp;when&nbsp;t</span> <span class="U2">he&nbsp;RPC&nbsp;cal</span> <span class="U2">l&nbsp;is&nbsp;compl</span> <span class="U2">ete.&nbsp;&nbsp;Its&nbsp;</span> <span class="U2">signature&nbsp;</span> <span class="U2">is:</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1155</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;functi</span> <span class="U2">on(error,&nbsp;</span> <span class="U2">response)&nbsp;</span> <span class="U2">where&nbsp;both</span> <span class="U2">&nbsp;are&nbsp;strin</span> <span class="U2">g&nbsp;values.&nbsp;</span> <span class="U2">&nbsp;&nbsp;Although</span> <span class="U2">&nbsp;response&nbsp;</span> <span class="U2">is&nbsp;a&nbsp;strin</span> <span class="U2">g,&nbsp;unless</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1156</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">there&nbsp;is&nbsp;a</span> <span class="U2">&nbsp;functiona</span> <span class="U2">l&nbsp;issue&nbsp;it</span> <span class="U2">&nbsp;is&nbsp;in&nbsp;the</span> <span class="U2">&nbsp;from&nbsp;of&nbsp;a</span> <span class="U2">&nbsp;JSON&nbsp;stri</span> <span class="U2">ng&nbsp;that&nbsp;ca</span> <span class="U2">n&nbsp;be&nbsp;parse</span> <span class="U2">d.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1157</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">//--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">-----</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1158</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">VistaClien</span> <span class="U2">t.prototyp</span> <span class="U2">e.retrieve</span> <span class="U2">ApiVersion</span> <span class="U2">&nbsp;=&nbsp;functio</span> <span class="U2">n&nbsp;(vistaId</span> <span class="U2">,&nbsp;callback</span> <span class="U2">)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1159</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">lf&nbsp;=&nbsp;this;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1160</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;self.l</span> <span class="U2">og.debug('</span> <span class="U2">vista-clie</span> <span class="U2">nt.retriev</span> <span class="U2">eApiVersio</span> <span class="U2">n:&nbsp;Entered</span> <span class="U2">&nbsp;method.&nbsp;&nbsp;</span> <span class="U2">&nbsp;vistaId:&nbsp;</span> <span class="U2">%s',&nbsp;vista</span> <span class="U2">Id);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1161</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1162</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!v</span> <span class="U2">istaId)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1163</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">lf.log.err</span> <span class="U2">or('vista-</span> <span class="U2">client.ret</span> <span class="U2">rieveApiVe</span> <span class="U2">rsion:&nbsp;Cal</span> <span class="U2">led&nbsp;with&nbsp;m</span> <span class="U2">issing&nbsp;vis</span> <span class="U2">taId&nbsp;param</span> <span class="U2">eter...');</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1164</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;setTi</span> <span class="U2">meout(call</span> <span class="U2">back,&nbsp;0,&nbsp;'</span> <span class="U2">Called&nbsp;wit</span> <span class="U2">h&nbsp;missing&nbsp;</span> <span class="U2">vistaId&nbsp;pa</span> <span class="U2">rameter');</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1165</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1166</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;rp</span> <span class="U2">cClient&nbsp;=&nbsp;</span> <span class="U2">self._getR</span> <span class="U2">pcClient(v</span> <span class="U2">istaId);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1167</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1168</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;pa</span> <span class="U2">rams;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1169</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(rp</span> <span class="U2">cClient)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1170</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pa</span> <span class="U2">rams&nbsp;=&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1171</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"comman</span> <span class="U2">d"':&nbsp;'chec</span> <span class="U2">kHealth',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1172</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"server</span> <span class="U2">"':&nbsp;self.c</span> <span class="U2">onfig['hmp</span> <span class="U2">.server.id</span> <span class="U2">']&nbsp;||&nbsp;'hmp</span> <span class="U2">-developme</span> <span class="U2">nt-box',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1173</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"extrac</span> <span class="U2">tSchema"':</span> <span class="U2">&nbsp;self.conf</span> <span class="U2">ig['hmp.ex</span> <span class="U2">tract.sche</span> <span class="U2">ma']&nbsp;||&nbsp;'3</span> <span class="U2">.001',</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1174</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;'"hmpVer</span> <span class="U2">sion"':&nbsp;se</span> <span class="U2">lf.config[</span> <span class="U2">'hmp.versi</span> <span class="U2">on']&nbsp;||&nbsp;'0</span> <span class="U2">.7-S65'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1175</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1176</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1177</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rp</span> <span class="U2">cClient.ex</span> <span class="U2">ecute('HMP</span> <span class="U2">DJFS&nbsp;API',</span> <span class="U2">&nbsp;params,&nbsp;f</span> <span class="U2">unction&nbsp;(e</span> <span class="U2">rror,&nbsp;resp</span> <span class="U2">onse)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1178</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;self.log</span> <span class="U2">.info('vis</span> <span class="U2">ta-client.</span> <span class="U2">multiplePo</span> <span class="U2">llerModeAp</span> <span class="U2">i:&nbsp;Complet</span> <span class="U2">ed&nbsp;calling</span> <span class="U2">&nbsp;RPC:&nbsp;getP</span> <span class="U2">tUpdates:&nbsp;</span> <span class="U2">for&nbsp;vistaI</span> <span class="U2">d:&nbsp;%s;&nbsp;err</span> <span class="U2">or:&nbsp;%s',&nbsp;v</span> <span class="U2">istaId,&nbsp;er</span> <span class="U2">ror);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1179</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;self.log</span> <span class="U2">.trace('vi</span> <span class="U2">sta-client</span> <span class="U2">.multipleP</span> <span class="U2">ollerModeA</span> <span class="U2">pi:&nbsp;Comple</span> <span class="U2">ted&nbsp;callin</span> <span class="U2">g&nbsp;RPC:&nbsp;get</span> <span class="U2">PtUpdates:</span> <span class="U2">&nbsp;for&nbsp;vista</span> <span class="U2">Id:&nbsp;%s;&nbsp;re</span> <span class="U2">sponse&nbsp;(St</span> <span class="U2">ring):&nbsp;%s'</span> <span class="U2">,&nbsp;vistaId,</span> <span class="U2">&nbsp;response)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1180</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1181</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;c</span> <span class="U2">allback(er</span> <span class="U2">ror,&nbsp;respo</span> <span class="U2">nse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1182</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1183</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1184</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1185</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1186</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1187</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">module.exp</span> <span class="U2">orts&nbsp;=&nbsp;Vis</span> <span class="U2">taClient;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1188</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">module.exp</span> <span class="U2">orts._crea</span> <span class="U2">teRpcConfi</span> <span class="U2">gVprContex</span> <span class="U2">t&nbsp;=&nbsp;_creat</span> <span class="U2">eRpcConfig</span> <span class="U2">VprContext</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1189</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
   </tbody>
  </table> 
  <p class="copyright" style="margin-top: 25px; padding-top: 2px; border-top: solid #a0a0a0 1px; max-width: none;">Araxis Merge (but not the data content of this report) is Copyright Â© 1993-2016 Araxis Ltd (<a href="http://www.araxis.com/" title="Link to the Araxis corporate web site">www.araxis.com</a>). All rights reserved.</p>   
 </body>
</html>