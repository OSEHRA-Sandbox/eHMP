<!--?xml version="1.0"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:mg="http://www.araxis.com/2002/Merge/Reporting" xmlns="http://www.w3.org/1999/xhtml">
 <head> 
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> 
  <!--The layout and design of this report is Copyright Â© 2003-2016 Araxis Ltd. All rights reserved.--> 
  <!--The copyright of the data content of this report belongs to the relevant copyright holders.--> 
  <title>2304. EPMO Open Source Coordination Office Redaction File Detail Report</title> 
  <style type="text/css">
body { background: #fff;  color: #000; margin: 0px 14px 14px 14px; }
h1, h2, h3, h4, h5 {
  padding: 0em;
  margin: 1.5em 0em .25em 0em;
  text-align: left;
  font-weight: normal;
  font-family: Arial, Helvetica, sans-serif;
  font-size: 70%;
  max-width: 55em;
}
body, h4, h5, p, ol, ul, li, td, th { font-family: Verdana, Arial, Helvetica, sans-serif; text-align: left; }

h4, h5, p, ol, ul, li { font-size: 70%; }
input {
  font-family: Arial, Helvetica, sans-serif;
  font-size: 120%;
}

h1 { margin: 14px 0em 1.2em 0em; font-size: 112%; line-height: 130%;}
h2 { font-size: 125%; line-height: 84%;}
h3 { margin-top: 1.4em; font-size: 81%; }
h4 { margin-top: 1em; font-size: 70%; }
h5 { margin-top: 1em; font-size: 100%; font-style: italic;}
h1 strong, h2 strong, h3 strong, h4 strong { font-weight: bold; }

p { margin: 6px 0em 6px 0em; max-width: 55em;}
p.code, code {}
p { font-size: 70%; line-height: 125%; }
table { font-size: 70%;}

p.copyright, .small { font-size: 60%; line-height: 120%; }
p.copyright { margin: 3px 0px 0px 0px; padding: 0px; text-align: left; }
acronym { font-variant: small-caps; }
div.pad { padding: 3px; }
span.lineEndings { color: red; font-size: 70%; }

table.mgRowGroup, table.mgRowGroupFolder { border: 1px solid #a0a0a0; margin: 10px 0px 10px 0px; width: 100%; table-layout: fixed; border-collapse: collapse; }
table.mgRowGroup td { vertical-align: top; padding: 0; }
table.mgRowGroupFolder td { vertical-align: top; padding: 1px 0 1px 0; }
div.IP { width: 2px; height: 1em; float: left; }

img.mgFldrIcon {float: left; text-align: left; margin: -1px 2px 0px 0px;  height: 16px; width: 16px; border: none; vertical-align: top; background-color: transparent;}
div.mgFldrIcon {float: left; width: auto;}
span.left {float: left;width: auto;}
span.right {float: right;width: auto;}

table.bordered { border-collapse: collapse; border: 1px solid #a0a0a0; margin: 10px 0px 10px 0px;}
table.bordered th, table.bordered td { vertical-align: top; padding: 3px; border: 1px solid #a0a0a0;}
table.bordered th { background-color: #e5e5e5; }
table.bordered td.group { background-color: #f5f5f5; }
span.disabledNavigation { color: #a0a0a0; }
div.navigation { margin-top: 14px; font-size: 70%; }
div.comment { font-weight: normal; color: #000; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fcfed8; padding: 2px 5px 2px 5px; border: 1px solid #E3E5C3; margin: 1px 2px 3px 2px; -moz-border-radius: 7px; border-radius: 7px; }

                span.U1, span.U1 a {float: left; width: auto;color: #000000; background-color: #FFFFFF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.U1 a {text-decoration: underline;}
td.U1 {color: #000000; background-color: #FFFFFF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.R1, span.R1 a {float: left; width: auto;color: #800000; background-color: #F3E6D8; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.R1 a {text-decoration: underline;}
td.R1 {color: #800000; background-color: #F3E6D8; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.I1, span.I1 a {float: left; width: auto;color: #800000; background-color: #D1E8CF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.I1 a {text-decoration: underline;}
td.I1 {color: #800000; background-color: #D1E8CF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.C1, span.C1 a {float: left; width: auto;color: #800000; background-color: #DACDE6; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.C1 a {text-decoration: underline;}
td.C1 {color: #800000; background-color: #DACDE6; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
td.nbgC1 {color: #800000; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; background-color: #FFFFFF; }
span.U2, span.U2 a {float: left; width: auto;color: #000000; background-color: #FFFFFF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.U2 a {text-decoration: underline;}
td.U2 {color: #000000; background-color: #FFFFFF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.R2, span.R2 a {float: left; width: auto;color: #800000; background-color: #F3E6D8; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.R2 a {text-decoration: underline;}
td.R2 {color: #800000; background-color: #F3E6D8; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.I2, span.I2 a {float: left; width: auto;color: #800000; background-color: #D1E8CF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.I2 a {text-decoration: underline;}
td.I2 {color: #800000; background-color: #D1E8CF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.C2, span.C2 a {float: left; width: auto;color: #800000; background-color: #DACDE6; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.C2 a {text-decoration: underline;}
td.C2 {color: #800000; background-color: #DACDE6; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
td.nbgC2 {color: #800000; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; background-color: #FFFFFF; }

span.selected {background-color: #3d80df; color: #fff;}
span.selected a {background-color: #3d80df; color: #fff; text-decoration: underline;}
span.symbol {cursor: pointer;}
      </style> 
 </head> 
 <body> 
  <h1><strong>2304. EPMO Open Source Coordination Office Redaction File Detail Report</strong></h1> 
  <p>Produced by <strong>Araxis Merge</strong> on <strong>10/13/2017 11:30:55 AM Central Daylight Time</strong>. See <a href="http://www.araxis.com/" title="Link to the Araxis corporate web site">www.araxis.com</a> for information about Merge. This report uses XHTML and CSS2, and is best viewed with a modern standards-compliant browser. For optimum results when printing this report, use landscape orientation and enable printing of background images and colours in your browser.</p> 
  <h3><strong>2304.1&nbsp;Files compared</strong></h3> 
  <table class="bordered"> 
   <tbody>
    <tr> 
     <th>#</th> 
     <th>Location</th> 
     <th>File</th> 
     <th>Last Modified</th> 
    </tr> 
    <tr> 
     <td>1</td> 
     <td>ehmp.zip\rdk\rdk\product\tests\acceptance-tests\features\steps</td> 
     <td>allergies_steps.rb</td> 
     <td>Wed Sep 6 17:14:30 2017 UTC</td> 
    </tr> 
    <tr> 
     <td>2</td> 
     <td>ehmp.zip\rdk\rdk\product\tests\acceptance-tests\features\steps</td> 
     <td>allergies_steps.rb</td> 
     <td>Tue Oct 10 18:47:35 2017 UTC</td> 
    </tr> 
   </tbody>
  </table> 
  <h3><strong>2304.2&nbsp;Comparison summary</strong></h3> 
  <table class="bordered"> 
   <tbody>
    <tr> 
     <th rowspan="2" style="vertical-align: bottom;">Description</th> 
     <th colspan="2">Between<br>Files 1 and 2</th> 
    </tr> 
    <tr> 
     <th style="text-align: right;">Text Blocks</th> 
     <th style="text-align: right;">Lines</th> 
    </tr> 
    <tr> 
     <td>Unchanged</td> 
     <td style="text-align: right;">5</td> 
     <td style="text-align: right;">806</td> 
    </tr> 
    <tr> 
     <td>Changed</td> 
     <td style="text-align: right;">4</td> 
     <td style="text-align: right;">12</td> 
    </tr> 
    <tr> 
     <td>Inserted</td> 
     <td style="text-align: right;">0</td> 
     <td style="text-align: right;">0</td> 
    </tr> 
    <tr> 
     <td>Removed</td> 
     <td style="text-align: right;">0</td> 
     <td style="text-align: right;">0</td> 
    </tr> 
   </tbody>
  </table> 
  <h3><strong>2304.3&nbsp;Comparison options</strong></h3> 
  <table class="bordered" style="width: 55em;"> 
   <tbody>
    <tr> 
     <th>Whitespace</th> 
     <td></td> 
    </tr> 
    <tr> 
     <th>Character case</th> 
     <td>Differences in character case are significant</td> 
    </tr> 
    <tr> 
     <th>Line endings</th> 
     <td>Differences in line endings (<code>CR</code> and <code>LF</code> characters) are ignored</td> 
    </tr> 
    <tr> 
     <th>CR/LF characters</th> 
     <td>Not shown in the comparison detail</td> 
    </tr> 
   </tbody>
  </table> 
  <h3><strong>2304.4&nbsp;Active regular expressions</strong></h3> 
  <p>No regular expressions were active.</p> 
  <h3><strong>2304.5&nbsp;Comparison detail</strong></h3> 
  <table class="mgRowGroup"> 
   <colgroup>
    <col style="width: 5em;"> 
    <col style="width: 1em;"> 
    <col width="*"> 
    <col style="width: 1em;"> 
    <col style="width: 5em;"> 
    <col style="width: 1em;"> 
    <col width="*"> 
   </colgroup>
   <tbody>
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;Place&nbsp;ho</span> <span class="U2">lder&nbsp;for&nbsp;A</span> <span class="U2">llergy&nbsp;tes</span> <span class="U2">t&nbsp;informat</span> <span class="U2">ion</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">2</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">class&nbsp;Defa</span> <span class="U2">ultAllergy</span> <span class="U2">Patient</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">3</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;attr_rea</span> <span class="U2">der&nbsp;:pid</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">4</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;attr_rea</span> <span class="U2">der&nbsp;:searc</span> <span class="U2">h_term</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">5</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;attr_rea</span> <span class="U2">der&nbsp;:searc</span> <span class="U2">h_result_c</span> <span class="U2">ount</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">6</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;attr_rea</span> <span class="U2">der&nbsp;:patie</span> <span class="U2">nt_name</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">7</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;attr_rea</span> <span class="U2">der&nbsp;:num_a</span> <span class="U2">llergies</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">8</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;def&nbsp;init</span> <span class="U2">ialize</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">9</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@pid&nbsp;=</span> <span class="U2">&nbsp;"10108"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">10</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@searc</span> <span class="U2">h_term&nbsp;=&nbsp;"</span> <span class="U2">Eight"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">11</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@searc</span> <span class="U2">h_result_c</span> <span class="U2">ount&nbsp;=&nbsp;38</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">12</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@patie</span> <span class="U2">nt_name&nbsp;=&nbsp;</span> <span class="U2">"Eight,Pat</span> <span class="U2">ient"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">13</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@num_a</span> <span class="U2">llergies&nbsp;=</span> <span class="U2">&nbsp;2</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">14</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">15</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">16</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">17</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Given(/^a&nbsp;</span> <span class="U2">patient&nbsp;wi</span> <span class="U2">th&nbsp;allergi</span> <span class="U2">es&nbsp;in&nbsp;mult</span> <span class="U2">iple&nbsp;VistA</span> <span class="U2">s$/)&nbsp;do</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">18</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@test_pa</span> <span class="U2">tient&nbsp;=&nbsp;De</span> <span class="U2">faultAller</span> <span class="U2">gyPatient.</span> <span class="U2">new</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">19</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;@test_</span> <span class="U2">patient.pi</span> <span class="U2">d</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">20</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">21</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">22</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;re</span> <span class="U2">quests&nbsp;all</span> <span class="U2">ergies&nbsp;for</span> <span class="U2">&nbsp;the&nbsp;patie</span> <span class="U2">nt&nbsp;"(.*?)"</span> <span class="U2">$/)&nbsp;do&nbsp;|pi</span> <span class="U2">d|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">23</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;query_wi</span> <span class="U2">th_path_no</span> <span class="U2">_range&nbsp;"/v</span> <span class="U2">pr/view/go</span> <span class="U2">v.va.cpe.v</span> <span class="U2">pr.queryen</span> <span class="U2">g.Allergie</span> <span class="U2">sViewDef",</span> <span class="U2">&nbsp;pid</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">24</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">25</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">26</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^eHM</span> <span class="U2">P&nbsp;returns&nbsp;</span> <span class="U2">all&nbsp;allerg</span> <span class="U2">ies&nbsp;in&nbsp;the</span> <span class="U2">&nbsp;results$/</span> <span class="U2">)&nbsp;do</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">27</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;num_expe</span> <span class="U2">cted_resul</span> <span class="U2">ts&nbsp;=&nbsp;@test</span> <span class="U2">_patient.n</span> <span class="U2">um_allergi</span> <span class="U2">es</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">28</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;num_of_a</span> <span class="U2">ctual_resu</span> <span class="U2">lts&nbsp;=&nbsp;coun</span> <span class="U2">t_number_o</span> <span class="U2">f_results</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">29</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(n</span> <span class="U2">um_of_actu</span> <span class="U2">al_results</span> <span class="U2">).to&nbsp;be(nu</span> <span class="U2">m_expected</span> <span class="U2">_results)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">30</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">31</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">32</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^use</span> <span class="U2">r&nbsp;requests</span> <span class="U2">&nbsp;allergies</span> <span class="U2">&nbsp;for&nbsp;that&nbsp;</span> <span class="U2">patient$/)</span> <span class="U2">&nbsp;do</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">33</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;cucumb</span> <span class="U2">er&nbsp;step:&nbsp;W</span> <span class="U2">hen&nbsp;user&nbsp;t</span> <span class="U2">ypes&nbsp;"Eigh</span> <span class="U2">t"&nbsp;in&nbsp;the&nbsp;</span> <span class="U2">"Search&nbsp;Fi</span> <span class="U2">eld"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">34</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;search_t</span> <span class="U2">erm&nbsp;=&nbsp;@tes</span> <span class="U2">t_patient.</span> <span class="U2">search_ter</span> <span class="U2">m</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">35</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;select_p</span> <span class="U2">atient_fro</span> <span class="U2">m_list&nbsp;=&nbsp;@</span> <span class="U2">test_patie</span> <span class="U2">nt.patient</span> <span class="U2">_name</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">36</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;AccessPa</span> <span class="U2">tientStepR</span> <span class="U2">euse.user_</span> <span class="U2">types_in_t</span> <span class="U2">he(search_</span> <span class="U2">term,&nbsp;"Sea</span> <span class="U2">rch&nbsp;Field"</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">37</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">38</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;cucumb</span> <span class="U2">er&nbsp;step:&nbsp;T</span> <span class="U2">hen&nbsp;the&nbsp;pa</span> <span class="U2">tient&nbsp;list</span> <span class="U2">&nbsp;displays&nbsp;</span> <span class="U2">"38"&nbsp;resul</span> <span class="U2">ts</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">39</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;num_resu</span> <span class="U2">lts&nbsp;=&nbsp;&nbsp;@te</span> <span class="U2">st_patient</span> <span class="U2">.search_re</span> <span class="U2">sult_count</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">40</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;verifica</span> <span class="U2">tion_passe</span> <span class="U2">d&nbsp;=&nbsp;Access</span> <span class="U2">PatientSte</span> <span class="U2">pReuse.wai</span> <span class="U2">t_for_pati</span> <span class="U2">entlist_le</span> <span class="U2">ngth(num_r</span> <span class="U2">esults,&nbsp;De</span> <span class="U2">faultLogin</span> <span class="U2">.wait_time</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">41</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(v</span> <span class="U2">erificatio</span> <span class="U2">n_passed).</span> <span class="U2">to&nbsp;be_true</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">42</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">43</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;cucumb</span> <span class="U2">er&nbsp;step:&nbsp;A</span> <span class="U2">nd&nbsp;user&nbsp;se</span> <span class="U2">lects&nbsp;"Eig</span> <span class="U2">ht,Patient</span> <span class="U2">"&nbsp;from&nbsp;the</span> <span class="U2">&nbsp;patient&nbsp;l</span> <span class="U2">ist</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">44</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;AccessPa</span> <span class="U2">tientStepR</span> <span class="U2">euse.user_</span> <span class="U2">selects_fr</span> <span class="U2">om_patient</span> <span class="U2">_list(sele</span> <span class="U2">ct_patient</span> <span class="U2">_from_list</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">45</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">46</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expected</span> <span class="U2">_posting&nbsp;=</span> <span class="U2">&nbsp;"Allergie</span> <span class="U2">s"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">47</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;cucumb</span> <span class="U2">er&nbsp;step:&nbsp;p</span> <span class="U2">atient&nbsp;has</span> <span class="U2">&nbsp;a&nbsp;"Allerg</span> <span class="U2">ies"&nbsp;posti</span> <span class="U2">ng</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">48</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;posting&nbsp;</span> <span class="U2">=&nbsp;expected</span> <span class="U2">_posting&nbsp;+</span> <span class="U2">&nbsp;"posting"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">49</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;patient_</span> <span class="U2">details&nbsp;=&nbsp;</span> <span class="U2">PatientDet</span> <span class="U2">ailsHTMLEl</span> <span class="U2">ements.ins</span> <span class="U2">tance</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">50</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;patient_</span> <span class="U2">details.wa</span> <span class="U2">it_until_e</span> <span class="U2">lement_pre</span> <span class="U2">sent(posti</span> <span class="U2">ng,&nbsp;Defaul</span> <span class="U2">tLogin.wai</span> <span class="U2">t_time)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">51</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(p</span> <span class="U2">atient_det</span> <span class="U2">ails.stati</span> <span class="U2">c_dom_elem</span> <span class="U2">ent_exists</span> <span class="U2">?(posting)</span> <span class="U2">).to&nbsp;be_tr</span> <span class="U2">ue</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">52</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">53</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;cucumb</span> <span class="U2">er&nbsp;step:&nbsp;u</span> <span class="U2">ser&nbsp;views&nbsp;</span> <span class="U2">the&nbsp;postin</span> <span class="U2">g&nbsp;details</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">54</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;patient_</span> <span class="U2">details&nbsp;=&nbsp;</span> <span class="U2">PatientDet</span> <span class="U2">ailsHTMLEl</span> <span class="U2">ements.ins</span> <span class="U2">tance</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">55</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;patient_</span> <span class="U2">details.pe</span> <span class="U2">rform_acti</span> <span class="U2">on("Postin</span> <span class="U2">gs")</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">56</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">57</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">58</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;eHMP&nbsp;UI&nbsp;d</span> <span class="U2">isplays&nbsp;al</span> <span class="U2">lergy&nbsp;"(.*</span> <span class="U2">?)"&nbsp;with&nbsp;d</span> <span class="U2">etails$/)&nbsp;</span> <span class="U2">do&nbsp;|allerg</span> <span class="U2">y_name,&nbsp;ta</span> <span class="U2">ble|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">59</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;driver&nbsp;=</span> <span class="U2">&nbsp;TestSuppo</span> <span class="U2">rt.driver</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">60</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;sleep&nbsp;2</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">61</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;header_x</span> <span class="U2">path&nbsp;=&nbsp;"//</span> <span class="U2">h3[contain</span> <span class="U2">s(string()</span> <span class="U2">,&nbsp;'#{aller</span> <span class="U2">gy_name}')</span> <span class="U2">]"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">62</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;wait&nbsp;=&nbsp;S</span> <span class="U2">elenium::W</span> <span class="U2">ebDriver::</span> <span class="U2">Wait.new(:</span> <span class="U2">timeout&nbsp;=&gt;</span> <span class="U2">&nbsp;DefaultLo</span> <span class="U2">gin.wait_t</span> <span class="U2">ime)&nbsp;#&nbsp;sec</span> <span class="U2">onds&nbsp;#&nbsp;wai</span> <span class="U2">t&nbsp;until&nbsp;li</span> <span class="U2">st&nbsp;opens</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">63</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;wait.unt</span> <span class="U2">il&nbsp;{&nbsp;drive</span> <span class="U2">r.find_ele</span> <span class="U2">ment(:xpat</span> <span class="U2">h=&gt;&nbsp;header</span> <span class="U2">_xpath)&nbsp;}&nbsp;</span> <span class="U2">#&nbsp;wait&nbsp;unt</span> <span class="U2">il&nbsp;specifi</span> <span class="U2">c&nbsp;list&nbsp;ele</span> <span class="U2">ment&nbsp;is&nbsp;sh</span> <span class="U2">own</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">64</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;header_i</span> <span class="U2">d&nbsp;=&nbsp;driver</span> <span class="U2">.find_elem</span> <span class="U2">ent(:xpath</span> <span class="U2">=&gt;&nbsp;header_</span> <span class="U2">xpath).att</span> <span class="U2">ribute("id</span> <span class="U2">")</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">65</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">66</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;errors&nbsp;=</span> <span class="U2">&nbsp;[]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">67</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;error_th</span> <span class="U2">rown&nbsp;=&nbsp;fal</span> <span class="U2">se</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">68</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">69</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table.ro</span> <span class="U2">ws.each&nbsp;do</span> <span class="U2">&nbsp;|row|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">70</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;row.ea</span> <span class="U2">ch&nbsp;do&nbsp;|col</span> <span class="U2">umn|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">71</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tabl</span> <span class="U2">e_column_x</span> <span class="U2">path&nbsp;=&nbsp;"//</span> <span class="U2">h3[@id='#{</span> <span class="U2">header_id}</span> <span class="U2">']/followi</span> <span class="U2">ng-sibling</span> <span class="U2">::table[1]</span> <span class="U2">/descendan</span> <span class="U2">t::td[cont</span> <span class="U2">ains(strin</span> <span class="U2">g(),&nbsp;'#{co</span> <span class="U2">lumn}')]"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">72</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;begi</span> <span class="U2">n</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">73</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dr</span> <span class="U2">iver.find_</span> <span class="U2">element(:x</span> <span class="U2">path=&gt;tabl</span> <span class="U2">e_column_x</span> <span class="U2">path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">74</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resc</span> <span class="U2">ue</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">75</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;er</span> <span class="U2">ror_thrown</span> <span class="U2">&nbsp;=&nbsp;true</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">76</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;er</span> <span class="U2">rors.push&nbsp;</span> <span class="U2">"did&nbsp;not&nbsp;f</span> <span class="U2">ind&nbsp;#{colu</span> <span class="U2">mn}&nbsp;under&nbsp;</span> <span class="U2">header&nbsp;#{a</span> <span class="U2">llergy_nam</span> <span class="U2">e}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">77</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">78</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">79</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">80</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">81</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;errors</span> <span class="U2">&nbsp;if&nbsp;error_</span> <span class="U2">thrown</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">82</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(e</span> <span class="U2">rror_throw</span> <span class="U2">n).to&nbsp;be_f</span> <span class="U2">alse</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">83</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">84</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">85</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;When(/^t</span> <span class="U2">he&nbsp;client&nbsp;</span> <span class="U2">requests&nbsp;a</span> <span class="U2">llergies&nbsp;f</span> <span class="U2">or&nbsp;that&nbsp;pa</span> <span class="U2">tient&nbsp;"(.*</span> <span class="U2">?)"$/)&nbsp;do&nbsp;</span> <span class="U2">|pid|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">86</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;&nbsp;temp&nbsp;=</span> <span class="U2">&nbsp;QueryRDKA</span> <span class="U2">ll.new("Ad</span> <span class="U2">verseReact</span> <span class="U2">ion")</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">87</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;&nbsp;temp.a</span> <span class="U2">dd_paramet</span> <span class="U2">er("subjec</span> <span class="U2">t.identifi</span> <span class="U2">er",&nbsp;pid)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">88</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;&nbsp;temp.a</span> <span class="U2">dd_acknowl</span> <span class="U2">edge("true</span> <span class="U2">")</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">89</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;&nbsp;p&nbsp;temp</span> <span class="U2">.path</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">90</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;&nbsp;@respo</span> <span class="U2">nse&nbsp;=&nbsp;HTTP</span> <span class="U2">artyRDK.ge</span> <span class="U2">t_with_aut</span> <span class="U2">horization</span> <span class="U2">(temp.path</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">91</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">92</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">93</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">94</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;re</span> <span class="U2">quests&nbsp;all</span> <span class="U2">ergies&nbsp;for</span> <span class="U2">&nbsp;the&nbsp;patie</span> <span class="U2">nt&nbsp;"(.*?)"</span> <span class="U2">&nbsp;in&nbsp;FHIR&nbsp;f</span> <span class="U2">ormat$/)&nbsp;d</span> <span class="U2">o&nbsp;|pid|&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">95</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;temp&nbsp;=&nbsp;Q</span> <span class="U2">ueryRDKCDS</span> <span class="U2">fhir.new</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">96</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;path&nbsp;=&nbsp;t</span> <span class="U2">emp.path&nbsp;+</span> <span class="U2">&nbsp;"/adverse</span> <span class="U2">Reaction?s</span> <span class="U2">ubject.ide</span> <span class="U2">ntifier="&nbsp;</span> <span class="U2">+&nbsp;"#{pid}"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">97</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;type&nbsp;=&nbsp;{</span> <span class="U2">&nbsp;"Content-</span> <span class="U2">Type"&nbsp;=&gt;&nbsp;"</span> <span class="U2">applicatio</span> <span class="U2">n/json"&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">98</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;HTTPar</span> <span class="U2">tyRDK.get(</span> <span class="U2">path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">99</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;puts&nbsp;@re</span> <span class="U2">sponse</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">100</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">101</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">102</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;re</span> <span class="U2">quests&nbsp;"(.</span> <span class="U2">*?)"&nbsp;aller</span> <span class="U2">gies&nbsp;for&nbsp;t</span> <span class="U2">he&nbsp;patient</span> <span class="U2">&nbsp;"(.*?)"&nbsp;i</span> <span class="U2">n&nbsp;FHIR&nbsp;for</span> <span class="U2">mat$/)&nbsp;do&nbsp;</span> <span class="U2">|limit,&nbsp;pi</span> <span class="U2">d|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">103</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;temp&nbsp;=&nbsp;Q</span> <span class="U2">ueryRDKCDS</span> <span class="U2">fhir.new</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">104</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;path&nbsp;=&nbsp;t</span> <span class="U2">emp.path&nbsp;+</span> <span class="U2">&nbsp;"/adverse</span> <span class="U2">Reaction?s</span> <span class="U2">ubject.ide</span> <span class="U2">ntifier="&nbsp;</span> <span class="U2">+&nbsp;"#{pid}"</span> <span class="U2">&nbsp;+&nbsp;"&amp;limit</span> <span class="U2">="&nbsp;+&nbsp;"#{li</span> <span class="U2">mit}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">105</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;type&nbsp;=&nbsp;{</span> <span class="U2">&nbsp;"Content-</span> <span class="U2">Type"&nbsp;=&gt;&nbsp;"</span> <span class="U2">applicatio</span> <span class="U2">n/json"&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">106</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;HTTPar</span> <span class="U2">tyRDK.get(</span> <span class="U2">path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">107</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json&nbsp;=&nbsp;J</span> <span class="U2">SON.parse(</span> <span class="U2">@response.</span> <span class="U2">body)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">108</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;i&nbsp;=&nbsp;0</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">109</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;while&nbsp;i&nbsp;</span> <span class="U2">&lt;&nbsp;json["en</span> <span class="U2">try"].size</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">110</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@adver</span> <span class="U2">sereaction</span> <span class="U2">&nbsp;=&nbsp;json["e</span> <span class="U2">ntry"][i][</span> <span class="U2">"title"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">111</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;expect</span> <span class="U2">(@adverser</span> <span class="U2">eaction.in</span> <span class="U2">clude?&nbsp;"ad</span> <span class="U2">versereact</span> <span class="U2">ion").to&nbsp;e</span> <span class="U2">q(true)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">112</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;@adv</span> <span class="U2">ersereacti</span> <span class="U2">on</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">113</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;i&nbsp;+=&nbsp;1</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">114</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">115</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;i</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">116</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(l</span> <span class="U2">imit.to_i)</span> <span class="U2">.to&nbsp;eq(i)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">117</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">118</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">119</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;client&nbsp;re</span> <span class="U2">ceives&nbsp;(\d</span> <span class="U2">+)&nbsp;FHIR&nbsp;Do</span> <span class="U2">D&nbsp;result\(</span> <span class="U2">s\)$/)&nbsp;do&nbsp;</span> <span class="U2">|number_of</span> <span class="U2">_results|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">120</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json&nbsp;=&nbsp;J</span> <span class="U2">SON.parse(</span> <span class="U2">@response.</span> <span class="U2">body)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">121</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;output_s</span> <span class="U2">tring&nbsp;=&nbsp;""</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">122</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">123</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;fieldsou</span> <span class="U2">rce&nbsp;=&nbsp;"ent</span> <span class="U2">ry.content</span> <span class="U2">.identifie</span> <span class="U2">r.value"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">124</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;steps_so</span> <span class="U2">urce&nbsp;=&nbsp;fie</span> <span class="U2">ldsource.s</span> <span class="U2">plit('.')</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">125</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">126</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;result_a</span> <span class="U2">rray&nbsp;=&nbsp;jso</span> <span class="U2">n["entry"]</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">127</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">128</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;source_a</span> <span class="U2">llvalues&nbsp;=</span> <span class="U2">&nbsp;[]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">129</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">130</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_ver</span> <span class="U2">ify&nbsp;=&nbsp;Json</span> <span class="U2">Verifier.n</span> <span class="U2">ew</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">131</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_ver</span> <span class="U2">ify.save_a</span> <span class="U2">ll_values_</span> <span class="U2">of_path(0,</span> <span class="U2">&nbsp;steps_sou</span> <span class="U2">rce,&nbsp;json,</span> <span class="U2">&nbsp;output_st</span> <span class="U2">ring,&nbsp;sour</span> <span class="U2">ce_allvalu</span> <span class="U2">es)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">132</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">133</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;num_vist</span> <span class="U2">a_results&nbsp;</span> <span class="U2">=&nbsp;0</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">134</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;source_d</span> <span class="U2">od&nbsp;=&nbsp;/urn:</span> <span class="U2">va:.*:DOD/</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">135</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;source_a</span> <span class="U2">llvalues.e</span> <span class="U2">ach&nbsp;do&nbsp;|va</span> <span class="U2">lue|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">136</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;unless</span> <span class="U2">&nbsp;source_do</span> <span class="U2">d.match(va</span> <span class="U2">lue).nil?</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">137</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num_</span> <span class="U2">vista_resu</span> <span class="U2">lts&nbsp;+=&nbsp;1</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">138</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">139</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">140</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(n</span> <span class="U2">um_vista_r</span> <span class="U2">esults).to</span> <span class="U2">&nbsp;eq(number</span> <span class="U2">_of_result</span> <span class="U2">s.to_i)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">141</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">142</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">143</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;client&nbsp;re</span> <span class="U2">ceives&nbsp;(\d</span> <span class="U2">+)&nbsp;FHIR&nbsp;Vi</span> <span class="U2">stA&nbsp;result</span> <span class="U2">\(s\)$/)&nbsp;d</span> <span class="U2">o&nbsp;|number_</span> <span class="U2">of_results</span> <span class="U2">|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">144</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json&nbsp;=&nbsp;J</span> <span class="U2">SON.parse(</span> <span class="U2">@response.</span> <span class="U2">body)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">145</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;output_s</span> <span class="U2">tring&nbsp;=&nbsp;""</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">146</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">147</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;fieldsou</span> <span class="U2">rce&nbsp;=&nbsp;"res</span> <span class="U2">ponse.iden</span> <span class="U2">tifier.val</span> <span class="U2">ue"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">148</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;steps_so</span> <span class="U2">urce&nbsp;=&nbsp;fie</span> <span class="U2">ldsource.s</span> <span class="U2">plit('.')</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">149</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">150</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;result_a</span> <span class="U2">rray&nbsp;=&nbsp;jso</span> <span class="U2">n["identif</span> <span class="U2">ier"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">151</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">152</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;source_a</span> <span class="U2">llvalues&nbsp;=</span> <span class="U2">&nbsp;[]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">153</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">154</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_ver</span> <span class="U2">ify&nbsp;=&nbsp;Json</span> <span class="U2">Verifier.n</span> <span class="U2">ew</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">155</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_ver</span> <span class="U2">ify.save_a</span> <span class="U2">ll_values_</span> <span class="U2">of_path(0,</span> <span class="U2">&nbsp;steps_sou</span> <span class="U2">rce,&nbsp;json,</span> <span class="U2">&nbsp;output_st</span> <span class="U2">ring,&nbsp;sour</span> <span class="U2">ce_allvalu</span> <span class="U2">es)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">156</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">157</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;num_vist</span> <span class="U2">a_results&nbsp;</span> <span class="U2">=&nbsp;0</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="C2 ln-no" style="text-align: right;">158</td>  
     <td class="nbgC2"><span class="I2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">source_pan</span> <span class="U2">orama&nbsp;=&nbsp;/u</span> <span class="U2">rn:va:.*:</span> <span class="C2">SIT</span> <span class="U2">E</span> <span class="R2"> 
       <div class="IP"> 
       </div> </span> <span class="U2">/</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="C2 ln-no" style="text-align: right;">159</td>  
     <td class="nbgC2"><span class="I2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">source_kod</span> <span class="U2">ak&nbsp;=&nbsp;/urn:</span> <span class="U2">va:.*:</span> <span class="C2">SITE</span> <span class="U2">/</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">160</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;source_a</span> <span class="U2">llvalues.e</span> <span class="U2">ach&nbsp;do&nbsp;|va</span> <span class="U2">lue|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="C2 ln-no" style="text-align: right;">161</td>  
     <td class="nbgC2"><span class="I2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;</span> <span class="U2">#if&nbsp;value.</span> <span class="U2">start_with</span> <span class="U2">?&nbsp;"urn:va:</span> <span class="U2">allergy:</span> <span class="C2">SITE</span> <span class="U2">"&nbsp;#PANORAM</span> <span class="U2">A</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">162</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;unless</span> <span class="U2">&nbsp;source_pa</span> <span class="U2">norama.mat</span> <span class="U2">ch(value).</span> <span class="U2">nil?</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">163</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num_</span> <span class="U2">vista_resu</span> <span class="U2">lts&nbsp;+=&nbsp;1</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">164</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">165</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;unless</span> <span class="U2">&nbsp;source_ko</span> <span class="U2">dak.match(</span> <span class="U2">value).nil</span> <span class="U2">?</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">166</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num_</span> <span class="U2">vista_resu</span> <span class="U2">lts&nbsp;+=&nbsp;1</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">167</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">168</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">169</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(n</span> <span class="U2">um_vista_r</span> <span class="U2">esults).to</span> <span class="U2">&nbsp;eq(number</span> <span class="U2">_of_result</span> <span class="U2">s.to_i)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">170</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">171</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">172</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">class&nbsp;Alle</span> <span class="U2">rgyRespons</span> <span class="U2">eParse</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">173</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;def&nbsp;init</span> <span class="U2">ialize(jso</span> <span class="U2">n_object)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">174</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@json_</span> <span class="U2">verify&nbsp;=&nbsp;J</span> <span class="U2">sonVerifie</span> <span class="U2">r.new</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">175</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@datef</span> <span class="U2">ormat&nbsp;=&nbsp;De</span> <span class="U2">faultDateF</span> <span class="U2">ormat.form</span> <span class="U2">at</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">176</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@found</span> <span class="U2">&nbsp;=&nbsp;false</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">177</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@resul</span> <span class="U2">t_array&nbsp;=&nbsp;</span> <span class="U2">json_objec</span> <span class="U2">t["respons</span> <span class="U2">e"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">178</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end&nbsp;#&nbsp;in</span> <span class="U2">itialize</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">179</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">180</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;def&nbsp;foun</span> <span class="U2">d</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">181</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="U2">&nbsp;@found</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">182</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">183</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">184</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;def&nbsp;num_</span> <span class="U2">results_re</span> <span class="U2">maining</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">185</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="U2">&nbsp;@result_a</span> <span class="U2">rray.lengt</span> <span class="U2">h</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">186</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">187</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">188</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;def&nbsp;pars</span> <span class="U2">e(fieldpat</span> <span class="U2">h,&nbsp;fieldva</span> <span class="U2">luestring)</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">189</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@json_</span> <span class="U2">verify.res</span> <span class="U2">et_output</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">190</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;fie</span> <span class="U2">ldvaluestr</span> <span class="U2">ing.eql?&nbsp;"</span> <span class="U2">IS_FORMATT</span> <span class="U2">ED_DATE"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">191</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@fou</span> <span class="U2">nd&nbsp;=&nbsp;@json</span> <span class="U2">_verify.ma</span> <span class="U2">tches_date</span> <span class="U2">_format(fi</span> <span class="U2">eldpath,&nbsp;@</span> <span class="U2">dateformat</span> <span class="U2">,&nbsp;@result_</span> <span class="U2">array)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">192</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;elsif&nbsp;</span> <span class="U2">fieldvalue</span> <span class="U2">string.eql</span> <span class="U2">?&nbsp;"IS_SET"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">193</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@fou</span> <span class="U2">nd&nbsp;=&nbsp;@json</span> <span class="U2">_verify.de</span> <span class="U2">fined?([fi</span> <span class="U2">eldpath],&nbsp;</span> <span class="U2">@result_ar</span> <span class="U2">ray)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">194</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;elsif&nbsp;</span> <span class="U2">fieldvalue</span> <span class="U2">string.sta</span> <span class="U2">rt_with?&nbsp;"</span> <span class="U2">CONTAINS"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">195</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;term</span> <span class="U2">&nbsp;=&nbsp;fieldva</span> <span class="U2">luestring.</span> <span class="U2">split('&nbsp;')</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">196</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fiel</span> <span class="U2">dvalue&nbsp;=&nbsp;[</span> <span class="U2">term[1]]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">197</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@fou</span> <span class="U2">nd&nbsp;=&nbsp;@json</span> <span class="U2">_verify.ob</span> <span class="U2">ject_conta</span> <span class="U2">ins_partia</span> <span class="U2">l_value(fi</span> <span class="U2">eldpath,&nbsp;f</span> <span class="U2">ieldvalue,</span> <span class="U2">&nbsp;@result_a</span> <span class="U2">rray)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">198</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">199</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@fou</span> <span class="U2">nd&nbsp;=&nbsp;@json</span> <span class="U2">_verify.bu</span> <span class="U2">ild_subarr</span> <span class="U2">ay(fieldpa</span> <span class="U2">th,&nbsp;fieldv</span> <span class="U2">aluestring</span> <span class="U2">,&nbsp;@result_</span> <span class="U2">array)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">200</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@res</span> <span class="U2">ult_array&nbsp;</span> <span class="U2">=&nbsp;@json_ve</span> <span class="U2">rify.subar</span> <span class="U2">ry</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">201</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">202</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">203</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;@fo</span> <span class="U2">und&nbsp;==&nbsp;fal</span> <span class="U2">se</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">204</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;output&nbsp;</span> <span class="U2">=&nbsp;@json_ve</span> <span class="U2">rify.outpu</span> <span class="U2">t</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">205</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;output.</span> <span class="U2">each&nbsp;do&nbsp;|&nbsp;</span> <span class="U2">msg|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">206</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;msg</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">207</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;end&nbsp;#ou</span> <span class="U2">tput.each</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">208</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts</span> <span class="U2">&nbsp;@json_ver</span> <span class="U2">ify.error_</span> <span class="U2">message</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">209</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;#&nbsp;</span> <span class="U2">if&nbsp;found&nbsp;=</span> <span class="U2">=&nbsp;false</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">210</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">211</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">212</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">213</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;FHIR&nbsp;resu</span> <span class="U2">lts&nbsp;contai</span> <span class="U2">n&nbsp;allergy$</span> <span class="U2">/)&nbsp;do&nbsp;|tab</span> <span class="U2">le|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">214</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@json_ob</span> <span class="U2">ject&nbsp;=&nbsp;JSO</span> <span class="U2">N.parse(@r</span> <span class="U2">esponse.bo</span> <span class="U2">dy)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">215</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">216</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;parser&nbsp;=</span> <span class="U2">&nbsp;AllergyRe</span> <span class="U2">sponsePars</span> <span class="U2">e.new(@jso</span> <span class="U2">n_object)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">217</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table.ro</span> <span class="U2">ws.each&nbsp;do</span> <span class="U2">&nbsp;|fieldpat</span> <span class="U2">h,&nbsp;fieldva</span> <span class="U2">luestring|</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">218</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;parser</span> <span class="U2">.parse(fie</span> <span class="U2">ldpath,&nbsp;fi</span> <span class="U2">eldvaluest</span> <span class="U2">ring)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">219</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">220</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;expect</span> <span class="U2">(parser.fo</span> <span class="U2">und).to&nbsp;be</span> <span class="U2">_true</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">221</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;expect</span> <span class="U2">(parser.nu</span> <span class="U2">m_results_</span> <span class="U2">remaining)</span> <span class="U2">.to_not&nbsp;eq</span> <span class="U2">(0)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">222</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end&nbsp;#&nbsp;ta</span> <span class="U2">ble.rows.e</span> <span class="U2">ach</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">223</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">224</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">225</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;FHIR&nbsp;resu</span> <span class="U2">lts&nbsp;contai</span> <span class="U2">n$/)&nbsp;do&nbsp;|t</span> <span class="U2">able|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">226</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;dateform</span> <span class="U2">at&nbsp;=&nbsp;Defau</span> <span class="U2">ltDateForm</span> <span class="U2">at.format</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">227</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@json_ob</span> <span class="U2">ject&nbsp;=&nbsp;JSO</span> <span class="U2">N.parse(@r</span> <span class="U2">esponse.bo</span> <span class="U2">dy)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">228</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_ver</span> <span class="U2">ify&nbsp;=&nbsp;Json</span> <span class="U2">Verifier.n</span> <span class="U2">ew</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">229</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">230</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;allfound</span> <span class="U2">&nbsp;=&nbsp;true</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">231</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table.ro</span> <span class="U2">ws.each&nbsp;do</span> <span class="U2">&nbsp;|fieldpat</span> <span class="U2">h,&nbsp;fieldva</span> <span class="U2">luestring|</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">232</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;json_v</span> <span class="U2">erify.rese</span> <span class="U2">t_output</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">233</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">234</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;fie</span> <span class="U2">ldvaluestr</span> <span class="U2">ing.eql?&nbsp;"</span> <span class="U2">IS_FORMATT</span> <span class="U2">ED_DATE"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">235</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foun</span> <span class="U2">d&nbsp;=&nbsp;json_v</span> <span class="U2">erify.all_</span> <span class="U2">matches_da</span> <span class="U2">te_format(</span> <span class="U2">fieldpath,</span> <span class="U2">&nbsp;dateforma</span> <span class="U2">t,&nbsp;[@json_</span> <span class="U2">object])</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">236</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;elsif&nbsp;</span> <span class="U2">fieldvalue</span> <span class="U2">string.eql</span> <span class="U2">?&nbsp;"IS_SET"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">237</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foun</span> <span class="U2">d&nbsp;=&nbsp;json_v</span> <span class="U2">erify.defi</span> <span class="U2">ned?([fiel</span> <span class="U2">dpath],&nbsp;@j</span> <span class="U2">son_object</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">238</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;elsif&nbsp;</span> <span class="U2">fieldvalue</span> <span class="U2">string.sta</span> <span class="U2">rt_with?&nbsp;"</span> <span class="U2">CONTAINS"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">239</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;term</span> <span class="U2">&nbsp;=&nbsp;fieldva</span> <span class="U2">luestring.</span> <span class="U2">split('&nbsp;')</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">240</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fiel</span> <span class="U2">dvalue&nbsp;=&nbsp;[</span> <span class="U2">term[1]]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">241</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foun</span> <span class="U2">d&nbsp;=&nbsp;json_v</span> <span class="U2">erify.obje</span> <span class="U2">ct_contain</span> <span class="U2">s_partial_</span> <span class="U2">value(fiel</span> <span class="U2">dpath,&nbsp;fie</span> <span class="U2">ldvalue,&nbsp;[</span> <span class="U2">@json_obje</span> <span class="U2">ct])</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">242</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">243</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fiel</span> <span class="U2">dvalue&nbsp;=&nbsp;[</span> <span class="U2">fieldvalue</span> <span class="U2">string]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">244</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foun</span> <span class="U2">d&nbsp;=&nbsp;json_v</span> <span class="U2">erify.obje</span> <span class="U2">ct_contain</span> <span class="U2">s_path_val</span> <span class="U2">ue_combo(f</span> <span class="U2">ieldpath,&nbsp;</span> <span class="U2">fieldvalue</span> <span class="U2">,&nbsp;[@json_o</span> <span class="U2">bject])</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">245</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;#&nbsp;</span> <span class="U2">if</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">246</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;allfou</span> <span class="U2">nd&nbsp;&amp;&amp;=&nbsp;fou</span> <span class="U2">nd</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">247</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;fou</span> <span class="U2">nd&nbsp;==&nbsp;fals</span> <span class="U2">e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">248</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outp</span> <span class="U2">ut&nbsp;=&nbsp;json_</span> <span class="U2">verify.out</span> <span class="U2">put</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">249</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outp</span> <span class="U2">ut.each&nbsp;do</span> <span class="U2">&nbsp;|msg|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">250</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;</span> <span class="U2">msg</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">251</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;</span> <span class="U2">#&nbsp;output.e</span> <span class="U2">ach</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">252</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts</span> <span class="U2">&nbsp;json_veri</span> <span class="U2">fy.error_m</span> <span class="U2">essage</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">253</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;#&nbsp;</span> <span class="U2">if&nbsp;found&nbsp;=</span> <span class="U2">=&nbsp;false</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">254</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end&nbsp;#&nbsp;ta</span> <span class="U2">ble.rows.e</span> <span class="U2">ach</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">255</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(a</span> <span class="U2">llfound).t</span> <span class="U2">o&nbsp;be_true</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">256</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">257</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">258</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#Then(/^th</span> <span class="U2">e&nbsp;client&nbsp;r</span> <span class="U2">eceives&nbsp;(\</span> <span class="U2">d+)&nbsp;VPR&nbsp;Do</span> <span class="U2">D&nbsp;results$</span> <span class="U2">/)&nbsp;do&nbsp;|arg</span> <span class="U2">1|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">259</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;client&nbsp;re</span> <span class="U2">ceives&nbsp;(\d</span> <span class="U2">+)&nbsp;VPR&nbsp;DoD</span> <span class="U2">&nbsp;result\(s</span> <span class="U2">\)$/)&nbsp;do&nbsp;|</span> <span class="U2">number_of_</span> <span class="U2">results|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">260</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json&nbsp;=&nbsp;J</span> <span class="U2">SON.parse(</span> <span class="U2">@response.</span> <span class="U2">body)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">261</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;output_s</span> <span class="U2">tring&nbsp;=&nbsp;""</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">262</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">263</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;fieldsou</span> <span class="U2">rce&nbsp;=&nbsp;"dat</span> <span class="U2">a.items.ui</span> <span class="U2">d"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">264</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;steps_so</span> <span class="U2">urce&nbsp;=&nbsp;fie</span> <span class="U2">ldsource.s</span> <span class="U2">plit('.')</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">265</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">266</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;source_a</span> <span class="U2">llvalues&nbsp;=</span> <span class="U2">&nbsp;[]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">267</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">268</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_ver</span> <span class="U2">ify&nbsp;=&nbsp;Json</span> <span class="U2">Verifier.n</span> <span class="U2">ew</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">269</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_ver</span> <span class="U2">ify.save_a</span> <span class="U2">ll_values_</span> <span class="U2">of_path(0,</span> <span class="U2">&nbsp;steps_sou</span> <span class="U2">rce,&nbsp;json,</span> <span class="U2">&nbsp;output_st</span> <span class="U2">ring,&nbsp;sour</span> <span class="U2">ce_allvalu</span> <span class="U2">es)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">270</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">271</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;source</span> <span class="U2">_allvalues</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">272</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;num_vist</span> <span class="U2">a_results&nbsp;</span> <span class="U2">=&nbsp;0</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">273</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;source_d</span> <span class="U2">od&nbsp;=&nbsp;/urn:</span> <span class="U2">va:.*:DOD/</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">274</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;source_a</span> <span class="U2">llvalues.e</span> <span class="U2">ach&nbsp;do&nbsp;|va</span> <span class="U2">lue|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">275</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;unless</span> <span class="U2">&nbsp;source_do</span> <span class="U2">d.match(va</span> <span class="U2">lue).nil?</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">276</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num_</span> <span class="U2">vista_resu</span> <span class="U2">lts&nbsp;+=&nbsp;1</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">277</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">278</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">279</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(n</span> <span class="U2">um_vista_r</span> <span class="U2">esults).to</span> <span class="U2">&nbsp;eq(number</span> <span class="U2">_of_result</span> <span class="U2">s.to_i)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">280</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">281</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">282</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^VPR</span> <span class="U2">&nbsp;returns&nbsp;(</span> <span class="U2">\d+)&nbsp;VistA</span> <span class="U2">&nbsp;result\(s</span> <span class="U2">\)$/)&nbsp;do&nbsp;|</span> <span class="U2">number_of_</span> <span class="U2">results|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">283</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;"STOP&nbsp;</span> <span class="U2">USING&nbsp;THIS</span> <span class="U2">&nbsp;FUNCTION,</span> <span class="U2">&nbsp;USE&nbsp;the&nbsp;c</span> <span class="U2">lient&nbsp;rece</span> <span class="U2">ives&nbsp;(\d+)</span> <span class="U2">&nbsp;VPR&nbsp;VistA</span> <span class="U2">&nbsp;result\(s</span> <span class="U2">\)"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">284</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json&nbsp;=&nbsp;J</span> <span class="U2">SON.parse(</span> <span class="U2">@response.</span> <span class="U2">body)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">285</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;output_s</span> <span class="U2">tring&nbsp;=&nbsp;""</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">286</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">287</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;fieldsou</span> <span class="U2">rce&nbsp;=&nbsp;"dat</span> <span class="U2">a.items.ui</span> <span class="U2">d"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">288</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;steps_so</span> <span class="U2">urce&nbsp;=&nbsp;fie</span> <span class="U2">ldsource.s</span> <span class="U2">plit('.')</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">289</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">290</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;source_a</span> <span class="U2">llvalues&nbsp;=</span> <span class="U2">&nbsp;[]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">291</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">292</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_ver</span> <span class="U2">ify&nbsp;=&nbsp;Json</span> <span class="U2">Verifier.n</span> <span class="U2">ew</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">293</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_ver</span> <span class="U2">ify.save_a</span> <span class="U2">ll_values_</span> <span class="U2">of_path(0,</span> <span class="U2">&nbsp;steps_sou</span> <span class="U2">rce,&nbsp;json,</span> <span class="U2">&nbsp;output_st</span> <span class="U2">ring,&nbsp;sour</span> <span class="U2">ce_allvalu</span> <span class="U2">es)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">294</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">295</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;num_vist</span> <span class="U2">a_results&nbsp;</span> <span class="U2">=&nbsp;0</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="C2 ln-no" style="text-align: right;">296</td>  
     <td class="nbgC2"><span class="I2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">source_pan</span> <span class="U2">orama&nbsp;=&nbsp;/u</span> <span class="U2">rn:va:.*:</span> <span class="C2">SIT</span> <span class="U2">E</span> <span class="R2"> 
       <div class="IP"> 
       </div> </span> <span class="U2">/</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="C2 ln-no" style="text-align: right;">297</td>  
     <td class="nbgC2"><span class="I2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">source_kod</span> <span class="U2">ak&nbsp;=&nbsp;/urn:</span> <span class="U2">va:.*:</span> <span class="C2">SITE</span> <span class="U2">/</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">298</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;source_a</span> <span class="U2">llvalues.e</span> <span class="U2">ach&nbsp;do&nbsp;|va</span> <span class="U2">lue|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="C2 ln-no" style="text-align: right;">299</td>  
     <td class="nbgC2"><span class="I2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;</span> <span class="U2">#if&nbsp;value.</span> <span class="U2">start_with</span> <span class="U2">?&nbsp;"urn:va:</span> <span class="U2">allergy:</span> <span class="C2">SITE</span> <span class="U2">"&nbsp;#PANORAM</span> <span class="U2">A</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">300</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;unless</span> <span class="U2">&nbsp;source_pa</span> <span class="U2">norama.mat</span> <span class="U2">ch(value).</span> <span class="U2">nil?</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">301</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num_</span> <span class="U2">vista_resu</span> <span class="U2">lts&nbsp;+=&nbsp;1</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">302</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">303</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;unless</span> <span class="U2">&nbsp;source_ko</span> <span class="U2">dak.match(</span> <span class="U2">value).nil</span> <span class="U2">?</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">304</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num_</span> <span class="U2">vista_resu</span> <span class="U2">lts&nbsp;+=&nbsp;1</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">305</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">306</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">307</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(n</span> <span class="U2">um_vista_r</span> <span class="U2">esults).to</span> <span class="U2">&nbsp;eq(number</span> <span class="U2">_of_result</span> <span class="U2">s.to_i)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">308</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">309</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">310</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^JDS</span> <span class="U2">&nbsp;returns&nbsp;(</span> <span class="U2">\d+)&nbsp;resul</span> <span class="U2">ts$/)&nbsp;do&nbsp;|</span> <span class="U2">num_result</span> <span class="U2">s|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">311</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@json_ob</span> <span class="U2">ject&nbsp;=&nbsp;JSO</span> <span class="U2">N.parse(@r</span> <span class="U2">esponse.bo</span> <span class="U2">dy)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">312</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(@</span> <span class="U2">json_objec</span> <span class="U2">t["data"][</span> <span class="U2">"totalItem</span> <span class="U2">s"]).to&nbsp;eq</span> <span class="U2">(num_resul</span> <span class="U2">ts.to_i)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">313</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">314</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">315</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">def&nbsp;print_</span> <span class="U2">json_verif</span> <span class="U2">y(json_ver</span> <span class="U2">ify)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">316</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;output&nbsp;=</span> <span class="U2">&nbsp;json_veri</span> <span class="U2">fy.output</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">317</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;output.e</span> <span class="U2">ach&nbsp;do&nbsp;|ms</span> <span class="U2">g|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">318</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;msg</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">319</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end&nbsp;#out</span> <span class="U2">put.each</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">320</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">321</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">322</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;VPR&nbsp;resul</span> <span class="U2">ts&nbsp;contain</span> <span class="U2">&nbsp;allergy&nbsp;t</span> <span class="U2">erminology</span> <span class="U2">&nbsp;from&nbsp;"(.*</span> <span class="U2">?)"$/)&nbsp;do&nbsp;</span> <span class="U2">|_arg1,&nbsp;ta</span> <span class="U2">ble|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">323</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;dateform</span> <span class="U2">at&nbsp;=&nbsp;Defau</span> <span class="U2">ltDateForm</span> <span class="U2">at.format</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">324</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">325</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@json_ob</span> <span class="U2">ject&nbsp;=&nbsp;JSO</span> <span class="U2">N.parse(@r</span> <span class="U2">esponse.bo</span> <span class="U2">dy)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">326</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_ver</span> <span class="U2">ify&nbsp;=&nbsp;Json</span> <span class="U2">Verifier.n</span> <span class="U2">ew</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">327</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">328</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;result_a</span> <span class="U2">rray&nbsp;=&nbsp;@js</span> <span class="U2">on_object[</span> <span class="U2">"data"]["i</span> <span class="U2">tems"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">329</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table.ro</span> <span class="U2">ws.each&nbsp;do</span> <span class="U2">&nbsp;|fieldpat</span> <span class="U2">h,&nbsp;fieldva</span> <span class="U2">luestring|</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">330</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;json_v</span> <span class="U2">erify.rese</span> <span class="U2">t_output</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">331</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;fie</span> <span class="U2">ldvaluestr</span> <span class="U2">ing.eql?&nbsp;"</span> <span class="U2">IS_FORMATT</span> <span class="U2">ED_DATE"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">332</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foun</span> <span class="U2">d&nbsp;=&nbsp;json_v</span> <span class="U2">erify.matc</span> <span class="U2">hes_date_f</span> <span class="U2">ormat(fiel</span> <span class="U2">dpath,&nbsp;dat</span> <span class="U2">eformat,&nbsp;r</span> <span class="U2">esult_arra</span> <span class="U2">y)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">333</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;elsif&nbsp;</span> <span class="U2">fieldvalue</span> <span class="U2">string.eql</span> <span class="U2">?&nbsp;"IS_NOT_</span> <span class="U2">SET"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">334</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foun</span> <span class="U2">d&nbsp;=&nbsp;json_v</span> <span class="U2">erify.not_</span> <span class="U2">defined?([</span> <span class="U2">fieldpath]</span> <span class="U2">,&nbsp;result_a</span> <span class="U2">rray)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">335</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;elsif&nbsp;</span> <span class="U2">fieldvalue</span> <span class="U2">string.eql</span> <span class="U2">?&nbsp;"IS_SET"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">336</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foun</span> <span class="U2">d&nbsp;=&nbsp;json_v</span> <span class="U2">erify.defi</span> <span class="U2">ned?([fiel</span> <span class="U2">dpath],&nbsp;re</span> <span class="U2">sult_array</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">337</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;elsif&nbsp;</span> <span class="U2">fieldvalue</span> <span class="U2">string.sta</span> <span class="U2">rt_with?&nbsp;"</span> <span class="U2">CONTAINS"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">338</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;term</span> <span class="U2">&nbsp;=&nbsp;fieldva</span> <span class="U2">luestring.</span> <span class="U2">split('&nbsp;')</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">339</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fiel</span> <span class="U2">dvalue&nbsp;=&nbsp;[</span> <span class="U2">term[1]]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">340</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foun</span> <span class="U2">d&nbsp;=&nbsp;json_v</span> <span class="U2">erify.obje</span> <span class="U2">ct_contain</span> <span class="U2">s_partial_</span> <span class="U2">value(fiel</span> <span class="U2">dpath,&nbsp;fie</span> <span class="U2">ldvalue,&nbsp;r</span> <span class="U2">esult_arra</span> <span class="U2">y)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">341</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">342</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foun</span> <span class="U2">d&nbsp;=&nbsp;json_v</span> <span class="U2">erify.buil</span> <span class="U2">d_subarray</span> <span class="U2">(fieldpath</span> <span class="U2">,&nbsp;fieldval</span> <span class="U2">uestring,&nbsp;</span> <span class="U2">result_arr</span> <span class="U2">ay)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">343</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resu</span> <span class="U2">lt_array&nbsp;=</span> <span class="U2">&nbsp;json_veri</span> <span class="U2">fy.subarry</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">344</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">345</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">346</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;fou</span> <span class="U2">nd&nbsp;==&nbsp;fals</span> <span class="U2">e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">347</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outp</span> <span class="U2">ut&nbsp;=&nbsp;json_</span> <span class="U2">verify.out</span> <span class="U2">put</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">348</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outp</span> <span class="U2">ut.each&nbsp;do</span> <span class="U2">&nbsp;|msg|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">349</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;</span> <span class="U2">msg</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">350</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;</span> <span class="U2">#output.ea</span> <span class="U2">ch</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">351</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;puts</span> <span class="U2">&nbsp;"for&nbsp;fiel</span> <span class="U2">d&nbsp;#{fieldp</span> <span class="U2">ath}:&nbsp;#{js</span> <span class="U2">on_verify.</span> <span class="U2">error_mess</span> <span class="U2">age}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">352</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;#&nbsp;</span> <span class="U2">if&nbsp;found&nbsp;=</span> <span class="U2">=&nbsp;false</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">353</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;expect</span> <span class="U2">(found).to</span> <span class="U2">&nbsp;be_true</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">354</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;expect</span> <span class="U2">(result_ar</span> <span class="U2">ray.length</span> <span class="U2">).to_not&nbsp;e</span> <span class="U2">q(0)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">355</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end&nbsp;#&nbsp;ta</span> <span class="U2">ble.rows.e</span> <span class="U2">ach</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">356</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">357</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">358</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^exp</span> <span class="U2">ected&nbsp;fiel</span> <span class="U2">ds&nbsp;match$/</span> <span class="U2">)&nbsp;do&nbsp;|tabl</span> <span class="U2">e|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">359</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;dateform</span> <span class="U2">at&nbsp;=&nbsp;Defau</span> <span class="U2">ltDateForm</span> <span class="U2">at.format</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">360</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">361</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@json_ob</span> <span class="U2">ject&nbsp;=&nbsp;JSO</span> <span class="U2">N.parse(@r</span> <span class="U2">esponse.bo</span> <span class="U2">dy)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">362</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_ver</span> <span class="U2">ify&nbsp;=&nbsp;Json</span> <span class="U2">Verifier.n</span> <span class="U2">ew</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">363</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">364</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;result_a</span> <span class="U2">rray&nbsp;=&nbsp;@js</span> <span class="U2">on_object[</span> <span class="U2">"entry"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">365</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;output_s</span> <span class="U2">tring&nbsp;=&nbsp;""</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">366</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table.ro</span> <span class="U2">ws.each&nbsp;do</span> <span class="U2">&nbsp;|fieldsou</span> <span class="U2">rce,&nbsp;field</span> <span class="U2">match|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">367</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;steps_</span> <span class="U2">source&nbsp;=&nbsp;f</span> <span class="U2">ieldsource</span> <span class="U2">.split('.'</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">368</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;steps_</span> <span class="U2">match&nbsp;=&nbsp;fi</span> <span class="U2">eldmatch.s</span> <span class="U2">plit('.')</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">369</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;source</span> <span class="U2">_allvalues</span> <span class="U2">&nbsp;=&nbsp;[]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">370</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;match_</span> <span class="U2">allvalues&nbsp;</span> <span class="U2">=&nbsp;[]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">371</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;json_v</span> <span class="U2">erify.save</span> <span class="U2">_all_value</span> <span class="U2">s_of_path(</span> <span class="U2">0,&nbsp;steps_s</span> <span class="U2">ource,&nbsp;res</span> <span class="U2">ult_array[</span> <span class="U2">0],&nbsp;output</span> <span class="U2">_string,&nbsp;s</span> <span class="U2">ource_allv</span> <span class="U2">alues)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">372</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;json_v</span> <span class="U2">erify.save</span> <span class="U2">_all_value</span> <span class="U2">s_of_path(</span> <span class="U2">0,&nbsp;steps_m</span> <span class="U2">atch,&nbsp;resu</span> <span class="U2">lt_array[0</span> <span class="U2">],&nbsp;output_</span> <span class="U2">string,&nbsp;ma</span> <span class="U2">tch_allval</span> <span class="U2">ues)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">373</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;source</span> <span class="U2">_allvalues</span> <span class="U2">.each&nbsp;do&nbsp;|</span> <span class="U2">value|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">374</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valu</span> <span class="U2">e.sub!&nbsp;'#'</span> <span class="U2">,&nbsp;''</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">375</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_t</span> <span class="U2">hey_match&nbsp;</span> <span class="U2">=&nbsp;match_al</span> <span class="U2">lvalues.in</span> <span class="U2">clude?(val</span> <span class="U2">ue)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">376</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"l</span> <span class="U2">ooking&nbsp;for</span> <span class="U2">&nbsp;fieldsour</span> <span class="U2">ce&nbsp;#{value</span> <span class="U2">}&nbsp;in&nbsp;field</span> <span class="U2">match&nbsp;#{ma</span> <span class="U2">tch_allval</span> <span class="U2">ues}"&nbsp;unle</span> <span class="U2">ss&nbsp;do_they</span> <span class="U2">_match</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">377</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expe</span> <span class="U2">ct(do_they</span> <span class="U2">_match).to</span> <span class="U2">&nbsp;be_true</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">378</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;#&nbsp;</span> <span class="U2">source_all</span> <span class="U2">values.eac</span> <span class="U2">h</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">379</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end&nbsp;#tab</span> <span class="U2">le.rows.ea</span> <span class="U2">ch</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">380</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">381</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">382</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^res</span> <span class="U2">ponse&nbsp;is&nbsp;a</span> <span class="U2">&nbsp;json&nbsp;obje</span> <span class="U2">ct$/)&nbsp;do</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">383</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@json_ob</span> <span class="U2">ject&nbsp;=&nbsp;JSO</span> <span class="U2">N.parse(@r</span> <span class="U2">esponse.bo</span> <span class="U2">dy)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">384</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_ver</span> <span class="U2">ify&nbsp;=&nbsp;Json</span> <span class="U2">Verifier.n</span> <span class="U2">ew</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">385</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;print_js</span> <span class="U2">on_verify(</span> <span class="U2">json_verif</span> <span class="U2">y)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">386</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">387</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">388</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;sa</span> <span class="U2">ves&nbsp;an&nbsp;all</span> <span class="U2">ergy&nbsp;for&nbsp;p</span> <span class="U2">atient&nbsp;wit</span> <span class="U2">h&nbsp;content&nbsp;</span> <span class="U2">"(.*?)"$/)</span> <span class="U2">&nbsp;do&nbsp;|conte</span> <span class="U2">nt|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">389</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;path&nbsp;=&nbsp;S</span> <span class="U2">tring.new(</span> <span class="U2">DefaultLog</span> <span class="U2">in.rdk_wri</span> <span class="U2">teback_url</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">390</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;HTTPar</span> <span class="U2">tyRDK.post</span> <span class="U2">(path+"/re</span> <span class="U2">source/wri</span> <span class="U2">teback/all</span> <span class="U2">ergy/save?</span> <span class="U2">",&nbsp;content</span> <span class="U2">,&nbsp;{&nbsp;"Conte</span> <span class="U2">nt-Type"=&gt;</span> <span class="U2">"applicati</span> <span class="U2">on/json"&nbsp;}</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">391</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">392</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">393</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;re</span> <span class="U2">quests&nbsp;all</span> <span class="U2">ergies&nbsp;for</span> <span class="U2">&nbsp;the&nbsp;patie</span> <span class="U2">nt&nbsp;"([^"]*</span> <span class="U2">)"&nbsp;in&nbsp;VPR&nbsp;</span> <span class="U2">format$/)&nbsp;</span> <span class="U2">do&nbsp;|pid|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">394</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;request&nbsp;</span> <span class="U2">=&nbsp;QueryRDK</span> <span class="U2">Domain.new</span> <span class="U2">('allergy'</span> <span class="U2">,&nbsp;pid)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">395</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;reques</span> <span class="U2">t.path</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">396</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;path&nbsp;=&nbsp;r</span> <span class="U2">equest.pat</span> <span class="U2">h</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">397</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;HTTPar</span> <span class="U2">tyRDK.get(</span> <span class="U2">path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">398</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">399</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">400</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;re</span> <span class="U2">quests&nbsp;all</span> <span class="U2">ergies&nbsp;for</span> <span class="U2">&nbsp;the&nbsp;patie</span> <span class="U2">nt&nbsp;"([^"]*</span> <span class="U2">)"&nbsp;with&nbsp;pa</span> <span class="U2">rameters$/</span> <span class="U2">)&nbsp;do&nbsp;|pid,</span> <span class="U2">&nbsp;table|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">401</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;request&nbsp;</span> <span class="U2">=&nbsp;QueryRDK</span> <span class="U2">Domain.new</span> <span class="U2">('allergy'</span> <span class="U2">,&nbsp;pid)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">402</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">403</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table.ro</span> <span class="U2">ws.each&nbsp;do</span> <span class="U2">&nbsp;|row|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">404</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;reques</span> <span class="U2">t.add_para</span> <span class="U2">meter(row[</span> <span class="U2">0],&nbsp;row[1]</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">405</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">406</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;reques</span> <span class="U2">t.path</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">407</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;path&nbsp;=&nbsp;r</span> <span class="U2">equest.pat</span> <span class="U2">h</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">408</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;HTTPar</span> <span class="U2">tyRDK.get(</span> <span class="U2">path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">409</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
   </tbody>
  </table> 
  <p class="copyright" style="margin-top: 25px; padding-top: 2px; border-top: solid #a0a0a0 1px; max-width: none;">Araxis Merge (but not the data content of this report) is Copyright Â© 1993-2016 Araxis Ltd (<a href="http://www.araxis.com/" title="Link to the Araxis corporate web site">www.araxis.com</a>). All rights reserved.</p>   
 </body>
</html>