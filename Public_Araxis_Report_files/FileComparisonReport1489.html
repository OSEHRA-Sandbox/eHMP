<!--?xml version="1.0"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:mg="http://www.araxis.com/2002/Merge/Reporting" xmlns="http://www.w3.org/1999/xhtml">
 <head> 
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> 
  <!--The layout and design of this report is Copyright Â© 2003-2016 Araxis Ltd. All rights reserved.--> 
  <!--The copyright of the data content of this report belongs to the relevant copyright holders.--> 
  <title>1489. EPMO Open Source Coordination Office Redaction File Detail Report</title> 
  <style type="text/css">
body { background: #fff;  color: #000; margin: 0px 14px 14px 14px; }
h1, h2, h3, h4, h5 {
  padding: 0em;
  margin: 1.5em 0em .25em 0em;
  text-align: left;
  font-weight: normal;
  font-family: Arial, Helvetica, sans-serif;
  font-size: 70%;
  max-width: 55em;
}
body, h4, h5, p, ol, ul, li, td, th { font-family: Verdana, Arial, Helvetica, sans-serif; text-align: left; }

h4, h5, p, ol, ul, li { font-size: 70%; }
input {
  font-family: Arial, Helvetica, sans-serif;
  font-size: 120%;
}

h1 { margin: 14px 0em 1.2em 0em; font-size: 112%; line-height: 130%;}
h2 { font-size: 125%; line-height: 84%;}
h3 { margin-top: 1.4em; font-size: 81%; }
h4 { margin-top: 1em; font-size: 70%; }
h5 { margin-top: 1em; font-size: 100%; font-style: italic;}
h1 strong, h2 strong, h3 strong, h4 strong { font-weight: bold; }

p { margin: 6px 0em 6px 0em; max-width: 55em;}
p.code, code {}
p { font-size: 70%; line-height: 125%; }
table { font-size: 70%;}

p.copyright, .small { font-size: 60%; line-height: 120%; }
p.copyright { margin: 3px 0px 0px 0px; padding: 0px; text-align: left; }
acronym { font-variant: small-caps; }
div.pad { padding: 3px; }
span.lineEndings { color: red; font-size: 70%; }

table.mgRowGroup, table.mgRowGroupFolder { border: 1px solid #a0a0a0; margin: 10px 0px 10px 0px; width: 100%; table-layout: fixed; border-collapse: collapse; }
table.mgRowGroup td { vertical-align: top; padding: 0; }
table.mgRowGroupFolder td { vertical-align: top; padding: 1px 0 1px 0; }
div.IP { width: 2px; height: 1em; float: left; }

img.mgFldrIcon {float: left; text-align: left; margin: -1px 2px 0px 0px;  height: 16px; width: 16px; border: none; vertical-align: top; background-color: transparent;}
div.mgFldrIcon {float: left; width: auto;}
span.left {float: left;width: auto;}
span.right {float: right;width: auto;}

table.bordered { border-collapse: collapse; border: 1px solid #a0a0a0; margin: 10px 0px 10px 0px;}
table.bordered th, table.bordered td { vertical-align: top; padding: 3px; border: 1px solid #a0a0a0;}
table.bordered th { background-color: #e5e5e5; }
table.bordered td.group { background-color: #f5f5f5; }
span.disabledNavigation { color: #a0a0a0; }
div.navigation { margin-top: 14px; font-size: 70%; }
div.comment { font-weight: normal; color: #000; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fcfed8; padding: 2px 5px 2px 5px; border: 1px solid #E3E5C3; margin: 1px 2px 3px 2px; -moz-border-radius: 7px; border-radius: 7px; }

                span.U1, span.U1 a {float: left; width: auto;color: #000000; background-color: #FFFFFF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.U1 a {text-decoration: underline;}
td.U1 {color: #000000; background-color: #FFFFFF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.R1, span.R1 a {float: left; width: auto;color: #800000; background-color: #F3E6D8; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.R1 a {text-decoration: underline;}
td.R1 {color: #800000; background-color: #F3E6D8; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.I1, span.I1 a {float: left; width: auto;color: #800000; background-color: #D1E8CF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.I1 a {text-decoration: underline;}
td.I1 {color: #800000; background-color: #D1E8CF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.C1, span.C1 a {float: left; width: auto;color: #800000; background-color: #DACDE6; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.C1 a {text-decoration: underline;}
td.C1 {color: #800000; background-color: #DACDE6; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
td.nbgC1 {color: #800000; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; background-color: #FFFFFF; }
span.U2, span.U2 a {float: left; width: auto;color: #000000; background-color: #FFFFFF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.U2 a {text-decoration: underline;}
td.U2 {color: #000000; background-color: #FFFFFF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.R2, span.R2 a {float: left; width: auto;color: #800000; background-color: #F3E6D8; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.R2 a {text-decoration: underline;}
td.R2 {color: #800000; background-color: #F3E6D8; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.I2, span.I2 a {float: left; width: auto;color: #800000; background-color: #D1E8CF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.I2 a {text-decoration: underline;}
td.I2 {color: #800000; background-color: #D1E8CF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.C2, span.C2 a {float: left; width: auto;color: #800000; background-color: #DACDE6; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.C2 a {text-decoration: underline;}
td.C2 {color: #800000; background-color: #DACDE6; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
td.nbgC2 {color: #800000; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; background-color: #FFFFFF; }

span.selected {background-color: #3d80df; color: #fff;}
span.selected a {background-color: #3d80df; color: #fff; text-decoration: underline;}
span.symbol {cursor: pointer;}
      </style> 
 </head> 
 <body> 
  <h1><strong>1489. EPMO Open Source Coordination Office Redaction File Detail Report</strong></h1> 
  <p>Produced by <strong>Araxis Merge</strong> on <strong>10/13/2017 11:30:17 AM Central Daylight Time</strong>. See <a href="http://www.araxis.com/" title="Link to the Araxis corporate web site">www.araxis.com</a> for information about Merge. This report uses XHTML and CSS2, and is best viewed with a modern standards-compliant browser. For optimum results when printing this report, use landscape orientation and enable printing of background images and colours in your browser.</p> 
  <h3><strong>1489.1&nbsp;Files compared</strong></h3> 
  <table class="bordered"> 
   <tbody>
    <tr> 
     <th>#</th> 
     <th>Location</th> 
     <th>File</th> 
     <th>Last Modified</th> 
    </tr> 
    <tr> 
     <td>1</td> 
     <td>ehmp.zip\ehmp\ehmp\product\tests\acceptance-tests\features\steps</td> 
     <td>vx-sync-writeback.rb</td> 
     <td>Tue Jan 10 16:20:50 2017 UTC</td> 
    </tr> 
    <tr> 
     <td>2</td> 
     <td>ehmp.zip\ehmp\ehmp\product\tests\acceptance-tests\features\steps</td> 
     <td>vx-sync-writeback.rb</td> 
     <td>Tue Oct 10 18:05:26 2017 UTC</td> 
    </tr> 
   </tbody>
  </table> 
  <h3><strong>1489.2&nbsp;Comparison summary</strong></h3> 
  <table class="bordered"> 
   <tbody>
    <tr> 
     <th rowspan="2" style="vertical-align: bottom;">Description</th> 
     <th colspan="2">Between<br>Files 1 and 2</th> 
    </tr> 
    <tr> 
     <th style="text-align: right;">Text Blocks</th> 
     <th style="text-align: right;">Lines</th> 
    </tr> 
    <tr> 
     <td>Unchanged</td> 
     <td style="text-align: right;">5</td> 
     <td style="text-align: right;">1736</td> 
    </tr> 
    <tr> 
     <td>Changed</td> 
     <td style="text-align: right;">4</td> 
     <td style="text-align: right;">10</td> 
    </tr> 
    <tr> 
     <td>Inserted</td> 
     <td style="text-align: right;">0</td> 
     <td style="text-align: right;">0</td> 
    </tr> 
    <tr> 
     <td>Removed</td> 
     <td style="text-align: right;">0</td> 
     <td style="text-align: right;">0</td> 
    </tr> 
   </tbody>
  </table> 
  <h3><strong>1489.3&nbsp;Comparison options</strong></h3> 
  <table class="bordered" style="width: 55em;"> 
   <tbody>
    <tr> 
     <th>Whitespace</th> 
     <td></td> 
    </tr> 
    <tr> 
     <th>Character case</th> 
     <td>Differences in character case are significant</td> 
    </tr> 
    <tr> 
     <th>Line endings</th> 
     <td>Differences in line endings (<code>CR</code> and <code>LF</code> characters) are ignored</td> 
    </tr> 
    <tr> 
     <th>CR/LF characters</th> 
     <td>Not shown in the comparison detail</td> 
    </tr> 
   </tbody>
  </table> 
  <h3><strong>1489.4&nbsp;Active regular expressions</strong></h3> 
  <p>No regular expressions were active.</p> 
  <h3><strong>1489.5&nbsp;Comparison detail</strong></h3> 
  <table class="mgRowGroup"> 
   <colgroup>
    <col style="width: 5em;"> 
    <col style="width: 1em;"> 
    <col width="*"> 
    <col style="width: 1em;"> 
    <col style="width: 5em;"> 
    <col style="width: 1em;"> 
    <col width="*"> 
   </colgroup>
   <tbody>
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">require&nbsp;'V</span> <span class="U2">erifyJsonR</span> <span class="U2">untimeValu</span> <span class="U2">e.rb'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">2</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">require&nbsp;'v</span> <span class="U2">istarpc4r'</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">3</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">require&nbsp;'t</span> <span class="U2">ime'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">4</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">5</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Given(/^sa</span> <span class="U2">ve&nbsp;the&nbsp;tot</span> <span class="U2">alItems$/)</span> <span class="U2">&nbsp;do</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">6</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@jds_res</span> <span class="U2">ponse&nbsp;=&nbsp;@r</span> <span class="U2">esponse</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">7</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;@total</span> <span class="U2">_items&nbsp;=&nbsp;f</span> <span class="U2">ind_total_</span> <span class="U2">items(@jds</span> <span class="U2">_response)</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">8</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">9</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">10</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Given(/^a&nbsp;</span> <span class="U2">client&nbsp;con</span> <span class="U2">nect&nbsp;to&nbsp;Vi</span> <span class="U2">stA&nbsp;using&nbsp;</span> <span class="U2">"(.*?)"$/)</span> <span class="U2">&nbsp;do&nbsp;|site_</span> <span class="U2">name|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">11</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@recorde</span> <span class="U2">_exisit&nbsp;=&nbsp;</span> <span class="U2">false</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">12</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;site_nam</span> <span class="U2">e&nbsp;=&nbsp;site_n</span> <span class="U2">ame.upcase</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">13</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;fail&nbsp;"Ch</span> <span class="U2">eck&nbsp;you&nbsp;co</span> <span class="U2">de&nbsp;or&nbsp;the&nbsp;</span> <span class="U2">site&nbsp;name&nbsp;</span> <span class="U2">#{site_nam</span> <span class="U2">e}!&nbsp;Just&nbsp;P</span> <span class="U2">ANORAMA&nbsp;an</span> <span class="U2">d&nbsp;KODAK&nbsp;ar</span> <span class="U2">e&nbsp;define&nbsp;i</span> <span class="U2">n&nbsp;this&nbsp;cod</span> <span class="U2">e."&nbsp;unless</span> <span class="U2">&nbsp;["PANORAM</span> <span class="U2">A",&nbsp;"KODAK</span> <span class="U2">"].include</span> <span class="U2">?&nbsp;site_nam</span> <span class="U2">e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">14</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;p&nbsp;site</span> <span class="U2">_name</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">15</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;site_</span> <span class="U2">name&nbsp;==&nbsp;"P</span> <span class="U2">ANORAMA"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="C2 ln-no" style="text-align: right;">16</td>  
     <td class="nbgC2"><span class="I2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;</span> <span class="U2">@site_name</span> <span class="U2">&nbsp;=&nbsp;"</span> <span class="C2">SIT</span> <span class="U2">E</span> <span class="R2"> 
       <div class="IP"> 
       </div> </span> <span class="U2">"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">17</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;base</span> <span class="U2">_url&nbsp;=&nbsp;Def</span> <span class="U2">aultLogin.</span> <span class="U2">panorama_u</span> <span class="U2">rl</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">18</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="C2 ln-no" style="text-align: right;">19</td>  
     <td class="nbgC2"><span class="I2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;</span> <span class="U2">@site_name</span> <span class="U2">&nbsp;=&nbsp;"</span> <span class="C2">SITE</span> <span class="U2">"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">20</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;base</span> <span class="U2">_url&nbsp;=&nbsp;Def</span> <span class="U2">aultLogin.</span> <span class="U2">kodak_url</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">21</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">22</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">23</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;base&nbsp;=&nbsp;b</span> <span class="U2">ase_url.sp</span> <span class="U2">lit":"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">24</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;ip_addre</span> <span class="U2">ss&nbsp;=&nbsp;base[</span> <span class="U2">0]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">25</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;port&nbsp;=&nbsp;b</span> <span class="U2">ase[1].to_</span> <span class="U2">i</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">26</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">27</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;access_c</span> <span class="U2">ode&nbsp;=&nbsp;Defa</span> <span class="U2">ultLogin.a</span> <span class="U2">ccess_code</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">28</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;verify_c</span> <span class="U2">ode&nbsp;=&nbsp;Defa</span> <span class="U2">ultLogin.v</span> <span class="U2">erify_code</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">29</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">30</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@broker&nbsp;</span> <span class="U2">=&nbsp;VistaRPC</span> <span class="U2">4r::RPCBro</span> <span class="U2">kerConnect</span> <span class="U2">ion.new(ip</span> <span class="U2">_address,&nbsp;</span> <span class="U2">port,&nbsp;acce</span> <span class="U2">ss_code,&nbsp;v</span> <span class="U2">erify_code</span> <span class="U2">,&nbsp;false)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">31</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@broker.</span> <span class="U2">connect</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">32</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">33</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;"*"*62</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">34</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;connec</span> <span class="U2">tion_mes&nbsp;=</span> <span class="U2">&nbsp;"*&nbsp;The&nbsp;RP</span> <span class="U2">C&nbsp;Broker&nbsp;C</span> <span class="U2">onnection&nbsp;</span> <span class="U2">status&nbsp;is&nbsp;</span> <span class="U2">#{@broker.</span> <span class="U2">isConnecte</span> <span class="U2">d}&nbsp;for&nbsp;sit</span> <span class="U2">e&nbsp;#{site_n</span> <span class="U2">ame}&nbsp;*"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">35</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;"*"*62</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">36</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">37</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;fail&nbsp;con</span> <span class="U2">nection_me</span> <span class="U2">s&nbsp;unless&nbsp;@</span> <span class="U2">broker.isC</span> <span class="U2">onnected</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">38</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@broker.</span> <span class="U2">setContext</span> <span class="U2">('HMP&nbsp;UI&nbsp;C</span> <span class="U2">ONTEXT')</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">39</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">40</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">41</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;client&nbsp;re</span> <span class="U2">ceive&nbsp;the&nbsp;</span> <span class="U2">VistA&nbsp;writ</span> <span class="U2">e\-back&nbsp;re</span> <span class="U2">sponse$/)&nbsp;</span> <span class="U2">do</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">42</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;p&nbsp;"thi</span> <span class="U2">s&nbsp;is&nbsp;the&nbsp;r</span> <span class="U2">esponse&nbsp;va</span> <span class="U2">lue"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">43</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;response</span> <span class="U2">_value&nbsp;=&nbsp;@</span> <span class="U2">vista_resp</span> <span class="U2">onse.value</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">44</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;fail&nbsp;"Th</span> <span class="U2">e&nbsp;VistA&nbsp;wr</span> <span class="U2">ite-back's</span> <span class="U2">&nbsp;response&nbsp;</span> <span class="U2">is&nbsp;empty.&nbsp;</span> <span class="U2">Response&nbsp;v</span> <span class="U2">alue:&nbsp;#{re</span> <span class="U2">sponse_val</span> <span class="U2">ue}"&nbsp;if&nbsp;re</span> <span class="U2">sponse_val</span> <span class="U2">ue.nil?&nbsp;||</span> <span class="U2">&nbsp;response_</span> <span class="U2">value.empt</span> <span class="U2">y?</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">45</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">46</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;@reco</span> <span class="U2">rde_exisit</span> <span class="U2">&nbsp;==&nbsp;true</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">47</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"^&nbsp;M</span> <span class="U2">essage"*&nbsp;1</span> <span class="U2">0&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">48</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;@vis</span> <span class="U2">ta_obj_msg</span> <span class="U2">&nbsp;=&nbsp;respons</span> <span class="U2">e_value</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">49</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@dupli</span> <span class="U2">cated&nbsp;=&nbsp;tr</span> <span class="U2">ue</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">50</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@dupli</span> <span class="U2">cate_messa</span> <span class="U2">ge&nbsp;=&nbsp;"It's</span> <span class="U2">&nbsp;duplicate</span> <span class="U2">d&nbsp;entry.&nbsp;T</span> <span class="U2">his&nbsp;step&nbsp;d</span> <span class="U2">id&nbsp;not&nbsp;run</span> <span class="U2">."</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">51</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;expect</span> <span class="U2">ed_data&nbsp;=&nbsp;</span> <span class="U2">["No&nbsp;dupli</span> <span class="U2">cates&nbsp;allo</span> <span class="U2">wed",&nbsp;"alr</span> <span class="U2">eady&nbsp;exist</span> <span class="U2">",&nbsp;"entere</span> <span class="U2">d&nbsp;in&nbsp;error</span> <span class="U2">"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">52</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;result</span> <span class="U2">&nbsp;=&nbsp;expecte</span> <span class="U2">d_data.any</span> <span class="U2">?&nbsp;{&nbsp;|x|&nbsp;@v</span> <span class="U2">ista_obj_m</span> <span class="U2">sg.include</span> <span class="U2">?(x)&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">53</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;fail&nbsp;"</span> <span class="U2">The&nbsp;record</span> <span class="U2">&nbsp;exisit,&nbsp;t</span> <span class="U2">he&nbsp;system&nbsp;</span> <span class="U2">should&nbsp;dis</span> <span class="U2">play&nbsp;error</span> <span class="U2">&nbsp;message.&nbsp;</span> <span class="U2">Response&nbsp;v</span> <span class="U2">alue:&nbsp;#{re</span> <span class="U2">sponse_val</span> <span class="U2">ue}"&nbsp;unles</span> <span class="U2">s&nbsp;result</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">54</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">55</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;json_o</span> <span class="U2">bject&nbsp;=&nbsp;fi</span> <span class="U2">nd_object_</span> <span class="U2">from_respo</span> <span class="U2">nse(@vista</span> <span class="U2">_response,</span> <span class="U2">&nbsp;"value")</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">56</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"^&nbsp;o</span> <span class="U2">bject"*&nbsp;10</span> <span class="U2">&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">57</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;@vis</span> <span class="U2">ta_obj_msg</span> <span class="U2">&nbsp;=&nbsp;json_ob</span> <span class="U2">ject["obje</span> <span class="U2">ct"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">58</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"^&nbsp;o</span> <span class="U2">bject"*&nbsp;10</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">59</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@dupli</span> <span class="U2">cated&nbsp;=&nbsp;fa</span> <span class="U2">lse</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">60</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;fail&nbsp;"</span> <span class="U2">The&nbsp;record</span> <span class="U2">&nbsp;does&nbsp;not&nbsp;</span> <span class="U2">exisit,&nbsp;th</span> <span class="U2">e&nbsp;system&nbsp;s</span> <span class="U2">hould&nbsp;disp</span> <span class="U2">lay&nbsp;Json&nbsp;O</span> <span class="U2">bject&nbsp;body</span> <span class="U2">.&nbsp;Response</span> <span class="U2">&nbsp;value:&nbsp;#{</span> <span class="U2">response_v</span> <span class="U2">alue}"&nbsp;if&nbsp;</span> <span class="U2">@vista_obj</span> <span class="U2">_msg.nil?&nbsp;</span> <span class="U2">||&nbsp;@vista_</span> <span class="U2">obj_msg.em</span> <span class="U2">pty?</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">61</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">62</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">63</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">64</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">65</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;new&nbsp;"(.*?</span> <span class="U2">)"&nbsp;record&nbsp;</span> <span class="U2">added&nbsp;for&nbsp;</span> <span class="U2">the&nbsp;patien</span> <span class="U2">t&nbsp;"(.*?)"&nbsp;</span> <span class="U2">in&nbsp;VPR&nbsp;for</span> <span class="U2">mat$/)&nbsp;do&nbsp;</span> <span class="U2">|domain,&nbsp;p</span> <span class="U2">id|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">66</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">67</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;domain&nbsp;=</span> <span class="U2">&nbsp;check_dom</span> <span class="U2">ain_name(d</span> <span class="U2">omain)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">68</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">69</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;max_inde</span> <span class="U2">x_run&nbsp;=&nbsp;60</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">70</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;sleep_ti</span> <span class="U2">me&nbsp;=&nbsp;3</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">71</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;index&nbsp;=&nbsp;</span> <span class="U2">0</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">72</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;total_ma</span> <span class="U2">tch&nbsp;=&nbsp;fals</span> <span class="U2">e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">73</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;p&nbsp;"9"*</span> <span class="U2">80</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">74</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;p&nbsp;uid_</span> <span class="U2">value_for_</span> <span class="U2">new_record</span> <span class="U2">&nbsp;=&nbsp;@vista_</span> <span class="U2">obj_msg["u</span> <span class="U2">id"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">75</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">76</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;while&nbsp;to</span> <span class="U2">tal_match&nbsp;</span> <span class="U2">==&nbsp;false&nbsp;&amp;</span> <span class="U2">&amp;&nbsp;@recorde</span> <span class="U2">_exisit&nbsp;==</span> <span class="U2">&nbsp;false&nbsp;&amp;&amp;&nbsp;</span> <span class="U2">index&nbsp;&lt;&nbsp;ma</span> <span class="U2">x_index_ru</span> <span class="U2">n</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">77</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@jds_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">nil</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">78</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;sleep&nbsp;</span> <span class="U2">sleep_time</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">79</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">80</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;vpr_fo</span> <span class="U2">rmate&nbsp;=&nbsp;Vp</span> <span class="U2">rFormate.n</span> <span class="U2">ew&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">81</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@jds_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">vpr_format</span> <span class="U2">e.call_vpr</span> <span class="U2">_formate(d</span> <span class="U2">omain,&nbsp;pid</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">82</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">83</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;new_to</span> <span class="U2">tal_items&nbsp;</span> <span class="U2">=&nbsp;find_tot</span> <span class="U2">al_items(@</span> <span class="U2">jds_respon</span> <span class="U2">se)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">84</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;@tot</span> <span class="U2">al_items+&nbsp;</span> <span class="U2">1</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">85</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;new_</span> <span class="U2">total_item</span> <span class="U2">s</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">86</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;total_</span> <span class="U2">match&nbsp;=&nbsp;tr</span> <span class="U2">ue&nbsp;if&nbsp;new_</span> <span class="U2">total_item</span> <span class="U2">s&nbsp;==&nbsp;@tota</span> <span class="U2">l_items&nbsp;+&nbsp;</span> <span class="U2">1</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">87</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">88</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;index&nbsp;</span> <span class="U2">=&nbsp;index&nbsp;+&nbsp;</span> <span class="U2">sleep_time</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">89</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">90</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">91</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;@reco</span> <span class="U2">rde_exisit</span> <span class="U2">&nbsp;==&nbsp;false</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">92</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;expect</span> <span class="U2">(new_total</span> <span class="U2">_items).to</span> <span class="U2">&nbsp;eq&nbsp;@total</span> <span class="U2">_items&nbsp;+&nbsp;1</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">93</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@total</span> <span class="U2">_items&nbsp;=&nbsp;@</span> <span class="U2">total_item</span> <span class="U2">s&nbsp;+&nbsp;1</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">94</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">95</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;@dup</span> <span class="U2">licate_mes</span> <span class="U2">sage</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">96</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;fail&nbsp;"</span> <span class="U2">Your&nbsp;code&nbsp;</span> <span class="U2">did&nbsp;not&nbsp;ch</span> <span class="U2">eck&nbsp;if&nbsp;the</span> <span class="U2">&nbsp;recorde&nbsp;a</span> <span class="U2">lready&nbsp;exi</span> <span class="U2">sit.&nbsp;Chang</span> <span class="U2">e&nbsp;your&nbsp;cod</span> <span class="U2">e&nbsp;please!"</span> <span class="U2">&nbsp;if&nbsp;@dupli</span> <span class="U2">cate_messa</span> <span class="U2">ge.nil?</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">97</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">98</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">99</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">100</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">101</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;update&nbsp;"(</span> <span class="U2">.*?)"&nbsp;writ</span> <span class="U2">e&nbsp;back&nbsp;rec</span> <span class="U2">ord&nbsp;for&nbsp;th</span> <span class="U2">e&nbsp;patient&nbsp;</span> <span class="U2">"(.*?)"&nbsp;di</span> <span class="U2">spaly&nbsp;in&nbsp;V</span> <span class="U2">PR&nbsp;format&nbsp;</span> <span class="U2">with&nbsp;value</span> <span class="U2">&nbsp;of$/)&nbsp;do&nbsp;</span> <span class="U2">|domain,&nbsp;p</span> <span class="U2">id,&nbsp;table|</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">102</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;domain&nbsp;=</span> <span class="U2">&nbsp;check_dom</span> <span class="U2">ain_name(d</span> <span class="U2">omain)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">103</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;vpr_form</span> <span class="U2">ate&nbsp;=&nbsp;VprF</span> <span class="U2">ormate.new</span> <span class="U2">&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">104</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_ver</span> <span class="U2">ify&nbsp;=&nbsp;Veri</span> <span class="U2">fyJsonRunt</span> <span class="U2">imeValue.n</span> <span class="U2">ew</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">105</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">106</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;max_inde</span> <span class="U2">x_run&nbsp;=&nbsp;60</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">107</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;sleep_ti</span> <span class="U2">me&nbsp;=&nbsp;3</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">108</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;index&nbsp;=&nbsp;</span> <span class="U2">0</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">109</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;results_</span> <span class="U2">match&nbsp;=&nbsp;fa</span> <span class="U2">lse</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">110</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">111</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table_ro</span> <span class="U2">ws&nbsp;=&nbsp;table</span> <span class="U2">.rows</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">112</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;local_id</span> <span class="U2">&nbsp;=&nbsp;table_r</span> <span class="U2">ows[0][1].</span> <span class="U2">downcase</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">113</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">114</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;local</span> <span class="U2">_id.start_</span> <span class="U2">with?&nbsp;'abo</span> <span class="U2">ve'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">115</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;table_</span> <span class="U2">rows[0][1]</span> <span class="U2">&nbsp;=&nbsp;@vista_</span> <span class="U2">local_id.t</span> <span class="U2">o_s</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">116</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">117</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">118</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;while&nbsp;re</span> <span class="U2">sults_matc</span> <span class="U2">h&nbsp;==&nbsp;false</span> <span class="U2">&nbsp;&amp;&amp;&nbsp;index&nbsp;</span> <span class="U2">&lt;&nbsp;max_inde</span> <span class="U2">x_run</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">119</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@jds_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">nil</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">120</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;sleep&nbsp;</span> <span class="U2">sleep_time</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">121</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">122</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@jds_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">vpr_format</span> <span class="U2">e.call_vpr</span> <span class="U2">_formate(d</span> <span class="U2">omain,&nbsp;pid</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">123</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;json_o</span> <span class="U2">bject&nbsp;=&nbsp;JS</span> <span class="U2">ON.parse(@</span> <span class="U2">jds_respon</span> <span class="U2">se.body)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">124</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;result</span> <span class="U2">_array&nbsp;=&nbsp;j</span> <span class="U2">son_object</span> <span class="U2">["data"]["</span> <span class="U2">items"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">125</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">126</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;resu</span> <span class="U2">lts_match&nbsp;</span> <span class="U2">=&nbsp;json_ver</span> <span class="U2">ify.verify</span> <span class="U2">_json_runt</span> <span class="U2">ime_vlaue_</span> <span class="U2">for_array(</span> <span class="U2">result_arr</span> <span class="U2">ay,&nbsp;table_</span> <span class="U2">rows,&nbsp;red_</span> <span class="U2">flog_on&nbsp;=&nbsp;</span> <span class="U2">false)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">127</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">128</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;index&nbsp;</span> <span class="U2">=&nbsp;index&nbsp;+&nbsp;</span> <span class="U2">sleep_time</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">129</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">130</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;"The&nbsp;a</span> <span class="U2">bove&nbsp;local</span> <span class="U2">&nbsp;id&nbsp;is:&nbsp;#{</span> <span class="U2">@vista_loc</span> <span class="U2">al_id.to_s</span> <span class="U2">}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">131</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;unless&nbsp;r</span> <span class="U2">esults_mat</span> <span class="U2">ch</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">132</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;json_v</span> <span class="U2">erify.veri</span> <span class="U2">fy_json_ru</span> <span class="U2">ntime_vlau</span> <span class="U2">e_for_arra</span> <span class="U2">y(result_a</span> <span class="U2">rray,&nbsp;tabl</span> <span class="U2">e_rows)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">133</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">134</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">135</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">136</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;"(.*?)"&nbsp;r</span> <span class="U2">ecord&nbsp;with</span> <span class="U2">&nbsp;local&nbsp;id&nbsp;</span> <span class="U2">"(.*?)"&nbsp;re</span> <span class="U2">moved&nbsp;for&nbsp;</span> <span class="U2">the&nbsp;patien</span> <span class="U2">t&nbsp;"(.*?)"&nbsp;</span> <span class="U2">in&nbsp;VPR&nbsp;for</span> <span class="U2">mat$/)&nbsp;do&nbsp;</span> <span class="U2">|domain,&nbsp;l</span> <span class="U2">ocal_id,&nbsp;p</span> <span class="U2">id|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">137</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;domain&nbsp;=</span> <span class="U2">&nbsp;check_dom</span> <span class="U2">ain_name(d</span> <span class="U2">omain)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">138</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;vpr_form</span> <span class="U2">ate&nbsp;=&nbsp;VprF</span> <span class="U2">ormate.new</span> <span class="U2">&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">139</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">140</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;max_inde</span> <span class="U2">x_run&nbsp;=&nbsp;12</span> <span class="U2">0</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">141</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;sleep_ti</span> <span class="U2">me&nbsp;=&nbsp;3</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">142</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;index&nbsp;=&nbsp;</span> <span class="U2">0</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">143</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;total_ma</span> <span class="U2">tch&nbsp;=&nbsp;fals</span> <span class="U2">e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">144</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">145</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;while&nbsp;to</span> <span class="U2">tal_match&nbsp;</span> <span class="U2">==&nbsp;false&nbsp;&amp;</span> <span class="U2">&amp;&nbsp;index&nbsp;&lt;&nbsp;</span> <span class="U2">max_index_</span> <span class="U2">run</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">146</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@respo</span> <span class="U2">nse&nbsp;=&nbsp;nil</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">147</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;sleep&nbsp;</span> <span class="U2">sleep_time</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">148</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">149</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@jds_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">vpr_format</span> <span class="U2">e.call_vpr</span> <span class="U2">_formate(d</span> <span class="U2">omain,&nbsp;pid</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">150</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">151</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;remove</span> <span class="U2">d_value&nbsp;=&nbsp;</span> <span class="U2">find_remov</span> <span class="U2">ed_value_f</span> <span class="U2">or_uid(@jd</span> <span class="U2">s_response</span> <span class="U2">,&nbsp;local_id</span> <span class="U2">,&nbsp;@site_na</span> <span class="U2">me)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">152</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">153</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;total_</span> <span class="U2">match&nbsp;=&nbsp;tr</span> <span class="U2">ue&nbsp;if&nbsp;remo</span> <span class="U2">ved_value&nbsp;</span> <span class="U2">==&nbsp;"true"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">154</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">155</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;index&nbsp;</span> <span class="U2">=&nbsp;index&nbsp;+&nbsp;</span> <span class="U2">sleep_time</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">156</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">157</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(r</span> <span class="U2">emoved_val</span> <span class="U2">ue).to&nbsp;eq(</span> <span class="U2">"true"),&nbsp;"</span> <span class="U2">Expected&nbsp;t</span> <span class="U2">o&nbsp;find&nbsp;rem</span> <span class="U2">oved=true&nbsp;</span> <span class="U2">for&nbsp;reorde</span> <span class="U2">&nbsp;#{local_i</span> <span class="U2">d},&nbsp;but&nbsp;di</span> <span class="U2">d&nbsp;not&nbsp;find</span> <span class="U2">&nbsp;it.\n&nbsp;rep</span> <span class="U2">onse&nbsp;body:</span> <span class="U2">&nbsp;\n&nbsp;#{@jds</span> <span class="U2">_response}</span> <span class="U2">"&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">158</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">159</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">160</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;above&nbsp;"(.</span> <span class="U2">*?)"&nbsp;recor</span> <span class="U2">d&nbsp;removed&nbsp;</span> <span class="U2">for&nbsp;the&nbsp;pa</span> <span class="U2">tient&nbsp;"(.*</span> <span class="U2">?)"$/)&nbsp;do&nbsp;</span> <span class="U2">|domain,&nbsp;p</span> <span class="U2">id|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">161</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;domain&nbsp;=</span> <span class="U2">&nbsp;check_dom</span> <span class="U2">ain_name(d</span> <span class="U2">omain)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">162</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;vpr_form</span> <span class="U2">ate&nbsp;=&nbsp;VprF</span> <span class="U2">ormate.new</span> <span class="U2">&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">163</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">164</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;max_inde</span> <span class="U2">x_run&nbsp;=&nbsp;12</span> <span class="U2">0</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">165</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;sleep_ti</span> <span class="U2">me&nbsp;=&nbsp;3</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">166</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;index&nbsp;=&nbsp;</span> <span class="U2">0</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">167</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;total_ma</span> <span class="U2">tch&nbsp;=&nbsp;fals</span> <span class="U2">e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">168</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">169</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;while&nbsp;to</span> <span class="U2">tal_match&nbsp;</span> <span class="U2">==&nbsp;false&nbsp;&amp;</span> <span class="U2">&amp;&nbsp;index&nbsp;&lt;&nbsp;</span> <span class="U2">max_index_</span> <span class="U2">run</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">170</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@respo</span> <span class="U2">nse&nbsp;=&nbsp;nil</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">171</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;sleep&nbsp;</span> <span class="U2">sleep_time</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">172</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">173</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@jds_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">vpr_format</span> <span class="U2">e.call_vpr</span> <span class="U2">_formate(d</span> <span class="U2">omain,&nbsp;pid</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">174</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">175</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;remo</span> <span class="U2">ved_value&nbsp;</span> <span class="U2">=&nbsp;find_rem</span> <span class="U2">oved_value</span> <span class="U2">_for_uid(@</span> <span class="U2">jds_respon</span> <span class="U2">se,&nbsp;@local</span> <span class="U2">_id,&nbsp;@site</span> <span class="U2">_name)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">176</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">177</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;total_</span> <span class="U2">match&nbsp;=&nbsp;tr</span> <span class="U2">ue&nbsp;if&nbsp;remo</span> <span class="U2">ved_value&nbsp;</span> <span class="U2">==&nbsp;"true"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">178</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">179</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;index&nbsp;</span> <span class="U2">=&nbsp;index&nbsp;+&nbsp;</span> <span class="U2">sleep_time</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">180</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">181</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(r</span> <span class="U2">emoved_val</span> <span class="U2">ue).to&nbsp;eq(</span> <span class="U2">"true"),&nbsp;"</span> <span class="U2">Expected&nbsp;t</span> <span class="U2">o&nbsp;find&nbsp;rem</span> <span class="U2">oved=true&nbsp;</span> <span class="U2">for&nbsp;reorde</span> <span class="U2">&nbsp;#{@local_</span> <span class="U2">id},&nbsp;but&nbsp;d</span> <span class="U2">id&nbsp;not&nbsp;fin</span> <span class="U2">d&nbsp;it.\n&nbsp;re</span> <span class="U2">ponse&nbsp;body</span> <span class="U2">:&nbsp;\n&nbsp;#{@jd</span> <span class="U2">s_response</span> <span class="U2">}"&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">182</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">183</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">184</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;stamp&nbsp;tim</span> <span class="U2">e&nbsp;get&nbsp;upda</span> <span class="U2">te&nbsp;for&nbsp;rec</span> <span class="U2">orde&nbsp;Enter</span> <span class="U2">ed&nbsp;in&nbsp;Erro</span> <span class="U2">r$/)&nbsp;do</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">185</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;err_ms</span> <span class="U2">g&nbsp;=&nbsp;"The&nbsp;s</span> <span class="U2">tamp&nbsp;time&nbsp;</span> <span class="U2">after&nbsp;the&nbsp;</span> <span class="U2">recorde&nbsp;EI</span> <span class="U2">E&nbsp;#{@stamp</span> <span class="U2">_time}&nbsp;to&nbsp;</span> <span class="U2">be&nbsp;equal&nbsp;o</span> <span class="U2">r&nbsp;greater&nbsp;</span> <span class="U2">than&nbsp;befor</span> <span class="U2">&nbsp;the&nbsp;recor</span> <span class="U2">de&nbsp;EIE&nbsp;#{@</span> <span class="U2">old_stamp_</span> <span class="U2">time}"&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">186</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;err_msg&nbsp;</span> <span class="U2">=&nbsp;"The&nbsp;las</span> <span class="U2">t&nbsp;up&nbsp;date&nbsp;</span> <span class="U2">time&nbsp;shoul</span> <span class="U2">d&nbsp;get&nbsp;up&nbsp;t</span> <span class="U2">o&nbsp;date&nbsp;clo</span> <span class="U2">se&nbsp;to&nbsp;the&nbsp;</span> <span class="U2">current&nbsp;ti</span> <span class="U2">me.\n"&nbsp;+&nbsp;e</span> <span class="U2">rr_msg&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">187</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;fail&nbsp;err</span> <span class="U2">_msg&nbsp;unles</span> <span class="U2">s&nbsp;@stamp_t</span> <span class="U2">ime.to_i&nbsp;&gt;</span> <span class="U2">=&nbsp;@old_sta</span> <span class="U2">mp_time.to</span> <span class="U2">_i&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">188</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">189</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">190</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;us</span> <span class="U2">e&nbsp;the&nbsp;vx\-</span> <span class="U2">sync&nbsp;write</span> <span class="U2">\-back&nbsp;to&nbsp;</span> <span class="U2">save&nbsp;the&nbsp;r</span> <span class="U2">ecord$/)&nbsp;d</span> <span class="U2">o</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">191</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;@reco</span> <span class="U2">rde_exisit</span> <span class="U2">&nbsp;==&nbsp;true</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">192</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;@dup</span> <span class="U2">licate_mes</span> <span class="U2">sage</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">193</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;fail&nbsp;"</span> <span class="U2">Your&nbsp;code&nbsp;</span> <span class="U2">did&nbsp;not&nbsp;ch</span> <span class="U2">eck&nbsp;if&nbsp;the</span> <span class="U2">&nbsp;recorde&nbsp;a</span> <span class="U2">lready&nbsp;exi</span> <span class="U2">sit.&nbsp;Chang</span> <span class="U2">e&nbsp;your&nbsp;cod</span> <span class="U2">e&nbsp;please!"</span> <span class="U2">&nbsp;if&nbsp;@dupli</span> <span class="U2">cate_messa</span> <span class="U2">ge.nil?</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">194</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">195</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;base_j</span> <span class="U2">ds_url&nbsp;=&nbsp;D</span> <span class="U2">efaultLogi</span> <span class="U2">n.wb_vx_sy</span> <span class="U2">nc_url</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">196</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;path</span> <span class="U2">&nbsp;=&nbsp;"#{base</span> <span class="U2">_jds_url}/</span> <span class="U2">writeback"</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">197</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@vxsyn</span> <span class="U2">c_response</span> <span class="U2">&nbsp;=&nbsp;nil</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">198</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">199</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;This</span> <span class="U2">&nbsp;is&nbsp;just&nbsp;f</span> <span class="U2">or&nbsp;test&nbsp;pr</span> <span class="U2">opose.&nbsp;NO&nbsp;</span> <span class="U2">one&nbsp;allowe</span> <span class="U2">d&nbsp;to&nbsp;make&nbsp;</span> <span class="U2">change&nbsp;to&nbsp;</span> <span class="U2">Last&nbsp;Updat</span> <span class="U2">e&nbsp;Time.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">200</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;In&nbsp;t</span> <span class="U2">wo&nbsp;differe</span> <span class="U2">nt&nbsp;times&nbsp;t</span> <span class="U2">he&nbsp;data&nbsp;ge</span> <span class="U2">t&nbsp;save.&nbsp;On</span> <span class="U2">e&nbsp;time&nbsp;by&nbsp;</span> <span class="U2">Vista&nbsp;and&nbsp;</span> <span class="U2">one&nbsp;time&nbsp;b</span> <span class="U2">y&nbsp;vx-sync.</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">201</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;to&nbsp;m</span> <span class="U2">ake&nbsp;sure&nbsp;i</span> <span class="U2">n&nbsp;our&nbsp;test</span> <span class="U2">&nbsp;the&nbsp;recod</span> <span class="U2">e&nbsp;get&nbsp;save</span> <span class="U2">&nbsp;by&nbsp;vx-syn</span> <span class="U2">c&nbsp;the&nbsp;last</span> <span class="U2">UpdateTime</span> <span class="U2">&nbsp;been&nbsp;chag</span> <span class="U2">ned.&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">202</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;upda</span> <span class="U2">te_time&nbsp;=&nbsp;</span> <span class="U2">@vista_obj</span> <span class="U2">_msg["last</span> <span class="U2">UpdateTime</span> <span class="U2">"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">203</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;update</span> <span class="U2">_time&nbsp;=&nbsp;up</span> <span class="U2">date_time.</span> <span class="U2">to_s</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">204</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">205</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;update</span> <span class="U2">_time&nbsp;=&nbsp;Ti</span> <span class="U2">me.parse(u</span> <span class="U2">pdate_time</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">206</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;added_</span> <span class="U2">date&nbsp;=&nbsp;upd</span> <span class="U2">ate_time&nbsp;+</span> <span class="U2">&nbsp;3</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">207</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;new_ti</span> <span class="U2">me&nbsp;=&nbsp;added</span> <span class="U2">_date.strf</span> <span class="U2">time("%Y%m</span> <span class="U2">%d%H%M%S")</span> <span class="U2">&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">208</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;sleep&nbsp;</span> <span class="U2">3</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">209</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"***</span> <span class="U2">******&nbsp;The</span> <span class="U2">&nbsp;new&nbsp;lastU</span> <span class="U2">pdateTime&nbsp;</span> <span class="U2">is&nbsp;#{new_t</span> <span class="U2">ime.to_i}&nbsp;</span> <span class="U2">*******"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">210</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@vista</span> <span class="U2">_obj_msg["</span> <span class="U2">lastUpdate</span> <span class="U2">Time"]&nbsp;=&nbsp;n</span> <span class="U2">ew_time.to</span> <span class="U2">_i</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">211</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">212</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;param&nbsp;</span> <span class="U2">=&nbsp;@vista_o</span> <span class="U2">bj_msg.to_</span> <span class="U2">json</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">213</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;p&nbsp;pa</span> <span class="U2">th</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">214</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;p&nbsp;pa</span> <span class="U2">ram</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">215</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"VXS</span> <span class="U2">ync&nbsp;writeB</span> <span class="U2">ack&nbsp;Respon</span> <span class="U2">se"&nbsp;+&nbsp;"^*"</span> <span class="U2">*&nbsp;20</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">216</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;@vxs</span> <span class="U2">ync_respon</span> <span class="U2">se&nbsp;=&nbsp;HTTPa</span> <span class="U2">rtyWithBas</span> <span class="U2">icAuth.pos</span> <span class="U2">t_write_ba</span> <span class="U2">ck(path,&nbsp;p</span> <span class="U2">aram)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">217</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"VXS</span> <span class="U2">ync&nbsp;writeB</span> <span class="U2">ack&nbsp;Respon</span> <span class="U2">se"&nbsp;+&nbsp;"^*"</span> <span class="U2">*&nbsp;20</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">218</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">219</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">220</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">221</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;responce&nbsp;</span> <span class="U2">is&nbsp;success</span> <span class="U2">ful$/)&nbsp;do</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">222</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;@reco</span> <span class="U2">rde_exisit</span> <span class="U2">&nbsp;==&nbsp;false</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">223</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;fail&nbsp;"</span> <span class="U2">Expected&nbsp;r</span> <span class="U2">esponse&nbsp;co</span> <span class="U2">de&nbsp;200,&nbsp;re</span> <span class="U2">ceived&nbsp;#{@</span> <span class="U2">vxsync_res</span> <span class="U2">ponse.code</span> <span class="U2">}&nbsp;\n&nbsp;respo</span> <span class="U2">nse&nbsp;body:&nbsp;</span> <span class="U2">#{@vxsync_</span> <span class="U2">response.b</span> <span class="U2">ody}&nbsp;\n&nbsp;pa</span> <span class="U2">rams:&nbsp;#{@v</span> <span class="U2">ista_obj_m</span> <span class="U2">sg}"&nbsp;unles</span> <span class="U2">s&nbsp;@vxsync_</span> <span class="U2">response.c</span> <span class="U2">ode&nbsp;==&nbsp;200</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">224</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">225</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;@dup</span> <span class="U2">licate_mes</span> <span class="U2">sage</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">226</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;fail&nbsp;"</span> <span class="U2">Your&nbsp;code&nbsp;</span> <span class="U2">did&nbsp;not&nbsp;ch</span> <span class="U2">eck&nbsp;if&nbsp;the</span> <span class="U2">&nbsp;recorde&nbsp;a</span> <span class="U2">lready&nbsp;exi</span> <span class="U2">sit.&nbsp;Chang</span> <span class="U2">e&nbsp;your&nbsp;cod</span> <span class="U2">e&nbsp;please!"</span> <span class="U2">&nbsp;if&nbsp;@dupli</span> <span class="U2">cate_messa</span> <span class="U2">ge.nil?&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">227</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">228</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">229</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">230</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;new&nbsp;write</span> <span class="U2">&nbsp;back&nbsp;reco</span> <span class="U2">rd&nbsp;dispaly</span> <span class="U2">&nbsp;in&nbsp;VPR&nbsp;fo</span> <span class="U2">rmat&nbsp;with&nbsp;</span> <span class="U2">value&nbsp;of$/</span> <span class="U2">)&nbsp;do&nbsp;|tabl</span> <span class="U2">e|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">231</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;if&nbsp;@re</span> <span class="U2">corde_exis</span> <span class="U2">it&nbsp;==&nbsp;fals</span> <span class="U2">e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">232</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_obj</span> <span class="U2">ect&nbsp;=&nbsp;JSON</span> <span class="U2">.parse(@jd</span> <span class="U2">s_response</span> <span class="U2">.body)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">233</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;result_a</span> <span class="U2">rray&nbsp;=&nbsp;jso</span> <span class="U2">n_object["</span> <span class="U2">data"]["it</span> <span class="U2">ems"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">234</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">235</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_ver</span> <span class="U2">ify&nbsp;=&nbsp;Veri</span> <span class="U2">fyJsonRunt</span> <span class="U2">imeValue.n</span> <span class="U2">ew</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">236</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_ver</span> <span class="U2">ify.verify</span> <span class="U2">_json_runt</span> <span class="U2">ime_vlaue(</span> <span class="U2">result_arr</span> <span class="U2">ay,&nbsp;table)</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">237</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">238</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">239</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^Vis</span> <span class="U2">tA&nbsp;write-b</span> <span class="U2">ack&nbsp;genera</span> <span class="U2">te&nbsp;a&nbsp;new&nbsp;l</span> <span class="U2">ocalId&nbsp;wit</span> <span class="U2">h&nbsp;values&nbsp;r</span> <span class="U2">ecord&nbsp;disp</span> <span class="U2">aly&nbsp;in&nbsp;VPR</span> <span class="U2">&nbsp;format$/)</span> <span class="U2">&nbsp;do&nbsp;|table</span> <span class="U2">|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">240</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table_ro</span> <span class="U2">ws&nbsp;=&nbsp;table</span> <span class="U2">.rows</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">241</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">242</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;@reco</span> <span class="U2">rde_exisit</span> <span class="U2">&nbsp;==&nbsp;false</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">243</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"^&nbsp;l</span> <span class="U2">ocalId"*&nbsp;1</span> <span class="U2">0</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">244</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;@vis</span> <span class="U2">ta_local_i</span> <span class="U2">d&nbsp;=&nbsp;@vista</span> <span class="U2">_obj_msg["</span> <span class="U2">localId"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">245</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"^&nbsp;l</span> <span class="U2">ocalId"*&nbsp;1</span> <span class="U2">0</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">246</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;expect</span> <span class="U2">(@vista_lo</span> <span class="U2">cal_id.to_</span> <span class="U2">i).to&nbsp;be&nbsp;&gt;</span> <span class="U2">&nbsp;0,&nbsp;"The&nbsp;l</span> <span class="U2">ocal&nbsp;id&nbsp;sh</span> <span class="U2">ould&nbsp;be&nbsp;gr</span> <span class="U2">eater&nbsp;than</span> <span class="U2">&nbsp;zero.&nbsp;\n&nbsp;</span> <span class="U2">Vista&nbsp;resp</span> <span class="U2">onse:&nbsp;#{@v</span> <span class="U2">ista_obj_m</span> <span class="U2">sg}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">247</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;table_</span> <span class="U2">rows.inser</span> <span class="U2">t(0,&nbsp;["loc</span> <span class="U2">alId",&nbsp;@vi</span> <span class="U2">sta_local_</span> <span class="U2">id.to_s])</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">248</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">249</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;@dup</span> <span class="U2">licate_mes</span> <span class="U2">sage</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">250</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;fail&nbsp;"</span> <span class="U2">Your&nbsp;code&nbsp;</span> <span class="U2">did&nbsp;not&nbsp;ch</span> <span class="U2">eck&nbsp;if&nbsp;the</span> <span class="U2">&nbsp;recorde&nbsp;a</span> <span class="U2">lready&nbsp;exi</span> <span class="U2">sit.&nbsp;Chang</span> <span class="U2">e&nbsp;your&nbsp;cod</span> <span class="U2">e&nbsp;please!"</span> <span class="U2">&nbsp;if&nbsp;@dupli</span> <span class="U2">cate_messa</span> <span class="U2">ge.nil?</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">251</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">252</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">253</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_obj</span> <span class="U2">ect&nbsp;=&nbsp;JSON</span> <span class="U2">.parse(@jd</span> <span class="U2">s_response</span> <span class="U2">.body)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">254</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;result_a</span> <span class="U2">rray&nbsp;=&nbsp;jso</span> <span class="U2">n_object["</span> <span class="U2">data"]["it</span> <span class="U2">ems"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">255</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">256</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_ver</span> <span class="U2">ify&nbsp;=&nbsp;Veri</span> <span class="U2">fyJsonRunt</span> <span class="U2">imeValue.n</span> <span class="U2">ew</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">257</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;results_</span> <span class="U2">match&nbsp;=&nbsp;js</span> <span class="U2">on_verify.</span> <span class="U2">verify_jso</span> <span class="U2">n_runtime_</span> <span class="U2">vlaue_for_</span> <span class="U2">array(resu</span> <span class="U2">lt_array,&nbsp;</span> <span class="U2">table_rows</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">258</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">259</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">260</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;above&nbsp;rec</span> <span class="U2">ord&nbsp;dispal</span> <span class="U2">y&nbsp;in&nbsp;VPR&nbsp;f</span> <span class="U2">ormat&nbsp;with</span> <span class="U2">&nbsp;value&nbsp;of$</span> <span class="U2">/)&nbsp;do&nbsp;|tab</span> <span class="U2">le|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">261</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table_ro</span> <span class="U2">ws&nbsp;=&nbsp;table</span> <span class="U2">.rows</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">262</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">263</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;@loca</span> <span class="U2">l_id.empty</span> <span class="U2">?</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">264</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;fail&nbsp;"</span> <span class="U2">Please&nbsp;sel</span> <span class="U2">ect&nbsp;anothe</span> <span class="U2">r&nbsp;patient,</span> <span class="U2">&nbsp;there&nbsp;is&nbsp;</span> <span class="U2">no&nbsp;local&nbsp;i</span> <span class="U2">d&nbsp;found&nbsp;fo</span> <span class="U2">r&nbsp;this&nbsp;pat</span> <span class="U2">ient!"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">265</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">266</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;table_</span> <span class="U2">rows.inser</span> <span class="U2">t(0,&nbsp;["loc</span> <span class="U2">alId",&nbsp;@lo</span> <span class="U2">cal_id.to_</span> <span class="U2">s])&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">267</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">268</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">269</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_obj</span> <span class="U2">ect&nbsp;=&nbsp;JSON</span> <span class="U2">.parse(@jd</span> <span class="U2">s_response</span> <span class="U2">.body)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">270</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;result_a</span> <span class="U2">rray&nbsp;=&nbsp;jso</span> <span class="U2">n_object["</span> <span class="U2">data"]["it</span> <span class="U2">ems"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">271</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">272</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_ver</span> <span class="U2">ify&nbsp;=&nbsp;Veri</span> <span class="U2">fyJsonRunt</span> <span class="U2">imeValue.n</span> <span class="U2">ew</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">273</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;results_</span> <span class="U2">match&nbsp;=&nbsp;js</span> <span class="U2">on_verify.</span> <span class="U2">verify_jso</span> <span class="U2">n_runtime_</span> <span class="U2">vlaue_for_</span> <span class="U2">array(resu</span> <span class="U2">lt_array,&nbsp;</span> <span class="U2">table_rows</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">274</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">275</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">276</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;client&nbsp;re</span> <span class="U2">ceive&nbsp;the&nbsp;</span> <span class="U2">error&nbsp;mess</span> <span class="U2">age$/)&nbsp;do</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">277</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;err_mesg</span> <span class="U2">&nbsp;=&nbsp;"The&nbsp;re</span> <span class="U2">corde&nbsp;alre</span> <span class="U2">ady&nbsp;exist,</span> <span class="U2">&nbsp;error&nbsp;mes</span> <span class="U2">sage&nbsp;shoul</span> <span class="U2">d&nbsp;display.</span> <span class="U2">&nbsp;\n&nbsp;VistA&nbsp;</span> <span class="U2">response:&nbsp;</span> <span class="U2">#{@vista_o</span> <span class="U2">bj_msg}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">278</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">279</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(@</span> <span class="U2">vista_obj_</span> <span class="U2">msg).not_t</span> <span class="U2">o&nbsp;be_empty</span> <span class="U2">,&nbsp;err_mesg</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">280</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">281</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expected</span> <span class="U2">_data&nbsp;=&nbsp;["</span> <span class="U2">No&nbsp;duplica</span> <span class="U2">tes&nbsp;allowe</span> <span class="U2">d",&nbsp;"alrea</span> <span class="U2">dy&nbsp;exist"]</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">282</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">283</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;result</span> <span class="U2">&nbsp;=&nbsp;expecte</span> <span class="U2">d_data.any</span> <span class="U2">?&nbsp;{&nbsp;|x|&nbsp;@v</span> <span class="U2">ista_obj_m</span> <span class="U2">sg.include</span> <span class="U2">?(x)&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">284</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;fail&nbsp;err</span> <span class="U2">_mesg&nbsp;unle</span> <span class="U2">ss&nbsp;result</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">285</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">286</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">287</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;client&nbsp;re</span> <span class="U2">ceive&nbsp;the&nbsp;</span> <span class="U2">"(.*?)"&nbsp;er</span> <span class="U2">ror&nbsp;messag</span> <span class="U2">e$/)&nbsp;do&nbsp;|e</span> <span class="U2">rror_msg|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">288</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;response</span> <span class="U2">_value&nbsp;=&nbsp;@</span> <span class="U2">vista_resp</span> <span class="U2">onse.value</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">289</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;fail&nbsp;"Ex</span> <span class="U2">pected&nbsp;err</span> <span class="U2">or&nbsp;message</span> <span class="U2">:&nbsp;#{error_</span> <span class="U2">msg}&nbsp;\n&nbsp;Go</span> <span class="U2">t:&nbsp;#{respo</span> <span class="U2">nse_value}</span> <span class="U2">"&nbsp;&nbsp;unless&nbsp;</span> <span class="U2">response_v</span> <span class="U2">alue.inclu</span> <span class="U2">de?&nbsp;error_</span> <span class="U2">msg</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">290</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">291</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">292</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;se</span> <span class="U2">arch&nbsp;for&nbsp;"</span> <span class="U2">(.*?)"&nbsp;rel</span> <span class="U2">ated&nbsp;Order</span> <span class="U2">&nbsp;IENs$/)&nbsp;d</span> <span class="U2">o&nbsp;|order_i</span> <span class="U2">en|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">293</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rpc_name</span> <span class="U2">&nbsp;=&nbsp;"HMP&nbsp;GE</span> <span class="U2">T&nbsp;RELATED&nbsp;</span> <span class="U2">ORDERS"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">294</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@vista_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">""</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">295</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">296</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data&nbsp;=&nbsp;&nbsp;</span> <span class="U2">order_ien</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">297</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;params&nbsp;=</span> <span class="U2">&nbsp;[data]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">298</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">299</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;@vista</span> <span class="U2">_response&nbsp;</span> <span class="U2">=&nbsp;rpc_writ</span> <span class="U2">e_back(rpc</span> <span class="U2">_name,&nbsp;par</span> <span class="U2">ams)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">300</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">301</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">302</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;client&nbsp;re</span> <span class="U2">ceive&nbsp;the&nbsp;</span> <span class="U2">whole&nbsp;set&nbsp;</span> <span class="U2">of&nbsp;related</span> <span class="U2">&nbsp;IENs&nbsp;and&nbsp;</span> <span class="U2">what&nbsp;their</span> <span class="U2">&nbsp;relations</span> <span class="U2">hip&nbsp;is$/)&nbsp;</span> <span class="U2">do&nbsp;|table|</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">303</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;vista_ob</span> <span class="U2">j_message&nbsp;</span> <span class="U2">=&nbsp;find_obj</span> <span class="U2">ect_from_r</span> <span class="U2">esponse(@v</span> <span class="U2">ista_respo</span> <span class="U2">nse,&nbsp;"valu</span> <span class="U2">e")</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">304</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table_ro</span> <span class="U2">ws&nbsp;=&nbsp;table</span> <span class="U2">.rows</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">305</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table_ha</span> <span class="U2">shes&nbsp;=&nbsp;{}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">306</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table_ro</span> <span class="U2">ws.each&nbsp;do</span> <span class="U2">&nbsp;|id,&nbsp;val|</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">307</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;array_</span> <span class="U2">val&nbsp;=&nbsp;val.</span> <span class="U2">split(',')</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">308</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;array_</span> <span class="U2">val_i&nbsp;=&nbsp;[]</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">309</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">310</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;array_</span> <span class="U2">val.each&nbsp;d</span> <span class="U2">o&nbsp;|value|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">311</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valu</span> <span class="U2">e_i&nbsp;=&nbsp;valu</span> <span class="U2">e.to_i</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">312</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valu</span> <span class="U2">e&nbsp;=&nbsp;value_</span> <span class="U2">i&nbsp;unless&nbsp;v</span> <span class="U2">alue_i&nbsp;==0</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">313</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arra</span> <span class="U2">y_val_i&nbsp;&lt;&lt;</span> <span class="U2">&nbsp;value</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">314</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">315</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">316</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;array_</span> <span class="U2">val_i&nbsp;=&nbsp;ar</span> <span class="U2">ray_val_i[</span> <span class="U2">0]&nbsp;if&nbsp;arra</span> <span class="U2">y_val_i.si</span> <span class="U2">ze&nbsp;&lt;&nbsp;2&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">317</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;table_</span> <span class="U2">hashes[id]</span> <span class="U2">&nbsp;=&nbsp;array_v</span> <span class="U2">al_i&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">318</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">319</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">320</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(v</span> <span class="U2">ista_obj_m</span> <span class="U2">essage).to</span> <span class="U2">&nbsp;eq&nbsp;table_</span> <span class="U2">hashes</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">321</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">322</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">323</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">----</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">324</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;ad</span> <span class="U2">d&nbsp;new&nbsp;Vita</span> <span class="U2">l&nbsp;record&nbsp;f</span> <span class="U2">or&nbsp;patient</span> <span class="U2">&nbsp;with&nbsp;DFN&nbsp;</span> <span class="U2">"(.*?)"$/)</span> <span class="U2">&nbsp;do&nbsp;|dfn,&nbsp;</span> <span class="U2">table|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">325</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expected</span> <span class="U2">_array&nbsp;=&nbsp;%</span> <span class="U2">W[referenc</span> <span class="U2">e_date&nbsp;qua</span> <span class="U2">lified_nam</span> <span class="U2">e&nbsp;result]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">326</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table_to</span> <span class="U2">_hash&nbsp;=&nbsp;co</span> <span class="U2">nvert_tabl</span> <span class="U2">e_to_hash(</span> <span class="U2">table,&nbsp;exp</span> <span class="U2">ected_arra</span> <span class="U2">y)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">327</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le&nbsp;=&nbsp;table</span> <span class="U2">_to_hash[0</span> <span class="U2">]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">328</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le_dec&nbsp;=&nbsp;t</span> <span class="U2">able_to_ha</span> <span class="U2">sh[1]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">329</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;referenc</span> <span class="U2">e_date&nbsp;=&nbsp;h</span> <span class="U2">ash_table[</span> <span class="U2">"reference</span> <span class="U2">_date"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">330</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;referenc</span> <span class="U2">e_date&nbsp;=&nbsp;c</span> <span class="U2">hange_date</span> <span class="U2">(reference</span> <span class="U2">_date)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">331</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">332</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rpc_name</span> <span class="U2">&nbsp;=&nbsp;"HMP&nbsp;WR</span> <span class="U2">ITEBACK&nbsp;VI</span> <span class="U2">TAL"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">333</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;p&nbsp;data</span> <span class="U2">&nbsp;=&nbsp;"315061</span> <span class="U2">6.0900^"+d</span> <span class="U2">fn+"^1;"+v</span> <span class="U2">alue+";^23</span> <span class="U2">^100000002</span> <span class="U2">24*2:38:50</span> <span class="U2">:75"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">334</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data&nbsp;=&nbsp;r</span> <span class="U2">eference_d</span> <span class="U2">ate&nbsp;+&nbsp;"^"&nbsp;</span> <span class="U2">+&nbsp;dfn&nbsp;+&nbsp;"^</span> <span class="U2">"&nbsp;+&nbsp;hash_t</span> <span class="U2">able["qual</span> <span class="U2">ified_name</span> <span class="U2">"]&nbsp;+&nbsp;hash_</span> <span class="U2">table["res</span> <span class="U2">ult"]&nbsp;+&nbsp;";</span> <span class="U2">^23^100000</span> <span class="U2">00224*2:38</span> <span class="U2">:50:75"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">335</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">336</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@recorde</span> <span class="U2">_exisit&nbsp;=&nbsp;</span> <span class="U2">false</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">337</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;params&nbsp;=</span> <span class="U2">&nbsp;["0",&nbsp;dfn</span> <span class="U2">,&nbsp;data]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">338</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@vista_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">rpc_write_</span> <span class="U2">back(rpc_n</span> <span class="U2">ame,&nbsp;param</span> <span class="U2">s)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">339</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">340</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">341</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;ma</span> <span class="U2">rked&nbsp;a&nbsp;Vit</span> <span class="U2">al&nbsp;record&nbsp;</span> <span class="U2">with&nbsp;local</span> <span class="U2">&nbsp;id&nbsp;"(.*?)</span> <span class="U2">"&nbsp;as&nbsp;Enter</span> <span class="U2">ed&nbsp;in&nbsp;Erro</span> <span class="U2">r&nbsp;with&nbsp;EIE</span> <span class="U2">&nbsp;Reason$/)</span> <span class="U2">&nbsp;do&nbsp;|local</span> <span class="U2">_id,&nbsp;table</span> <span class="U2">|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">342</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;removed_</span> <span class="U2">value&nbsp;=&nbsp;fi</span> <span class="U2">nd_removed</span> <span class="U2">_value_for</span> <span class="U2">_uid(@resp</span> <span class="U2">onse,&nbsp;loca</span> <span class="U2">l_id,&nbsp;@sit</span> <span class="U2">e_name)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">343</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@recorde</span> <span class="U2">_exisit&nbsp;=&nbsp;</span> <span class="U2">false</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">344</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@recorde</span> <span class="U2">_exisit&nbsp;=&nbsp;</span> <span class="U2">true&nbsp;if&nbsp;re</span> <span class="U2">moved_valu</span> <span class="U2">e&nbsp;==&nbsp;"true</span> <span class="U2">"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">345</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">346</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table&nbsp;=&nbsp;</span> <span class="U2">table.rows</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">347</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;eie_reas</span> <span class="U2">on&nbsp;=&nbsp;table</span> <span class="U2">[0][1]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">348</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">349</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@old_sta</span> <span class="U2">mp_time&nbsp;=&nbsp;</span> <span class="U2">@stamp_tim</span> <span class="U2">e&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">350</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">351</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rpc_name</span> <span class="U2">&nbsp;=&nbsp;"HMP&nbsp;WR</span> <span class="U2">ITEBACK&nbsp;VI</span> <span class="U2">TAL&nbsp;EIE"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">352</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">353</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data&nbsp;=&nbsp;&nbsp;</span> <span class="U2">local_id&nbsp;+</span> <span class="U2">&nbsp;"^"&nbsp;+&nbsp;eie</span> <span class="U2">_reason</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">354</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;params&nbsp;=</span> <span class="U2">&nbsp;[data]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">355</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">356</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;@vista</span> <span class="U2">_response&nbsp;</span> <span class="U2">=&nbsp;rpc_writ</span> <span class="U2">e_back(rpc</span> <span class="U2">_name,&nbsp;par</span> <span class="U2">ams)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">357</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">358</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@current</span> <span class="U2">_time_for_</span> <span class="U2">domain&nbsp;=&nbsp;T</span> <span class="U2">ime.new&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">359</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">360</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">361</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;ma</span> <span class="U2">rked&nbsp;the&nbsp;a</span> <span class="U2">bvoe&nbsp;Vital</span> <span class="U2">&nbsp;record&nbsp;as</span> <span class="U2">&nbsp;Entered&nbsp;i</span> <span class="U2">n&nbsp;Error&nbsp;wi</span> <span class="U2">th&nbsp;EIE&nbsp;Rea</span> <span class="U2">son&nbsp;"(.*?)</span> <span class="U2">"$/)&nbsp;do&nbsp;|e</span> <span class="U2">ie_reason_</span> <span class="U2">code|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">362</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@local_i</span> <span class="U2">d&nbsp;=&nbsp;@vista</span> <span class="U2">_local_id.</span> <span class="U2">to_s</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">363</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;remove</span> <span class="U2">d_value&nbsp;=&nbsp;</span> <span class="U2">find_remov</span> <span class="U2">ed_value_f</span> <span class="U2">or_uid(@re</span> <span class="U2">sponse,&nbsp;lo</span> <span class="U2">cal_id,&nbsp;@s</span> <span class="U2">ite_name)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">364</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@recorde</span> <span class="U2">_exisit&nbsp;=&nbsp;</span> <span class="U2">false</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">365</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;@recor</span> <span class="U2">de_exisit&nbsp;</span> <span class="U2">=&nbsp;true&nbsp;if&nbsp;</span> <span class="U2">removed_va</span> <span class="U2">lue&nbsp;==&nbsp;"tr</span> <span class="U2">ue"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">366</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">367</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;eie_reas</span> <span class="U2">on_code&nbsp;=&nbsp;</span> <span class="U2">eie_reason</span> <span class="U2">_code.spli</span> <span class="U2">t";"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">368</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;eie_code</span> <span class="U2">&nbsp;=&nbsp;eie_rea</span> <span class="U2">son_code[1</span> <span class="U2">]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">369</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">370</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@old_sta</span> <span class="U2">mp_time&nbsp;=&nbsp;</span> <span class="U2">@stamp_tim</span> <span class="U2">e&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">371</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">372</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rpc_name</span> <span class="U2">&nbsp;=&nbsp;"HMP&nbsp;WR</span> <span class="U2">ITEBACK&nbsp;VI</span> <span class="U2">TAL&nbsp;EIE"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">373</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">374</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data&nbsp;=&nbsp;&nbsp;</span> <span class="U2">@local_id&nbsp;</span> <span class="U2">+&nbsp;"^"&nbsp;+&nbsp;ei</span> <span class="U2">e_code</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">375</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;params&nbsp;=</span> <span class="U2">&nbsp;[data]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">376</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">377</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;@vista</span> <span class="U2">_response&nbsp;</span> <span class="U2">=&nbsp;rpc_writ</span> <span class="U2">e_back(rpc</span> <span class="U2">_name,&nbsp;par</span> <span class="U2">ams)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">378</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">379</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@current</span> <span class="U2">_time_for_</span> <span class="U2">domain&nbsp;=&nbsp;T</span> <span class="U2">ime.new&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">380</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">381</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">382</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;ma</span> <span class="U2">rked&nbsp;a&nbsp;All</span> <span class="U2">ergy&nbsp;recor</span> <span class="U2">d&nbsp;for&nbsp;pati</span> <span class="U2">ent&nbsp;with&nbsp;l</span> <span class="U2">ocal&nbsp;id&nbsp;"(</span> <span class="U2">.*?)"&nbsp;as&nbsp;E</span> <span class="U2">ntered&nbsp;in&nbsp;</span> <span class="U2">Error$/)&nbsp;d</span> <span class="U2">o&nbsp;|local_i</span> <span class="U2">d|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">383</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;removed_</span> <span class="U2">value&nbsp;=&nbsp;fi</span> <span class="U2">nd_removed</span> <span class="U2">_value_for</span> <span class="U2">_uid(@resp</span> <span class="U2">onse,&nbsp;loca</span> <span class="U2">l_id,&nbsp;@sit</span> <span class="U2">e_name)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">384</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@recorde</span> <span class="U2">_exisit&nbsp;=&nbsp;</span> <span class="U2">false</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">385</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@recorde</span> <span class="U2">_exisit&nbsp;=&nbsp;</span> <span class="U2">true&nbsp;if&nbsp;re</span> <span class="U2">moved_valu</span> <span class="U2">e&nbsp;==&nbsp;"true</span> <span class="U2">"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">386</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">387</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@old_sta</span> <span class="U2">mp_time&nbsp;=&nbsp;</span> <span class="U2">@stamp_tim</span> <span class="U2">e&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">388</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">389</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rpc_name</span> <span class="U2">&nbsp;=&nbsp;"HMP&nbsp;WR</span> <span class="U2">ITEBACK&nbsp;AL</span> <span class="U2">LERGY&nbsp;EIE"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">390</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">391</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;data&nbsp;=</span> <span class="U2">&nbsp;&nbsp;local_id</span> <span class="U2">&nbsp;+&nbsp;"^"&nbsp;+&nbsp;d</span> <span class="U2">fn&nbsp;+&nbsp;"^YES</span> <span class="U2">^1^3150813</span> <span class="U2">.144304^1^</span> <span class="U2">Test&nbsp;-&nbsp;Ent</span> <span class="U2">ered&nbsp;in&nbsp;Er</span> <span class="U2">ror"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">392</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data&nbsp;=&nbsp;&nbsp;</span> <span class="U2">local_id&nbsp;+</span> <span class="U2">&nbsp;"^YES^1^3</span> <span class="U2">150813.144</span> <span class="U2">304^1^Test</span> <span class="U2">&nbsp;-&nbsp;Entered</span> <span class="U2">&nbsp;in&nbsp;Error"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">393</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">394</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;params&nbsp;=</span> <span class="U2">&nbsp;[data]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">395</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;@vista</span> <span class="U2">_response&nbsp;</span> <span class="U2">=&nbsp;rpc_writ</span> <span class="U2">e_back(rpc</span> <span class="U2">_name,&nbsp;par</span> <span class="U2">ams)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">396</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">397</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">398</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;ma</span> <span class="U2">rk&nbsp;abvoe&nbsp;A</span> <span class="U2">llergy&nbsp;rec</span> <span class="U2">ord&nbsp;as&nbsp;Ent</span> <span class="U2">ered&nbsp;in&nbsp;Er</span> <span class="U2">ror&nbsp;with&nbsp;c</span> <span class="U2">omment&nbsp;"(.</span> <span class="U2">*?)"$/)&nbsp;do</span> <span class="U2">&nbsp;|comment_</span> <span class="U2">value|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">399</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;@local</span> <span class="U2">_id&nbsp;=&nbsp;""</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">400</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;p&nbsp;@loc</span> <span class="U2">al_id&nbsp;=&nbsp;pi</span> <span class="U2">ck_local_i</span> <span class="U2">d_that_has</span> <span class="U2">_removed_v</span> <span class="U2">alue_false</span> <span class="U2">(@response</span> <span class="U2">,&nbsp;@site_na</span> <span class="U2">me)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">401</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">402</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@local_i</span> <span class="U2">d&nbsp;=&nbsp;@vista</span> <span class="U2">_local_id.</span> <span class="U2">to_s</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">403</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;"the&nbsp;l</span> <span class="U2">ocal&nbsp;id&nbsp;th</span> <span class="U2">at&nbsp;been&nbsp;ch</span> <span class="U2">osen&nbsp;to&nbsp;ma</span> <span class="U2">rk&nbsp;as&nbsp;EIE&nbsp;</span> <span class="U2">is:&nbsp;#{@loc</span> <span class="U2">al_id}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">404</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">405</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@old_sta</span> <span class="U2">mp_time&nbsp;=&nbsp;</span> <span class="U2">@stamp_tim</span> <span class="U2">e&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">406</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">407</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rpc_name</span> <span class="U2">&nbsp;=&nbsp;"HMP&nbsp;WR</span> <span class="U2">ITEBACK&nbsp;AL</span> <span class="U2">LERGY&nbsp;EIE"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">408</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">409</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;data&nbsp;=</span> <span class="U2">&nbsp;&nbsp;local_id</span> <span class="U2">&nbsp;+&nbsp;"^"&nbsp;+&nbsp;d</span> <span class="U2">fn&nbsp;+&nbsp;"^YES</span> <span class="U2">^1^3150813</span> <span class="U2">.144304^1^</span> <span class="U2">Test&nbsp;-&nbsp;Ent</span> <span class="U2">ered&nbsp;in&nbsp;Er</span> <span class="U2">ror"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">410</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data&nbsp;=&nbsp;&nbsp;</span> <span class="U2">@local_id&nbsp;</span> <span class="U2">+&nbsp;"^YES^1^</span> <span class="U2">3150813.14</span> <span class="U2">4304^1^"&nbsp;+</span> <span class="U2">&nbsp;comment_v</span> <span class="U2">alue&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">411</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">412</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;params&nbsp;=</span> <span class="U2">&nbsp;[data]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">413</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;@vista</span> <span class="U2">_response&nbsp;</span> <span class="U2">=&nbsp;rpc_writ</span> <span class="U2">e_back(rpc</span> <span class="U2">_name,&nbsp;par</span> <span class="U2">ams)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">414</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">415</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">416</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;ad</span> <span class="U2">d&nbsp;new&nbsp;Lab&nbsp;</span> <span class="U2">Order&nbsp;reco</span> <span class="U2">rd&nbsp;by&nbsp;usin</span> <span class="U2">g&nbsp;write\-b</span> <span class="U2">ack&nbsp;for&nbsp;pa</span> <span class="U2">tient&nbsp;with</span> <span class="U2">&nbsp;DFN&nbsp;"(.*?</span> <span class="U2">)"&nbsp;orderin</span> <span class="U2">g&nbsp;PTT&nbsp;test</span> <span class="U2">$/)&nbsp;do&nbsp;|df</span> <span class="U2">n|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">417</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rpc_name</span> <span class="U2">&nbsp;=&nbsp;"HMP&nbsp;WR</span> <span class="U2">ITEBACK&nbsp;LA</span> <span class="U2">B&nbsp;ORDERS"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">418</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data&nbsp;=&nbsp;'</span> <span class="U2">XIU,MARGAR</span> <span class="U2">ET^AUDIOLO</span> <span class="U2">GY^PTT^BLO</span> <span class="U2">OD^SERUM^A</span> <span class="U2">SAP^SP^TOD</span> <span class="U2">AY^ONE&nbsp;TIM</span> <span class="U2">E^^foo'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">419</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">420</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;params&nbsp;=</span> <span class="U2">&nbsp;["0",&nbsp;dfn</span> <span class="U2">,&nbsp;data]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">421</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@vista_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">rpc_write_</span> <span class="U2">back(rpc_n</span> <span class="U2">ame,&nbsp;param</span> <span class="U2">s)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">422</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">423</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">424</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;ad</span> <span class="U2">d&nbsp;new&nbsp;Lab&nbsp;</span> <span class="U2">Order&nbsp;reco</span> <span class="U2">rd&nbsp;by&nbsp;usin</span> <span class="U2">g&nbsp;write\-b</span> <span class="U2">ack&nbsp;for&nbsp;pa</span> <span class="U2">tient&nbsp;with</span> <span class="U2">&nbsp;DFN&nbsp;"(.*?</span> <span class="U2">)"&nbsp;orderin</span> <span class="U2">g&nbsp;THEOPHYL</span> <span class="U2">LINE&nbsp;test$</span> <span class="U2">/)&nbsp;do&nbsp;|dfn</span> <span class="U2">|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">425</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rpc_name</span> <span class="U2">&nbsp;=&nbsp;"HMP&nbsp;WR</span> <span class="U2">ITEBACK&nbsp;LA</span> <span class="U2">B&nbsp;ORDERS"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">426</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data&nbsp;=&nbsp;'</span> <span class="U2">XIU,MARGAR</span> <span class="U2">ET^AUDIOLO</span> <span class="U2">GY^THEOPHY</span> <span class="U2">LLINE^BLOO</span> <span class="U2">D^SERUM^RO</span> <span class="U2">UTINE^SP^T</span> <span class="U2">ODAY^ONE&nbsp;T</span> <span class="U2">IME^^07/07</span> <span class="U2">/15&nbsp;04:00;</span> <span class="U2">07/07/15&nbsp;0</span> <span class="U2">6:00'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">427</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">428</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;params&nbsp;=</span> <span class="U2">&nbsp;["0",&nbsp;dfn</span> <span class="U2">,&nbsp;data]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">429</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@vista_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">rpc_write_</span> <span class="U2">back(rpc_n</span> <span class="U2">ame,&nbsp;param</span> <span class="U2">s)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">430</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">431</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">432</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;ad</span> <span class="U2">d&nbsp;new&nbsp;Lab&nbsp;</span> <span class="U2">Order&nbsp;reco</span> <span class="U2">rd&nbsp;by&nbsp;usin</span> <span class="U2">g&nbsp;write\-b</span> <span class="U2">ack&nbsp;for&nbsp;pa</span> <span class="U2">tient&nbsp;with</span> <span class="U2">&nbsp;DFN&nbsp;"(.*?</span> <span class="U2">)"&nbsp;orderin</span> <span class="U2">g&nbsp;GAS&nbsp;AND&nbsp;</span> <span class="U2">CARBON&nbsp;MON</span> <span class="U2">OXIDE&nbsp;PANE</span> <span class="U2">L&nbsp;test$/)&nbsp;</span> <span class="U2">do&nbsp;|dfn|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">433</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rpc_name</span> <span class="U2">&nbsp;=&nbsp;"HMP&nbsp;WR</span> <span class="U2">ITEBACK&nbsp;LA</span> <span class="U2">B&nbsp;ORDERS"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">434</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data&nbsp;=&nbsp;'</span> <span class="U2">XIU,MARGAR</span> <span class="U2">ET^AUDIOLO</span> <span class="U2">GY^GAS&nbsp;AND</span> <span class="U2">&nbsp;CARBON&nbsp;MO</span> <span class="U2">NOXIDE&nbsp;PAN</span> <span class="U2">EL^BLOOD^B</span> <span class="U2">LOOD^ROUTI</span> <span class="U2">NE^SP^TODA</span> <span class="U2">Y^ONE&nbsp;TIME</span> <span class="U2">^^foo'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">435</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">436</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;params&nbsp;=</span> <span class="U2">&nbsp;["0",&nbsp;dfn</span> <span class="U2">,&nbsp;data]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">437</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@vista_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">rpc_write_</span> <span class="U2">back(rpc_n</span> <span class="U2">ame,&nbsp;param</span> <span class="U2">s)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">438</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">439</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">440</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;ad</span> <span class="U2">d&nbsp;new&nbsp;Lab&nbsp;</span> <span class="U2">Order&nbsp;reco</span> <span class="U2">rd&nbsp;by&nbsp;usin</span> <span class="U2">g&nbsp;write\-b</span> <span class="U2">ack&nbsp;for&nbsp;pa</span> <span class="U2">tient&nbsp;with</span> <span class="U2">&nbsp;DFN&nbsp;"(.*?</span> <span class="U2">)"&nbsp;orderin</span> <span class="U2">g&nbsp;GENTAMIC</span> <span class="U2">IN&nbsp;test$/)</span> <span class="U2">&nbsp;do&nbsp;|dfn|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">441</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rpc_name</span> <span class="U2">&nbsp;=&nbsp;"HMP&nbsp;WR</span> <span class="U2">ITEBACK&nbsp;LA</span> <span class="U2">B&nbsp;ORDERS"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">442</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data&nbsp;=&nbsp;'</span> <span class="U2">XIU,MARGAR</span> <span class="U2">ET^AUDIOLO</span> <span class="U2">GY^GENTAMI</span> <span class="U2">CIN^BLOOD^</span> <span class="U2">SERUM^ROUT</span> <span class="U2">INE^SP^TOD</span> <span class="U2">AY^ONE&nbsp;TIM</span> <span class="U2">E^^PEAK;fo</span> <span class="U2">o'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">443</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">444</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;params&nbsp;=</span> <span class="U2">&nbsp;["0",&nbsp;dfn</span> <span class="U2">,&nbsp;data]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">445</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@vista_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">rpc_write_</span> <span class="U2">back(rpc_n</span> <span class="U2">ame,&nbsp;param</span> <span class="U2">s)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">446</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">447</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">448</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;ad</span> <span class="U2">d&nbsp;new&nbsp;prob</span> <span class="U2">lem&nbsp;record</span> <span class="U2">&nbsp;by&nbsp;using&nbsp;</span> <span class="U2">write\-bac</span> <span class="U2">k&nbsp;for&nbsp;pati</span> <span class="U2">ent&nbsp;with&nbsp;D</span> <span class="U2">FN&nbsp;"(.*?)"</span> <span class="U2">$/)&nbsp;do&nbsp;|df</span> <span class="U2">n|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">449</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rpc_name</span> <span class="U2">&nbsp;=&nbsp;"HMP&nbsp;WR</span> <span class="U2">ITEBACK&nbsp;PR</span> <span class="U2">OBLEM"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">450</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;dfn&nbsp;=&nbsp;</span> <span class="U2">"66"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">451</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;prv&nbsp;=&nbsp;"9</span> <span class="U2">014"&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">452</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;vamc&nbsp;=&nbsp;"</span> <span class="U2">500"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">453</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;flds&nbsp;=&nbsp;[</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">454</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;[".01",&nbsp;</span> <span class="U2">"9777"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">455</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;[".03",&nbsp;</span> <span class="U2">"0"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">456</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;[".05",&nbsp;</span> <span class="U2">"^Numbness</span> <span class="U2">"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">457</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;[".08",&nbsp;</span> <span class="U2">"3150729"]</span> <span class="U2">,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">458</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;[".12",&nbsp;</span> <span class="U2">"A"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">459</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["10,\"N</span> <span class="U2">EW\",1",&nbsp;"</span> <span class="U2">Farid11&nbsp;Lo</span> <span class="U2">ss&nbsp;of&nbsp;feel</span> <span class="U2">ing&nbsp;in&nbsp;ext</span> <span class="U2">remities"]</span> <span class="U2">,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">460</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["10,0",</span> <span class="U2">&nbsp;"1"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">461</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;[".13",&nbsp;</span> <span class="U2">"3150720"]</span> <span class="U2">,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">462</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["1.01",</span> <span class="U2">&nbsp;"7078563"</span> <span class="U2">],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">463</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["1.02",</span> <span class="U2">&nbsp;"T"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">464</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["1.03",</span> <span class="U2">&nbsp;"1"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">465</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["1.04",</span> <span class="U2">&nbsp;"9014"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">466</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["1.05",</span> <span class="U2">&nbsp;"9025"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">467</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["1.06",</span> <span class="U2">&nbsp;"9"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">468</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["1.07",</span> <span class="U2">&nbsp;"3150730"</span> <span class="U2">],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">469</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["1.08",</span> <span class="U2">&nbsp;"23"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">470</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["1.09",</span> <span class="U2">&nbsp;"3150721"</span> <span class="U2">],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">471</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["1.1",&nbsp;</span> <span class="U2">"0"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">472</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["1.11",</span> <span class="U2">&nbsp;"0"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">473</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["1.12",</span> <span class="U2">&nbsp;"0"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">474</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["1.13",</span> <span class="U2">&nbsp;"0"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">475</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["1.14",</span> <span class="U2">&nbsp;"C"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">476</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["1.15",</span> <span class="U2">&nbsp;"0"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">477</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["1.16",</span> <span class="U2">&nbsp;"0"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">478</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["1.17",</span> <span class="U2">&nbsp;"1"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">479</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["1.18",</span> <span class="U2">&nbsp;"0"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">480</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">481</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">482</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;params&nbsp;=</span> <span class="U2">&nbsp;[dfn,&nbsp;prv</span> <span class="U2">,&nbsp;vamc,&nbsp;fl</span> <span class="U2">ds]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">483</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@vista_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">rpc_write_</span> <span class="U2">back(rpc_n</span> <span class="U2">ame,&nbsp;param</span> <span class="U2">s)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">484</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">485</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">486</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;(?</span> <span class="U2">:add&nbsp;new|t</span> <span class="U2">ry&nbsp;to&nbsp;add&nbsp;</span> <span class="U2">existing)&nbsp;</span> <span class="U2">Drug&nbsp;Aller</span> <span class="U2">gy&nbsp;record&nbsp;</span> <span class="U2">for&nbsp;patien</span> <span class="U2">t&nbsp;with&nbsp;DFN</span> <span class="U2">&nbsp;"(.*?)"$/</span> <span class="U2">)&nbsp;do&nbsp;|dfn,</span> <span class="U2">&nbsp;table|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">487</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expected</span> <span class="U2">_array&nbsp;=&nbsp;%</span> <span class="U2">W[referenc</span> <span class="U2">e_date&nbsp;cau</span> <span class="U2">sative_age</span> <span class="U2">nt&nbsp;histori</span> <span class="U2">cal&nbsp;author</span> <span class="U2">_dictator&nbsp;</span> <span class="U2">type_name&nbsp;</span> <span class="U2">nature_of_</span> <span class="U2">reaction&nbsp;s</span> <span class="U2">ymptom1&nbsp;sy</span> <span class="U2">mptom2&nbsp;sev</span> <span class="U2">erity&nbsp;comm</span> <span class="U2">ent]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">488</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table_to</span> <span class="U2">_hash&nbsp;=&nbsp;co</span> <span class="U2">nvert_tabl</span> <span class="U2">e_to_hash(</span> <span class="U2">table,&nbsp;exp</span> <span class="U2">ected_arra</span> <span class="U2">y)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">489</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le&nbsp;=&nbsp;table</span> <span class="U2">_to_hash[0</span> <span class="U2">]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">490</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le_dec&nbsp;=&nbsp;t</span> <span class="U2">able_to_ha</span> <span class="U2">sh[1]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">491</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;referenc</span> <span class="U2">e_date&nbsp;=&nbsp;h</span> <span class="U2">ash_table[</span> <span class="U2">"reference</span> <span class="U2">_date"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">492</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;referenc</span> <span class="U2">e_date&nbsp;=&nbsp;c</span> <span class="U2">hange_date</span> <span class="U2">(reference</span> <span class="U2">_date)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">493</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">494</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rpc_name</span> <span class="U2">&nbsp;=&nbsp;"HMP&nbsp;WR</span> <span class="U2">ITEBACK&nbsp;AL</span> <span class="U2">LERGY"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">495</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;flds&nbsp;=&nbsp;[</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">496</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["\"GMRA</span> <span class="U2">CHT\",0",&nbsp;</span> <span class="U2">"1"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">497</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["\"GMRA</span> <span class="U2">CHT\",1",&nbsp;</span> <span class="U2">reference_</span> <span class="U2">date],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">498</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["\"GMRA</span> <span class="U2">GNT\"",&nbsp;ha</span> <span class="U2">sh_table["</span> <span class="U2">causative_</span> <span class="U2">agent"]],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">499</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["\"GMRA</span> <span class="U2">OBHX\"",&nbsp;h</span> <span class="U2">ash_table[</span> <span class="U2">"historica</span> <span class="U2">l"]],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">500</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["\"GMRA</span> <span class="U2">ORDT\"",&nbsp;r</span> <span class="U2">eference_d</span> <span class="U2">ate],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">501</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["\"GMRA</span> <span class="U2">ORIG\"",&nbsp;h</span> <span class="U2">ash_table[</span> <span class="U2">"author_di</span> <span class="U2">ctator"]],</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">502</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["\"GMRA</span> <span class="U2">ORDT\"",&nbsp;r</span> <span class="U2">eference_d</span> <span class="U2">ate],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">503</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["\"GMRA</span> <span class="U2">SEVR\"",&nbsp;"</span> <span class="U2">2"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">504</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["\"GMRA</span> <span class="U2">TYPE\"",&nbsp;h</span> <span class="U2">ash_table[</span> <span class="U2">"type_name</span> <span class="U2">"]],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">505</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["\"GMRA</span> <span class="U2">NATR\"",&nbsp;h</span> <span class="U2">ash_table[</span> <span class="U2">"nature_of</span> <span class="U2">_reaction"</span> <span class="U2">]],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">506</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["\"GMRA</span> <span class="U2">SYMP\",0",</span> <span class="U2">&nbsp;"2"],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">507</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["\"GMRA</span> <span class="U2">SYMP\",1",</span> <span class="U2">&nbsp;hash_tabl</span> <span class="U2">e["symptom</span> <span class="U2">1"]],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">508</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["\"GMRA</span> <span class="U2">SYMP\",2",</span> <span class="U2">&nbsp;hash_tabl</span> <span class="U2">e["symptom</span> <span class="U2">2"]],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">509</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["\"GMRA</span> <span class="U2">RDT\"",&nbsp;re</span> <span class="U2">ference_da</span> <span class="U2">te],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">510</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["\"GMRA</span> <span class="U2">CMTS\",0",</span> <span class="U2">&nbsp;hash_tabl</span> <span class="U2">e["severit</span> <span class="U2">y"]],</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">511</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;["\"GMRA</span> <span class="U2">CMTS\",1",</span> <span class="U2">&nbsp;hash_tabl</span> <span class="U2">e["comment</span> <span class="U2">"]]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">512</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">513</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">514</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data&nbsp;=&nbsp;h</span> <span class="U2">ash_table_</span> <span class="U2">dec["causa</span> <span class="U2">tive_agent</span> <span class="U2">"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">515</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@recorde</span> <span class="U2">_exisit&nbsp;=&nbsp;</span> <span class="U2">check_data</span> <span class="U2">_exisit_fo</span> <span class="U2">r_allergy(</span> <span class="U2">data)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">516</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">517</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;params&nbsp;=</span> <span class="U2">&nbsp;["0",&nbsp;dfn</span> <span class="U2">,&nbsp;flds]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">518</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@vista_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">rpc_write_</span> <span class="U2">back(rpc_n</span> <span class="U2">ame,&nbsp;param</span> <span class="U2">s)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">519</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">520</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">521</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;ad</span> <span class="U2">d&nbsp;(?:new|s</span> <span class="U2">ame)&nbsp;Immun</span> <span class="U2">ization&nbsp;re</span> <span class="U2">cord&nbsp;for&nbsp;p</span> <span class="U2">atient&nbsp;wit</span> <span class="U2">h&nbsp;DFN&nbsp;"(.*</span> <span class="U2">?)"&nbsp;enter$</span> <span class="U2">/)&nbsp;do&nbsp;|dfn</span> <span class="U2">,&nbsp;table|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">522</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le&nbsp;=&nbsp;{}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">523</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le_dec&nbsp;=&nbsp;{</span> <span class="U2">}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">524</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table.ro</span> <span class="U2">ws.each&nbsp;do</span> <span class="U2">&nbsp;|field,&nbsp;d</span> <span class="U2">ec,&nbsp;value|</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">525</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;hash_t</span> <span class="U2">able[field</span> <span class="U2">]&nbsp;=&nbsp;&nbsp;value</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">526</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;hash_t</span> <span class="U2">able_dec[f</span> <span class="U2">ield]&nbsp;=&nbsp;&nbsp;d</span> <span class="U2">ec</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">527</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">528</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">529</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table_ke</span> <span class="U2">ys&nbsp;=&nbsp;hash_</span> <span class="U2">table.keys</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">530</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table_ke</span> <span class="U2">ys&nbsp;=&nbsp;table</span> <span class="U2">_keys.map(</span> <span class="U2">&amp;:downcase</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">531</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expected</span> <span class="U2">_array&nbsp;=&nbsp;%</span> <span class="U2">W[contra&nbsp;s</span> <span class="U2">eries&nbsp;reac</span> <span class="U2">tion&nbsp;contr</span> <span class="U2">aindicated</span> <span class="U2">&nbsp;comment]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">532</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(t</span> <span class="U2">able_keys)</span> <span class="U2">.to&nbsp;match_</span> <span class="U2">array(expe</span> <span class="U2">cted_array</span> <span class="U2">),&nbsp;"Please</span> <span class="U2">&nbsp;check&nbsp;you</span> <span class="U2">r&nbsp;code.&nbsp;\n</span> <span class="U2">&nbsp;expected&nbsp;</span> <span class="U2">array:&nbsp;#{e</span> <span class="U2">xpected_ar</span> <span class="U2">ray}&nbsp;\n&nbsp;go</span> <span class="U2">t:&nbsp;#{table</span> <span class="U2">_keys}&nbsp;"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">533</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">534</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rpc_name</span> <span class="U2">&nbsp;=&nbsp;"HMP&nbsp;WR</span> <span class="U2">ITEBACK&nbsp;IM</span> <span class="U2">MUNIZATION</span> <span class="U2">"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">535</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;data="</span> <span class="U2">DFN^IEN^ho</span> <span class="U2">spitalLoca</span> <span class="U2">tion^date/</span> <span class="U2">time^A^991</span> <span class="U2">^IMM^immun</span> <span class="U2">izationTyp</span> <span class="U2">e^series^R</span> <span class="U2">ESULT&nbsp;CODE</span> <span class="U2">^comments&nbsp;</span> <span class="U2">date^react</span> <span class="U2">ion^CONTRA</span> <span class="U2">INDICATED"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">536</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le["commen</span> <span class="U2">t"]&nbsp;=&nbsp;hash</span> <span class="U2">_table["co</span> <span class="U2">mment"]&nbsp;+&nbsp;</span> <span class="U2">"&nbsp;at&nbsp;"&nbsp;+&nbsp;T</span> <span class="U2">ime.new.to</span> <span class="U2">_s</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">537</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;data&nbsp;=</span> <span class="U2">&nbsp;dfn&nbsp;+&nbsp;"^0</span> <span class="U2">^229^31508</span> <span class="U2">25.171130^</span> <span class="U2">A^991^IMM^</span> <span class="U2">"&nbsp;+&nbsp;hash_t</span> <span class="U2">able["cont</span> <span class="U2">ra"]&nbsp;+&nbsp;"^"</span> <span class="U2">&nbsp;+&nbsp;hash_ta</span> <span class="U2">ble["serie</span> <span class="U2">s"]&nbsp;+&nbsp;"^1^</span> <span class="U2">"&nbsp;+&nbsp;hash_t</span> <span class="U2">able["comm</span> <span class="U2">ent"]&nbsp;+&nbsp;"^</span> <span class="U2">"&nbsp;+&nbsp;hash_t</span> <span class="U2">able["reac</span> <span class="U2">tion"]&nbsp;+&nbsp;"</span> <span class="U2">^"&nbsp;+&nbsp;hash_</span> <span class="U2">table["con</span> <span class="U2">traindicat</span> <span class="U2">ed"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">538</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">539</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;p&nbsp;@res</span> <span class="U2">ponse</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">540</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data_che</span> <span class="U2">ck&nbsp;=&nbsp;[["cp</span> <span class="U2">tName",&nbsp;ha</span> <span class="U2">sh_table_d</span> <span class="U2">ec["contra</span> <span class="U2">"]],&nbsp;["adm</span> <span class="U2">inisteredD</span> <span class="U2">ateTime",&nbsp;</span> <span class="U2">"201508251</span> <span class="U2">71130"]]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">541</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@recorde</span> <span class="U2">_exisit&nbsp;=&nbsp;</span> <span class="U2">check_data</span> <span class="U2">_exisit(da</span> <span class="U2">ta_check)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">542</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">543</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;params&nbsp;=</span> <span class="U2">&nbsp;["0",&nbsp;dfn</span> <span class="U2">,&nbsp;data]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">544</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@vista_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">rpc_write_</span> <span class="U2">back(rpc_n</span> <span class="U2">ame,&nbsp;param</span> <span class="U2">s)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">545</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">546</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">547</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^new</span> <span class="U2">&nbsp;the&nbsp;clien</span> <span class="U2">t&nbsp;add&nbsp;(?:n</span> <span class="U2">ew|same)&nbsp;I</span> <span class="U2">mmunizatio</span> <span class="U2">n&nbsp;record&nbsp;f</span> <span class="U2">or&nbsp;patient</span> <span class="U2">&nbsp;with&nbsp;DFN&nbsp;</span> <span class="U2">"(.*?)"&nbsp;en</span> <span class="U2">ter$/)&nbsp;do&nbsp;</span> <span class="U2">|dfn,&nbsp;tabl</span> <span class="U2">e|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">548</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expected</span> <span class="U2">_array&nbsp;=&nbsp;%</span> <span class="U2">W[inpatien</span> <span class="U2">t&nbsp;location</span> <span class="U2">&nbsp;date_time</span> <span class="U2">&nbsp;service_c</span> <span class="U2">ategory&nbsp;pr</span> <span class="U2">ovider_ien</span> <span class="U2">&nbsp;immunizat</span> <span class="U2">ion_ien&nbsp;ca</span> <span class="U2">tegory&nbsp;nar</span> <span class="U2">rative_of_</span> <span class="U2">immunizati</span> <span class="U2">on]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">549</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expected</span> <span class="U2">_array&nbsp;=&nbsp;e</span> <span class="U2">xpected_ar</span> <span class="U2">ray&nbsp;+&nbsp;%W[s</span> <span class="U2">eries&nbsp;enco</span> <span class="U2">unter_prov</span> <span class="U2">ider&nbsp;react</span> <span class="U2">ion&nbsp;contra</span> <span class="U2">indicated&nbsp;</span> <span class="U2">next_comme</span> <span class="U2">nt_sequenc</span> <span class="U2">e&nbsp;cvx_code</span> <span class="U2">&nbsp;event&nbsp;dos</span> <span class="U2">e&nbsp;route&nbsp;ad</span> <span class="U2">min_site]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">550</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expected</span> <span class="U2">_array&nbsp;=&nbsp;e</span> <span class="U2">xpected_ar</span> <span class="U2">ray&nbsp;+&nbsp;%W[l</span> <span class="U2">ot&nbsp;manufac</span> <span class="U2">turer&nbsp;expi</span> <span class="U2">ration_dat</span> <span class="U2">e&nbsp;event_da</span> <span class="U2">te&nbsp;orderin</span> <span class="U2">g_provider</span> <span class="U2">&nbsp;vis&nbsp;remar</span> <span class="U2">ks&nbsp;non_kno</span> <span class="U2">w]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">551</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;expect</span> <span class="U2">ed_array&nbsp;=</span> <span class="U2">&nbsp;%W[refere</span> <span class="U2">nce_date&nbsp;c</span> <span class="U2">ontra&nbsp;seri</span> <span class="U2">es&nbsp;reactio</span> <span class="U2">n&nbsp;contrain</span> <span class="U2">dicated&nbsp;co</span> <span class="U2">mment&nbsp;resu</span> <span class="U2">lt_code&nbsp;lo</span> <span class="U2">t_number&nbsp;e</span> <span class="U2">xpiration_</span> <span class="U2">date&nbsp;manuf</span> <span class="U2">acturer&nbsp;in</span> <span class="U2">fo_source&nbsp;</span> <span class="U2">order_prov</span> <span class="U2">ider&nbsp;route</span> <span class="U2">&nbsp;dose&nbsp;vis_</span> <span class="U2">date]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">552</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">553</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table_to</span> <span class="U2">_hash&nbsp;=&nbsp;co</span> <span class="U2">nvert_tabl</span> <span class="U2">e_to_hash(</span> <span class="U2">table,&nbsp;exp</span> <span class="U2">ected_arra</span> <span class="U2">y)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">554</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;piece&nbsp;=&nbsp;</span> <span class="U2">table_to_h</span> <span class="U2">ash[0]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">555</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;piece_de</span> <span class="U2">c&nbsp;=&nbsp;table_</span> <span class="U2">to_hash[1]</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">556</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">557</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;p&nbsp;piec</span> <span class="U2">e["date_ti</span> <span class="U2">me"]&nbsp;=&nbsp;cha</span> <span class="U2">nge_date(p</span> <span class="U2">iece["date</span> <span class="U2">_time"])</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">558</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">559</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rpc_name</span> <span class="U2">&nbsp;=&nbsp;"HMP&nbsp;WR</span> <span class="U2">ITEBACK&nbsp;IM</span> <span class="U2">MUNIZATION</span> <span class="U2">"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">560</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;piece[</span> <span class="U2">"next_comm</span> <span class="U2">ent_sequen</span> <span class="U2">ce"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">561</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;piece[</span> <span class="U2">"next_comm</span> <span class="U2">ent_sequen</span> <span class="U2">ce"]&nbsp;=&nbsp;pie</span> <span class="U2">ce["next_c</span> <span class="U2">omment_seq</span> <span class="U2">uence"]&nbsp;+&nbsp;</span> <span class="U2">"&nbsp;at&nbsp;"&nbsp;+&nbsp;T</span> <span class="U2">ime.new.to</span> <span class="U2">_s</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">562</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">563</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;DATA="</span> <span class="U2">DFNEncount</span> <span class="U2">erPatient^</span> <span class="U2">EncounterI</span> <span class="U2">npatient^E</span> <span class="U2">ncounterLo</span> <span class="U2">cation^Enc</span> <span class="U2">ounterDate</span> <span class="U2">Time^Encou</span> <span class="U2">nterServic</span> <span class="U2">eCategory^</span> <span class="U2">ProviderIE</span> <span class="U2">N^IMM^Immu</span> <span class="U2">nizationIE</span> <span class="U2">N^Category</span> <span class="U2">^</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">564</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;Narrat</span> <span class="U2">iveOfImmun</span> <span class="U2">ization^Se</span> <span class="U2">ries^Encou</span> <span class="U2">nterProvid</span> <span class="U2">er^Reactio</span> <span class="U2">n^Contrain</span> <span class="U2">dicated^^N</span> <span class="U2">extComment</span> <span class="U2">Sequence^C</span> <span class="U2">VXCode^Eve</span> <span class="U2">ntInfoSour</span> <span class="U2">ce;HL7Code</span> <span class="U2">;IEN^Dose;</span> <span class="U2">Units;Unit</span> <span class="U2">sIEN^</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">565</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;RouteN</span> <span class="U2">ame;HL7Cod</span> <span class="U2">e;IEN^Admi</span> <span class="U2">nSiteName;</span> <span class="U2">HL7Code;IE</span> <span class="U2">N^Lot#;IEN</span> <span class="U2">^Manufactu</span> <span class="U2">rer^Expira</span> <span class="U2">tionDate^E</span> <span class="U2">ventDateTi</span> <span class="U2">me^Orderin</span> <span class="U2">gProvider^</span> <span class="U2">VIS^Remark</span> <span class="U2">s"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">566</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">567</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data&nbsp;=&nbsp;d</span> <span class="U2">fn&nbsp;+&nbsp;"^"&nbsp;+</span> <span class="U2">&nbsp;piece["in</span> <span class="U2">patient"]&nbsp;</span> <span class="U2">+&nbsp;"^"&nbsp;+&nbsp;pi</span> <span class="U2">ece["locat</span> <span class="U2">ion"]&nbsp;+&nbsp;"^</span> <span class="U2">"&nbsp;+&nbsp;piece[</span> <span class="U2">"date_time</span> <span class="U2">"]&nbsp;+&nbsp;"^"&nbsp;+</span> <span class="U2">&nbsp;piece["se</span> <span class="U2">rvice_cate</span> <span class="U2">gory"]&nbsp;+&nbsp;"</span> <span class="U2">^"&nbsp;+&nbsp;piece</span> <span class="U2">["provider</span> <span class="U2">_ien"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">568</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data&nbsp;=&nbsp;d</span> <span class="U2">ata&nbsp;+&nbsp;"^IM</span> <span class="U2">M^"&nbsp;+&nbsp;piec</span> <span class="U2">e["immuniz</span> <span class="U2">ation_ien"</span> <span class="U2">]&nbsp;+&nbsp;"^"&nbsp;+&nbsp;</span> <span class="U2">piece["cat</span> <span class="U2">egory"]&nbsp;+&nbsp;</span> <span class="U2">"^"&nbsp;+&nbsp;piec</span> <span class="U2">e["narrati</span> <span class="U2">ve_of_immu</span> <span class="U2">nization"]</span> <span class="U2">&nbsp;+&nbsp;"^"&nbsp;+&nbsp;p</span> <span class="U2">iece["seri</span> <span class="U2">es"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">569</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data&nbsp;=&nbsp;d</span> <span class="U2">ata&nbsp;+&nbsp;"^"&nbsp;</span> <span class="U2">+&nbsp;piece["e</span> <span class="U2">ncounter_p</span> <span class="U2">rovider"]&nbsp;</span> <span class="U2">+&nbsp;"^"&nbsp;+&nbsp;pi</span> <span class="U2">ece["react</span> <span class="U2">ion"]&nbsp;+&nbsp;"^</span> <span class="U2">"&nbsp;+&nbsp;piece[</span> <span class="U2">"contraind</span> <span class="U2">icated"]&nbsp;+</span> <span class="U2">&nbsp;"^"&nbsp;+&nbsp;pie</span> <span class="U2">ce["non_kn</span> <span class="U2">ow"]&nbsp;+&nbsp;"^"</span> <span class="U2">&nbsp;+&nbsp;piece["</span> <span class="U2">next_comme</span> <span class="U2">nt_sequenc</span> <span class="U2">e"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">570</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data&nbsp;=&nbsp;d</span> <span class="U2">ata&nbsp;+&nbsp;"^"&nbsp;</span> <span class="U2">+&nbsp;piece["c</span> <span class="U2">vx_code"]&nbsp;</span> <span class="U2">+&nbsp;"^"&nbsp;+&nbsp;pi</span> <span class="U2">ece["event</span> <span class="U2">"]&nbsp;+&nbsp;"^"&nbsp;+</span> <span class="U2">&nbsp;piece["do</span> <span class="U2">se"]&nbsp;+&nbsp;"^"</span> <span class="U2">&nbsp;+&nbsp;piece["</span> <span class="U2">route"]&nbsp;+&nbsp;</span> <span class="U2">"^"&nbsp;+&nbsp;piec</span> <span class="U2">e["admin_s</span> <span class="U2">ite"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">571</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data&nbsp;=&nbsp;d</span> <span class="U2">ata&nbsp;+&nbsp;"^"&nbsp;</span> <span class="U2">+&nbsp;piece["l</span> <span class="U2">ot"]&nbsp;+&nbsp;"^"</span> <span class="U2">&nbsp;+&nbsp;piece["</span> <span class="U2">manufactur</span> <span class="U2">er"]&nbsp;+&nbsp;"^"</span> <span class="U2">&nbsp;+&nbsp;piece["</span> <span class="U2">expiration</span> <span class="U2">_date"]&nbsp;+&nbsp;</span> <span class="U2">"^"&nbsp;+&nbsp;piec</span> <span class="U2">e["event_d</span> <span class="U2">ate"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">572</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;data&nbsp;=</span> <span class="U2">&nbsp;data&nbsp;+&nbsp;"^</span> <span class="U2">"&nbsp;+&nbsp;piece[</span> <span class="U2">"ordering_</span> <span class="U2">provider"]</span> <span class="U2">&nbsp;+&nbsp;"^"&nbsp;+&nbsp;p</span> <span class="U2">iece["vis"</span> <span class="U2">]&nbsp;+&nbsp;"^"&nbsp;+&nbsp;</span> <span class="U2">piece["rem</span> <span class="U2">arks"]&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">573</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;p&nbsp;"Orl</span> <span class="U2">ando&nbsp;date"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">574</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;p&nbsp;data</span> <span class="U2">_o&nbsp;=&nbsp;dfn&nbsp;+</span> <span class="U2">&nbsp;"^0^229^3</span> <span class="U2">151020.145</span> <span class="U2">115^A^991^</span> <span class="U2">IMM^15^^DT</span> <span class="U2">AP^3^^FEVE</span> <span class="U2">R^1^^COMME</span> <span class="U2">NT^1^Histo</span> <span class="U2">rical&nbsp;info</span> <span class="U2">rmation&nbsp;-s</span> <span class="U2">ource&nbsp;unsp</span> <span class="U2">ecified;ID</span> <span class="U2">;1^DOSE^OR</span> <span class="U2">AL^1^EHMP0</span> <span class="U2">001^ABBOTT</span> <span class="U2">&nbsp;LABORATOR</span> <span class="U2">IES^OCT&nbsp;20</span> <span class="U2">,2015^3151</span> <span class="U2">022.145115</span> <span class="U2">^86^315102</span> <span class="U2">7.174303^O</span> <span class="U2">neRemark"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">575</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;p&nbsp;"Tim</span> <span class="U2">&nbsp;date"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">576</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;p&nbsp;data</span> <span class="U2">_t&nbsp;=&nbsp;dfn&nbsp;+</span> <span class="U2">&nbsp;"^0^229^3</span> <span class="U2">150121.174</span> <span class="U2">303^A^991^</span> <span class="U2">IMM^35^3^1</span> <span class="U2">^This&nbsp;is&nbsp;a</span> <span class="U2">&nbsp;comment!^</span> <span class="U2">FEVER^0^EH</span> <span class="U2">MP0001;1^3</span> <span class="U2">151201.000</span> <span class="U2">000^ABBOTT</span> <span class="U2">&nbsp;LABORATOR</span> <span class="U2">IES^0;1^1^</span> <span class="U2">INTRADERMA</span> <span class="U2">L;ID;1^DOS</span> <span class="U2">E^1/311071</span> <span class="U2">4.000000;2</span> <span class="U2">/3100310.0</span> <span class="U2">00000"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">577</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;#&nbsp;p&nbsp;@r</span> <span class="U2">esponse</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">578</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;p&nbsp;"Orl</span> <span class="U2">ando&nbsp;date"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">579</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;p&nbsp;data</span> <span class="U2">&nbsp;=&nbsp;dfn&nbsp;+&nbsp;"</span> <span class="U2">^0^229^315</span> <span class="U2">0522.17430</span> <span class="U2">3^A^991^IM</span> <span class="U2">M^1020^^DT</span> <span class="U2">AP^3^^FEVE</span> <span class="U2">R^1^^COMME</span> <span class="U2">NT^1^2^.25</span> <span class="U2">;mg;1^NASA</span> <span class="U2">L^LD^EHMP0</span> <span class="U2">001;1^ABBO</span> <span class="U2">TT&nbsp;LABORAT</span> <span class="U2">ORIES^OCT&nbsp;</span> <span class="U2">20,2015^OC</span> <span class="U2">T&nbsp;21,2015^</span> <span class="U2">229^MEASLE</span> <span class="U2">S/MUMPS/RU</span> <span class="U2">BELLA&nbsp;VIS^</span> <span class="U2">1"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">580</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">581</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data_che</span> <span class="U2">ck&nbsp;=&nbsp;[["cp</span> <span class="U2">tName",&nbsp;pi</span> <span class="U2">ece_dec["i</span> <span class="U2">mmunizatio</span> <span class="U2">n_ien"]],&nbsp;</span> <span class="U2">["administ</span> <span class="U2">eredDateTi</span> <span class="U2">me",&nbsp;piece</span> <span class="U2">_dec["even</span> <span class="U2">t_date"]],</span> <span class="U2">&nbsp;["uid",&nbsp;"</span> <span class="U2">CONTAINS&nbsp;"</span> <span class="U2">&nbsp;+&nbsp;@site_n</span> <span class="U2">ame]]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">582</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@recorde</span> <span class="U2">_exisit&nbsp;=&nbsp;</span> <span class="U2">check_data</span> <span class="U2">_exisit(da</span> <span class="U2">ta_check)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">583</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">584</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;params&nbsp;=</span> <span class="U2">&nbsp;["0",&nbsp;dfn</span> <span class="U2">,&nbsp;data]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">585</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@vista_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">rpc_write_</span> <span class="U2">back(rpc_n</span> <span class="U2">ame,&nbsp;param</span> <span class="U2">s)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">586</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">587</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">588</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;ad</span> <span class="U2">d&nbsp;(?:new|s</span> <span class="U2">ame)&nbsp;Immun</span> <span class="U2">ization&nbsp;re</span> <span class="U2">cord&nbsp;using</span> <span class="U2">&nbsp;Encounter</span> <span class="U2">&nbsp;Form&nbsp;for&nbsp;</span> <span class="U2">patient&nbsp;wi</span> <span class="U2">th&nbsp;DFN&nbsp;"(.</span> <span class="U2">*?)"&nbsp;enter</span> <span class="U2">$/)&nbsp;do&nbsp;|df</span> <span class="U2">n,&nbsp;table|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">589</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;@respo</span> <span class="U2">nse&nbsp;=&nbsp;@jds</span> <span class="U2">_response</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">590</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expected</span> <span class="U2">_array&nbsp;=&nbsp;%</span> <span class="U2">W[contra&nbsp;s</span> <span class="U2">eries&nbsp;reac</span> <span class="U2">tion&nbsp;contr</span> <span class="U2">aindicated</span> <span class="U2">&nbsp;comment]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">591</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">592</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le_return&nbsp;</span> <span class="U2">=&nbsp;convert_</span> <span class="U2">table_to_h</span> <span class="U2">ash(table,</span> <span class="U2">&nbsp;expected_</span> <span class="U2">array)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">593</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le&nbsp;=&nbsp;hash_</span> <span class="U2">table_retu</span> <span class="U2">rn[0]&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">594</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le_dec&nbsp;=&nbsp;h</span> <span class="U2">ash_table_</span> <span class="U2">return[1]&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">595</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">596</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rpc_name</span> <span class="U2">&nbsp;=&nbsp;"HMP&nbsp;WR</span> <span class="U2">ITEBACK&nbsp;EN</span> <span class="U2">COUNTERS"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">597</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le["commen</span> <span class="U2">t"]&nbsp;=&nbsp;hash</span> <span class="U2">_table["co</span> <span class="U2">mment"]&nbsp;+&nbsp;</span> <span class="U2">"&nbsp;at&nbsp;"&nbsp;+&nbsp;T</span> <span class="U2">ime.new.to</span> <span class="U2">_s</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">598</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">599</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;sub_data</span> <span class="U2">_a&nbsp;=&nbsp;dfn&nbsp;+</span> <span class="U2">&nbsp;"^0^229^3</span> <span class="U2">150925.171</span> <span class="U2">135^A^991^</span> <span class="U2">IMM^"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">600</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;sub_data</span> <span class="U2">_b&nbsp;=&nbsp;hash_</span> <span class="U2">table["con</span> <span class="U2">tra"]&nbsp;+&nbsp;"^</span> <span class="U2">"&nbsp;+&nbsp;hash_t</span> <span class="U2">able["seri</span> <span class="U2">es"]&nbsp;+&nbsp;"^1</span> <span class="U2">^"&nbsp;+&nbsp;hash_</span> <span class="U2">table["com</span> <span class="U2">ment"]&nbsp;+&nbsp;"</span> <span class="U2">^"&nbsp;+&nbsp;hash_</span> <span class="U2">table["rea</span> <span class="U2">ction"]&nbsp;+&nbsp;</span> <span class="U2">"^"&nbsp;+&nbsp;hash</span> <span class="U2">_table["co</span> <span class="U2">ntraindica</span> <span class="U2">ted"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">601</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;data&nbsp;=</span> <span class="U2">&nbsp;sub_data_</span> <span class="U2">a&nbsp;+&nbsp;sub_da</span> <span class="U2">ta_b</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">602</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">603</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data_che</span> <span class="U2">ck&nbsp;=&nbsp;[["cp</span> <span class="U2">tName",&nbsp;ha</span> <span class="U2">sh_table_d</span> <span class="U2">ec["contra</span> <span class="U2">"]],&nbsp;["adm</span> <span class="U2">inisteredD</span> <span class="U2">ateTime",&nbsp;</span> <span class="U2">"201509251</span> <span class="U2">71135"],&nbsp;[</span> <span class="U2">"uid",&nbsp;"CO</span> <span class="U2">NTAINS&nbsp;"&nbsp;+</span> <span class="U2">&nbsp;@site_nam</span> <span class="U2">e]]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">604</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@recorde</span> <span class="U2">_exisit&nbsp;=&nbsp;</span> <span class="U2">check_data</span> <span class="U2">_exisit(da</span> <span class="U2">ta_check)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">605</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">606</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;params&nbsp;=</span> <span class="U2">&nbsp;["0",&nbsp;dfn</span> <span class="U2">,&nbsp;data]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">607</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@vista_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">rpc_write_</span> <span class="U2">back(rpc_n</span> <span class="U2">ame,&nbsp;param</span> <span class="U2">s)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">608</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">609</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">610</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;ad</span> <span class="U2">d&nbsp;(?:new|s</span> <span class="U2">ame)&nbsp;CPT&nbsp;r</span> <span class="U2">ecord&nbsp;usin</span> <span class="U2">g&nbsp;Encounte</span> <span class="U2">r&nbsp;Form&nbsp;for</span> <span class="U2">&nbsp;patient&nbsp;w</span> <span class="U2">ith&nbsp;DFN&nbsp;"(</span> <span class="U2">.*?)"&nbsp;ente</span> <span class="U2">r$/)&nbsp;do&nbsp;|d</span> <span class="U2">fn,&nbsp;table|</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">611</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;@respo</span> <span class="U2">nse&nbsp;=&nbsp;@jds</span> <span class="U2">_response</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">612</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expected</span> <span class="U2">_array&nbsp;=&nbsp;%</span> <span class="U2">W[procedur</span> <span class="U2">e&nbsp;modifier</span> <span class="U2">s&nbsp;provider</span> <span class="U2">&nbsp;quantity&nbsp;</span> <span class="U2">comment&nbsp;en</span> <span class="U2">tered&nbsp;proc</span> <span class="U2">edure_code</span> <span class="U2">]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">613</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">614</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le_return&nbsp;</span> <span class="U2">=&nbsp;convert_</span> <span class="U2">table_to_h</span> <span class="U2">ash(table,</span> <span class="U2">&nbsp;expected_</span> <span class="U2">array)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">615</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;hash_t</span> <span class="U2">able&nbsp;=&nbsp;has</span> <span class="U2">h_table_re</span> <span class="U2">turn[1]&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">616</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;hash_t</span> <span class="U2">able_dec&nbsp;=</span> <span class="U2">&nbsp;hash_tabl</span> <span class="U2">e_return[0</span> <span class="U2">]&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">617</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">618</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;data&nbsp;=</span> <span class="U2">&nbsp;dfn&nbsp;+&nbsp;"^0</span> <span class="U2">^32^307101</span> <span class="U2">5.1507^X^9</span> <span class="U2">83^CPT^"&nbsp;+</span> <span class="U2">&nbsp;"82000^^2</span> <span class="U2">^USER,PANO</span> <span class="U2">RAMA"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">619</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;CPT^CP</span> <span class="U2">T&nbsp;code^Mod</span> <span class="U2">ifier1&nbsp;cod</span> <span class="U2">e;Modifier</span> <span class="U2">2&nbsp;code;...</span> <span class="U2">^Quantity^</span> <span class="U2">Provider&nbsp;n</span> <span class="U2">ame^Commen</span> <span class="U2">t&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">620</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rpc_name</span> <span class="U2">&nbsp;=&nbsp;"HMP&nbsp;WR</span> <span class="U2">ITEBACK&nbsp;EN</span> <span class="U2">COUNTERS"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">621</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le["commen</span> <span class="U2">t"]&nbsp;=&nbsp;hash</span> <span class="U2">_table["co</span> <span class="U2">mment"]&nbsp;+&nbsp;</span> <span class="U2">"&nbsp;at&nbsp;"&nbsp;+&nbsp;T</span> <span class="U2">ime.new.to</span> <span class="U2">_s</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">622</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">623</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;entere</span> <span class="U2">d&nbsp;=&nbsp;hash_t</span> <span class="U2">able["ente</span> <span class="U2">red"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">624</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;entere</span> <span class="U2">d_time&nbsp;=&nbsp;e</span> <span class="U2">ntered.gsu</span> <span class="U2">b(".",&nbsp;"")</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">625</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;len&nbsp;=&nbsp;en</span> <span class="U2">tered.leng</span> <span class="U2">th</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">626</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;last_u</span> <span class="U2">pdate_time</span> <span class="U2">&nbsp;=&nbsp;"3"&nbsp;+&nbsp;e</span> <span class="U2">ntered[2..</span> <span class="U2">len]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">627</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">628</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">629</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;sub_data</span> <span class="U2">_a&nbsp;=&nbsp;dfn&nbsp;+</span> <span class="U2">&nbsp;"^0^32^"&nbsp;</span> <span class="U2">+&nbsp;last_upd</span> <span class="U2">ate_time&nbsp;+</span> <span class="U2">&nbsp;"^X^983^C</span> <span class="U2">PT^"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">630</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;sub_data</span> <span class="U2">_b&nbsp;=&nbsp;hash_</span> <span class="U2">table["pro</span> <span class="U2">cedure_cod</span> <span class="U2">e"]&nbsp;+&nbsp;"^"&nbsp;</span> <span class="U2">+&nbsp;hash_tab</span> <span class="U2">le["modifi</span> <span class="U2">ers"]&nbsp;+&nbsp;"^</span> <span class="U2">"&nbsp;+&nbsp;hash_t</span> <span class="U2">able["quan</span> <span class="U2">tity"]&nbsp;+&nbsp;"</span> <span class="U2">^"&nbsp;+&nbsp;hash_</span> <span class="U2">table["pro</span> <span class="U2">vider"]&nbsp;+&nbsp;</span> <span class="U2">"^"&nbsp;+&nbsp;hash</span> <span class="U2">_table["co</span> <span class="U2">mment"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">631</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;data&nbsp;=</span> <span class="U2">&nbsp;sub_data_</span> <span class="U2">a&nbsp;+&nbsp;sub_da</span> <span class="U2">ta_b</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">632</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;data&nbsp;=</span> <span class="U2">&nbsp;dfn&nbsp;+&nbsp;"^0</span> <span class="U2">^32^307101</span> <span class="U2">5.1507^X^9</span> <span class="U2">83^CPT^"&nbsp;+</span> <span class="U2">&nbsp;"82000^^2</span> <span class="U2">^USER,PANO</span> <span class="U2">RAMA"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">633</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">634</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data_che</span> <span class="U2">ck&nbsp;=&nbsp;[["na</span> <span class="U2">me",&nbsp;hash_</span> <span class="U2">table["pro</span> <span class="U2">cedure"]],</span> <span class="U2">&nbsp;["entered</span> <span class="U2">",&nbsp;entered</span> <span class="U2">_time],&nbsp;["</span> <span class="U2">uid",&nbsp;"CON</span> <span class="U2">TAINS&nbsp;"&nbsp;+&nbsp;</span> <span class="U2">@site_name</span> <span class="U2">]]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">635</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@recorde</span> <span class="U2">_exisit&nbsp;=&nbsp;</span> <span class="U2">check_data</span> <span class="U2">_exisit(da</span> <span class="U2">ta_check)&nbsp;</span> <span class="U2">&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">636</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;p&nbsp;"Doe</span> <span class="U2">s&nbsp;the&nbsp;reco</span> <span class="U2">rd&nbsp;exist?&nbsp;</span> <span class="U2">&nbsp;#{@record</span> <span class="U2">e_exisit}"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">637</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">638</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;params&nbsp;=</span> <span class="U2">&nbsp;["0",&nbsp;dfn</span> <span class="U2">,&nbsp;data]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">639</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@vista_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">rpc_write_</span> <span class="U2">back(rpc_n</span> <span class="U2">ame,&nbsp;param</span> <span class="U2">s)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">640</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">641</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">642</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;cr</span> <span class="U2">eate&nbsp;new&nbsp;N</span> <span class="U2">ote&nbsp;Stub&nbsp;r</span> <span class="U2">ecord&nbsp;for&nbsp;</span> <span class="U2">patient&nbsp;wi</span> <span class="U2">th&nbsp;DFN&nbsp;"(.</span> <span class="U2">*?)"&nbsp;enter</span> <span class="U2">$/)&nbsp;do&nbsp;|df</span> <span class="U2">n,&nbsp;table|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">643</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;sub_data</span> <span class="U2">&nbsp;=&nbsp;[]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">644</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expected</span> <span class="U2">_array&nbsp;=&nbsp;%</span> <span class="U2">W[document</span> <span class="U2">_type&nbsp;auth</span> <span class="U2">or_dictato</span> <span class="U2">r&nbsp;referenc</span> <span class="U2">e_date&nbsp;com</span> <span class="U2">ment]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">645</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table_to</span> <span class="U2">_hash&nbsp;=&nbsp;co</span> <span class="U2">nvert_tabl</span> <span class="U2">e_to_hash(</span> <span class="U2">table,&nbsp;exp</span> <span class="U2">ected_arra</span> <span class="U2">y)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">646</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le&nbsp;=&nbsp;table</span> <span class="U2">_to_hash[1</span> <span class="U2">]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">647</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le_dec&nbsp;=&nbsp;t</span> <span class="U2">able_to_ha</span> <span class="U2">sh[0]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">648</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;referenc</span> <span class="U2">e_date&nbsp;=&nbsp;h</span> <span class="U2">ash_table[</span> <span class="U2">"reference</span> <span class="U2">_date"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">649</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;referenc</span> <span class="U2">e_date&nbsp;=&nbsp;c</span> <span class="U2">hange_date</span> <span class="U2">(reference</span> <span class="U2">_date)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">650</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">651</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le["commen</span> <span class="U2">t"]&nbsp;=&nbsp;hash</span> <span class="U2">_table["co</span> <span class="U2">mment"]&nbsp;+&nbsp;</span> <span class="U2">"&nbsp;At:&nbsp;"&nbsp;+&nbsp;</span> <span class="U2">Time.new.t</span> <span class="U2">o_s</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">652</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">653</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;data&nbsp;=</span> <span class="U2">&nbsp;dfn&nbsp;+&nbsp;"^"</span> <span class="U2">&nbsp;+&nbsp;hash_ta</span> <span class="U2">ble["docum</span> <span class="U2">ent_type"]</span> <span class="U2">&nbsp;+&nbsp;"^^^^"&nbsp;</span> <span class="U2">+&nbsp;hash_tab</span> <span class="U2">le["author</span> <span class="U2">_dictator"</span> <span class="U2">]&nbsp;+&nbsp;"^"&nbsp;+&nbsp;</span> <span class="U2">reference_</span> <span class="U2">date&nbsp;+&nbsp;"^^</span> <span class="U2">"&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">654</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">655</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;sub_data</span> <span class="U2">[0]&nbsp;=&nbsp;["\"</span> <span class="U2">data\"",&nbsp;d</span> <span class="U2">ata]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">656</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;sub_data</span> <span class="U2">[1]&nbsp;=&nbsp;["\"</span> <span class="U2">text\",1",</span> <span class="U2">&nbsp;hash_tabl</span> <span class="U2">e["comment</span> <span class="U2">"]]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">657</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">658</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;data&nbsp;=</span> <span class="U2">&nbsp;[sub_data</span> <span class="U2">[0],&nbsp;sub_d</span> <span class="U2">ata[1]]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">659</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">660</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rpc_name</span> <span class="U2">&nbsp;=&nbsp;"HMP&nbsp;SA</span> <span class="U2">VE&nbsp;NOTE&nbsp;ST</span> <span class="U2">UB"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">661</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">662</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;params&nbsp;=</span> <span class="U2">&nbsp;[data]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">663</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@vista_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">rpc_write_</span> <span class="U2">back(rpc_n</span> <span class="U2">ame,&nbsp;param</span> <span class="U2">s)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">664</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">665</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">666</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;(?</span> <span class="U2">:save|upda</span> <span class="U2">te&nbsp;the&nbsp;abo</span> <span class="U2">ve)&nbsp;TIU&nbsp;No</span> <span class="U2">te&nbsp;record&nbsp;</span> <span class="U2">for&nbsp;patien</span> <span class="U2">t&nbsp;with&nbsp;DFN</span> <span class="U2">&nbsp;"(.*?)"&nbsp;e</span> <span class="U2">nter$/)&nbsp;do</span> <span class="U2">&nbsp;|dfn,&nbsp;tab</span> <span class="U2">le|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">667</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;sub_data</span> <span class="U2">&nbsp;=&nbsp;[]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">668</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expected</span> <span class="U2">_array&nbsp;=&nbsp;%</span> <span class="U2">W[ien&nbsp;docu</span> <span class="U2">ment_type&nbsp;</span> <span class="U2">visit_date</span> <span class="U2">&nbsp;visit_ien</span> <span class="U2">&nbsp;author_di</span> <span class="U2">ctator&nbsp;ref</span> <span class="U2">erence_dat</span> <span class="U2">e&nbsp;subject&nbsp;</span> <span class="U2">service_ca</span> <span class="U2">tegory&nbsp;com</span> <span class="U2">ment]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">669</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table_to</span> <span class="U2">_hash&nbsp;=&nbsp;co</span> <span class="U2">nvert_tabl</span> <span class="U2">e_to_hash(</span> <span class="U2">table,&nbsp;exp</span> <span class="U2">ected_arra</span> <span class="U2">y)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">670</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le&nbsp;=&nbsp;table</span> <span class="U2">_to_hash[1</span> <span class="U2">]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">671</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le_dec&nbsp;=&nbsp;t</span> <span class="U2">able_to_ha</span> <span class="U2">sh[0]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">672</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;referenc</span> <span class="U2">e_date&nbsp;=&nbsp;h</span> <span class="U2">ash_table[</span> <span class="U2">"reference</span> <span class="U2">_date"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">673</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;referenc</span> <span class="U2">e_date&nbsp;=&nbsp;c</span> <span class="U2">hange_date</span> <span class="U2">(reference</span> <span class="U2">_date)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">674</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">675</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le["commen</span> <span class="U2">t"]&nbsp;=&nbsp;hash</span> <span class="U2">_table["co</span> <span class="U2">mment"]&nbsp;+&nbsp;</span> <span class="U2">"&nbsp;At:&nbsp;"&nbsp;+&nbsp;</span> <span class="U2">Time.new.t</span> <span class="U2">o_s</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">676</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">677</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data1&nbsp;=&nbsp;</span> <span class="U2">dfn&nbsp;+&nbsp;"^"&nbsp;</span> <span class="U2">+&nbsp;hash_tab</span> <span class="U2">le["docume</span> <span class="U2">nt_type"]&nbsp;</span> <span class="U2">+&nbsp;"^"&nbsp;+&nbsp;ha</span> <span class="U2">sh_table["</span> <span class="U2">visit_date</span> <span class="U2">"]&nbsp;+&nbsp;"^67^</span> <span class="U2">"&nbsp;+&nbsp;hash_t</span> <span class="U2">able["visi</span> <span class="U2">t_ien"]&nbsp;+&nbsp;</span> <span class="U2">"^"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">678</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;data2&nbsp;=&nbsp;</span> <span class="U2">hash_table</span> <span class="U2">["author_d</span> <span class="U2">ictator"]&nbsp;</span> <span class="U2">+&nbsp;"^"&nbsp;+&nbsp;re</span> <span class="U2">ference_da</span> <span class="U2">te&nbsp;+&nbsp;"^"&nbsp;+</span> <span class="U2">&nbsp;hash_tabl</span> <span class="U2">e["subject</span> <span class="U2">"]&nbsp;+&nbsp;"^67;</span> <span class="U2">"&nbsp;+&nbsp;refere</span> <span class="U2">nce_date&nbsp;+</span> <span class="U2">&nbsp;";"&nbsp;+&nbsp;has</span> <span class="U2">h_table["s</span> <span class="U2">ervice_cat</span> <span class="U2">egory"]&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">679</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;data12</span> <span class="U2">&nbsp;=&nbsp;data1&nbsp;+</span> <span class="U2">&nbsp;data2</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">680</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;sub_data</span> <span class="U2">[0]&nbsp;=&nbsp;["\"</span> <span class="U2">data\"",&nbsp;d</span> <span class="U2">ata12]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">681</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;sub_data</span> <span class="U2">[1]&nbsp;=&nbsp;["\"</span> <span class="U2">text\",1",</span> <span class="U2">&nbsp;hash_tabl</span> <span class="U2">e["comment</span> <span class="U2">"]]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">682</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">683</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;data&nbsp;=</span> <span class="U2">&nbsp;[sub_data</span> <span class="U2">[0],&nbsp;sub_d</span> <span class="U2">ata[1]]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">684</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">685</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rpc_name</span> <span class="U2">&nbsp;=&nbsp;"HMP&nbsp;WR</span> <span class="U2">ITEBACK&nbsp;TI</span> <span class="U2">U&nbsp;NOTE&nbsp;SAV</span> <span class="U2">E"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">686</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">687</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;ien&nbsp;=&nbsp;</span> <span class="U2">hash_table</span> <span class="U2">["ien"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">688</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;ien&nbsp;=&nbsp;</span> <span class="U2">@vista_loc</span> <span class="U2">al_id.to_s</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">689</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;params&nbsp;=</span> <span class="U2">&nbsp;[ien,&nbsp;dat</span> <span class="U2">a]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">690</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@vista_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">rpc_write_</span> <span class="U2">back(rpc_n</span> <span class="U2">ame,&nbsp;param</span> <span class="U2">s)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">691</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">692</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">693</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;si</span> <span class="U2">gn&nbsp;TIU&nbsp;Not</span> <span class="U2">e&nbsp;record&nbsp;f</span> <span class="U2">or&nbsp;patient</span> <span class="U2">&nbsp;with&nbsp;DFN&nbsp;</span> <span class="U2">"(.*?)"&nbsp;en</span> <span class="U2">ter$/)&nbsp;do&nbsp;</span> <span class="U2">|dfn,&nbsp;tabl</span> <span class="U2">e|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">694</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;ien&nbsp;=&nbsp;@v</span> <span class="U2">ista_local</span> <span class="U2">_id</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">695</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;rpc_na</span> <span class="U2">me&nbsp;=&nbsp;"HMP&nbsp;</span> <span class="U2">WRITEBACK&nbsp;</span> <span class="U2">SIGN&nbsp;TIU&nbsp;N</span> <span class="U2">OTE"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="C2 ln-no" style="text-align: right;">696</td>  
     <td class="nbgC2"><span class="I2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">access_cod</span> <span class="U2">e&nbsp;=&nbsp;"</span> <span class="C2">USER&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="C2 ln-no" style="text-align: right;">697</td>  
     <td class="nbgC2"><span class="I2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">verify_cod</span> <span class="U2">e&nbsp;=&nbsp;"</span> <span class="C2">PW&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">698</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">699</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;ien&nbsp;=&nbsp;</span> <span class="U2">"11597"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="C2 ln-no" style="text-align: right;">700</td>  
     <td class="nbgC2"><span class="I2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">esig&nbsp;=&nbsp;"</span> <span class="C2">PW&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">701</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">702</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;vista_rp</span> <span class="U2">c&nbsp;=&nbsp;VistaR</span> <span class="U2">PC4r::Vist</span> <span class="U2">aRPC.new(e</span> <span class="U2">sig)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">703</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;esig&nbsp;=</span> <span class="U2">&nbsp;vista_rpc</span> <span class="U2">.encrypt(e</span> <span class="U2">sig)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">704</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">705</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;data_c</span> <span class="U2">heck&nbsp;=&nbsp;[["</span> <span class="U2">name",&nbsp;has</span> <span class="U2">h_table["p</span> <span class="U2">rocedure"]</span> <span class="U2">],&nbsp;["enter</span> <span class="U2">ed",&nbsp;enter</span> <span class="U2">ed_time],&nbsp;</span> <span class="U2">["uid",&nbsp;"C</span> <span class="U2">ONTAINS&nbsp;"&nbsp;</span> <span class="U2">+&nbsp;@site_na</span> <span class="U2">me]]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">706</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;@recor</span> <span class="U2">de_exisit&nbsp;</span> <span class="U2">=&nbsp;check_da</span> <span class="U2">ta_exisit(</span> <span class="U2">data_check</span> <span class="U2">)&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">707</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;ien</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">708</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;params&nbsp;=</span> <span class="U2">&nbsp;[ien,&nbsp;esi</span> <span class="U2">g]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">709</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@vista_r</span> <span class="U2">esponse&nbsp;=&nbsp;</span> <span class="U2">rpc_write_</span> <span class="U2">back(rpc_n</span> <span class="U2">ame,&nbsp;param</span> <span class="U2">s)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">710</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">711</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">712</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^sav</span> <span class="U2">e&nbsp;the&nbsp;loca</span> <span class="U2">l&nbsp;id&nbsp;from&nbsp;</span> <span class="U2">VistA&nbsp;writ</span> <span class="U2">e\-back&nbsp;re</span> <span class="U2">sponse$/)&nbsp;</span> <span class="U2">do</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">713</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;"^&nbsp;loc</span> <span class="U2">alId"*&nbsp;10</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">714</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;@vista</span> <span class="U2">_local_id&nbsp;</span> <span class="U2">=&nbsp;@vista_o</span> <span class="U2">bj_msg["lo</span> <span class="U2">calId"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">715</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;"^&nbsp;loc</span> <span class="U2">alId"*&nbsp;10</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">716</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(@</span> <span class="U2">vista_loca</span> <span class="U2">l_id.to_i)</span> <span class="U2">.to&nbsp;be&nbsp;&gt;&nbsp;0</span> <span class="U2">,&nbsp;"The&nbsp;loc</span> <span class="U2">al&nbsp;id&nbsp;shou</span> <span class="U2">ld&nbsp;be&nbsp;grea</span> <span class="U2">ter&nbsp;than&nbsp;z</span> <span class="U2">ero.&nbsp;\n&nbsp;Vi</span> <span class="U2">sta&nbsp;respon</span> <span class="U2">se:&nbsp;#{@vis</span> <span class="U2">ta_obj_msg</span> <span class="U2">}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">717</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">718</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">719</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;--------</span> <span class="U2">----------</span> <span class="U2">----------</span> <span class="U2">--</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">720</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">721</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">def&nbsp;rpc_wr</span> <span class="U2">ite_back(r</span> <span class="U2">pc_name,&nbsp;p</span> <span class="U2">arams)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">722</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;@broke</span> <span class="U2">r.setConte</span> <span class="U2">xt('HMP&nbsp;UI</span> <span class="U2">&nbsp;CONTEXT')</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">723</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;response</span> <span class="U2">&nbsp;=&nbsp;""</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">724</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">725</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;vrpc&nbsp;=&nbsp;V</span> <span class="U2">istaRPC4r:</span> <span class="U2">:VistaRPC.</span> <span class="U2">new(rpc_na</span> <span class="U2">me,&nbsp;VistaR</span> <span class="U2">PC4r::RPCR</span> <span class="U2">esponse::S</span> <span class="U2">INGLE_VALU</span> <span class="U2">E)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">726</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">727</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;i&nbsp;=&nbsp;0</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">728</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;params</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">729</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;params.e</span> <span class="U2">ach&nbsp;do&nbsp;|pa</span> <span class="U2">ram|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">730</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;vrpc.p</span> <span class="U2">arams[i]&nbsp;=</span> <span class="U2">&nbsp;param</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">731</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;i&nbsp;+=&nbsp;1</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">732</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">733</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">734</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;p&nbsp;vrpc</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">735</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;"*&nbsp;res</span> <span class="U2">ponse&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">"*&nbsp;10</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">736</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;respon</span> <span class="U2">se&nbsp;=&nbsp;@brok</span> <span class="U2">er.execute</span> <span class="U2">(vrpc)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">737</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;"*&nbsp;res</span> <span class="U2">ponse&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">"*&nbsp;10</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">738</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">739</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;respon</span> <span class="U2">se&nbsp;if&nbsp;resp</span> <span class="U2">onse.value</span> <span class="U2">.empty?&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">740</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;fail&nbsp;"Er</span> <span class="U2">ror:&nbsp;PLeas</span> <span class="U2">e&nbsp;read&nbsp;the</span> <span class="U2">&nbsp;above&nbsp;err</span> <span class="U2">or&nbsp;message</span> <span class="U2">&nbsp;#{respons</span> <span class="U2">e}"&nbsp;if&nbsp;res</span> <span class="U2">ponse.valu</span> <span class="U2">e.empty?</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">741</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;r</span> <span class="U2">esponse</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">742</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">743</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">744</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">def&nbsp;find_t</span> <span class="U2">otal_items</span> <span class="U2">(jds_respo</span> <span class="U2">nse)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">745</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;begin</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">746</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;json_o</span> <span class="U2">bject&nbsp;=&nbsp;JS</span> <span class="U2">ON.parse(j</span> <span class="U2">ds_respons</span> <span class="U2">e.body)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">747</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rescue&nbsp;E</span> <span class="U2">xception&nbsp;=</span> <span class="U2">&gt;&nbsp;e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">748</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;err_me</span> <span class="U2">sf&nbsp;=&nbsp;"An&nbsp;e</span> <span class="U2">rror&nbsp;has&nbsp;o</span> <span class="U2">ccured&nbsp;at&nbsp;</span> <span class="U2">JSON::Pars</span> <span class="U2">er."&nbsp;+&nbsp;e.t</span> <span class="U2">o_s</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">749</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;raise&nbsp;</span> <span class="U2">err_mesf</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">750</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">751</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">752</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;j</span> <span class="U2">son_object</span> <span class="U2">["data"]["</span> <span class="U2">totalItems</span> <span class="U2">"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">753</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">754</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">755</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">def&nbsp;check_</span> <span class="U2">domain_nam</span> <span class="U2">e(domain)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">756</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;all_doma</span> <span class="U2">ins&nbsp;=&nbsp;{&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">757</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;"ALLER</span> <span class="U2">GY"&nbsp;=&gt;&nbsp;"al</span> <span class="U2">lergy",&nbsp;"L</span> <span class="U2">AB"&nbsp;=&gt;&nbsp;"la</span> <span class="U2">b",&nbsp;"VITAL</span> <span class="U2">"&nbsp;=&gt;&nbsp;"vita</span> <span class="U2">l",&nbsp;"LAB&nbsp;O</span> <span class="U2">RDER"&nbsp;=&gt;&nbsp;"</span> <span class="U2">order",&nbsp;"V</span> <span class="U2">LER&nbsp;DOCUME</span> <span class="U2">NT"&nbsp;=&gt;&nbsp;"vl</span> <span class="U2">erdocument</span> <span class="U2">",&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">758</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;"MEDS"</span> <span class="U2">&nbsp;=&gt;&nbsp;"med",</span> <span class="U2">&nbsp;"CONSULT"</span> <span class="U2">&nbsp;=&gt;&nbsp;"consu</span> <span class="U2">lt",&nbsp;"PROB</span> <span class="U2">LEM&nbsp;LIST"&nbsp;</span> <span class="U2">=&gt;&nbsp;"proble</span> <span class="U2">m",&nbsp;"PROCE</span> <span class="U2">DURE"&nbsp;=&gt;&nbsp;"</span> <span class="U2">procedure"</span> <span class="U2">,&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">759</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;"PURPO</span> <span class="U2">SE&nbsp;OF&nbsp;VISI</span> <span class="U2">T"&nbsp;=&gt;&nbsp;"pov</span> <span class="U2">",&nbsp;"DOCUME</span> <span class="U2">NT"&nbsp;=&gt;&nbsp;"do</span> <span class="U2">cument",&nbsp;"</span> <span class="U2">APPOINTMEN</span> <span class="U2">T"&nbsp;=&gt;&nbsp;"app</span> <span class="U2">ointment",</span> <span class="U2">&nbsp;"PATIENT&nbsp;</span> <span class="U2">DEMOGRAPHI</span> <span class="U2">CS"&nbsp;=&gt;&nbsp;"pa</span> <span class="U2">tient",</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">760</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;"EDUCA</span> <span class="U2">TION"&nbsp;=&gt;&nbsp;"</span> <span class="U2">education"</span> <span class="U2">,&nbsp;"VISIT"&nbsp;</span> <span class="U2">=&gt;&nbsp;"visit"</span> <span class="U2">,&nbsp;"FACTOR"</span> <span class="U2">&nbsp;=&gt;&nbsp;"facto</span> <span class="U2">r",&nbsp;"CPT"&nbsp;</span> <span class="U2">=&gt;&nbsp;"cpt",&nbsp;</span> <span class="U2">"SURGERY"&nbsp;</span> <span class="U2">=&gt;&nbsp;"surger</span> <span class="U2">y",</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">761</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;"SKIN"</span> <span class="U2">&nbsp;=&gt;&nbsp;"skin"</span> <span class="U2">,&nbsp;"MENTAL&nbsp;</span> <span class="U2">HEALTH"&nbsp;=&gt;</span> <span class="U2">&nbsp;"mh",&nbsp;"EX</span> <span class="U2">AM"&nbsp;=&gt;&nbsp;"ex</span> <span class="U2">am",&nbsp;"IMMU</span> <span class="U2">NIZATION"&nbsp;</span> <span class="U2">=&gt;"immuniz</span> <span class="U2">ation",&nbsp;"I</span> <span class="U2">MAGE"&nbsp;=&gt;&nbsp;"</span> <span class="U2">image"&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">762</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">763</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;domain_n</span> <span class="U2">ame&nbsp;=&nbsp;all_</span> <span class="U2">domains[do</span> <span class="U2">main.upcas</span> <span class="U2">e]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">764</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;fail&nbsp;"Pl</span> <span class="U2">ease&nbsp;check</span> <span class="U2">&nbsp;your&nbsp;step</span> <span class="U2">&nbsp;ruby&nbsp;file</span> <span class="U2">.&nbsp;\n&nbsp;This&nbsp;</span> <span class="U2">domain:&nbsp;#{</span> <span class="U2">domain}&nbsp;do</span> <span class="U2">es&nbsp;not&nbsp;spe</span> <span class="U2">cify&nbsp;in&nbsp;ou</span> <span class="U2">r&nbsp;test.&nbsp;\n</span> <span class="U2">&nbsp;#{all_dom</span> <span class="U2">ains.keys}</span> <span class="U2">"&nbsp;if&nbsp;domai</span> <span class="U2">n_name.nil</span> <span class="U2">?&nbsp;||&nbsp;domai</span> <span class="U2">n_name.emp</span> <span class="U2">ty?</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">765</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;d</span> <span class="U2">omain.down</span> <span class="U2">case</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">766</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">767</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">768</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">def&nbsp;find_r</span> <span class="U2">emoved_val</span> <span class="U2">ue_for_uid</span> <span class="U2">(response,</span> <span class="U2">&nbsp;local_id,</span> <span class="U2">&nbsp;site_name</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">769</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_obj</span> <span class="U2">ect&nbsp;=&nbsp;JSON</span> <span class="U2">.parse(res</span> <span class="U2">ponse.body</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">770</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;updated&nbsp;</span> <span class="U2">=&nbsp;json_obj</span> <span class="U2">ect["data"</span> <span class="U2">]["updated</span> <span class="U2">"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">771</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;result_a</span> <span class="U2">rray&nbsp;=&nbsp;jso</span> <span class="U2">n_object["</span> <span class="U2">data"]["it</span> <span class="U2">ems"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">772</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;result</span> <span class="U2">_array.siz</span> <span class="U2">e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">773</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;result_a</span> <span class="U2">rray.each&nbsp;</span> <span class="U2">do&nbsp;|object</span> <span class="U2">|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">774</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">775</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(ob</span> <span class="U2">ject["uid"</span> <span class="U2">].include?</span> <span class="U2">&nbsp;local_id)</span> <span class="U2">&nbsp;&amp;&amp;&nbsp;(objec</span> <span class="U2">t["uid"].i</span> <span class="U2">nclude?&nbsp;si</span> <span class="U2">te_name)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">776</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"T</span> <span class="U2">his&nbsp;is&nbsp;the</span> <span class="U2">&nbsp;last&nbsp;acce</span> <span class="U2">ss&nbsp;time&nbsp;#{</span> <span class="U2">updated}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">777</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"T</span> <span class="U2">his&nbsp;is&nbsp;the</span> <span class="U2">&nbsp;uid&nbsp;of&nbsp;th</span> <span class="U2">e&nbsp;patieont</span> <span class="U2">&nbsp;that&nbsp;EIE:</span> <span class="U2">&nbsp;#{object[</span> <span class="U2">"uid"]}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">778</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"T</span> <span class="U2">his&nbsp;is&nbsp;the</span> <span class="U2">&nbsp;value&nbsp;of&nbsp;</span> <span class="U2">removed&nbsp;ob</span> <span class="U2">ject&nbsp;for&nbsp;t</span> <span class="U2">he&nbsp;patieon</span> <span class="U2">t&nbsp;that&nbsp;EIE</span> <span class="U2">:&nbsp;#{object</span> <span class="U2">["removed"</span> <span class="U2">]}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">779</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"T</span> <span class="U2">his&nbsp;is&nbsp;the</span> <span class="U2">&nbsp;stanp&nbsp;tim</span> <span class="U2">e&nbsp;of&nbsp;the&nbsp;p</span> <span class="U2">atieont&nbsp;th</span> <span class="U2">at&nbsp;EIE:&nbsp;#{</span> <span class="U2">object["st</span> <span class="U2">ampTime"]}</span> <span class="U2">"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">780</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remo</span> <span class="U2">ved_value&nbsp;</span> <span class="U2">=&nbsp;object["</span> <span class="U2">removed"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">781</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remo</span> <span class="U2">ved_value&nbsp;</span> <span class="U2">=&nbsp;removed_</span> <span class="U2">value.to_s</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">782</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@sta</span> <span class="U2">mp_time&nbsp;=&nbsp;</span> <span class="U2">object["st</span> <span class="U2">ampTime"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">783</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;removed</span> <span class="U2">_value</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">784</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">785</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">786</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">787</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;"</span> <span class="U2">false"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">788</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">789</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">790</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">def&nbsp;pick_l</span> <span class="U2">ocal_id_th</span> <span class="U2">at_has_rem</span> <span class="U2">oved_value</span> <span class="U2">_false(res</span> <span class="U2">ponse,&nbsp;sit</span> <span class="U2">e_name)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">791</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json_obj</span> <span class="U2">ect&nbsp;=&nbsp;JSON</span> <span class="U2">.parse(res</span> <span class="U2">ponse.body</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">792</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;updated&nbsp;</span> <span class="U2">=&nbsp;json_obj</span> <span class="U2">ect["data"</span> <span class="U2">]["updated</span> <span class="U2">"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">793</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;result_a</span> <span class="U2">rray&nbsp;=&nbsp;jso</span> <span class="U2">n_object["</span> <span class="U2">data"]["it</span> <span class="U2">ems"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">794</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;result_a</span> <span class="U2">rray.each&nbsp;</span> <span class="U2">do&nbsp;|object</span> <span class="U2">|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">795</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;remo</span> <span class="U2">ved_value&nbsp;</span> <span class="U2">=&nbsp;object["</span> <span class="U2">removed"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">796</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(re</span> <span class="U2">moved_valu</span> <span class="U2">e.nil?)&nbsp;&amp;&amp;</span> <span class="U2">&nbsp;(object["</span> <span class="U2">uid"].incl</span> <span class="U2">ude?&nbsp;site_</span> <span class="U2">name)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">797</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;object[</span> <span class="U2">"localId"]</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">798</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">799</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">800</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">801</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;fail&nbsp;"Pl</span> <span class="U2">ease&nbsp;selec</span> <span class="U2">t&nbsp;another&nbsp;</span> <span class="U2">patient.&nbsp;T</span> <span class="U2">his&nbsp;patien</span> <span class="U2">t&nbsp;does&nbsp;not</span> <span class="U2">&nbsp;have&nbsp;any&nbsp;</span> <span class="U2">recodr&nbsp;ro&nbsp;</span> <span class="U2">mark&nbsp;them&nbsp;</span> <span class="U2">as&nbsp;EIE"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">802</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">803</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">804</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">def&nbsp;check_</span> <span class="U2">data_exisi</span> <span class="U2">t(table)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">805</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;@tota</span> <span class="U2">l_items&nbsp;&gt;&nbsp;</span> <span class="U2">0</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">806</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;value_</span> <span class="U2">field&nbsp;=&nbsp;Ve</span> <span class="U2">rifyJsonRu</span> <span class="U2">ntimeValue</span> <span class="U2">.new</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">807</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;runtim</span> <span class="U2">e_json_obj</span> <span class="U2">ect&nbsp;=&nbsp;find</span> <span class="U2">_object_fr</span> <span class="U2">om_respons</span> <span class="U2">e(@jds_res</span> <span class="U2">ponse)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">808</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;runtim</span> <span class="U2">e_json_obj</span> <span class="U2">ect&nbsp;=&nbsp;runt</span> <span class="U2">ime_json_o</span> <span class="U2">bject["dat</span> <span class="U2">a"]["items</span> <span class="U2">"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">809</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">810</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;data_e</span> <span class="U2">xist&nbsp;=&nbsp;val</span> <span class="U2">ue_field.v</span> <span class="U2">erify_json</span> <span class="U2">_runtime_v</span> <span class="U2">laue_for_a</span> <span class="U2">rray(runti</span> <span class="U2">me_json_ob</span> <span class="U2">ject,&nbsp;tabl</span> <span class="U2">e,&nbsp;false)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">811</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"The</span> <span class="U2">&nbsp;data&nbsp;foun</span> <span class="U2">d&nbsp;in&nbsp;the&nbsp;r</span> <span class="U2">ecord:&nbsp;#{d</span> <span class="U2">ata_exist}</span> <span class="U2">"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">812</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="U2">&nbsp;data_exis</span> <span class="U2">t</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">813</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">814</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="U2">&nbsp;false</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">815</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">816</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">817</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">818</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">def&nbsp;check_</span> <span class="U2">data_exisi</span> <span class="U2">t_for_alle</span> <span class="U2">rgy(data)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">819</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;f</span> <span class="U2">alse&nbsp;unles</span> <span class="U2">s&nbsp;@total_i</span> <span class="U2">tems&nbsp;&gt;&nbsp;0</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">820</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">821</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;value_fi</span> <span class="U2">eld&nbsp;=&nbsp;Veri</span> <span class="U2">fyJsonRunt</span> <span class="U2">imeValue.n</span> <span class="U2">ew</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">822</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;runtime_</span> <span class="U2">json_objec</span> <span class="U2">t&nbsp;=&nbsp;find_o</span> <span class="U2">bject_from</span> <span class="U2">_response(</span> <span class="U2">@jds_respo</span> <span class="U2">nse)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">823</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;runtime_</span> <span class="U2">json_objec</span> <span class="U2">t&nbsp;=&nbsp;runtim</span> <span class="U2">e_json_obj</span> <span class="U2">ect["data"</span> <span class="U2">]["items"]</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">824</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">825</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;runtime_</span> <span class="U2">json_objec</span> <span class="U2">t.each&nbsp;do&nbsp;</span> <span class="U2">|object|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">826</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">827</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;obj</span> <span class="U2">ect["remov</span> <span class="U2">ed"]&nbsp;==&nbsp;ni</span> <span class="U2">l&nbsp;&amp;&amp;&nbsp;objec</span> <span class="U2">t["product</span> <span class="U2">s"][0]["na</span> <span class="U2">me"]&nbsp;==&nbsp;da</span> <span class="U2">ta</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">828</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"T</span> <span class="U2">he&nbsp;patient</span> <span class="U2">&nbsp;allready&nbsp;</span> <span class="U2">has&nbsp;#{data</span> <span class="U2">}&nbsp;on&nbsp;uid:&nbsp;</span> <span class="U2">#{object["</span> <span class="U2">uid"]}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">829</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data</span> <span class="U2">_exist&nbsp;=&nbsp;t</span> <span class="U2">rue</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">830</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;true</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">831</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">832</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">833</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">834</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;f</span> <span class="U2">alse</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">835</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">836</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">837</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">def&nbsp;find_o</span> <span class="U2">bject_from</span> <span class="U2">_response(</span> <span class="U2">response,&nbsp;</span> <span class="U2">for_value_</span> <span class="U2">or_body&nbsp;=&nbsp;</span> <span class="U2">"body")</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">838</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;return</span> <span class="U2">&nbsp;nil&nbsp;if&nbsp;@r</span> <span class="U2">ecorde_exi</span> <span class="U2">sit</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">839</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;for_v</span> <span class="U2">alue_or_bo</span> <span class="U2">dy&nbsp;==&nbsp;"bod</span> <span class="U2">y"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">840</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;respon</span> <span class="U2">se&nbsp;=&nbsp;respo</span> <span class="U2">nse.body</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">841</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">842</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;respon</span> <span class="U2">se&nbsp;=&nbsp;respo</span> <span class="U2">nse.value</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">843</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">844</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">845</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;begin</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">846</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;json_o</span> <span class="U2">bject&nbsp;=&nbsp;JS</span> <span class="U2">ON.parse(r</span> <span class="U2">esponse)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">847</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rescue&nbsp;E</span> <span class="U2">xception&nbsp;=</span> <span class="U2">&gt;&nbsp;e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">848</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;err_me</span> <span class="U2">sf&nbsp;=&nbsp;"PLea</span> <span class="U2">se&nbsp;check&nbsp;y</span> <span class="U2">our&nbsp;VistA&nbsp;</span> <span class="U2">response.&nbsp;</span> <span class="U2">An&nbsp;error&nbsp;h</span> <span class="U2">as&nbsp;occured</span> <span class="U2">&nbsp;at&nbsp;JSON::</span> <span class="U2">Parser."&nbsp;+</span> <span class="U2">&nbsp;e.to_s&nbsp;+&nbsp;</span> <span class="U2">"\n&nbsp;VistA&nbsp;</span> <span class="U2">response:&nbsp;</span> <span class="U2">"&nbsp;+&nbsp;respon</span> <span class="U2">se</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">849</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;raise&nbsp;</span> <span class="U2">err_mesf</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">850</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">851</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;j</span> <span class="U2">son_object</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">852</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">853</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">854</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">def&nbsp;conver</span> <span class="U2">t_table_to</span> <span class="U2">_hash(tabl</span> <span class="U2">e,&nbsp;expecte</span> <span class="U2">d_array)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">855</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le&nbsp;=&nbsp;{}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">856</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;hash_tab</span> <span class="U2">le_dec&nbsp;=&nbsp;{</span> <span class="U2">}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">857</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table.ro</span> <span class="U2">ws.each&nbsp;do</span> <span class="U2">&nbsp;|field,&nbsp;d</span> <span class="U2">ec,&nbsp;value|</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">858</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;hash_t</span> <span class="U2">able[field</span> <span class="U2">]&nbsp;=&nbsp;&nbsp;value</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">859</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;hash_t</span> <span class="U2">able_dec[f</span> <span class="U2">ield]&nbsp;=&nbsp;&nbsp;d</span> <span class="U2">ec</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">860</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">861</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">862</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table_ke</span> <span class="U2">ys&nbsp;=&nbsp;hash_</span> <span class="U2">table.keys</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">863</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;table_ke</span> <span class="U2">ys&nbsp;=&nbsp;table</span> <span class="U2">_keys.map(</span> <span class="U2">&amp;:downcase</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">864</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">865</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(t</span> <span class="U2">able_keys)</span> <span class="U2">.to&nbsp;match_</span> <span class="U2">array(expe</span> <span class="U2">cted_array</span> <span class="U2">),&nbsp;"Please</span> <span class="U2">&nbsp;check&nbsp;you</span> <span class="U2">r&nbsp;code.&nbsp;\n</span> <span class="U2">&nbsp;expected&nbsp;</span> <span class="U2">array:&nbsp;#{e</span> <span class="U2">xpected_ar</span> <span class="U2">ray}&nbsp;\n&nbsp;go</span> <span class="U2">t:&nbsp;#{table</span> <span class="U2">_keys}&nbsp;"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">866</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;h</span> <span class="U2">ash_table,</span> <span class="U2">&nbsp;hash_tabl</span> <span class="U2">e_dec</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">867</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">868</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">869</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">def&nbsp;change</span> <span class="U2">_date(date</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">870</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;len&nbsp;=&nbsp;da</span> <span class="U2">te.length</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">871</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;date&nbsp;=&nbsp;"</span> <span class="U2">3"&nbsp;+&nbsp;date[</span> <span class="U2">2..len]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">872</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;d</span> <span class="U2">ate</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">873</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
   </tbody>
  </table> 
  <p class="copyright" style="margin-top: 25px; padding-top: 2px; border-top: solid #a0a0a0 1px; max-width: none;">Araxis Merge (but not the data content of this report) is Copyright Â© 1993-2016 Araxis Ltd (<a href="http://www.araxis.com/" title="Link to the Araxis corporate web site">www.araxis.com</a>). All rights reserved.</p>   
 </body>
</html>