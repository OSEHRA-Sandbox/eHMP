<!--?xml version="1.0"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:mg="http://www.araxis.com/2002/Merge/Reporting" xmlns="http://www.w3.org/1999/xhtml">
 <head> 
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> 
  <!--The layout and design of this report is Copyright Â© 2003-2016 Araxis Ltd. All rights reserved.--> 
  <!--The copyright of the data content of this report belongs to the relevant copyright holders.--> 
  <title>1550. EPMO Open Source Coordination Office Redaction File Detail Report</title> 
  <style type="text/css">
body { background: #fff;  color: #000; margin: 0px 14px 14px 14px; }
h1, h2, h3, h4, h5 {
  padding: 0em;
  margin: 1.5em 0em .25em 0em;
  text-align: left;
  font-weight: normal;
  font-family: Arial, Helvetica, sans-serif;
  font-size: 70%;
  max-width: 55em;
}
body, h4, h5, p, ol, ul, li, td, th { font-family: Verdana, Arial, Helvetica, sans-serif; text-align: left; }

h4, h5, p, ol, ul, li { font-size: 70%; }
input {
  font-family: Arial, Helvetica, sans-serif;
  font-size: 120%;
}

h1 { margin: 14px 0em 1.2em 0em; font-size: 112%; line-height: 130%;}
h2 { font-size: 125%; line-height: 84%;}
h3 { margin-top: 1.4em; font-size: 81%; }
h4 { margin-top: 1em; font-size: 70%; }
h5 { margin-top: 1em; font-size: 100%; font-style: italic;}
h1 strong, h2 strong, h3 strong, h4 strong { font-weight: bold; }

p { margin: 6px 0em 6px 0em; max-width: 55em;}
p.code, code {}
p { font-size: 70%; line-height: 125%; }
table { font-size: 70%;}

p.copyright, .small { font-size: 60%; line-height: 120%; }
p.copyright { margin: 3px 0px 0px 0px; padding: 0px; text-align: left; }
acronym { font-variant: small-caps; }
div.pad { padding: 3px; }
span.lineEndings { color: red; font-size: 70%; }

table.mgRowGroup, table.mgRowGroupFolder { border: 1px solid #a0a0a0; margin: 10px 0px 10px 0px; width: 100%; table-layout: fixed; border-collapse: collapse; }
table.mgRowGroup td { vertical-align: top; padding: 0; }
table.mgRowGroupFolder td { vertical-align: top; padding: 1px 0 1px 0; }
div.IP { width: 2px; height: 1em; float: left; }

img.mgFldrIcon {float: left; text-align: left; margin: -1px 2px 0px 0px;  height: 16px; width: 16px; border: none; vertical-align: top; background-color: transparent;}
div.mgFldrIcon {float: left; width: auto;}
span.left {float: left;width: auto;}
span.right {float: right;width: auto;}

table.bordered { border-collapse: collapse; border: 1px solid #a0a0a0; margin: 10px 0px 10px 0px;}
table.bordered th, table.bordered td { vertical-align: top; padding: 3px; border: 1px solid #a0a0a0;}
table.bordered th { background-color: #e5e5e5; }
table.bordered td.group { background-color: #f5f5f5; }
span.disabledNavigation { color: #a0a0a0; }
div.navigation { margin-top: 14px; font-size: 70%; }
div.comment { font-weight: normal; color: #000; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fcfed8; padding: 2px 5px 2px 5px; border: 1px solid #E3E5C3; margin: 1px 2px 3px 2px; -moz-border-radius: 7px; border-radius: 7px; }

                span.U1, span.U1 a {float: left; width: auto;color: #000000; background-color: #FFFFFF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.U1 a {text-decoration: underline;}
td.U1 {color: #000000; background-color: #FFFFFF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.R1, span.R1 a {float: left; width: auto;color: #800000; background-color: #F3E6D8; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.R1 a {text-decoration: underline;}
td.R1 {color: #800000; background-color: #F3E6D8; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.I1, span.I1 a {float: left; width: auto;color: #800000; background-color: #D1E8CF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.I1 a {text-decoration: underline;}
td.I1 {color: #800000; background-color: #D1E8CF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.C1, span.C1 a {float: left; width: auto;color: #800000; background-color: #DACDE6; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.C1 a {text-decoration: underline;}
td.C1 {color: #800000; background-color: #DACDE6; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
td.nbgC1 {color: #800000; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; background-color: #FFFFFF; }
span.U2, span.U2 a {float: left; width: auto;color: #000000; background-color: #FFFFFF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.U2 a {text-decoration: underline;}
td.U2 {color: #000000; background-color: #FFFFFF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.R2, span.R2 a {float: left; width: auto;color: #800000; background-color: #F3E6D8; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.R2 a {text-decoration: underline;}
td.R2 {color: #800000; background-color: #F3E6D8; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.I2, span.I2 a {float: left; width: auto;color: #800000; background-color: #D1E8CF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.I2 a {text-decoration: underline;}
td.I2 {color: #800000; background-color: #D1E8CF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.C2, span.C2 a {float: left; width: auto;color: #800000; background-color: #DACDE6; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.C2 a {text-decoration: underline;}
td.C2 {color: #800000; background-color: #DACDE6; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
td.nbgC2 {color: #800000; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; background-color: #FFFFFF; }

span.selected {background-color: #3d80df; color: #fff;}
span.selected a {background-color: #3d80df; color: #fff; text-decoration: underline;}
span.symbol {cursor: pointer;}
      </style> 
 </head> 
 <body> 
  <h1><strong>1550. EPMO Open Source Coordination Office Redaction File Detail Report</strong></h1> 
  <p>Produced by <strong>Araxis Merge</strong> on <strong>10/13/2017 11:30:19 AM Central Daylight Time</strong>. See <a href="http://www.araxis.com/" title="Link to the Araxis corporate web site">www.araxis.com</a> for information about Merge. This report uses XHTML and CSS2, and is best viewed with a modern standards-compliant browser. For optimum results when printing this report, use landscape orientation and enable printing of background images and colours in your browser.</p> 
  <h3><strong>1550.1&nbsp;Files compared</strong></h3> 
  <table class="bordered"> 
   <tbody>
    <tr> 
     <th>#</th> 
     <th>Location</th> 
     <th>File</th> 
     <th>Last Modified</th> 
    </tr> 
    <tr> 
     <td>1</td> 
     <td>ehmp.zip\ehmp\ehmp\product\tests\acceptance-tests\features-arch\old_ehmp_features_ruby\steps</td> 
     <td>sync_steps.rb</td> 
     <td>Tue Dec 15 14:05:18 2015 UTC</td> 
    </tr> 
    <tr> 
     <td>2</td> 
     <td>ehmp.zip\ehmp\ehmp\product\tests\acceptance-tests\features-arch\old_ehmp_features_ruby\steps</td> 
     <td>sync_steps.rb</td> 
     <td>Tue Oct 10 18:06:46 2017 UTC</td> 
    </tr> 
   </tbody>
  </table> 
  <h3><strong>1550.2&nbsp;Comparison summary</strong></h3> 
  <table class="bordered"> 
   <tbody>
    <tr> 
     <th rowspan="2" style="vertical-align: bottom;">Description</th> 
     <th colspan="2">Between<br>Files 1 and 2</th> 
    </tr> 
    <tr> 
     <th style="text-align: right;">Text Blocks</th> 
     <th style="text-align: right;">Lines</th> 
    </tr> 
    <tr> 
     <td>Unchanged</td> 
     <td style="text-align: right;">4</td> 
     <td style="text-align: right;">818</td> 
    </tr> 
    <tr> 
     <td>Changed</td> 
     <td style="text-align: right;">3</td> 
     <td style="text-align: right;">6</td> 
    </tr> 
    <tr> 
     <td>Inserted</td> 
     <td style="text-align: right;">0</td> 
     <td style="text-align: right;">0</td> 
    </tr> 
    <tr> 
     <td>Removed</td> 
     <td style="text-align: right;">0</td> 
     <td style="text-align: right;">0</td> 
    </tr> 
   </tbody>
  </table> 
  <h3><strong>1550.3&nbsp;Comparison options</strong></h3> 
  <table class="bordered" style="width: 55em;"> 
   <tbody>
    <tr> 
     <th>Whitespace</th> 
     <td></td> 
    </tr> 
    <tr> 
     <th>Character case</th> 
     <td>Differences in character case are significant</td> 
    </tr> 
    <tr> 
     <th>Line endings</th> 
     <td>Differences in line endings (<code>CR</code> and <code>LF</code> characters) are ignored</td> 
    </tr> 
    <tr> 
     <th>CR/LF characters</th> 
     <td>Not shown in the comparison detail</td> 
    </tr> 
   </tbody>
  </table> 
  <h3><strong>1550.4&nbsp;Active regular expressions</strong></h3> 
  <p>No regular expressions were active.</p> 
  <h3><strong>1550.5&nbsp;Comparison detail</strong></h3> 
  <table class="mgRowGroup"> 
   <colgroup>
    <col style="width: 5em;"> 
    <col style="width: 1em;"> 
    <col width="*"> 
    <col style="width: 1em;"> 
    <col style="width: 5em;"> 
    <col style="width: 1em;"> 
    <col width="*"> 
   </colgroup>
   <tbody>
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">require&nbsp;"T</span> <span class="U2">estSupport</span> <span class="U2">.rb"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">2</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">3</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Given(/^qu</span> <span class="U2">ery$/)&nbsp;do</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">4</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;cache&nbsp;=&nbsp;</span> <span class="U2">PatientCac</span> <span class="U2">he.new</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">5</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;cache.</span> <span class="U2">query_vpr_</span> <span class="U2">patients</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">6</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(@</span> <span class="U2">response.c</span> <span class="U2">ode).to&nbsp;eq</span> <span class="U2">(200),&nbsp;"re</span> <span class="U2">sponse&nbsp;cod</span> <span class="U2">e&nbsp;was&nbsp;#{@r</span> <span class="U2">esponse.co</span> <span class="U2">de}:&nbsp;respo</span> <span class="U2">nse&nbsp;body&nbsp;#</span> <span class="U2">{@response</span> <span class="U2">.body}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">7</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(c</span> <span class="U2">ache.patie</span> <span class="U2">nt_count).</span> <span class="U2">to&nbsp;eq(3)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">8</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(c</span> <span class="U2">ache.conta</span> <span class="U2">ins_patien</span> <span class="U2">t?&nbsp;"10102"</span> <span class="U2">).to&nbsp;be_tr</span> <span class="U2">ue</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">9</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(c</span> <span class="U2">ache.conta</span> <span class="U2">ins_patien</span> <span class="U2">t?&nbsp;"bad&nbsp;pi</span> <span class="U2">d").to&nbsp;be_</span> <span class="U2">false</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">10</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">11</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">12</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Given(/^a&nbsp;</span> <span class="U2">patient&nbsp;wi</span> <span class="U2">th&nbsp;pid&nbsp;"(.</span> <span class="U2">*?)"&nbsp;and&nbsp;i</span> <span class="U2">cn&nbsp;"(.*?)"</span> <span class="U2">&nbsp;has&nbsp;not&nbsp;b</span> <span class="U2">een&nbsp;synced</span> <span class="U2">$/)&nbsp;do&nbsp;|pi</span> <span class="U2">d,&nbsp;icn|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">13</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;base_url</span> <span class="U2">&nbsp;=&nbsp;Default</span> <span class="U2">Login.fhir</span> <span class="U2">_url</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">14</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;path&nbsp;=&nbsp;"</span> <span class="U2">#{base_url</span> <span class="U2">}/admin/sy</span> <span class="U2">nc/#{pid}"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">15</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">16</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;nil</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">17</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;begin</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">18</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@respo</span> <span class="U2">nse&nbsp;=&nbsp;HTTP</span> <span class="U2">artyWithBa</span> <span class="U2">sicAuth.de</span> <span class="U2">lete_with_</span> <span class="U2">authorizat</span> <span class="U2">ion(path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">19</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rescue&nbsp;T</span> <span class="U2">imeout::Er</span> <span class="U2">ror</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">20</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"Syn</span> <span class="U2">c&nbsp;timed&nbsp;ou</span> <span class="U2">t"&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">21</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">22</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">23</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;@resp</span> <span class="U2">onse.nil?</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">24</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;respon</span> <span class="U2">se_code&nbsp;=&nbsp;</span> <span class="U2">500</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">25</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;respon</span> <span class="U2">se_body&nbsp;=&nbsp;</span> <span class="U2">"Sync&nbsp;time</span> <span class="U2">d&nbsp;out"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">26</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">27</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;respon</span> <span class="U2">se_code&nbsp;=&nbsp;</span> <span class="U2">@response.</span> <span class="U2">code</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">28</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;respon</span> <span class="U2">se_body&nbsp;=&nbsp;</span> <span class="U2">@response.</span> <span class="U2">body</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">29</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">30</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">31</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;fail&nbsp;"Ex</span> <span class="U2">pected&nbsp;res</span> <span class="U2">ponse&nbsp;code</span> <span class="U2">&nbsp;200,&nbsp;rece</span> <span class="U2">ived&nbsp;#{res</span> <span class="U2">ponse_code</span> <span class="U2">}:&nbsp;respons</span> <span class="U2">e&nbsp;body&nbsp;#{r</span> <span class="U2">esponse_bo</span> <span class="U2">dy}"&nbsp;unles</span> <span class="U2">s&nbsp;response</span> <span class="U2">_code&nbsp;==&nbsp;2</span> <span class="U2">00</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">32</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">33</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">34</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Given(/^a&nbsp;</span> <span class="U2">patient&nbsp;wi</span> <span class="U2">th&nbsp;pid&nbsp;"(.</span> <span class="U2">*?)"&nbsp;has&nbsp;n</span> <span class="U2">ot&nbsp;been&nbsp;sy</span> <span class="U2">nced&nbsp;in&nbsp;FH</span> <span class="U2">IR&nbsp;format$</span> <span class="U2">/)&nbsp;do&nbsp;|pid</span> <span class="U2">|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">35</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;base_url</span> <span class="U2">&nbsp;=&nbsp;Default</span> <span class="U2">Login.fhir</span> <span class="U2">_url</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">36</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;path&nbsp;=</span> <span class="U2">&nbsp;"#{base_u</span> <span class="U2">rl}/admin/</span> <span class="U2">sync/#{pid</span> <span class="U2">}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">37</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;HTTPar</span> <span class="U2">tyWithBasi</span> <span class="U2">cAuth.dele</span> <span class="U2">te_with_au</span> <span class="U2">thorizatio</span> <span class="U2">n(path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">38</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(@</span> <span class="U2">response.c</span> <span class="U2">ode).to&nbsp;eq</span> <span class="U2">(200),&nbsp;"re</span> <span class="U2">sponse&nbsp;cod</span> <span class="U2">e&nbsp;was&nbsp;#{@r</span> <span class="U2">esponse.co</span> <span class="U2">de}:&nbsp;respo</span> <span class="U2">nse&nbsp;body&nbsp;#</span> <span class="U2">{@response</span> <span class="U2">.body}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">39</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">40</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;HTTPar</span> <span class="U2">tyWithBasi</span> <span class="U2">cAuth.get_</span> <span class="U2">with_autho</span> <span class="U2">rization(p</span> <span class="U2">ath)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">41</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(@</span> <span class="U2">response.c</span> <span class="U2">ode).to&nbsp;eq</span> <span class="U2">(404),&nbsp;"re</span> <span class="U2">sponse&nbsp;cod</span> <span class="U2">e&nbsp;was&nbsp;#{@r</span> <span class="U2">esponse.co</span> <span class="U2">de}:&nbsp;respo</span> <span class="U2">nse&nbsp;body&nbsp;#</span> <span class="U2">{@response</span> <span class="U2">.body}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">42</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">43</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">44</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Given(/^a&nbsp;</span> <span class="U2">patient&nbsp;wi</span> <span class="U2">th&nbsp;pid&nbsp;"(.</span> <span class="U2">*?)"&nbsp;has&nbsp;n</span> <span class="U2">ot&nbsp;been&nbsp;sy</span> <span class="U2">nced&nbsp;in&nbsp;FH</span> <span class="U2">IR&nbsp;format&nbsp;</span> <span class="U2">on&nbsp;"(.*?)"</span> <span class="U2">$/)&nbsp;do&nbsp;|pi</span> <span class="U2">d,&nbsp;ve|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">45</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;ve.up</span> <span class="U2">case&nbsp;==&nbsp;"V</span> <span class="U2">E2"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">46</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;base_u</span> <span class="U2">rl&nbsp;=&nbsp;Defau</span> <span class="U2">ltLogin.ve</span> <span class="U2">2_fhir_url</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">47</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">48</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;base_u</span> <span class="U2">rl&nbsp;=&nbsp;Defau</span> <span class="U2">ltLogin.fh</span> <span class="U2">ir_url</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">49</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">50</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">51</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;path&nbsp;=</span> <span class="U2">&nbsp;"#{base_u</span> <span class="U2">rl}/admin/</span> <span class="U2">sync/#{pid</span> <span class="U2">}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">52</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;HTTPar</span> <span class="U2">tyWithBasi</span> <span class="U2">cAuth.dele</span> <span class="U2">te_with_au</span> <span class="U2">thorizatio</span> <span class="U2">n(path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">53</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(@</span> <span class="U2">response.c</span> <span class="U2">ode).to&nbsp;eq</span> <span class="U2">(200),&nbsp;"re</span> <span class="U2">sponse&nbsp;cod</span> <span class="U2">e&nbsp;was&nbsp;#{@r</span> <span class="U2">esponse.co</span> <span class="U2">de}:&nbsp;respo</span> <span class="U2">nse&nbsp;body&nbsp;#</span> <span class="U2">{@response</span> <span class="U2">.body}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">54</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">55</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;HTTPar</span> <span class="U2">tyWithBasi</span> <span class="U2">cAuth.get_</span> <span class="U2">with_autho</span> <span class="U2">rization(p</span> <span class="U2">ath)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">56</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(@</span> <span class="U2">response.c</span> <span class="U2">ode).to&nbsp;eq</span> <span class="U2">(404),&nbsp;"re</span> <span class="U2">sponse&nbsp;cod</span> <span class="U2">e&nbsp;was&nbsp;#{@r</span> <span class="U2">esponse.co</span> <span class="U2">de}:&nbsp;respo</span> <span class="U2">nse&nbsp;body&nbsp;#</span> <span class="U2">{@response</span> <span class="U2">.body}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">57</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">58</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">59</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^the</span> <span class="U2">&nbsp;client&nbsp;re</span> <span class="U2">quests&nbsp;syn</span> <span class="U2">ced&nbsp;throug</span> <span class="U2">h&nbsp;FHIR&nbsp;for</span> <span class="U2">&nbsp;patient&nbsp;w</span> <span class="U2">ith&nbsp;pid&nbsp;"(</span> <span class="U2">.*?)"&nbsp;on&nbsp;"</span> <span class="U2">(.*?)"$/)&nbsp;</span> <span class="U2">do&nbsp;|pid,&nbsp;v</span> <span class="U2">e|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">60</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;ve.up</span> <span class="U2">case&nbsp;==&nbsp;"V</span> <span class="U2">E2"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">61</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;base_u</span> <span class="U2">rl&nbsp;=&nbsp;Defau</span> <span class="U2">ltLogin.ve</span> <span class="U2">2_fhir_url</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">62</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;#wait_</span> <span class="U2">until_oper</span> <span class="U2">ational_da</span> <span class="U2">ta_is_sync</span> <span class="U2">ed_ve2</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">63</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;wait_u</span> <span class="U2">ntil_opera</span> <span class="U2">tional_dat</span> <span class="U2">a_is_synce</span> <span class="U2">d(DefaultL</span> <span class="U2">ogin.ve2_f</span> <span class="U2">hir_url)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">64</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">65</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;base_u</span> <span class="U2">rl&nbsp;=&nbsp;Defau</span> <span class="U2">ltLogin.fh</span> <span class="U2">ir_url</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">66</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;wait_u</span> <span class="U2">ntil_opera</span> <span class="U2">tional_dat</span> <span class="U2">a_is_synce</span> <span class="U2">d(DefaultL</span> <span class="U2">ogin.fhir_</span> <span class="U2">url)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">67</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">68</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">69</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;path&nbsp;=</span> <span class="U2">&nbsp;"#{base_u</span> <span class="U2">rl}/admin/</span> <span class="U2">sync/#{pid</span> <span class="U2">}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">70</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#p&nbsp;path</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">71</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;begin</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">72</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@respo</span> <span class="U2">nse&nbsp;=&nbsp;HTTP</span> <span class="U2">artyWithBa</span> <span class="U2">sicAuth.pu</span> <span class="U2">t_with_aut</span> <span class="U2">horization</span> <span class="U2">(path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">73</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;expect</span> <span class="U2">(@response</span> <span class="U2">.code).to&nbsp;</span> <span class="U2">eq(201),&nbsp;"</span> <span class="U2">response&nbsp;c</span> <span class="U2">ode&nbsp;was&nbsp;#{</span> <span class="U2">@response.</span> <span class="U2">code}:&nbsp;res</span> <span class="U2">ponse&nbsp;body</span> <span class="U2">&nbsp;#{@respon</span> <span class="U2">se.body}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">74</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rescue&nbsp;T</span> <span class="U2">imeout::Er</span> <span class="U2">ror</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">75</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"Syn</span> <span class="U2">c&nbsp;timed&nbsp;ou</span> <span class="U2">t"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">76</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">77</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#@respon</span> <span class="U2">se&nbsp;=&nbsp;HTTPa</span> <span class="U2">rtyWithBas</span> <span class="U2">icAuth.get</span> <span class="U2">_with_auth</span> <span class="U2">orization(</span> <span class="U2">path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">78</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#expect(</span> <span class="U2">@response.</span> <span class="U2">code).to&nbsp;e</span> <span class="U2">q(200)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">79</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;time_out</span> <span class="U2">&nbsp;=&nbsp;60</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">80</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;wait_tim</span> <span class="U2">e&nbsp;=&nbsp;2</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">81</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;current_</span> <span class="U2">time&nbsp;=&nbsp;Tim</span> <span class="U2">e.new</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">82</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;wait_unt</span> <span class="U2">il&nbsp;=&nbsp;curre</span> <span class="U2">nt_time&nbsp;+&nbsp;</span> <span class="U2">time_out</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">83</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#(0..Int</span> <span class="U2">eger(time_</span> <span class="U2">out)/wait_</span> <span class="U2">time).each</span> <span class="U2">&nbsp;do</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">84</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;while&nbsp;Ti</span> <span class="U2">me.new&nbsp;&lt;=&nbsp;</span> <span class="U2">wait_until</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">85</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@respo</span> <span class="U2">nse&nbsp;=&nbsp;HTTP</span> <span class="U2">artyWithBa</span> <span class="U2">sicAuth.ge</span> <span class="U2">t_with_aut</span> <span class="U2">horization</span> <span class="U2">(path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">86</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;@re</span> <span class="U2">sponse.cod</span> <span class="U2">e&nbsp;!=&nbsp;200</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">87</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"n</span> <span class="U2">ot&nbsp;sync&nbsp;ye</span> <span class="U2">t,&nbsp;wait&nbsp;#{</span> <span class="U2">wait_time}</span> <span class="U2">&nbsp;seconds"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">88</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slee</span> <span class="U2">p&nbsp;wait_tim</span> <span class="U2">e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">89</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">90</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brea</span> <span class="U2">k</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">91</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;#&nbsp;</span> <span class="U2">if</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">92</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end&nbsp;#&nbsp;fo</span> <span class="U2">r</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">93</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(@</span> <span class="U2">response.c</span> <span class="U2">ode).to&nbsp;eq</span> <span class="U2">(200),&nbsp;"re</span> <span class="U2">sponse&nbsp;cod</span> <span class="U2">e&nbsp;was&nbsp;#{@r</span> <span class="U2">esponse.co</span> <span class="U2">de}:&nbsp;respo</span> <span class="U2">nse&nbsp;body&nbsp;#</span> <span class="U2">{@response</span> <span class="U2">.body}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">94</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">95</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">96</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;patient&nbsp;w</span> <span class="U2">ith&nbsp;pid&nbsp;"(</span> <span class="U2">.*?)"&nbsp;has&nbsp;</span> <span class="U2">no&nbsp;data&nbsp;on</span> <span class="U2">&nbsp;"(.*?)"$/</span> <span class="U2">)&nbsp;do&nbsp;|pid,</span> <span class="U2">&nbsp;ve|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">97</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;ve.up</span> <span class="U2">case&nbsp;==&nbsp;"V</span> <span class="U2">E2"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">98</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;base_u</span> <span class="U2">rl&nbsp;=&nbsp;Defau</span> <span class="U2">ltLogin.ve</span> <span class="U2">2_fhir_url</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">99</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">100</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;base_u</span> <span class="U2">rl&nbsp;=&nbsp;Defau</span> <span class="U2">ltLogin.fh</span> <span class="U2">ir_url</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">101</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">102</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;path&nbsp;=&nbsp;"</span> <span class="U2">#{base_url</span> <span class="U2">}/admin/sy</span> <span class="U2">nc/#{pid}"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">103</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;HTTPar</span> <span class="U2">tyWithBasi</span> <span class="U2">cAuth.get_</span> <span class="U2">with_autho</span> <span class="U2">rization(p</span> <span class="U2">ath)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">104</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(@</span> <span class="U2">response.c</span> <span class="U2">ode).to&nbsp;eq</span> <span class="U2">(404),&nbsp;"re</span> <span class="U2">sponse&nbsp;cod</span> <span class="U2">e&nbsp;was&nbsp;#{@r</span> <span class="U2">esponse.co</span> <span class="U2">de}:&nbsp;respo</span> <span class="U2">nse&nbsp;body&nbsp;#</span> <span class="U2">{@response</span> <span class="U2">.body}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">105</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">106</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">107</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^a&nbsp;c</span> <span class="U2">lient&nbsp;requ</span> <span class="U2">ests&nbsp;an&nbsp;as</span> <span class="U2">ynchronous</span> <span class="U2">&nbsp;load&nbsp;for&nbsp;</span> <span class="U2">patient&nbsp;wi</span> <span class="U2">th&nbsp;icn&nbsp;"(.</span> <span class="U2">*?)"$/)&nbsp;do</span> <span class="U2">&nbsp;|icn|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">108</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;base_url</span> <span class="U2">&nbsp;=&nbsp;Default</span> <span class="U2">Login.hmp_</span> <span class="U2">url</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">109</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;path&nbsp;=&nbsp;"</span> <span class="U2">#{base_url</span> <span class="U2">}/sync/loa</span> <span class="U2">dAsync?icn</span> <span class="U2">=#{icn}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">110</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;HTTPar</span> <span class="U2">tyWithAuth</span> <span class="U2">orization.</span> <span class="U2">post_with_</span> <span class="U2">authorizat</span> <span class="U2">ion(path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">111</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(@</span> <span class="U2">response.c</span> <span class="U2">ode).to&nbsp;eq</span> <span class="U2">(200),&nbsp;"re</span> <span class="U2">sponse&nbsp;cod</span> <span class="U2">e&nbsp;was&nbsp;#{@r</span> <span class="U2">esponse.co</span> <span class="U2">de}:&nbsp;respo</span> <span class="U2">nse&nbsp;body&nbsp;#</span> <span class="U2">{@response</span> <span class="U2">.body}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">112</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">113</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">114</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^a&nbsp;N</span> <span class="U2">ot&nbsp;Found&nbsp;r</span> <span class="U2">esponse&nbsp;is</span> <span class="U2">&nbsp;returned$</span> <span class="U2">/)&nbsp;do</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">115</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(@</span> <span class="U2">response.c</span> <span class="U2">ode).to&nbsp;eq</span> <span class="U2">(404),&nbsp;"re</span> <span class="U2">sponse&nbsp;cod</span> <span class="U2">e&nbsp;was&nbsp;#{@r</span> <span class="U2">esponse.co</span> <span class="U2">de}:&nbsp;respo</span> <span class="U2">nse&nbsp;body&nbsp;#</span> <span class="U2">{@response</span> <span class="U2">.body}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">116</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">117</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">118</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;patient&nbsp;w</span> <span class="U2">ith&nbsp;pid&nbsp;"(</span> <span class="U2">.*?)"&nbsp;is&nbsp;s</span> <span class="U2">ynced&nbsp;with</span> <span class="U2">in&nbsp;(\d+)&nbsp;s</span> <span class="U2">econds$/)&nbsp;</span> <span class="U2">do&nbsp;|pid,&nbsp;t</span> <span class="U2">ime_out|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">119</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;cache&nbsp;=&nbsp;</span> <span class="U2">PatientCac</span> <span class="U2">he.new</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">120</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;wait_tim</span> <span class="U2">e&nbsp;=&nbsp;1</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">121</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;is_synce</span> <span class="U2">d&nbsp;=&nbsp;false</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">122</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;current_</span> <span class="U2">time&nbsp;=&nbsp;Tim</span> <span class="U2">e.new</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">123</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;wait_unt</span> <span class="U2">il&nbsp;=&nbsp;curre</span> <span class="U2">nt_time&nbsp;+&nbsp;</span> <span class="U2">time_out.t</span> <span class="U2">o_i</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">124</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#(0..Int</span> <span class="U2">eger(time_</span> <span class="U2">out)/wait_</span> <span class="U2">time).each</span> <span class="U2">&nbsp;do</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">125</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;while&nbsp;Ti</span> <span class="U2">me.new&nbsp;&lt;=&nbsp;</span> <span class="U2">wait_until</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">126</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@respo</span> <span class="U2">nse&nbsp;=&nbsp;cach</span> <span class="U2">e.query_vp</span> <span class="U2">r_patients</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">127</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;cac</span> <span class="U2">he.sync_co</span> <span class="U2">mplete_pid</span> <span class="U2">?&nbsp;pid</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">128</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is_s</span> <span class="U2">ynced&nbsp;=&nbsp;tr</span> <span class="U2">ue</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">129</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brea</span> <span class="U2">k</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">130</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">131</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#p&nbsp;"</span> <span class="U2">not&nbsp;synced</span> <span class="U2">&nbsp;yet,&nbsp;wait</span> <span class="U2">&nbsp;#{wait_ti</span> <span class="U2">me}&nbsp;second</span> <span class="U2">s"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">132</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slee</span> <span class="U2">p&nbsp;wait_tim</span> <span class="U2">e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">133</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;#&nbsp;</span> <span class="U2">if</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">134</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end&nbsp;#&nbsp;fo</span> <span class="U2">r</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">135</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(i</span> <span class="U2">s_synced).</span> <span class="U2">to&nbsp;be_true</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">136</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">137</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">138</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">def&nbsp;wait_u</span> <span class="U2">ntil_opera</span> <span class="U2">tional_dat</span> <span class="U2">a_is_synce</span> <span class="U2">d(base_fhi</span> <span class="U2">r_url)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">139</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;path&nbsp;=&nbsp;"</span> <span class="U2">#{base_fhi</span> <span class="U2">r_url}/adm</span> <span class="U2">in/sync/op</span> <span class="U2">erational"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">140</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">141</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;time_out</span> <span class="U2">&nbsp;=&nbsp;600</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">142</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;wait_tim</span> <span class="U2">e&nbsp;=&nbsp;5</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">143</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@is_sync</span> <span class="U2">ed&nbsp;=&nbsp;false</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">144</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;current_</span> <span class="U2">time&nbsp;=&nbsp;Tim</span> <span class="U2">e.new</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">145</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;wait_unt</span> <span class="U2">il&nbsp;=&nbsp;curre</span> <span class="U2">nt_time&nbsp;+&nbsp;</span> <span class="U2">time_out</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">146</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#(0..Int</span> <span class="U2">eger(time_</span> <span class="U2">out)/wait_</span> <span class="U2">time).each</span> <span class="U2">&nbsp;do</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">147</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;while&nbsp;Ti</span> <span class="U2">me.new&nbsp;&lt;=&nbsp;</span> <span class="U2">wait_until</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">148</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;begin</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">149</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;p&nbsp;</span> <span class="U2">path</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">150</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@res</span> <span class="U2">ponse&nbsp;=&nbsp;HT</span> <span class="U2">TPartyWith</span> <span class="U2">BasicAuth.</span> <span class="U2">get_with_a</span> <span class="U2">uthorizati</span> <span class="U2">on(path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">151</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;json</span> <span class="U2">&nbsp;=&nbsp;JSON.pa</span> <span class="U2">rse(@respo</span> <span class="U2">nse.body)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">152</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sync</span> <span class="U2">_complete&nbsp;</span> <span class="U2">=&nbsp;json["da</span> <span class="U2">ta"]["item</span> <span class="U2">s"][0]["sy</span> <span class="U2">ncOperatio</span> <span class="U2">nalComplet</span> <span class="U2">e"]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">153</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;s</span> <span class="U2">ync_comple</span> <span class="U2">te</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">154</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;</span> <span class="U2">"operation</span> <span class="U2">al&nbsp;data&nbsp;ha</span> <span class="U2">s&nbsp;been&nbsp;syn</span> <span class="U2">ced"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">155</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@i</span> <span class="U2">s_synced&nbsp;=</span> <span class="U2">&nbsp;true</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">156</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;br</span> <span class="U2">eak</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">157</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">158</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;</span> <span class="U2">"operation</span> <span class="U2">al&nbsp;data&nbsp;no</span> <span class="U2">t&nbsp;synced&nbsp;y</span> <span class="U2">et,&nbsp;wait&nbsp;#</span> <span class="U2">{wait_time</span> <span class="U2">}&nbsp;seconds"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">159</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;</span> <span class="U2">json</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">160</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sl</span> <span class="U2">eep&nbsp;wait_t</span> <span class="U2">ime</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">161</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;</span> <span class="U2">#&nbsp;if</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">162</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;rescue</span> <span class="U2">&nbsp;Exception</span> <span class="U2">&nbsp;=&gt;&nbsp;e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">163</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"c</span> <span class="U2">all&nbsp;to&nbsp;che</span> <span class="U2">ck&nbsp;if&nbsp;oper</span> <span class="U2">ational&nbsp;da</span> <span class="U2">ta&nbsp;has&nbsp;bee</span> <span class="U2">n&nbsp;synced&nbsp;c</span> <span class="U2">aused&nbsp;an&nbsp;e</span> <span class="U2">xception:&nbsp;</span> <span class="U2">#{e}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">164</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;@r</span> <span class="U2">esponse.bo</span> <span class="U2">dy&nbsp;unless&nbsp;</span> <span class="U2">@response.</span> <span class="U2">nil?</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">165</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slee</span> <span class="U2">p&nbsp;wait_tim</span> <span class="U2">e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">166</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;#&nbsp;</span> <span class="U2">rescue</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">167</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end&nbsp;#&nbsp;fo</span> <span class="U2">r</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">168</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">169</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">170</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Given(/^a&nbsp;</span> <span class="U2">patient&nbsp;wi</span> <span class="U2">th&nbsp;pid&nbsp;"(.</span> <span class="U2">*?)"&nbsp;has&nbsp;b</span> <span class="U2">een&nbsp;synced</span> <span class="U2">&nbsp;through&nbsp;A</span> <span class="U2">dmin&nbsp;API$/</span> <span class="U2">)&nbsp;do&nbsp;|&nbsp;pid</span> <span class="U2">&nbsp;|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">171</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#Check&nbsp;t</span> <span class="U2">hat&nbsp;the&nbsp;op</span> <span class="U2">erational</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">172</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;unless</span> <span class="U2">&nbsp;TestSuppo</span> <span class="U2">rt.operati</span> <span class="U2">onal_data_</span> <span class="U2">run?</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">173</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;wait</span> <span class="U2">_until_ope</span> <span class="U2">rational_d</span> <span class="U2">ata_is_syn</span> <span class="U2">ced(Defaul</span> <span class="U2">tLogin.fhi</span> <span class="U2">r_url)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">174</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;@@op</span> <span class="U2">erational_</span> <span class="U2">data_run&nbsp;=</span> <span class="U2">&nbsp;true</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">175</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">176</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">177</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;base_url</span> <span class="U2">&nbsp;=&nbsp;Default</span> <span class="U2">Login.hmp_</span> <span class="U2">url</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">178</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;path&nbsp;=&nbsp;"</span> <span class="U2">#{base_url</span> <span class="U2">}/sync/loa</span> <span class="U2">d?pid=#{pi</span> <span class="U2">d}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">179</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;path</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">180</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">181</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;nil</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">182</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;default_</span> <span class="U2">timeout&nbsp;=&nbsp;</span> <span class="U2">260</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">183</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;response</span> <span class="U2">_code&nbsp;=&nbsp;50</span> <span class="U2">2</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">184</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;max_run_</span> <span class="U2">index&nbsp;=&nbsp;3</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">185</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;run_inde</span> <span class="U2">x&nbsp;=&nbsp;0</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">186</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">187</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;while&nbsp;re</span> <span class="U2">sponse_cod</span> <span class="U2">e&nbsp;==&nbsp;502&nbsp;&amp;</span> <span class="U2">&amp;&nbsp;run_inde</span> <span class="U2">x&nbsp;&lt;&nbsp;max_ru</span> <span class="U2">n_index</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">188</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;start_</span> <span class="U2">time&nbsp;=&nbsp;Tim</span> <span class="U2">e.new</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">189</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;run_in</span> <span class="U2">dex&nbsp;+=&nbsp;1</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">190</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;begin</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">191</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@res</span> <span class="U2">ponse&nbsp;=&nbsp;HT</span> <span class="U2">TPartyWith</span> <span class="U2">BasicAuth.</span> <span class="U2">put_with_a</span> <span class="U2">uthorizati</span> <span class="U2">on(path,&nbsp;d</span> <span class="U2">efault_tim</span> <span class="U2">eout)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">192</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;rescue</span> <span class="U2">&nbsp;Timeout::</span> <span class="U2">Error</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">193</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"S</span> <span class="U2">ync&nbsp;timed&nbsp;</span> <span class="U2">out"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">194</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">195</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"Wai</span> <span class="U2">ted&nbsp;#{Time</span> <span class="U2">.new&nbsp;-&nbsp;sta</span> <span class="U2">rt_time}&nbsp;s</span> <span class="U2">ecs"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">196</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">197</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;@re</span> <span class="U2">sponse.nil</span> <span class="U2">?</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">198</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resp</span> <span class="U2">onse_code&nbsp;</span> <span class="U2">=&nbsp;500</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">199</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resp</span> <span class="U2">onse_body&nbsp;</span> <span class="U2">=&nbsp;"Sync&nbsp;ti</span> <span class="U2">med&nbsp;out"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">200</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">201</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resp</span> <span class="U2">onse_code&nbsp;</span> <span class="U2">=&nbsp;@respons</span> <span class="U2">e.code</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">202</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resp</span> <span class="U2">onse_body&nbsp;</span> <span class="U2">=&nbsp;@respons</span> <span class="U2">e.body</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">203</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">204</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">205</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;fail&nbsp;"Ex</span> <span class="U2">pected&nbsp;res</span> <span class="U2">ponse&nbsp;code</span> <span class="U2">&nbsp;201,&nbsp;rece</span> <span class="U2">ived&nbsp;#{res</span> <span class="U2">ponse_code</span> <span class="U2">}:&nbsp;respons</span> <span class="U2">e&nbsp;body&nbsp;#{r</span> <span class="U2">esponse_bo</span> <span class="U2">dy}"&nbsp;unles</span> <span class="U2">s&nbsp;response</span> <span class="U2">_code&nbsp;==&nbsp;2</span> <span class="U2">01</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">206</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">207</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">208</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Given(/^ol</span> <span class="U2">d&nbsp;a&nbsp;patien</span> <span class="U2">t&nbsp;with&nbsp;pid</span> <span class="U2">&nbsp;"(.*?)"&nbsp;h</span> <span class="U2">as&nbsp;been&nbsp;sy</span> <span class="U2">nced&nbsp;throu</span> <span class="U2">gh&nbsp;Admin&nbsp;A</span> <span class="U2">PI$/)&nbsp;do&nbsp;|</span> <span class="U2">&nbsp;pid&nbsp;|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">209</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#Check&nbsp;t</span> <span class="U2">hat&nbsp;the&nbsp;op</span> <span class="U2">erational</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">210</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">211</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;wait_unt</span> <span class="U2">il_operati</span> <span class="U2">onal_data_</span> <span class="U2">is_synced(</span> <span class="U2">DefaultLog</span> <span class="U2">in.fhir_ur</span> <span class="U2">l)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">212</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">213</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;base_url</span> <span class="U2">&nbsp;=&nbsp;Default</span> <span class="U2">Login.fhir</span> <span class="U2">_url</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">214</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;path&nbsp;=&nbsp;"</span> <span class="U2">#{base_url</span> <span class="U2">}/admin/sy</span> <span class="U2">nc/#{pid}"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">215</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;path</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">216</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">217</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;begin</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">218</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@respo</span> <span class="U2">nse&nbsp;=&nbsp;HTTP</span> <span class="U2">artyWithBa</span> <span class="U2">sicAuth.pu</span> <span class="U2">t_with_aut</span> <span class="U2">horization</span> <span class="U2">(path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">219</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"Exp</span> <span class="U2">ected&nbsp;resp</span> <span class="U2">onse&nbsp;code&nbsp;</span> <span class="U2">201,&nbsp;recei</span> <span class="U2">ved&nbsp;#{@res</span> <span class="U2">ponse.code</span> <span class="U2">}"&nbsp;unless&nbsp;</span> <span class="U2">@response.</span> <span class="U2">code&nbsp;==&nbsp;20</span> <span class="U2">1</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">220</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;#expec</span> <span class="U2">t(@respons</span> <span class="U2">e.code).to</span> <span class="U2">&nbsp;eq(201),&nbsp;</span> <span class="U2">"response&nbsp;</span> <span class="U2">code&nbsp;was&nbsp;#</span> <span class="U2">{@response</span> <span class="U2">.code}:&nbsp;re</span> <span class="U2">sponse&nbsp;bod</span> <span class="U2">y&nbsp;#{@respo</span> <span class="U2">nse.body}"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">221</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rescue&nbsp;T</span> <span class="U2">imeout::Er</span> <span class="U2">ror</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">222</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"Syn</span> <span class="U2">c&nbsp;timed&nbsp;ou</span> <span class="U2">t"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">223</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">224</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">225</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;if&nbsp;@re</span> <span class="U2">sponse.cod</span> <span class="U2">e&nbsp;==&nbsp;500&nbsp;|</span> <span class="U2">|&nbsp;@respons</span> <span class="U2">e.code&nbsp;==&nbsp;</span> <span class="U2">503</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">226</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;fail</span> <span class="U2">&nbsp;"Expected</span> <span class="U2">&nbsp;response&nbsp;</span> <span class="U2">code&nbsp;201,&nbsp;</span> <span class="U2">received&nbsp;#</span> <span class="U2">{@response</span> <span class="U2">.code}:&nbsp;re</span> <span class="U2">sponse&nbsp;bod</span> <span class="U2">y&nbsp;#{@respo</span> <span class="U2">nse.body}"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">227</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">228</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;time_out</span> <span class="U2">&nbsp;=&nbsp;180</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">229</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;wait_tim</span> <span class="U2">e&nbsp;=&nbsp;2</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">230</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">231</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;current_</span> <span class="U2">time&nbsp;=&nbsp;Tim</span> <span class="U2">e.new</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">232</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;wait_unt</span> <span class="U2">il&nbsp;=&nbsp;curre</span> <span class="U2">nt_time&nbsp;+&nbsp;</span> <span class="U2">time_out</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">233</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#(0..Int</span> <span class="U2">eger(time_</span> <span class="U2">out)/wait_</span> <span class="U2">time).each</span> <span class="U2">&nbsp;do</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">234</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;while&nbsp;Ti</span> <span class="U2">me.new&nbsp;&lt;=&nbsp;</span> <span class="U2">wait_until</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">235</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@respo</span> <span class="U2">nse&nbsp;=&nbsp;HTTP</span> <span class="U2">artyWithBa</span> <span class="U2">sicAuth.ge</span> <span class="U2">t_with_aut</span> <span class="U2">horization</span> <span class="U2">(path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">236</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;@re</span> <span class="U2">sponse.cod</span> <span class="U2">e&nbsp;!=&nbsp;200</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">237</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"n</span> <span class="U2">ot&nbsp;sync&nbsp;ye</span> <span class="U2">t,&nbsp;wait&nbsp;#{</span> <span class="U2">wait_time}</span> <span class="U2">&nbsp;seconds"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">238</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slee</span> <span class="U2">p&nbsp;wait_tim</span> <span class="U2">e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">239</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">240</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brea</span> <span class="U2">k</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">241</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;#&nbsp;</span> <span class="U2">if</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">242</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end&nbsp;#&nbsp;fo</span> <span class="U2">r</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">243</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;p&nbsp;"Waite</span> <span class="U2">d&nbsp;#{Time.n</span> <span class="U2">ew&nbsp;-&nbsp;curre</span> <span class="U2">nt_time}&nbsp;s</span> <span class="U2">ecs"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">244</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(@</span> <span class="U2">response.c</span> <span class="U2">ode).to&nbsp;eq</span> <span class="U2">(200),&nbsp;"re</span> <span class="U2">sponse&nbsp;cod</span> <span class="U2">e&nbsp;was&nbsp;#{@r</span> <span class="U2">esponse.co</span> <span class="U2">de}:&nbsp;respo</span> <span class="U2">nse&nbsp;body&nbsp;#</span> <span class="U2">{@response</span> <span class="U2">.body}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">245</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">246</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">247</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">248</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;renamed&nbsp;</span> <span class="U2">this&nbsp;funct</span> <span class="U2">ion&nbsp;to&nbsp;Giv</span> <span class="U2">en(/^a&nbsp;pat</span> <span class="U2">ient&nbsp;with&nbsp;</span> <span class="U2">pid&nbsp;"(.*?)</span> <span class="U2">"&nbsp;has&nbsp;been</span> <span class="U2">&nbsp;synced&nbsp;th</span> <span class="U2">rough&nbsp;Admi</span> <span class="U2">n&nbsp;API$/)&nbsp;d</span> <span class="U2">o&nbsp;|&nbsp;pid&nbsp;|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">249</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#Given(/^a</span> <span class="U2">&nbsp;patient&nbsp;w</span> <span class="U2">ith&nbsp;pid&nbsp;"(</span> <span class="U2">.*?)"&nbsp;has&nbsp;</span> <span class="U2">been&nbsp;synce</span> <span class="U2">d&nbsp;through&nbsp;</span> <span class="U2">FHIR$/)&nbsp;do</span> <span class="U2">&nbsp;|&nbsp;pid&nbsp;|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">250</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;#Check&nbsp;</span> <span class="U2">that&nbsp;the&nbsp;o</span> <span class="U2">perational</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">251</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">252</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;wait_un</span> <span class="U2">til_operat</span> <span class="U2">ional_data</span> <span class="U2">_is_synced</span> <span class="U2">(DefaultLo</span> <span class="U2">gin.fhir_u</span> <span class="U2">rl)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">253</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">254</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;base_ur</span> <span class="U2">l&nbsp;=&nbsp;Defaul</span> <span class="U2">tLogin.fhi</span> <span class="U2">r_url</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">255</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;path&nbsp;=&nbsp;</span> <span class="U2">"#{base_ur</span> <span class="U2">l}/admin/s</span> <span class="U2">ync/#{pid}</span> <span class="U2">"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">256</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;p&nbsp;path</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">257</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;begin</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">258</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;&nbsp;&nbsp;@resp</span> <span class="U2">onse&nbsp;=&nbsp;HTT</span> <span class="U2">PartyWithB</span> <span class="U2">asicAuth.p</span> <span class="U2">ut_with_au</span> <span class="U2">thorizatio</span> <span class="U2">n(path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">259</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"Ex</span> <span class="U2">pected&nbsp;res</span> <span class="U2">ponse&nbsp;code</span> <span class="U2">&nbsp;201,&nbsp;rece</span> <span class="U2">ived&nbsp;#{@re</span> <span class="U2">sponse.cod</span> <span class="U2">e}"&nbsp;unless</span> <span class="U2">&nbsp;@response</span> <span class="U2">.code&nbsp;==&nbsp;2</span> <span class="U2">01</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">260</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;&nbsp;&nbsp;#expe</span> <span class="U2">ct(@respon</span> <span class="U2">se.code).t</span> <span class="U2">o&nbsp;eq(201),</span> <span class="U2">&nbsp;"response</span> <span class="U2">&nbsp;code&nbsp;was&nbsp;</span> <span class="U2">#{@respons</span> <span class="U2">e.code}:&nbsp;r</span> <span class="U2">esponse&nbsp;bo</span> <span class="U2">dy&nbsp;#{@resp</span> <span class="U2">onse.body}</span> <span class="U2">"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">261</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;rescue&nbsp;</span> <span class="U2">Timeout::E</span> <span class="U2">rror</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">262</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"Sy</span> <span class="U2">nc&nbsp;timed&nbsp;o</span> <span class="U2">ut"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">263</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">264</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;#@respo</span> <span class="U2">nse&nbsp;=&nbsp;HTTP</span> <span class="U2">artyWithBa</span> <span class="U2">sicAuth.ge</span> <span class="U2">t_with_aut</span> <span class="U2">horization</span> <span class="U2">(path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">265</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;#expect</span> <span class="U2">(@response</span> <span class="U2">.code).to&nbsp;</span> <span class="U2">eq(200)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">266</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;time_ou</span> <span class="U2">t&nbsp;=&nbsp;180</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">267</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;wait_ti</span> <span class="U2">me&nbsp;=&nbsp;2</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">268</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;(0..Int</span> <span class="U2">eger(time_</span> <span class="U2">out)/wait_</span> <span class="U2">time).each</span> <span class="U2">&nbsp;do</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">269</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;&nbsp;&nbsp;@resp</span> <span class="U2">onse&nbsp;=&nbsp;HTT</span> <span class="U2">PartyWithB</span> <span class="U2">asicAuth.g</span> <span class="U2">et_with_au</span> <span class="U2">thorizatio</span> <span class="U2">n(path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">270</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;@r</span> <span class="U2">esponse.co</span> <span class="U2">de&nbsp;!=&nbsp;200</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">271</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"</span> <span class="U2">not&nbsp;sync&nbsp;y</span> <span class="U2">et,&nbsp;wait&nbsp;#</span> <span class="U2">{wait_time</span> <span class="U2">}&nbsp;seconds"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">272</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sle</span> <span class="U2">ep&nbsp;wait_ti</span> <span class="U2">me</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">273</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">274</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bre</span> <span class="U2">ak</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">275</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;#</span> <span class="U2">&nbsp;if</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">276</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;end&nbsp;#&nbsp;f</span> <span class="U2">or</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">277</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#&nbsp;&nbsp;expect(</span> <span class="U2">@response.</span> <span class="U2">code).to&nbsp;e</span> <span class="U2">q(200),&nbsp;"r</span> <span class="U2">esponse&nbsp;co</span> <span class="U2">de&nbsp;was&nbsp;#{@</span> <span class="U2">response.c</span> <span class="U2">ode}:&nbsp;resp</span> <span class="U2">onse&nbsp;body&nbsp;</span> <span class="U2">#{@respons</span> <span class="U2">e.body}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">278</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">#end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">279</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">280</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Given(/^a&nbsp;</span> <span class="U2">patient&nbsp;wi</span> <span class="U2">th&nbsp;pid&nbsp;"(.</span> <span class="U2">*?)"&nbsp;and&nbsp;i</span> <span class="U2">cn&nbsp;"(.*?)"</span> <span class="U2">&nbsp;has&nbsp;been&nbsp;</span> <span class="U2">synced$/)&nbsp;</span> <span class="U2">do&nbsp;|pid,&nbsp;i</span> <span class="U2">cn|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">281</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;base_url</span> <span class="U2">&nbsp;=&nbsp;Default</span> <span class="U2">Login.fhir</span> <span class="U2">_url</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">282</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;path&nbsp;=&nbsp;"</span> <span class="U2">#{base_url</span> <span class="U2">}/admin/sy</span> <span class="U2">nc/#{pid}"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">283</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#p&nbsp;path</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">284</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;HTTPar</span> <span class="U2">tyWithBasi</span> <span class="U2">cAuth.put_</span> <span class="U2">with_autho</span> <span class="U2">rization(p</span> <span class="U2">ath)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">285</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(@</span> <span class="U2">response.c</span> <span class="U2">ode).to&nbsp;eq</span> <span class="U2">(201),&nbsp;"re</span> <span class="U2">sponse&nbsp;cod</span> <span class="U2">e&nbsp;was&nbsp;#{@r</span> <span class="U2">esponse.co</span> <span class="U2">de}:&nbsp;respo</span> <span class="U2">nse&nbsp;body&nbsp;#</span> <span class="U2">{@response</span> <span class="U2">.body}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">286</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">287</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;HTTPar</span> <span class="U2">tyWithBasi</span> <span class="U2">cAuth.get_</span> <span class="U2">with_autho</span> <span class="U2">rization(p</span> <span class="U2">ath)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">288</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(@</span> <span class="U2">response.c</span> <span class="U2">ode).to&nbsp;eq</span> <span class="U2">(200),&nbsp;"re</span> <span class="U2">sponse&nbsp;cod</span> <span class="U2">e&nbsp;was&nbsp;#{@r</span> <span class="U2">esponse.co</span> <span class="U2">de}:&nbsp;respo</span> <span class="U2">nse&nbsp;body&nbsp;#</span> <span class="U2">{@response</span> <span class="U2">.body}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">289</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">290</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">291</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^a&nbsp;c</span> <span class="U2">lient&nbsp;requ</span> <span class="U2">est&nbsp;patien</span> <span class="U2">t&nbsp;with&nbsp;pid</span> <span class="U2">&nbsp;"(.*?)"&nbsp;i</span> <span class="U2">s&nbsp;cleared&nbsp;</span> <span class="U2">from&nbsp;the&nbsp;c</span> <span class="U2">ache$/)&nbsp;do</span> <span class="U2">&nbsp;|pid|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">292</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;base_url</span> <span class="U2">&nbsp;=&nbsp;Default</span> <span class="U2">Login.hmp_</span> <span class="U2">url</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">293</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;path&nbsp;=&nbsp;"</span> <span class="U2">#{base_url</span> <span class="U2">}/sync/cle</span> <span class="U2">arPatient?</span> <span class="U2">pid=#{pid}</span> <span class="U2">"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">294</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;HTTPar</span> <span class="U2">tyWithAuth</span> <span class="U2">orization.</span> <span class="U2">post_with_</span> <span class="U2">authorizat</span> <span class="U2">ion(path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">295</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(@</span> <span class="U2">response.c</span> <span class="U2">ode).to&nbsp;eq</span> <span class="U2">(200),&nbsp;"re</span> <span class="U2">sponse&nbsp;cod</span> <span class="U2">e&nbsp;was&nbsp;#{@r</span> <span class="U2">esponse.co</span> <span class="U2">de}:&nbsp;respo</span> <span class="U2">nse&nbsp;body&nbsp;#</span> <span class="U2">{@response</span> <span class="U2">.body}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">296</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">297</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">298</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">299</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^the</span> <span class="U2">&nbsp;patient&nbsp;w</span> <span class="U2">ith&nbsp;pid&nbsp;"(</span> <span class="U2">.*?)"&nbsp;is&nbsp;c</span> <span class="U2">leared&nbsp;fro</span> <span class="U2">m&nbsp;the&nbsp;cach</span> <span class="U2">e&nbsp;within&nbsp;(</span> <span class="U2">\d+)&nbsp;secon</span> <span class="U2">ds$/)&nbsp;do&nbsp;|</span> <span class="U2">pid,&nbsp;time_</span> <span class="U2">out|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">300</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;cache&nbsp;=&nbsp;</span> <span class="U2">PatientCac</span> <span class="U2">he.new</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">301</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">302</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;wait_tim</span> <span class="U2">e&nbsp;=&nbsp;2</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">303</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;is_clear</span> <span class="U2">ed&nbsp;=&nbsp;false</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">304</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;current_</span> <span class="U2">time&nbsp;=&nbsp;Tim</span> <span class="U2">e.new</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">305</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;wait_unt</span> <span class="U2">il&nbsp;=&nbsp;curre</span> <span class="U2">nt_time&nbsp;+&nbsp;</span> <span class="U2">time_out.t</span> <span class="U2">o_i</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">306</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#(0..Int</span> <span class="U2">eger(time_</span> <span class="U2">out)/wait_</span> <span class="U2">time).each</span> <span class="U2">&nbsp;do</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">307</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;while&nbsp;Ti</span> <span class="U2">me.new&nbsp;&lt;=&nbsp;</span> <span class="U2">wait_until</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">308</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@respo</span> <span class="U2">nse&nbsp;=&nbsp;cach</span> <span class="U2">e.query_vp</span> <span class="U2">r_patients</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">309</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;cac</span> <span class="U2">he.contain</span> <span class="U2">s_patient_</span> <span class="U2">pid?&nbsp;pid</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">310</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"n</span> <span class="U2">ot&nbsp;cleared</span> <span class="U2">&nbsp;yet,&nbsp;wait</span> <span class="U2">&nbsp;#{wait_ti</span> <span class="U2">me}&nbsp;second</span> <span class="U2">s"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">311</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slee</span> <span class="U2">p&nbsp;wait_tim</span> <span class="U2">e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">312</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">313</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is_c</span> <span class="U2">leared&nbsp;=&nbsp;t</span> <span class="U2">rue</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">314</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brea</span> <span class="U2">k</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">315</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;#&nbsp;</span> <span class="U2">if</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">316</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end&nbsp;#&nbsp;fo</span> <span class="U2">r</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">317</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(i</span> <span class="U2">s_cleared)</span> <span class="U2">.to&nbsp;be_tru</span> <span class="U2">e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">318</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">319</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">320</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^a&nbsp;c</span> <span class="U2">lient&nbsp;requ</span> <span class="U2">ests&nbsp;patie</span> <span class="U2">nt&nbsp;informa</span> <span class="U2">tion&nbsp;for&nbsp;p</span> <span class="U2">atient&nbsp;wit</span> <span class="U2">h&nbsp;pid&nbsp;"(.*</span> <span class="U2">?)"&nbsp;and&nbsp;ic</span> <span class="U2">n&nbsp;"(.*?)"$</span> <span class="U2">/)&nbsp;do&nbsp;|pid</span> <span class="U2">,&nbsp;icn|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">321</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;base_url</span> <span class="U2">&nbsp;=&nbsp;Default</span> <span class="U2">Login.hmp_</span> <span class="U2">url</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">322</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;path&nbsp;=&nbsp;"</span> <span class="U2">#{base_url</span> <span class="U2">}/context/</span> <span class="U2">patient?pi</span> <span class="U2">d=#{pid}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">323</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;HTTPar</span> <span class="U2">tyWithAuth</span> <span class="U2">orization.</span> <span class="U2">post_with_</span> <span class="U2">authorizat</span> <span class="U2">ion(path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">324</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;unless&nbsp;@</span> <span class="U2">response.c</span> <span class="U2">ode&nbsp;==&nbsp;200</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">325</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;@res</span> <span class="U2">ponse.body</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">326</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">327</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(@</span> <span class="U2">response.c</span> <span class="U2">ode).to&nbsp;eq</span> <span class="U2">(200),&nbsp;"re</span> <span class="U2">sponse&nbsp;cod</span> <span class="U2">e&nbsp;was&nbsp;#{@r</span> <span class="U2">esponse.co</span> <span class="U2">de}:&nbsp;respo</span> <span class="U2">nse&nbsp;body&nbsp;#</span> <span class="U2">{@response</span> <span class="U2">.body}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">328</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="C2 ln-no" style="text-align: right;">329</td>  
     <td class="nbgC2"><span class="I2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">#&nbsp;https://</span> <span class="C2">IP&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">/vpr/10108</span> <span class="U2">/detail/cw</span> <span class="U2">adf?_dc=13</span> <span class="U2">9808678369</span> <span class="U2">1</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">330</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;path&nbsp;=&nbsp;"</span> <span class="U2">#{base_url</span> <span class="U2">}/vpr/#{pi</span> <span class="U2">d}/detail/</span> <span class="U2">cwadf?_dc=</span> <span class="U2">1398086783</span> <span class="U2">691"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">331</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;HTTPar</span> <span class="U2">tyWithAuth</span> <span class="U2">orization.</span> <span class="U2">get_with_a</span> <span class="U2">uthorizati</span> <span class="U2">on(path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">332</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(@</span> <span class="U2">response.c</span> <span class="U2">ode).to&nbsp;eq</span> <span class="U2">(200),&nbsp;"re</span> <span class="U2">sponse&nbsp;cod</span> <span class="U2">e&nbsp;was&nbsp;#{@r</span> <span class="U2">esponse.co</span> <span class="U2">de}:&nbsp;respo</span> <span class="U2">nse&nbsp;body&nbsp;#</span> <span class="U2">{@response</span> <span class="U2">.body}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">333</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">334</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">335</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^a&nbsp;c</span> <span class="U2">lient&nbsp;requ</span> <span class="U2">ests&nbsp;sync&nbsp;</span> <span class="U2">status&nbsp;for</span> <span class="U2">&nbsp;patient&nbsp;w</span> <span class="U2">ith&nbsp;icn&nbsp;"(</span> <span class="U2">.*?)"$/)&nbsp;d</span> <span class="U2">o&nbsp;|icn|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">336</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;base_url</span> <span class="U2">&nbsp;=&nbsp;Default</span> <span class="U2">Login.jds_</span> <span class="U2">url</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">337</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;path&nbsp;=&nbsp;"</span> <span class="U2">#{base_url</span> <span class="U2">}/data/urn</span> <span class="U2">:va:syncst</span> <span class="U2">atus:#{icn</span> <span class="U2">}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">338</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;HTTPar</span> <span class="U2">tyWithAuth</span> <span class="U2">orization.</span> <span class="U2">get_with_a</span> <span class="U2">uthorizati</span> <span class="U2">on(path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">339</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(@</span> <span class="U2">response.c</span> <span class="U2">ode).to&nbsp;eq</span> <span class="U2">(200),&nbsp;"re</span> <span class="U2">sponse&nbsp;cod</span> <span class="U2">e&nbsp;was&nbsp;#{@r</span> <span class="U2">esponse.co</span> <span class="U2">de}:&nbsp;respo</span> <span class="U2">nse&nbsp;body&nbsp;#</span> <span class="U2">{@response</span> <span class="U2">.body}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">340</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">341</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">342</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">When(/^a&nbsp;c</span> <span class="U2">lient&nbsp;requ</span> <span class="U2">ests&nbsp;sync&nbsp;</span> <span class="U2">status&nbsp;for</span> <span class="U2">&nbsp;patient&nbsp;w</span> <span class="U2">ith&nbsp;dfn&nbsp;"(</span> <span class="U2">.*?)"$/)&nbsp;d</span> <span class="U2">o&nbsp;|dfn|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">343</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;base_url</span> <span class="U2">&nbsp;=&nbsp;Default</span> <span class="U2">Login.jds_</span> <span class="U2">url</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">344</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;dfn.gsub</span> <span class="U2">!(';',&nbsp;':'</span> <span class="U2">)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">345</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;path&nbsp;=&nbsp;"</span> <span class="U2">#{base_url</span> <span class="U2">}/data/urn</span> <span class="U2">:va:syncst</span> <span class="U2">atus:#{dfn</span> <span class="U2">}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">346</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;@respons</span> <span class="U2">e&nbsp;=&nbsp;HTTPar</span> <span class="U2">tyWithAuth</span> <span class="U2">orization.</span> <span class="U2">get_with_a</span> <span class="U2">uthorizati</span> <span class="U2">on(path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">347</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;expect(@</span> <span class="U2">response.c</span> <span class="U2">ode).to&nbsp;eq</span> <span class="U2">(200),&nbsp;"re</span> <span class="U2">sponse&nbsp;cod</span> <span class="U2">e&nbsp;was&nbsp;#{@r</span> <span class="U2">esponse.co</span> <span class="U2">de}:&nbsp;respo</span> <span class="U2">nse&nbsp;body&nbsp;#</span> <span class="U2">{@response</span> <span class="U2">.body}"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">348</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">349</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">350</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">Then(/^an&nbsp;</span> <span class="U2">error&nbsp;resp</span> <span class="U2">onse&nbsp;"(.*?</span> <span class="U2">)"&nbsp;is&nbsp;retu</span> <span class="U2">rned&nbsp;after</span> <span class="U2">&nbsp;(\d+)&nbsp;sec</span> <span class="U2">onds$/)&nbsp;do</span> <span class="U2">&nbsp;|arg1,&nbsp;ar</span> <span class="U2">g2|</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">351</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;pending&nbsp;</span> <span class="U2">#&nbsp;express&nbsp;</span> <span class="U2">the&nbsp;regexp</span> <span class="U2">&nbsp;above&nbsp;wit</span> <span class="U2">h&nbsp;the&nbsp;code</span> <span class="U2">&nbsp;you&nbsp;wish&nbsp;</span> <span class="U2">you&nbsp;had</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">352</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">353</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">354</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">def&nbsp;wait_u</span> <span class="U2">ntil_patie</span> <span class="U2">nt_has_bee</span> <span class="U2">n_synced(p</span> <span class="U2">id)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">355</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;time_out</span> <span class="U2">&nbsp;=&nbsp;120</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">356</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;wait_tim</span> <span class="U2">e&nbsp;=&nbsp;2</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">357</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;is_clear</span> <span class="U2">ed&nbsp;=&nbsp;false</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">358</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;current_</span> <span class="U2">time&nbsp;=&nbsp;Tim</span> <span class="U2">e.new</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">359</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;wait_unt</span> <span class="U2">il&nbsp;=&nbsp;curre</span> <span class="U2">nt_time&nbsp;+&nbsp;</span> <span class="U2">time_out</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">360</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#(0..Int</span> <span class="U2">eger(time_</span> <span class="U2">out)/wait_</span> <span class="U2">time).each</span> <span class="U2">&nbsp;do</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">361</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;while&nbsp;Ti</span> <span class="U2">me.new&nbsp;&lt;=&nbsp;</span> <span class="U2">wait_until</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">362</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;is_syn</span> <span class="U2">ced&nbsp;=&nbsp;chec</span> <span class="U2">k_patient_</span> <span class="U2">has_been_s</span> <span class="U2">ynced(pid)</span> <span class="U2">[0]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">363</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;is_</span> <span class="U2">synced</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">364</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"o</span> <span class="U2">perational</span> <span class="U2">&nbsp;data&nbsp;has&nbsp;</span> <span class="U2">been&nbsp;synce</span> <span class="U2">d"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">365</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is_s</span> <span class="U2">ynced&nbsp;=&nbsp;tr</span> <span class="U2">ue</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">366</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;brea</span> <span class="U2">k</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">367</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">368</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"o</span> <span class="U2">perational</span> <span class="U2">&nbsp;data&nbsp;not&nbsp;</span> <span class="U2">synced&nbsp;yet</span> <span class="U2">,&nbsp;wait&nbsp;#{w</span> <span class="U2">ait_time}&nbsp;</span> <span class="U2">seconds"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">369</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;p&nbsp;</span> <span class="U2">json</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">370</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slee</span> <span class="U2">p&nbsp;wait_tim</span> <span class="U2">e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">371</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">372</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">373</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">374</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">375</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">def&nbsp;check_</span> <span class="U2">patient_ha</span> <span class="U2">s_been_syn</span> <span class="U2">ced(pid)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">376</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;base_url</span> <span class="U2">&nbsp;=&nbsp;Default</span> <span class="U2">Login.fhir</span> <span class="U2">_url</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">377</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;path&nbsp;=&nbsp;"</span> <span class="U2">#{base_url</span> <span class="U2">}/admin/sy</span> <span class="U2">nc/#{pid}"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">378</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;can_be_s</span> <span class="U2">ync&nbsp;=&nbsp;true</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">379</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;#&nbsp;p&nbsp;path</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">380</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;begin</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">381</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;@respo</span> <span class="U2">nse&nbsp;=&nbsp;HTTP</span> <span class="U2">artyWithBa</span> <span class="U2">sicAuth.ge</span> <span class="U2">t_with_aut</span> <span class="U2">horization</span> <span class="U2">(path)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">382</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;@re</span> <span class="U2">sponse.cod</span> <span class="U2">e&nbsp;==&nbsp;404</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">383</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is_s</span> <span class="U2">ynced&nbsp;=&nbsp;fa</span> <span class="U2">lse</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">384</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;elsif&nbsp;</span> <span class="U2">@response.</span> <span class="U2">code&nbsp;==&nbsp;50</span> <span class="U2">3</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">385</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;'R</span> <span class="U2">equest&nbsp;to&nbsp;</span> <span class="U2">/admin/syn</span> <span class="U2">c/#{pid}&nbsp;b</span> <span class="U2">efore&nbsp;oper</span> <span class="U2">ational&nbsp;sy</span> <span class="U2">nc&nbsp;is&nbsp;comp</span> <span class="U2">lete.'</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">386</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is_s</span> <span class="U2">ynced&nbsp;=&nbsp;fa</span> <span class="U2">lse</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">387</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;can_</span> <span class="U2">be_sync&nbsp;=&nbsp;</span> <span class="U2">false</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">388</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;elsif&nbsp;</span> <span class="U2">@response.</span> <span class="U2">code&nbsp;==&nbsp;20</span> <span class="U2">0</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">389</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is_s</span> <span class="U2">ynced&nbsp;=&nbsp;ch</span> <span class="U2">eck_uncomp</span> <span class="U2">eleted_syn</span> <span class="U2">c</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">390</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="C2 ln-no" style="text-align: right;">391</td>  
     <td class="nbgC2"><span class="I2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">p&nbsp;'This&nbsp;se</span> <span class="U2">ems&nbsp;to&nbsp;be&nbsp;</span> <span class="U2">like&nbsp;an&nbsp;er</span> <span class="U2">ror&nbsp;connec</span> <span class="U2">ting&nbsp;to&nbsp;ht</span> <span class="U2">tps://</span> <span class="C2">IP&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">/admin/syn</span> <span class="U2">c/#{pid}'</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">392</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is_s</span> <span class="U2">ynced&nbsp;=&nbsp;fa</span> <span class="U2">lse</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">393</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;can_</span> <span class="U2">be_sync&nbsp;=&nbsp;</span> <span class="U2">false</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">394</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">395</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;rescue&nbsp;T</span> <span class="U2">imeout::Er</span> <span class="U2">ror</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">396</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"Syn</span> <span class="U2">c&nbsp;timed&nbsp;ou</span> <span class="U2">t"</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">397</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">398</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;i</span> <span class="U2">s_synced,&nbsp;</span> <span class="U2">can_be_syn</span> <span class="U2">c</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">399</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">400</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">401</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">def&nbsp;check_</span> <span class="U2">uncompelet</span> <span class="U2">ed_sync</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">402</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;json&nbsp;=&nbsp;J</span> <span class="U2">SON.parse(</span> <span class="U2">@response.</span> <span class="U2">body)</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="C2 ln-no" style="text-align: right;">403</td>  
     <td class="nbgC2"><span class="I2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">&nbsp;</span> <span class="U2">sync_compl</span> <span class="U2">ete&nbsp;=&nbsp;json</span> <span class="U2">["data"]["</span> <span class="U2">items"][0]</span> <span class="U2">["syncStat</span> <span class="U2">usByVistaS</span> <span class="U2">ystemId"][</span> <span class="U2">"</span> <span class="C2">SIT</span> <span class="U2">E</span> <span class="R2"> 
       <div class="IP"> 
       </div> </span> <span class="U2">"]["syncCo</span> <span class="U2">mplete"]</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">404</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;sync_</span> <span class="U2">complete</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">405</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"ope</span> <span class="U2">rational&nbsp;d</span> <span class="U2">ata&nbsp;has&nbsp;be</span> <span class="U2">en&nbsp;synced"</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">406</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;is_syn</span> <span class="U2">ced&nbsp;=&nbsp;true</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">407</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;else</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">408</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;"ope</span> <span class="U2">rational&nbsp;d</span> <span class="U2">ata&nbsp;not&nbsp;sy</span> <span class="U2">nced&nbsp;yet."</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">409</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;is_syn</span> <span class="U2">ced&nbsp;=&nbsp;fals</span> <span class="U2">e</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">410</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;end</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">411</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;i</span> <span class="U2">s_synced</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">412</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">end</span> </td> 
    </tr> 
   </tbody>
  </table> 
  <p class="copyright" style="margin-top: 25px; padding-top: 2px; border-top: solid #a0a0a0 1px; max-width: none;">Araxis Merge (but not the data content of this report) is Copyright Â© 1993-2016 Araxis Ltd (<a href="http://www.araxis.com/" title="Link to the Araxis corporate web site">www.araxis.com</a>). All rights reserved.</p>   
 </body>
</html>