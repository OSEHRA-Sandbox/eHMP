apply plugin: 'gwt'
apply plugin: 'war'
apply plugin: 'eclipse'
apply plugin: 'jetty'
apply plugin: 'java'

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'de.richsource.gradle.plugins:gwt-gradle-plugin:0.6'
    }
}

group = 'us.vistacore.cdsdashboard'
description = """cds-dashboard"""
sourceCompatibility = property('javaVersion')
targetCompatibility = property('targetJavaVersion')

repositories {
     maven { url "https://nexus.osehra.org:8444/nexus/content/repositories/public" }
}
dependencies {
    compile project(':production:cdsdashboard:cds-dashboard-client')
    compile project(':production:cdsdashboard:cds-dashboard-model')
    compile project(':production:cdsutils')

    compile group: 'org.springframework', name: 'spring-web', version: property('springVersion')
    compile group: 'org.springframework.security', name: 'spring-security-core', version: property('springSecurityVersion')
    compile group: 'com.google.gwt', name: 'gwt-dev', version: property('gwtVersion')
    compile group: 'com.google.gwt', name: 'gwt-codeserver', version: property('gwtVersion')
    runtime group: 'com.google.gwt', name: 'gwt-servlet', version: property('gwtVersion')
    compile group: 'com.google.gwt', name: 'gwt-user', version: property('gwtVersion')
    compile group: 'com.googlecode.gwt-charts', name: 'gwt-charts', version:'0.9.10'
    compile group: 'junit', name: 'junit', version: property('junitVersion')
    compile group: 'org.apache.logging.log4j', name: 'log4j-api', version: property('log4jVersion')
	compile group: 'org.apache.logging.log4j', name: 'log4j-core', version: property('log4jVersion')
	compile group: 'org.apache.logging.log4j', name: 'log4j-slf4j-impl', version: property('log4jVersion')
	compile group: 'org.apache.logging.log4j', name: 'log4j-web', version: property('log4jVersion')
}

compileJava {
	options.incremental=true
}

    
gwt {
    modules 'com.cognitivemedicine.metricsdashboard.Md_sandbox'
	gwtVersion="2.7.0"
    minHeapSize="512M"
    maxHeapSize="1024M"
    
    superDev {
    	noPrecompile=true
    }
    
    eclipse{
    	addGwtContainer=false
    }
}

war {
	rootSpec.exclude('**/log4j2.xml')
	rootSpec.exclude('**/logging.properties')
	rootSpec.exclude('**/cds-dashboard.properties')
}
