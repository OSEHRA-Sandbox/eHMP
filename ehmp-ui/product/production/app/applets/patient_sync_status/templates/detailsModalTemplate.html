<div id="syncStatusModal" class="row">
  <div id="source-list-panel" class="source-list-panel col-xs-3">
    <h5>Source</h5>
    <ul id="syncSourceSites">
    {{#if mySite}}
      <li data-source="mySite" class="{{#compare selectedSource.sourceName 'mySite'}}selected{{/compare}}">
        <div>
          {{#compare mySite.status 'completed'}}
              {{#if mySite.newDataSince}}
                <i class="fa fa-refresh"></i>
              {{else}}
                <i class="fa fa-check-circle"></i>
              {{/if}}
          {{/compare}}
          {{#compare mySite.status 'inProgress'}}
              <i class="fa fa-spinner fa-spin"></i>
          {{/compare}}
          {{#compare mySite.status 'needsRefresh'}}
              <i class="fa fa-clock-o color-primary"></i>
          {{/compare}}
          {{#compare mySite.status 'error'}}
              <i class="fa fa-exclamation-circle"></i>
          {{/compare}}
          <button class="btn btn-link" type="button">My Site
            <span class="sr-only">New data since {{#if mySite.newDataSince}} {{mySite.newDataSince}} {{else}} Current {{/if}}</span>
          </button>
          <p class="source-sync-details">
          {{#compare mySite.status 'completed'}}
              {{#if mySite.newDataSince}}
                <div>New data is loading</div>
               {{else}}
                <div>No new data since last upload</div>
              {{/if}}
          {{/compare}}
          {{#compare mySite.status 'inProgress'}}
               <div>New data is loading</div>
          {{/compare}}
          {{#compare mySite.status 'error'}}
              <div>Error loading new data.  Report this error to your IT support</div>
          {{/compare}}</p>
        </div>
      </li>
    {{/if}}
    {{#if allVa}}
     <li data-source="allVa" class="{{#compare selectedSource.sourceName 'allVa'}}selected{{/compare}}">
        <div>
          {{#compare allVa.status 'completed'}}
              {{#if allVa.newDataSince}}
                <i class="fa fa-clock-o color-primary"></i>
              {{else}}
                <i class="fa fa-check-circle"></i>
              {{/if}}
          {{/compare}}
          {{#compare allVa.status 'inProgress'}}
              <i class="fa fa-spinner fa-spin"></i>
          {{/compare}}
          {{#compare allVa.status 'needsRefresh'}}
              <i class="fa fa-clock-o color-primary"></i>
          {{/compare}}
          {{#compare allVa.status 'error'}}
              <i class="fa fa-exclamation-circle"></i>
          {{/compare}}
          <button class="btn btn-link" type="button">
            <span aria-hidden="true">All VA</span>
            <div class="sr-only">All V A</div>
            <div class="sr-only">{{#if allVa.mostRecentTime}} Last refresh {{allVa.mostRecentTime}} {{#if allVa.leastRecentTime}} - {{allVa.leastRecentTime}}{{/if}} ago{{/if}}</div>
            <div class="sr-only">New data since {{#if allVa.newDataSince}} {{allVa.newDataSince}} {{else}} Current {{/if}}</div>
          </button>
          <p class="source-sync-details">
            {{#compare allVa.status 'completed'}}
                {{#if allVa.newDataSince}}
                  <div>New data is loading</div>
                 {{else}}
                  <div>No new data since last upload</div>
                  <div>{{#if allVa.mostRecentTime}}{{allVa.mostRecentTime}} ago{{/if}}</div>
                {{/if}}
            {{/compare}}
            {{#compare allVa.status 'inProgress'}}
                 <div>Data is loading</div>
            {{/compare}}
            {{#compare allVa.status 'error'}}
                <div>Error loading data.  Report this error to your IT support</div>
            {{/compare}}
          </p>
         </div>
      </li>
    {{/if}}
    {{#if dod}}
      <li data-source="dod" class="{{#compare selectedSource.sourceName 'dod'}}selected{{/compare}}">
        <div>
          {{#compare dod.status 'completed'}}
              <i class="fa fa-check-circle"></i>
          {{/compare}}
          {{#compare dod.status 'inProgress'}}
              <i class="fa fa-spinner fa-spin"></i>
          {{/compare}}
          {{#compare dod.status 'error'}}
              <i class="fa fa-exclamation-circle"></i>
          {{/compare}}
          <button class="btn btn-link" type="button">
            <span aria-hidden="true">DoD</span>
            <div class="sr-only">D O D</div>
            <div class="sr-only">Last refresh {{#if dod.mostRecentTime}}{{dod.mostRecentTime}} ago{{/if}}<div>
          </button>
          <p class="source-sync-details">
            {{#compare dod.status 'completed'}}
                {{#if dod.newDataSince}}
                  <div>New data is loading</div>
                 {{else}}
                  <div>No new data since last upload</div>
                  <div>{{#if dod.mostRecentTime}}{{dod.mostRecentTime}} ago{{/if}}</div>
                {{/if}}
            {{/compare}}
            {{#compare dod.status 'inProgress'}}
                 <div>New data is loading</div>
            {{/compare}}
            {{#compare dod.status 'error'}}
                <div>Error loading new data.  Report this error to your IT support</div>
            {{/compare}}
          <p>
        </div>
      </li>
    {{/if}}
    {{#if communities}}
      <li data-source="communities" class="{{#compare selectedSource.sourceName 'communities'}}selected{{/compare}}">
        <div>
          {{#compare communities.status 'completed'}}
              <i class="fa fa-check-circle"></i>
          {{/compare}}
          {{#compare communities.status 'inProgress'}}
              <i class="fa fa-spinner fa-spin"></i>
          {{/compare}}
          {{#compare communities.status 'error'}}
              <i class="fa fa-exclamation-circle"></i>
          {{/compare}}
          <button class="btn btn-link" type="button">Communities
            <span class="sr-only">Last refresh {{#if communities.mostRecentTime}}{{communities.mostRecentTime}} ago{{/if}}</span>
          </button>
          <p class="source-sync-details">
            {{#compare communities.status 'completed'}}
                {{#if communities.newDataSince}}
                  <div>New data is loading</div>
                 {{else}}
                  <div>No new data since last upload</div>
                  <div>{{#if communities.mostRecentTime}}{{communities.mostRecentTime}} ago{{/if}}</div>
                {{/if}}
            {{/compare}}
            {{#compare communities.status 'inProgress'}}
                 <div>New data is loading</div>
            {{/compare}}
            {{#compare communities.status 'error'}}
                <div>Error loading new data.  Report this error to your IT support</div>
            {{/compare}}
          </p>
        </div>
      </li>
    {{/if}}
    </ul>
  </div>
  <div id="sync-site-detail" class="sync-site-detail col-xs-9" tabindex="0">
    <div id="forceSiteSyncStatus" class="row">
      {{#if msgSuccessfulSync}}
        <p id="forceSiteSyncStatus-success" class="bg-danger"><strong>{{currentDateTime}} - Refresh was successful</strong><button id="msg-successful-sync" type="button" class="btn close" aria-label="Close"><span aria-hidden="true">&times;</span></button></p>
      {{/if}}
      {{#if msgFailedSync}}
        <p id="forceSiteSyncStatus-error" class="bg-danger"><strong>{{currentDateTime}} - Error detected during sync</strong><button id="msg-failed-sync" type="button" class="btn close" aria-label="Close"><span aria-hidden="true">&times;</span></button></p>
      {{/if}}
    </div>
    <div id="sync-site-detail-header" class="sync-site-detail-header row">
      <h4 class="col-xs-4">{{selectedSource.sourceDisplayName}}</h4>
<!--       <button type="button" class="force-source-sync btn btn-primary" id="force-source-sync"
      {{#compare forceSyncStatus 'inProgress'}}
         disabled="disabled"><span><i class="fa fa-spinner fa-spin"></i> Refreshing</span>
      {{/compare}}
      {{#compare forceSyncStatus 'completed'}}
        >Refresh {{selectedSource.sourceDisplayName}}
      {{/compare}}
      </button> -->
    </div>
    <table>
      <caption class="sr-only">{{selectedSource.sourceDisplayName}} data sites</caption>
      <thead>
        <tr>
          {{#compare selectedSource.sourceName 'allVa'}}
          <th scope="col" class="sortable renderable site" data-header-instanceid="sync-detail-header-site" aria-sort="{{#compare sortColumn 'siteDisplayName'}}{{#compare sortOrder 'asc'}}ascending{{/compare}}{{#compare sortOrder 'desc'}}descending{{/compare}}{{/compare}}">
            <a href="#" role="button" sortable="true" sorttype="alphabetical" sortdirection="none" class="color-grey-darkest">Site
            {{#compare sortColumn 'siteDisplayName'}}
              {{#compare sortOrder 'asc'}}
                <i class="fa fa-caret-up"></i>
              {{/compare}}
              {{#compare sortOrder 'desc'}}
                <i class="fa fa-caret-down"></i>
              {{/compare}}
            {{/compare}}
              <div class="sr-only">Sortable column</div>
           </a>
          </th>
          {{/compare}}
          <th scope="col" class="sortable renderable domain" data-header-instanceid="sync-detail-header-domain" aria-sort="{{#compare sortColumn 'domainDisplayName'}}{{#compare sortOrder 'asc'}}ascending{{/compare}}{{#compare sortOrder 'desc'}}descending{{/compare}}{{/compare}}">
            <a href="#" role="button" sortable="true" sorttype="alphabetical" sortdirection="none" class="color-grey-darkest">Domain
            {{#compare sortColumn 'domainDisplayName'}}
              {{#compare sortOrder 'asc'}}
                <i class="fa fa-caret-up"></i>
              {{/compare}}
              {{#compare sortOrder 'desc'}}
                <i class="fa fa-caret-down"></i>
              {{/compare}}
            {{/compare}}
              <div class="sr-only">Sortable column</div>
            </a>
          </th>
          <th scope="col" class="sortable renderable last-synced" data-header-instanceid="sync-detail-header-last-synced" aria-sort="{{#compare sortColumn 'stampTime'}}{{#compare sortOrder 'asc'}}ascending{{/compare}}{{#compare sortOrder 'desc'}}descending{{/compare}}{{/compare}}">
            <a href="#" role="button" sortable="true" sorttype="alphabetical" sortdirection="none" class="color-grey-darkest">Last Refresh
            {{#compare sortColumn 'stampTime'}}
              {{#compare sortOrder 'asc'}}
                <i class="fa fa-caret-up"></i>
              {{/compare}}
              {{#compare sortOrder 'desc'}}
                <i class="fa fa-caret-down"></i>
              {{/compare}}
            {{/compare}}
              <div class="sr-only">Sortable column</div>
            </a>
          </th>
          {{#compare selectedSource.sourceType 'primary'}}
          <th scope="col" class="sortable renderable new-data-since" data-header-instanceid="sync-detail-header-new-data-since" aria-sort="{{#compare sortColumn 'newDataSince'}}{{#compare sortOrder 'asc'}}ascending{{/compare}}{{#compare sortOrder 'desc'}}descending{{/compare}}{{/compare}}">
            <a href="#" role="button" sortable="true" sorttype="alphabetical" sortdirection="none" class="color-grey-darkest">New Data Since
            {{#compare sortColumn 'newDataSince'}}
              {{#compare sortOrder 'asc'}}
                <i class="fa fa-caret-up"></i>
              {{/compare}}
              {{#compare sortOrder 'desc'}}
                <i class="fa fa-caret-down"></i>
              {{/compare}}
            {{/compare}}
              <div class="sr-only">Sortable column</div>
            </a>
          </th>
          {{/compare}}
        </tr>
      </thead>
      <tbody>
      {{#each selectedSource.allDomains}}
          <tr>
            {{#compare ../selectedSource.sourceName 'allVa'}}
              <td class="handlebars-cell sortable renderable">{{this.siteDisplayName}}</td>
            {{/compare}}
            <td class="handlebars-cell sortable renderable">{{this.domainDisplayName}}</td>
            <td class="handlebars-cell sortable renderable">
              {{#compare this.status 'completed'}}
                {{#compare this.siteType 'secondary'}}
                  {{this.displayTime}} ago
                {{/compare}}
                {{#compare this.siteType 'primary'}}
                  Current
                {{/compare}}
              {{/compare}}
              {{#compare this.status 'inProgress'}}
                <span><i class="fa fa-spinner fa-spin"></i> Refreshing</span>
              {{/compare}}
              {{#compare this.status 'error'}}
                  <span class="sync-failed-text"><i class="fa fa-exclamation-circle"></i> Refresh failed</span>
              {{/compare}}
            </td>
            {{#compare ../selectedSource.sourceType 'primary'}}
              <td class="handlebars-cell sortable renderable">{{#if this.newDataSince}}{{this.displayNewDataSince}}{{else}}Current{{/if}}</td>
            {{/compare}}
          </tr>
      {{/each}}
      </tbody>
    </table>
  </div>
</div>