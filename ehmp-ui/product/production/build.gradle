buildscript {
  repositories {
      jcenter()
      maven { url 'http://dl.bintray.com/robfletcher/gradle-plugins' }
  }
  dependencies {
      classpath 'com.moowork.gradle:gradle-grunt-plugin:0.5'
  }
}

apply plugin: 'grunt'

task installNpm (type: Exec) {
  commandLine "npm", "install"
  workingDir "."
}

task optimizeAppletCss(dependsOn: [installNpm, grunt_optimize]){
  group "Optimize"
  description "Minify and concatenate applet CSS files"
}

task test(dependsOn: [installNpm, grunt_test]) {
  group "Test"
  description "Run test on the applets"
}

task build {}
build.dependsOn optimizeAppletCss
test.dependsOn build
grunt_optimize.mustRunAfter installNpm

