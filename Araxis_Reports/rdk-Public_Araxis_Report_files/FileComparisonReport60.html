<!--?xml version="1.0"?--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:mg="http://www.araxis.com/2002/Merge/Reporting" xmlns="http://www.w3.org/1999/xhtml">
 <head> 
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> 
  <!--The layout and design of this report is Copyright Â© 2003-2016 Araxis Ltd. All rights reserved.--> 
  <!--The copyright of the data content of this report belongs to the relevant copyright holders.--> 
  <title>60. EPMO Open Source Coordination Office Redaction File Detail Report</title> 
  <style type="text/css">
body { background: #fff;  color: #000; margin: 0px 14px 14px 14px; }
h1, h2, h3, h4, h5 {
  padding: 0em;
  margin: 1.5em 0em .25em 0em;
  text-align: left;
  font-weight: normal;
  font-family: Arial, Helvetica, sans-serif;
  font-size: 70%;
  max-width: 55em;
}
body, h4, h5, p, ol, ul, li, td, th { font-family: Verdana, Arial, Helvetica, sans-serif; text-align: left; }

h4, h5, p, ol, ul, li { font-size: 70%; }
input {
  font-family: Arial, Helvetica, sans-serif;
  font-size: 120%;
}

h1 { margin: 14px 0em 1.2em 0em; font-size: 112%; line-height: 130%;}
h2 { font-size: 125%; line-height: 84%;}
h3 { margin-top: 1.4em; font-size: 81%; }
h4 { margin-top: 1em; font-size: 70%; }
h5 { margin-top: 1em; font-size: 100%; font-style: italic;}
h1 strong, h2 strong, h3 strong, h4 strong { font-weight: bold; }

p { margin: 6px 0em 6px 0em; max-width: 55em;}
p.code, code {}
p { font-size: 70%; line-height: 125%; }
table { font-size: 70%;}

p.copyright, .small { font-size: 60%; line-height: 120%; }
p.copyright { margin: 3px 0px 0px 0px; padding: 0px; text-align: left; }
acronym { font-variant: small-caps; }
div.pad { padding: 3px; }
span.lineEndings { color: red; font-size: 70%; }

table.mgRowGroup, table.mgRowGroupFolder { border: 1px solid #a0a0a0; margin: 10px 0px 10px 0px; width: 100%; table-layout: fixed; border-collapse: collapse; }
table.mgRowGroup td { vertical-align: top; padding: 0; }
table.mgRowGroupFolder td { vertical-align: top; padding: 1px 0 1px 0; }
div.IP { width: 2px; height: 1em; float: left; }

img.mgFldrIcon {float: left; text-align: left; margin: -1px 2px 0px 0px;  height: 16px; width: 16px; border: none; vertical-align: top; background-color: transparent;}
div.mgFldrIcon {float: left; width: auto;}
span.left {float: left;width: auto;}
span.right {float: right;width: auto;}

table.bordered { border-collapse: collapse; border: 1px solid #a0a0a0; margin: 10px 0px 10px 0px;}
table.bordered th, table.bordered td { vertical-align: top; padding: 3px; border: 1px solid #a0a0a0;}
table.bordered th { background-color: #e5e5e5; }
table.bordered td.group { background-color: #f5f5f5; }
span.disabledNavigation { color: #a0a0a0; }
div.navigation { margin-top: 14px; font-size: 70%; }
div.comment { font-weight: normal; color: #000; font-family: Verdana, Arial, Helvetica, sans-serif; background-color: #fcfed8; padding: 2px 5px 2px 5px; border: 1px solid #E3E5C3; margin: 1px 2px 3px 2px; -moz-border-radius: 7px; border-radius: 7px; }

                span.U1, span.U1 a {float: left; width: auto;color: #000000; background-color: #FFFFFF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.U1 a {text-decoration: underline;}
td.U1 {color: #000000; background-color: #FFFFFF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.R1, span.R1 a {float: left; width: auto;color: #800000; background-color: #F3E6D8; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.R1 a {text-decoration: underline;}
td.R1 {color: #800000; background-color: #F3E6D8; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.I1, span.I1 a {float: left; width: auto;color: #800000; background-color: #D1E8CF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.I1 a {text-decoration: underline;}
td.I1 {color: #800000; background-color: #D1E8CF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.C1, span.C1 a {float: left; width: auto;color: #800000; background-color: #DACDE6; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.C1 a {text-decoration: underline;}
td.C1 {color: #800000; background-color: #DACDE6; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
td.nbgC1 {color: #800000; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; background-color: #FFFFFF; }
span.U2, span.U2 a {float: left; width: auto;color: #000000; background-color: #FFFFFF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.U2 a {text-decoration: underline;}
td.U2 {color: #000000; background-color: #FFFFFF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.R2, span.R2 a {float: left; width: auto;color: #800000; background-color: #F3E6D8; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.R2 a {text-decoration: underline;}
td.R2 {color: #800000; background-color: #F3E6D8; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.I2, span.I2 a {float: left; width: auto;color: #800000; background-color: #D1E8CF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.I2 a {text-decoration: underline;}
td.I2 {color: #800000; background-color: #D1E8CF; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.C2, span.C2 a {float: left; width: auto;color: #800000; background-color: #DACDE6; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
span.C2 a {text-decoration: underline;}
td.C2 {color: #800000; background-color: #DACDE6; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; }
td.nbgC2 {color: #800000; font-family: "Consolas"; font-weight: normal; font-style: normal; font-size: 9pt; text-decoration: none; background-color: #FFFFFF; }

span.selected {background-color: #3d80df; color: #fff;}
span.selected a {background-color: #3d80df; color: #fff; text-decoration: underline;}
span.symbol {cursor: pointer;}
      </style> 
 </head> 
 <body> 
  <h1><strong>60. EPMO Open Source Coordination Office Redaction File Detail Report</strong></h1> 
  <p>Produced by <strong>Araxis Merge</strong> on <strong>5/26/2017 2:13:05 PM Central Daylight Time</strong>. See <a href="http://www.araxis.com/" title="Link to the Araxis corporate web site">www.araxis.com</a> for information about Merge. This report uses XHTML and CSS2, and is best viewed with a modern standards-compliant browser. For optimum results when printing this report, use landscape orientation and enable printing of background images and colours in your browser.</p> 
  <h3><strong>60.1&nbsp;Files compared</strong></h3> 
  <table class="bordered"> 
   <tbody>
    <tr> 
     <th>#</th> 
     <th>Location</th> 
     <th>File</th> 
     <th>Last Modified</th> 
    </tr> 
    <tr> 
     <td>1</td> 
     <td>rdk.zip\rdk\product\production\rdk\src\resources\patient-search</td> 
     <td>patient-search-util.js</td> 
     <td>Wed Apr 19 15:22:50 2017 UTC</td> 
    </tr> 
    <tr> 
     <td>2</td> 
     <td>rdk.zip\rdk\product\production\rdk\src\resources\patient-search</td> 
     <td>patient-search-util.js</td> 
     <td>Fri May 26 13:43:22 2017 UTC</td> 
    </tr> 
   </tbody>
  </table> 
  <h3><strong>60.2&nbsp;Comparison summary</strong></h3> 
  <table class="bordered"> 
   <tbody>
    <tr> 
     <th rowspan="2" style="vertical-align: bottom;">Description</th> 
     <th colspan="2">Between<br>Files 1 and 2</th> 
    </tr> 
    <tr> 
     <th style="text-align: right;">Text Blocks</th> 
     <th style="text-align: right;">Lines</th> 
    </tr> 
    <tr> 
     <td>Unchanged</td> 
     <td style="text-align: right;">2</td> 
     <td style="text-align: right;">1278</td> 
    </tr> 
    <tr> 
     <td>Changed</td> 
     <td style="text-align: right;">1</td> 
     <td style="text-align: right;">2</td> 
    </tr> 
    <tr> 
     <td>Inserted</td> 
     <td style="text-align: right;">0</td> 
     <td style="text-align: right;">0</td> 
    </tr> 
    <tr> 
     <td>Removed</td> 
     <td style="text-align: right;">0</td> 
     <td style="text-align: right;">0</td> 
    </tr> 
   </tbody>
  </table> 
  <h3><strong>60.3&nbsp;Comparison options</strong></h3> 
  <table class="bordered" style="width: 55em;"> 
   <tbody>
    <tr> 
     <th>Whitespace</th> 
     <td></td> 
    </tr> 
    <tr> 
     <th>Character case</th> 
     <td>Differences in character case are significant</td> 
    </tr> 
    <tr> 
     <th>Line endings</th> 
     <td>Differences in line endings (<code>CR</code> and <code>LF</code> characters) are ignored</td> 
    </tr> 
    <tr> 
     <th>CR/LF characters</th> 
     <td>Not shown in the comparison detail</td> 
    </tr> 
   </tbody>
  </table> 
  <h3><strong>60.4&nbsp;Active regular expressions</strong></h3> 
  <p>No regular expressions were active.</p> 
  <h3><strong>60.5&nbsp;Comparison detail</strong></h3> 
  <table class="mgRowGroup"> 
   <colgroup>
    <col style="width: 5em;"> 
    <col style="width: 1em;"> 
    <col width="*"> 
    <col style="width: 1em;"> 
    <col style="width: 5em;"> 
    <col style="width: 1em;"> 
    <col width="*"> 
   </colgroup>
   <tbody>
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">1</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">'use&nbsp;stric</span> <span class="U2">t';</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">2</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">3</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;rdk&nbsp;=&nbsp;</span> <span class="U2">require('.</span> <span class="U2">./../core/</span> <span class="U2">rdk');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">4</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;httpUt</span> <span class="U2">il&nbsp;=&nbsp;rdk.u</span> <span class="U2">tils.http;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">5</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;_&nbsp;=&nbsp;re</span> <span class="U2">quire('lod</span> <span class="U2">ash');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">6</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;nullCh</span> <span class="U2">ecker&nbsp;=&nbsp;rd</span> <span class="U2">k.utils.nu</span> <span class="U2">llchecker;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">7</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;async&nbsp;</span> <span class="U2">=&nbsp;require(</span> <span class="U2">'async');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">8</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;search</span> <span class="U2">Jds&nbsp;=&nbsp;requ</span> <span class="U2">ire('./sea</span> <span class="U2">rch-jds');</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">9</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;S&nbsp;=&nbsp;re</span> <span class="U2">quire('str</span> <span class="U2">ing');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">10</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;sensit</span> <span class="U2">ivityUtils</span> <span class="U2">&nbsp;=&nbsp;rdk.uti</span> <span class="U2">ls.sensiti</span> <span class="U2">vity;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">11</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;search</span> <span class="U2">Util&nbsp;=&nbsp;req</span> <span class="U2">uire('./re</span> <span class="U2">sults-pars</span> <span class="U2">er');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">12</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;hmpPat</span> <span class="U2">ientSelect</span> <span class="U2">&nbsp;=&nbsp;require</span> <span class="U2">('./hmp-pa</span> <span class="U2">tient-sele</span> <span class="U2">ct');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">13</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;NO_HMP</span> <span class="U2">_SELECT_RP</span> <span class="U2">C_ERR_REGE</span> <span class="U2">X&nbsp;=&nbsp;/^Vist</span> <span class="U2">A&nbsp;SECURITY</span> <span class="U2">&nbsp;error(.*)</span> <span class="U2">$/i;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">14</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;COMMA_</span> <span class="U2">REGEX&nbsp;=&nbsp;/,</span> <span class="U2">+/gi;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">15</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;NAME_S</span> <span class="U2">EARCH_TYPE</span> <span class="U2">&nbsp;=&nbsp;'NAME';</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">16</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;LAST5_</span> <span class="U2">SEARCH_TYP</span> <span class="U2">E&nbsp;=&nbsp;'LAST5</span> <span class="U2">';</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">17</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;PID_SE</span> <span class="U2">ARCH_TYPE&nbsp;</span> <span class="U2">=&nbsp;'PID';</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">18</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;JDSPat</span> <span class="U2">ientAttrib</span> <span class="U2">uteWhiteli</span> <span class="U2">st&nbsp;=&nbsp;['bir</span> <span class="U2">thDate',&nbsp;'</span> <span class="U2">displayNam</span> <span class="U2">e',&nbsp;'famil</span> <span class="U2">yName',&nbsp;'f</span> <span class="U2">ullName',&nbsp;</span> <span class="U2">'genderCod</span> <span class="U2">e',&nbsp;'gende</span> <span class="U2">rName',&nbsp;'g</span> <span class="U2">ivenNames'</span> <span class="U2">,&nbsp;'icn',&nbsp;'</span> <span class="U2">last5',&nbsp;'l</span> <span class="U2">ocalId',&nbsp;'</span> <span class="U2">pid',&nbsp;'roo</span> <span class="U2">mBed',&nbsp;'se</span> <span class="U2">nsitive',&nbsp;</span> <span class="U2">'ssn',&nbsp;'su</span> <span class="U2">mmary'];</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">19</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">20</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">/**</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">21</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">22</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;Retriev</span> <span class="U2">es&nbsp;patient</span> <span class="U2">&nbsp;informati</span> <span class="U2">on&nbsp;from&nbsp;Vi</span> <span class="U2">stA&nbsp;and/or</span> <span class="U2">&nbsp;JDS.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">23</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">24</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">{Object}&nbsp;r</span> <span class="U2">eq&nbsp;-&nbsp;The&nbsp;r</span> <span class="U2">equest&nbsp;obj</span> <span class="U2">ect.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">25</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">{string}&nbsp;l</span> <span class="U2">ogMessageP</span> <span class="U2">refix&nbsp;-&nbsp;Us</span> <span class="U2">ed&nbsp;when&nbsp;lo</span> <span class="U2">gging&nbsp;mess</span> <span class="U2">ages&nbsp;to&nbsp;sh</span> <span class="U2">ow&nbsp;who&nbsp;is&nbsp;</span> <span class="U2">calling&nbsp;th</span> <span class="U2">is&nbsp;-&nbsp;usefu</span> <span class="U2">l&nbsp;for&nbsp;debu</span> <span class="U2">gging.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">26</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">{Object}&nbsp;j</span> <span class="U2">dsServer&nbsp;-</span> <span class="U2">&nbsp;Connectiv</span> <span class="U2">ity&nbsp;inform</span> <span class="U2">ation&nbsp;for&nbsp;</span> <span class="U2">JDS.&nbsp;Pulle</span> <span class="U2">d&nbsp;from&nbsp;req</span> <span class="U2">.app.confi</span> <span class="U2">g.jdsServe</span> <span class="U2">r</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">27</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">{Object}&nbsp;s</span> <span class="U2">earchOptio</span> <span class="U2">ns&nbsp;-&nbsp;The&nbsp;s</span> <span class="U2">earch&nbsp;opti</span> <span class="U2">ons&nbsp;for&nbsp;th</span> <span class="U2">e&nbsp;patient&nbsp;</span> <span class="U2">search&nbsp;que</span> <span class="U2">ry.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">28</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">{string}&nbsp;s</span> <span class="U2">earchOptio</span> <span class="U2">ns.site&nbsp;-&nbsp;</span> <span class="U2">The&nbsp;site&nbsp;t</span> <span class="U2">o&nbsp;search&nbsp;f</span> <span class="U2">or&nbsp;patient</span> <span class="U2">s&nbsp;on.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">29</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">{string}&nbsp;s</span> <span class="U2">earchOptio</span> <span class="U2">ns.searchT</span> <span class="U2">ype&nbsp;-&nbsp;The&nbsp;</span> <span class="U2">type&nbsp;of&nbsp;se</span> <span class="U2">arch&nbsp;to&nbsp;pe</span> <span class="U2">rform.&nbsp;Can</span> <span class="U2">&nbsp;be&nbsp;ICN,&nbsp;P</span> <span class="U2">ID,&nbsp;LAST5,</span> <span class="U2">&nbsp;or&nbsp;NAME.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">30</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">{string}&nbsp;s</span> <span class="U2">earchOptio</span> <span class="U2">ns.searchS</span> <span class="U2">tring&nbsp;-&nbsp;Th</span> <span class="U2">e&nbsp;string&nbsp;t</span> <span class="U2">o&nbsp;search&nbsp;o</span> <span class="U2">n.&nbsp;ICN&nbsp;for</span> <span class="U2">&nbsp;ICN&nbsp;searc</span> <span class="U2">h,&nbsp;PID&nbsp;for</span> <span class="U2">&nbsp;PID&nbsp;searc</span> <span class="U2">h,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">31</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;f</span> <span class="U2">irst&nbsp;lette</span> <span class="U2">r&nbsp;of&nbsp;last&nbsp;</span> <span class="U2">name&nbsp;+&nbsp;las</span> <span class="U2">t&nbsp;4&nbsp;of&nbsp;SSN</span> <span class="U2">&nbsp;for&nbsp;last5</span> <span class="U2">&nbsp;search,&nbsp;f</span> <span class="U2">ull&nbsp;or&nbsp;par</span> <span class="U2">tial&nbsp;name&nbsp;</span> <span class="U2">for&nbsp;name&nbsp;s</span> <span class="U2">earch.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">32</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">{function}</span> <span class="U2">&nbsp;callback&nbsp;</span> <span class="U2">-&nbsp;The&nbsp;func</span> <span class="U2">tion&nbsp;to&nbsp;ca</span> <span class="U2">ll&nbsp;when&nbsp;al</span> <span class="U2">l&nbsp;of&nbsp;the&nbsp;p</span> <span class="U2">atient&nbsp;dat</span> <span class="U2">a&nbsp;has&nbsp;been</span> <span class="U2">&nbsp;retrieved</span> <span class="U2">.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">33</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*/</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">34</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">module.exp</span> <span class="U2">orts.callP</span> <span class="U2">atientSear</span> <span class="U2">ch&nbsp;=&nbsp;funct</span> <span class="U2">ion(req,&nbsp;l</span> <span class="U2">ogMessageP</span> <span class="U2">refix,&nbsp;jds</span> <span class="U2">Server,&nbsp;se</span> <span class="U2">archOption</span> <span class="U2">s,&nbsp;callbac</span> <span class="U2">k)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">35</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;lo</span> <span class="U2">gger&nbsp;=&nbsp;req</span> <span class="U2">.logger;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">36</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;si</span> <span class="U2">te&nbsp;=&nbsp;searc</span> <span class="U2">hOptions.s</span> <span class="U2">ite;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">37</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">archType&nbsp;=</span> <span class="U2">&nbsp;searchOpt</span> <span class="U2">ions.searc</span> <span class="U2">hType;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">38</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">archString</span> <span class="U2">&nbsp;=&nbsp;searchO</span> <span class="U2">ptions.sea</span> <span class="U2">rchString;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">39</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(se</span> <span class="U2">archType&nbsp;=</span> <span class="U2">==&nbsp;'PID'&nbsp;&amp;</span> <span class="U2">&amp;&nbsp;!_.start</span> <span class="U2">sWith(sear</span> <span class="U2">chString,&nbsp;</span> <span class="U2">site&nbsp;+&nbsp;';'</span> <span class="U2">))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">40</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;callb</span> <span class="U2">ack(logMes</span> <span class="U2">sagePrefix</span> <span class="U2">&nbsp;+&nbsp;'&nbsp;site&nbsp;</span> <span class="U2">"'&nbsp;+&nbsp;site&nbsp;</span> <span class="U2">+&nbsp;'"&nbsp;doesn</span> <span class="U2">\'t&nbsp;match&nbsp;</span> <span class="U2">site&nbsp;in&nbsp;pi</span> <span class="U2">d&nbsp;"'&nbsp;+&nbsp;sea</span> <span class="U2">rchString&nbsp;</span> <span class="U2">+&nbsp;'"');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">41</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">42</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">nsitivePat</span> <span class="U2">ientAcknow</span> <span class="U2">leged&nbsp;=&nbsp;_.</span> <span class="U2">result(req</span> <span class="U2">,&nbsp;'query._</span> <span class="U2">ack')&nbsp;||&nbsp;_</span> <span class="U2">.result(re</span> <span class="U2">q,&nbsp;'params</span> <span class="U2">._ack')&nbsp;||</span> <span class="U2">&nbsp;_.result(</span> <span class="U2">req,&nbsp;'body</span> <span class="U2">._ack')&nbsp;||</span> <span class="U2">&nbsp;false;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">43</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ha</span> <span class="U2">sDGAccess&nbsp;</span> <span class="U2">=&nbsp;_.result</span> <span class="U2">(req,&nbsp;'ses</span> <span class="U2">sion.user.</span> <span class="U2">dgSensitiv</span> <span class="U2">eAccess',&nbsp;</span> <span class="U2">'false')&nbsp;=</span> <span class="U2">==&nbsp;'true';</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">44</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;LO</span> <span class="U2">G_MESSAGE_</span> <span class="U2">PREFIX&nbsp;=&nbsp;'</span> <span class="U2">patient-se</span> <span class="U2">arch-util.</span> <span class="U2">callPatien</span> <span class="U2">tSearch';</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">45</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!l</span> <span class="U2">ogMessageP</span> <span class="U2">refix)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">46</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gMessagePr</span> <span class="U2">efix&nbsp;=&nbsp;LOG</span> <span class="U2">_MESSAGE_P</span> <span class="U2">REFIX;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">47</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">48</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gMessagePr</span> <span class="U2">efix&nbsp;+=&nbsp;'.</span> <span class="U2">'&nbsp;+&nbsp;LOG_ME</span> <span class="U2">SSAGE_PREF</span> <span class="U2">IX;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">49</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">50</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ha</span> <span class="U2">sHmpPatien</span> <span class="U2">tSelectRpc</span> <span class="U2">&nbsp;=&nbsp;_.resul</span> <span class="U2">t(req,&nbsp;'ap</span> <span class="U2">p.config.v</span> <span class="U2">istaSites[</span> <span class="U2">'&nbsp;+&nbsp;site&nbsp;+</span> <span class="U2">&nbsp;'].hasHmp</span> <span class="U2">PatientSel</span> <span class="U2">ectRpc',&nbsp;n</span> <span class="U2">ull);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">51</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;logger</span> <span class="U2">.debug('%s</span> <span class="U2">&nbsp;beginning</span> <span class="U2">&nbsp;with&nbsp;hasH</span> <span class="U2">mpPatientS</span> <span class="U2">electRpc&nbsp;s</span> <span class="U2">et&nbsp;to&nbsp;%s',</span> <span class="U2">&nbsp;logMessag</span> <span class="U2">ePrefix,&nbsp;h</span> <span class="U2">asHmpPatie</span> <span class="U2">ntSelectRp</span> <span class="U2">c);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">52</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">53</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;If&nbsp;</span> <span class="U2">the&nbsp;site&nbsp;i</span> <span class="U2">s&nbsp;configur</span> <span class="U2">ed&nbsp;to&nbsp;have</span> <span class="U2">&nbsp;the&nbsp;HMP&nbsp;P</span> <span class="U2">ATIENT&nbsp;SEL</span> <span class="U2">ECT&nbsp;RPC,&nbsp;c</span> <span class="U2">all&nbsp;it&nbsp;to&nbsp;</span> <span class="U2">retrieve&nbsp;t</span> <span class="U2">he&nbsp;patient</span> <span class="U2">&nbsp;search&nbsp;re</span> <span class="U2">sults.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">54</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Oth</span> <span class="U2">erwise,&nbsp;ge</span> <span class="U2">t&nbsp;the&nbsp;pati</span> <span class="U2">ent&nbsp;search</span> <span class="U2">&nbsp;results&nbsp;f</span> <span class="U2">rom&nbsp;JDS.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">55</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(ha</span> <span class="U2">sHmpPatien</span> <span class="U2">tSelectRpc</span> <span class="U2">&nbsp;!==&nbsp;false</span> <span class="U2">)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">56</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.debug</span> <span class="U2">('%s&nbsp;perfo</span> <span class="U2">rming&nbsp;hmpP</span> <span class="U2">atientSele</span> <span class="U2">ct.fetch&nbsp;u</span> <span class="U2">sing&nbsp;site=</span> <span class="U2">%s&nbsp;&amp;search</span> <span class="U2">Type=%s&nbsp;&amp;s</span> <span class="U2">earchStrin</span> <span class="U2">g=%s',&nbsp;log</span> <span class="U2">MessagePre</span> <span class="U2">fix,&nbsp;site,</span> <span class="U2">&nbsp;searchTyp</span> <span class="U2">e,&nbsp;searchS</span> <span class="U2">tring);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">57</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hm</span> <span class="U2">pPatientSe</span> <span class="U2">lect.fetch</span> <span class="U2">(req,&nbsp;sear</span> <span class="U2">chOptions,</span> <span class="U2">&nbsp;site,&nbsp;fun</span> <span class="U2">ction(erro</span> <span class="U2">r,&nbsp;respons</span> <span class="U2">e)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">58</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;(erro</span> <span class="U2">r)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">59</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">60</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;I</span> <span class="U2">f&nbsp;we&nbsp;get&nbsp;t</span> <span class="U2">he&nbsp;securit</span> <span class="U2">y&nbsp;error&nbsp;fr</span> <span class="U2">om&nbsp;the&nbsp;HMP</span> <span class="U2">&nbsp;PATIENT&nbsp;S</span> <span class="U2">ELECT&nbsp;call</span> <span class="U2">&nbsp;we&nbsp;assume</span> <span class="U2">&nbsp;that&nbsp;the</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">61</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;R</span> <span class="U2">PC&nbsp;is&nbsp;not&nbsp;</span> <span class="U2">installed&nbsp;</span> <span class="U2">at&nbsp;the&nbsp;sit</span> <span class="U2">e&nbsp;and&nbsp;need</span> <span class="U2">&nbsp;to&nbsp;call&nbsp;p</span> <span class="U2">t-select&nbsp;f</span> <span class="U2">rom&nbsp;RC23&nbsp;f</span> <span class="U2">orward</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">62</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">63</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span> <span class="U2">error.matc</span> <span class="U2">h(NO_HMP_S</span> <span class="U2">ELECT_RPC_</span> <span class="U2">ERR_REGEX)</span> <span class="U2">)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">64</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">if&nbsp;(!_.isE</span> <span class="U2">mpty(_.res</span> <span class="U2">ult(req,&nbsp;'</span> <span class="U2">app.config</span> <span class="U2">.vistaSite</span> <span class="U2">s['&nbsp;+&nbsp;site</span> <span class="U2">&nbsp;+&nbsp;']',&nbsp;{}</span> <span class="U2">)))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">65</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//set&nbsp;</span> <span class="U2">the&nbsp;config</span> <span class="U2">&nbsp;to&nbsp;not&nbsp;ha</span> <span class="U2">ve&nbsp;hasHmpP</span> <span class="U2">atientSele</span> <span class="U2">ctRpc</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">66</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;req.ap</span> <span class="U2">p.config.v</span> <span class="U2">istaSites[</span> <span class="U2">site].hasH</span> <span class="U2">mpPatientS</span> <span class="U2">electRpc&nbsp;=</span> <span class="U2">&nbsp;false;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">67</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;logger</span> <span class="U2">.trace(req</span> <span class="U2">.app.confi</span> <span class="U2">g.vistaSit</span> <span class="U2">es[site]);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">68</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">69</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">logger.deb</span> <span class="U2">ug('%s&nbsp;per</span> <span class="U2">forming&nbsp;pt</span> <span class="U2">-select&nbsp;se</span> <span class="U2">arch&nbsp;after</span> <span class="U2">&nbsp;failed&nbsp;hm</span> <span class="U2">pPatientSe</span> <span class="U2">lect&nbsp;attem</span> <span class="U2">pt&nbsp;using&nbsp;s</span> <span class="U2">ite=%s&nbsp;&amp;se</span> <span class="U2">archType=%</span> <span class="U2">s&nbsp;&amp;searchS</span> <span class="U2">tring=%s',</span> <span class="U2">&nbsp;logMessag</span> <span class="U2">ePrefix,&nbsp;s</span> <span class="U2">ite,&nbsp;searc</span> <span class="U2">hType,&nbsp;sea</span> <span class="U2">rchString)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">70</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">return&nbsp;sea</span> <span class="U2">rchJds.get</span> <span class="U2">Patients(r</span> <span class="U2">eq,&nbsp;search</span> <span class="U2">Options,&nbsp;j</span> <span class="U2">dsServer,&nbsp;</span> <span class="U2">function(e</span> <span class="U2">rr,&nbsp;respon</span> <span class="U2">se)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">71</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;op</span> <span class="U2">tions&nbsp;=&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">72</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</span> <span class="U2">nalCB:&nbsp;cal</span> <span class="U2">lback,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">73</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ha</span> <span class="U2">sDGAccess:</span> <span class="U2">&nbsp;hasDGAcce</span> <span class="U2">ss,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">74</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">nsitivePat</span> <span class="U2">ientAcknow</span> <span class="U2">leged:&nbsp;sen</span> <span class="U2">sitivePati</span> <span class="U2">entAcknowl</span> <span class="U2">eged,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">75</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gMessagePr</span> <span class="U2">efix:&nbsp;logM</span> <span class="U2">essagePref</span> <span class="U2">ix</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">76</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">77</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;ptSele</span> <span class="U2">ctCB(err,&nbsp;</span> <span class="U2">response,&nbsp;</span> <span class="U2">logger,&nbsp;op</span> <span class="U2">tions);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">78</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">});</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">79</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">80</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logg</span> <span class="U2">er.error(l</span> <span class="U2">ogMessageP</span> <span class="U2">refix&nbsp;+&nbsp;'E</span> <span class="U2">rror&nbsp;perfo</span> <span class="U2">rming&nbsp;sear</span> <span class="U2">ch&nbsp;[%s]',&nbsp;</span> <span class="U2">(error.mes</span> <span class="U2">sage&nbsp;||&nbsp;er</span> <span class="U2">ror));</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">81</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erro</span> <span class="U2">r.message&nbsp;</span> <span class="U2">=&nbsp;'There&nbsp;w</span> <span class="U2">as&nbsp;an&nbsp;erro</span> <span class="U2">r&nbsp;processi</span> <span class="U2">ng&nbsp;your&nbsp;re</span> <span class="U2">quest.&nbsp;The</span> <span class="U2">&nbsp;error&nbsp;has</span> <span class="U2">&nbsp;been&nbsp;logg</span> <span class="U2">ed:&nbsp;';</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">82</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;callbac</span> <span class="U2">k(logMessa</span> <span class="U2">gePrefix&nbsp;+</span> <span class="U2">&nbsp;'&nbsp;'&nbsp;+&nbsp;err</span> <span class="U2">or);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">83</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">84</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">85</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;(resp</span> <span class="U2">onse.statu</span> <span class="U2">sCode&nbsp;&gt;=&nbsp;3</span> <span class="U2">00)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">86</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logg</span> <span class="U2">er.error(l</span> <span class="U2">ogMessageP</span> <span class="U2">refix&nbsp;+&nbsp;'r</span> <span class="U2">esponse.st</span> <span class="U2">atusCode&nbsp;[</span> <span class="U2">%s]',&nbsp;resp</span> <span class="U2">onse.statu</span> <span class="U2">sCode);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">87</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;callbac</span> <span class="U2">k({</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">88</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">status:&nbsp;re</span> <span class="U2">sponse.sta</span> <span class="U2">tusCode,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">89</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">message:&nbsp;r</span> <span class="U2">esponse</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">90</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">91</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">92</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;//&nbsp;If&nbsp;we</span> <span class="U2">'re&nbsp;doing&nbsp;</span> <span class="U2">a&nbsp;patient&nbsp;</span> <span class="U2">search&nbsp;(i.</span> <span class="U2">e.&nbsp;NAME&nbsp;or</span> <span class="U2">&nbsp;LAST5),&nbsp;t</span> <span class="U2">here's&nbsp;no&nbsp;</span> <span class="U2">need&nbsp;to&nbsp;ca</span> <span class="U2">ll&nbsp;JDS.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">93</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;//&nbsp;If&nbsp;we</span> <span class="U2">'re&nbsp;doing&nbsp;</span> <span class="U2">patient&nbsp;se</span> <span class="U2">lection,&nbsp;w</span> <span class="U2">e&nbsp;do&nbsp;need&nbsp;</span> <span class="U2">to&nbsp;call&nbsp;JD</span> <span class="U2">S&nbsp;to&nbsp;get&nbsp;t</span> <span class="U2">he&nbsp;unmaske</span> <span class="U2">d&nbsp;SSN.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">94</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;(sear</span> <span class="U2">chType&nbsp;===</span> <span class="U2">&nbsp;NAME_SEAR</span> <span class="U2">CH_TYPE&nbsp;||</span> <span class="U2">&nbsp;searchTyp</span> <span class="U2">e&nbsp;===&nbsp;LAST</span> <span class="U2">5_SEARCH_T</span> <span class="U2">YPE)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">95</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hmpP</span> <span class="U2">atientSele</span> <span class="U2">ctSearchCB</span> <span class="U2">(response,</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">96</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">req:&nbsp;req,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">97</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">hasDGAcces</span> <span class="U2">s:&nbsp;hasDGAc</span> <span class="U2">cess,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">98</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">logMessage</span> <span class="U2">Prefix:&nbsp;lo</span> <span class="U2">gMessagePr</span> <span class="U2">efix,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">99</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">finalCB:&nbsp;c</span> <span class="U2">allback,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">100</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">sensitiveP</span> <span class="U2">atientAckn</span> <span class="U2">owleged:&nbsp;s</span> <span class="U2">ensitivePa</span> <span class="U2">tientAckno</span> <span class="U2">wleged,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">101</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">searchOpti</span> <span class="U2">ons:&nbsp;searc</span> <span class="U2">hOptions</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">102</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">103</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}&nbsp;else&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">104</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hmpP</span> <span class="U2">atientSele</span> <span class="U2">ctSelectio</span> <span class="U2">nCB(respon</span> <span class="U2">se,&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">105</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">req:&nbsp;req,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">106</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">jdsServer:</span> <span class="U2">&nbsp;jdsServer</span> <span class="U2">,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">107</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">hasDGAcces</span> <span class="U2">s:&nbsp;hasDGAc</span> <span class="U2">cess,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">108</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">logMessage</span> <span class="U2">Prefix:&nbsp;lo</span> <span class="U2">gMessagePr</span> <span class="U2">efix,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">109</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">finalCB:&nbsp;c</span> <span class="U2">allback,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">110</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">sensitiveP</span> <span class="U2">atientAckn</span> <span class="U2">owleged:&nbsp;s</span> <span class="U2">ensitivePa</span> <span class="U2">tientAckno</span> <span class="U2">wleged,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">111</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">searchOpti</span> <span class="U2">ons:&nbsp;searc</span> <span class="U2">hOptions</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">112</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">113</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">114</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">115</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">116</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.debug</span> <span class="U2">('%s&nbsp;perfo</span> <span class="U2">rming&nbsp;pt-s</span> <span class="U2">elect&nbsp;sear</span> <span class="U2">ch&nbsp;instead</span> <span class="U2">&nbsp;of&nbsp;hmpPat</span> <span class="U2">ientSelect</span> <span class="U2">&nbsp;using&nbsp;sit</span> <span class="U2">e=%s&nbsp;&amp;sear</span> <span class="U2">chType=%s&nbsp;</span> <span class="U2">&amp;searchStr</span> <span class="U2">ing=%s',&nbsp;l</span> <span class="U2">ogMessageP</span> <span class="U2">refix,&nbsp;sit</span> <span class="U2">e,&nbsp;searchT</span> <span class="U2">ype,&nbsp;searc</span> <span class="U2">hString);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">117</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">archJds.ge</span> <span class="U2">tPatients(</span> <span class="U2">req,&nbsp;searc</span> <span class="U2">hOptions,&nbsp;</span> <span class="U2">jdsServer,</span> <span class="U2">&nbsp;function(</span> <span class="U2">err,&nbsp;respo</span> <span class="U2">nse)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">118</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;var&nbsp;opti</span> <span class="U2">ons&nbsp;=&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">119</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fina</span> <span class="U2">lCB:&nbsp;callb</span> <span class="U2">ack,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">120</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hasD</span> <span class="U2">GAccess:&nbsp;h</span> <span class="U2">asDGAccess</span> <span class="U2">,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">121</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sens</span> <span class="U2">itivePatie</span> <span class="U2">ntAcknowle</span> <span class="U2">ged:&nbsp;sensi</span> <span class="U2">tivePatien</span> <span class="U2">tAcknowleg</span> <span class="U2">ed,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">122</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logM</span> <span class="U2">essagePref</span> <span class="U2">ix:&nbsp;logMes</span> <span class="U2">sagePrefix</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">123</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">124</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;ptSelect</span> <span class="U2">CB(err,&nbsp;re</span> <span class="U2">sponse,&nbsp;lo</span> <span class="U2">gger,&nbsp;opti</span> <span class="U2">ons);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">125</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">126</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">127</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">128</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">129</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;ptSele</span> <span class="U2">ctCB&nbsp;=&nbsp;fun</span> <span class="U2">ction(err,</span> <span class="U2">&nbsp;response,</span> <span class="U2">&nbsp;logger,&nbsp;o</span> <span class="U2">ptions)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">130</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ha</span> <span class="U2">sDGAccess&nbsp;</span> <span class="U2">=&nbsp;options.</span> <span class="U2">hasDGAcces</span> <span class="U2">s;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">131</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">nsitivePat</span> <span class="U2">ientAcknow</span> <span class="U2">leged&nbsp;=&nbsp;op</span> <span class="U2">tions.sens</span> <span class="U2">itivePatie</span> <span class="U2">ntAcknowle</span> <span class="U2">ged;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">132</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(er</span> <span class="U2">r)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">133</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;final</span> <span class="U2">PatientSea</span> <span class="U2">rchCallbac</span> <span class="U2">k(err,&nbsp;res</span> <span class="U2">ponse,&nbsp;log</span> <span class="U2">ger,&nbsp;optio</span> <span class="U2">ns);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">134</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">135</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(_.</span> <span class="U2">result(res</span> <span class="U2">ponse,&nbsp;'da</span> <span class="U2">ta.items',</span> <span class="U2">&nbsp;[]).lengt</span> <span class="U2">h&nbsp;&gt;&nbsp;0)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">136</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fo</span> <span class="U2">r&nbsp;(var&nbsp;i&nbsp;=</span> <span class="U2">&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;re</span> <span class="U2">sponse.dat</span> <span class="U2">a.items.le</span> <span class="U2">ngth;&nbsp;i&nbsp;+=</span> <span class="U2">&nbsp;1)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">137</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;var&nbsp;pati</span> <span class="U2">ent&nbsp;=&nbsp;resp</span> <span class="U2">onse.data.</span> <span class="U2">items[i];</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">138</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;(!pat</span> <span class="U2">ient.sensi</span> <span class="U2">tive&nbsp;||&nbsp;se</span> <span class="U2">nsitivePat</span> <span class="U2">ientAcknow</span> <span class="U2">leged&nbsp;||&nbsp;h</span> <span class="U2">asDGAccess</span> <span class="U2">)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">139</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pati</span> <span class="U2">ent&nbsp;=&nbsp;clea</span> <span class="U2">nJDSPatien</span> <span class="U2">tAttribute</span> <span class="U2">s(sensitiv</span> <span class="U2">ityUtils.r</span> <span class="U2">emoveSensi</span> <span class="U2">tiveFields</span> <span class="U2">(patient))</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">140</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}&nbsp;else&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">141</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pati</span> <span class="U2">ent&nbsp;=&nbsp;sens</span> <span class="U2">itivityUti</span> <span class="U2">ls.hideSen</span> <span class="U2">sitiveFiel</span> <span class="U2">ds(patient</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">142</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">143</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;patient&nbsp;</span> <span class="U2">=&nbsp;searchUt</span> <span class="U2">il.transfo</span> <span class="U2">rmPatient(</span> <span class="U2">patient,&nbsp;t</span> <span class="U2">rue);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">144</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;response</span> <span class="U2">.data.item</span> <span class="U2">s[i]&nbsp;=&nbsp;pat</span> <span class="U2">ient;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">145</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">146</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">147</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;finalP</span> <span class="U2">atientSear</span> <span class="U2">chCallback</span> <span class="U2">(err,&nbsp;resp</span> <span class="U2">onse,&nbsp;logg</span> <span class="U2">er,&nbsp;option</span> <span class="U2">s);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">148</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">149</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">150</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;hmpPat</span> <span class="U2">ientSelect</span> <span class="U2">SelectionC</span> <span class="U2">B&nbsp;=&nbsp;functi</span> <span class="U2">on(respons</span> <span class="U2">e,&nbsp;options</span> <span class="U2">)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">151</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;re</span> <span class="U2">q&nbsp;=&nbsp;option</span> <span class="U2">s.req;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">152</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;lo</span> <span class="U2">gger&nbsp;=&nbsp;req</span> <span class="U2">.logger;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">153</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;jd</span> <span class="U2">sServer&nbsp;=&nbsp;</span> <span class="U2">options.jd</span> <span class="U2">sServer;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">154</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ha</span> <span class="U2">sDGAccess&nbsp;</span> <span class="U2">=&nbsp;options.</span> <span class="U2">hasDGAcces</span> <span class="U2">s;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">155</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">nsitivePat</span> <span class="U2">ientAcknow</span> <span class="U2">leged&nbsp;=&nbsp;op</span> <span class="U2">tions.sens</span> <span class="U2">itivePatie</span> <span class="U2">ntAcknowle</span> <span class="U2">ged;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">156</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">archOption</span> <span class="U2">s&nbsp;=&nbsp;option</span> <span class="U2">s.searchOp</span> <span class="U2">tions;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">157</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;si</span> <span class="U2">te&nbsp;=&nbsp;searc</span> <span class="U2">hOptions.s</span> <span class="U2">ite;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">158</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;lo</span> <span class="U2">gMessagePr</span> <span class="U2">efix&nbsp;=&nbsp;opt</span> <span class="U2">ions.logMe</span> <span class="U2">ssagePrefi</span> <span class="U2">x&nbsp;?&nbsp;option</span> <span class="U2">s.logMessa</span> <span class="U2">gePrefix&nbsp;+</span> <span class="U2">&nbsp;'.hmpPati</span> <span class="U2">entSelectS</span> <span class="U2">electionCB</span> <span class="U2">'&nbsp;:&nbsp;'patie</span> <span class="U2">ntSearch.h</span> <span class="U2">mpPatientS</span> <span class="U2">electSelec</span> <span class="U2">tionCB';</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">159</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">160</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!_</span> <span class="U2">.isEmpty(_</span> <span class="U2">.result(re</span> <span class="U2">q,&nbsp;'app.co</span> <span class="U2">nfig.vista</span> <span class="U2">Sites['&nbsp;+&nbsp;</span> <span class="U2">site&nbsp;+&nbsp;']'</span> <span class="U2">,&nbsp;{})))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">161</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span> <span class="U2">set&nbsp;the&nbsp;co</span> <span class="U2">nfig&nbsp;to&nbsp;ha</span> <span class="U2">ve&nbsp;hasHmpP</span> <span class="U2">atientSele</span> <span class="U2">ctRpc</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">162</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">q.app.conf</span> <span class="U2">ig.vistaSi</span> <span class="U2">tes[site].</span> <span class="U2">hasHmpPati</span> <span class="U2">entSelectR</span> <span class="U2">pc&nbsp;=&nbsp;true;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">163</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.trace</span> <span class="U2">(req.app.c</span> <span class="U2">onfig.vist</span> <span class="U2">aSites[sit</span> <span class="U2">e]);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">164</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">165</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">166</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;async.</span> <span class="U2">mapSeries(</span> <span class="U2">response,&nbsp;</span> <span class="U2">function(p</span> <span class="U2">atient,&nbsp;cb</span> <span class="U2">)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">167</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.debug</span> <span class="U2">('%s&nbsp;sensi</span> <span class="U2">tive&nbsp;flag&nbsp;</span> <span class="U2">was&nbsp;%s&nbsp;for</span> <span class="U2">&nbsp;patient&nbsp;%</span> <span class="U2">s;',&nbsp;logMe</span> <span class="U2">ssagePrefi</span> <span class="U2">x,&nbsp;patient</span> <span class="U2">.sensitive</span> <span class="U2">,&nbsp;patient.</span> <span class="U2">fullName);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">168</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">169</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span> <span class="U2">&nbsp;If&nbsp;patien</span> <span class="U2">t&nbsp;is&nbsp;sensi</span> <span class="U2">tive&nbsp;and&nbsp;t</span> <span class="U2">he&nbsp;user&nbsp;do</span> <span class="U2">esn't&nbsp;have</span> <span class="U2">&nbsp;DG&nbsp;access</span> <span class="U2">&nbsp;and&nbsp;they&nbsp;</span> <span class="U2">haven't&nbsp;ac</span> <span class="U2">knowledged</span> <span class="U2">&nbsp;that&nbsp;the&nbsp;</span> <span class="U2">patient&nbsp;is</span> <span class="U2">&nbsp;sensitive</span> <span class="U2">,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">170</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span> <span class="U2">&nbsp;hide&nbsp;the&nbsp;</span> <span class="U2">sensitive&nbsp;</span> <span class="U2">fields&nbsp;and</span> <span class="U2">&nbsp;return&nbsp;th</span> <span class="U2">e&nbsp;patient&nbsp;</span> <span class="U2">data.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">171</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;(patient.</span> <span class="U2">sensitive&nbsp;</span> <span class="U2">&amp;&amp;&nbsp;!sensit</span> <span class="U2">ivePatient</span> <span class="U2">Acknowlege</span> <span class="U2">d&nbsp;&amp;&amp;&nbsp;!hasD</span> <span class="U2">GAccess)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">172</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;logger.t</span> <span class="U2">race(patie</span> <span class="U2">nt,&nbsp;logMes</span> <span class="U2">sagePrefix</span> <span class="U2">&nbsp;+&nbsp;'&nbsp;has&nbsp;a</span> <span class="U2">n&nbsp;_ack&nbsp;of&nbsp;</span> <span class="U2">'&nbsp;+&nbsp;sensit</span> <span class="U2">ivePatient</span> <span class="U2">Acknowlege</span> <span class="U2">d);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">173</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;patient&nbsp;</span> <span class="U2">=&nbsp;sensitiv</span> <span class="U2">ityUtils.h</span> <span class="U2">ideSensiti</span> <span class="U2">veFields(p</span> <span class="U2">atient);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">174</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;patient&nbsp;</span> <span class="U2">=&nbsp;searchUt</span> <span class="U2">il.transfo</span> <span class="U2">rmPatient(</span> <span class="U2">patient,&nbsp;f</span> <span class="U2">alse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">175</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;s</span> <span class="U2">etImmediat</span> <span class="U2">e(cb,&nbsp;null</span> <span class="U2">,&nbsp;patient)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">176</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">177</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">178</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.debug</span> <span class="U2">('%s&nbsp;check</span> <span class="U2">ing&nbsp;for&nbsp;pa</span> <span class="U2">tient&nbsp;in&nbsp;J</span> <span class="U2">DS',&nbsp;logMe</span> <span class="U2">ssagePrefi</span> <span class="U2">x);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">179</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">180</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span> <span class="U2">&nbsp;Set&nbsp;up&nbsp;ca</span> <span class="U2">ll&nbsp;to&nbsp;retr</span> <span class="U2">ieve&nbsp;full&nbsp;</span> <span class="U2">SSN&nbsp;from&nbsp;J</span> <span class="U2">DS&nbsp;since&nbsp;t</span> <span class="U2">he&nbsp;VistA&nbsp;d</span> <span class="U2">ata&nbsp;masks&nbsp;</span> <span class="U2">it&nbsp;out</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">181</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;options&nbsp;</span> <span class="U2">=&nbsp;_.create</span> <span class="U2">(searchOpt</span> <span class="U2">ions,&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">182</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;searchSt</span> <span class="U2">ring:&nbsp;pati</span> <span class="U2">ent.pid,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">183</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;searchTy</span> <span class="U2">pe:&nbsp;PID_SE</span> <span class="U2">ARCH_TYPE</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">184</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">185</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se</span> <span class="U2">archJds.ge</span> <span class="U2">tPatients(</span> <span class="U2">req,&nbsp;optio</span> <span class="U2">ns,&nbsp;jdsSer</span> <span class="U2">ver,&nbsp;funct</span> <span class="U2">ion(err,&nbsp;j</span> <span class="U2">dsResult)&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">186</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;(err)</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">187</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retu</span> <span class="U2">rn&nbsp;cb(err)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">188</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">189</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;(!_.i</span> <span class="U2">sEmpty(_.r</span> <span class="U2">esult(jdsR</span> <span class="U2">esult,&nbsp;'da</span> <span class="U2">ta.items',</span> <span class="U2">&nbsp;[])))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">190</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pati</span> <span class="U2">ent.ssn&nbsp;=&nbsp;</span> <span class="U2">_.result(_</span> <span class="U2">.find(jdsR</span> <span class="U2">esult.data</span> <span class="U2">.items,&nbsp;fu</span> <span class="U2">nction(jds</span> <span class="U2">Patient)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">191</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">return&nbsp;!_.</span> <span class="U2">isEmpty(_.</span> <span class="U2">result(jds</span> <span class="U2">Patient,&nbsp;'</span> <span class="U2">ssn',&nbsp;''))</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">192</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}),&nbsp;</span> <span class="U2">'ssn',&nbsp;pat</span> <span class="U2">ient.ssn);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">193</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pati</span> <span class="U2">ent.sensit</span> <span class="U2">ive&nbsp;=&nbsp;_.re</span> <span class="U2">sult(_.fin</span> <span class="U2">d(jdsResul</span> <span class="U2">t.data.ite</span> <span class="U2">ms,&nbsp;functi</span> <span class="U2">on(jdsPati</span> <span class="U2">ent)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">194</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">return&nbsp;_.r</span> <span class="U2">esult(jdsP</span> <span class="U2">atient,&nbsp;'s</span> <span class="U2">ensitive',</span> <span class="U2">&nbsp;false)&nbsp;==</span> <span class="U2">=&nbsp;true;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">195</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}),&nbsp;</span> <span class="U2">'sensitive</span> <span class="U2">',&nbsp;false);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">196</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}&nbsp;else&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">197</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pati</span> <span class="U2">ent.sensit</span> <span class="U2">ive&nbsp;=&nbsp;fals</span> <span class="U2">e;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">198</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">199</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">200</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;(!pat</span> <span class="U2">ient.sensi</span> <span class="U2">tive&nbsp;||&nbsp;se</span> <span class="U2">nsitivePat</span> <span class="U2">ientAcknow</span> <span class="U2">leged&nbsp;||&nbsp;h</span> <span class="U2">asDGAccess</span> <span class="U2">)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">201</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pati</span> <span class="U2">ent&nbsp;=&nbsp;clea</span> <span class="U2">nJDSPatien</span> <span class="U2">tAttribute</span> <span class="U2">s(sensitiv</span> <span class="U2">ityUtils.r</span> <span class="U2">emoveSensi</span> <span class="U2">tiveFields</span> <span class="U2">(patient))</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">202</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}&nbsp;else&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">203</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pati</span> <span class="U2">ent&nbsp;=&nbsp;sens</span> <span class="U2">itivityUti</span> <span class="U2">ls.hideSen</span> <span class="U2">sitiveFiel</span> <span class="U2">ds(patient</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">204</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">205</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;patient&nbsp;</span> <span class="U2">=&nbsp;searchUt</span> <span class="U2">il.transfo</span> <span class="U2">rmPatient(</span> <span class="U2">patient,&nbsp;f</span> <span class="U2">alse);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">206</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;c</span> <span class="U2">b(null,&nbsp;pa</span> <span class="U2">tient);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">207</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">208</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;fun</span> <span class="U2">ction(err,</span> <span class="U2">&nbsp;patients)</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">209</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;retvalue</span> <span class="U2">&nbsp;=&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">210</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;apiVersi</span> <span class="U2">on:&nbsp;'1.0',</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">211</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;data:&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">212</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tota</span> <span class="U2">lItems:&nbsp;0,</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">213</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curr</span> <span class="U2">entItemCou</span> <span class="U2">nt:&nbsp;0,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">214</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item</span> <span class="U2">s:&nbsp;[]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">215</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">216</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">217</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span> <span class="U2">format&nbsp;the</span> <span class="U2">&nbsp;RPC&nbsp;data&nbsp;</span> <span class="U2">to&nbsp;look&nbsp;li</span> <span class="U2">ke&nbsp;the&nbsp;JDS</span> <span class="U2">&nbsp;data&nbsp;that</span> <span class="U2">&nbsp;we&nbsp;used&nbsp;t</span> <span class="U2">o&nbsp;send&nbsp;bac</span> <span class="U2">k</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">218</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;(!_.isEmp</span> <span class="U2">ty(patient</span> <span class="U2">s))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">219</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;retvalue</span> <span class="U2">.data.tota</span> <span class="U2">lItems&nbsp;=&nbsp;p</span> <span class="U2">atients.le</span> <span class="U2">ngth;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">220</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;retvalue</span> <span class="U2">.data.curr</span> <span class="U2">entItemCou</span> <span class="U2">nt&nbsp;=&nbsp;patie</span> <span class="U2">nts.length</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">221</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;retvalue</span> <span class="U2">.data.item</span> <span class="U2">s&nbsp;=&nbsp;patien</span> <span class="U2">ts;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">222</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">223</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</span> <span class="U2">nalPatient</span> <span class="U2">SearchCall</span> <span class="U2">back(err,&nbsp;</span> <span class="U2">retvalue,&nbsp;</span> <span class="U2">logger,&nbsp;op</span> <span class="U2">tions);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">224</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;});</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">225</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">226</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">227</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">/**</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">228</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;Process</span> <span class="U2">es&nbsp;respons</span> <span class="U2">e&nbsp;from&nbsp;RPC</span> <span class="U2">&nbsp;search&nbsp;in</span> <span class="U2">&nbsp;the&nbsp;conte</span> <span class="U2">xt&nbsp;of&nbsp;a&nbsp;fu</span> <span class="U2">ll&nbsp;name&nbsp;or</span> <span class="U2">&nbsp;last&nbsp;5&nbsp;se</span> <span class="U2">arch.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">229</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">230</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">{Object}&nbsp;r</span> <span class="U2">esponse&nbsp;-&nbsp;</span> <span class="U2">results&nbsp;fr</span> <span class="U2">om&nbsp;HMP&nbsp;PAT</span> <span class="U2">IENT&nbsp;SELEC</span> <span class="U2">T.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">231</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">{Object}&nbsp;o</span> <span class="U2">ptions&nbsp;-&nbsp;c</span> <span class="U2">ontains&nbsp;re</span> <span class="U2">levant&nbsp;inf</span> <span class="U2">o&nbsp;for&nbsp;proc</span> <span class="U2">essing&nbsp;the</span> <span class="U2">&nbsp;results.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">232</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*/</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">233</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">var&nbsp;hmpPat</span> <span class="U2">ientSelect</span> <span class="U2">SearchCB&nbsp;=</span> <span class="U2">&nbsp;function(</span> <span class="U2">response,&nbsp;</span> <span class="U2">options)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">234</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;re</span> <span class="U2">q&nbsp;=&nbsp;option</span> <span class="U2">s.req;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">235</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;lo</span> <span class="U2">gger&nbsp;=&nbsp;req</span> <span class="U2">.logger;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">236</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ha</span> <span class="U2">sDGAccess&nbsp;</span> <span class="U2">=&nbsp;options.</span> <span class="U2">hasDGAcces</span> <span class="U2">s;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">237</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">nsitivePat</span> <span class="U2">ientAcknow</span> <span class="U2">leged&nbsp;=&nbsp;op</span> <span class="U2">tions.sens</span> <span class="U2">itivePatie</span> <span class="U2">ntAcknowle</span> <span class="U2">ged;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">238</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">archOption</span> <span class="U2">s&nbsp;=&nbsp;option</span> <span class="U2">s.searchOp</span> <span class="U2">tions;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">239</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;si</span> <span class="U2">te&nbsp;=&nbsp;searc</span> <span class="U2">hOptions.s</span> <span class="U2">ite;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">240</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">archType&nbsp;=</span> <span class="U2">&nbsp;_.get(sea</span> <span class="U2">rchOptions</span> <span class="U2">,&nbsp;'searchT</span> <span class="U2">ype');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">241</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">archString</span> <span class="U2">&nbsp;=&nbsp;_.get(s</span> <span class="U2">earchOptio</span> <span class="U2">ns,&nbsp;'searc</span> <span class="U2">hString');</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">242</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;lo</span> <span class="U2">gMessagePr</span> <span class="U2">efix&nbsp;=&nbsp;opt</span> <span class="U2">ions.logMe</span> <span class="U2">ssagePrefi</span> <span class="U2">x&nbsp;?&nbsp;option</span> <span class="U2">s.logMessa</span> <span class="U2">gePrefix&nbsp;+</span> <span class="U2">&nbsp;'.hmpPati</span> <span class="U2">entSelectS</span> <span class="U2">electionCB</span> <span class="U2">'&nbsp;:&nbsp;'patie</span> <span class="U2">ntSearch.h</span> <span class="U2">mpPatientS</span> <span class="U2">electSearc</span> <span class="U2">hCB';</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">243</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">244</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!_</span> <span class="U2">.isEmpty(_</span> <span class="U2">.result(re</span> <span class="U2">q,&nbsp;'app.co</span> <span class="U2">nfig.vista</span> <span class="U2">Sites['&nbsp;+&nbsp;</span> <span class="U2">site&nbsp;+&nbsp;']'</span> <span class="U2">,&nbsp;{})))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">245</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span> <span class="U2">set&nbsp;the&nbsp;co</span> <span class="U2">nfig&nbsp;to&nbsp;ha</span> <span class="U2">ve&nbsp;hasHmpP</span> <span class="U2">atientSele</span> <span class="U2">ctRpc</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">246</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">q.app.conf</span> <span class="U2">ig.vistaSi</span> <span class="U2">tes[site].</span> <span class="U2">hasHmpPati</span> <span class="U2">entSelectR</span> <span class="U2">pc&nbsp;=&nbsp;true;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">247</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.trace</span> <span class="U2">({&nbsp;'config</span> <span class="U2">.vistasite</span> <span class="U2">s':&nbsp;req.ap</span> <span class="U2">p.config.v</span> <span class="U2">istaSites[</span> <span class="U2">site]&nbsp;},&nbsp;'</span> <span class="U2">hmpPatient</span> <span class="U2">SelectRpc&nbsp;</span> <span class="U2">set&nbsp;to&nbsp;tru</span> <span class="U2">e');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">248</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">249</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">250</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;logger</span> <span class="U2">.debug('%s</span> <span class="U2">&nbsp;given&nbsp;a&nbsp;r</span> <span class="U2">esponse&nbsp;va</span> <span class="U2">lue',&nbsp;logM</span> <span class="U2">essagePref</span> <span class="U2">ix);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">251</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;logger</span> <span class="U2">.trace({&nbsp;h</span> <span class="U2">mpPatientS</span> <span class="U2">electRpcRe</span> <span class="U2">sponse:&nbsp;re</span> <span class="U2">sponse&nbsp;});</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">252</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">253</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;fi</span> <span class="U2">ndComma&nbsp;=&nbsp;</span> <span class="U2">new&nbsp;RegExp</span> <span class="U2">(COMMA_REG</span> <span class="U2">EX).test(s</span> <span class="U2">earchStrin</span> <span class="U2">g);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">254</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;re</span> <span class="U2">moveImprop</span> <span class="U2">erlyMatche</span> <span class="U2">dPatients&nbsp;</span> <span class="U2">=&nbsp;(searchT</span> <span class="U2">ype&nbsp;===&nbsp;NA</span> <span class="U2">ME_SEARCH_</span> <span class="U2">TYPE&nbsp;&amp;&amp;&nbsp;fi</span> <span class="U2">ndComma);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">255</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">256</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;US1</span> <span class="U2">7390&nbsp;-&nbsp;If&nbsp;</span> <span class="U2">there&nbsp;is&nbsp;a</span> <span class="U2">&nbsp;comma&nbsp;in&nbsp;</span> <span class="U2">our&nbsp;search</span> <span class="U2">String&nbsp;red</span> <span class="U2">uce&nbsp;the&nbsp;re</span> <span class="U2">sults&nbsp;from</span> <span class="U2">&nbsp;the&nbsp;HMP&nbsp;P</span> <span class="U2">ATIENT&nbsp;SEL</span> <span class="U2">ECT&nbsp;RPC&nbsp;so</span> <span class="U2">&nbsp;that&nbsp;the&nbsp;</span> <span class="U2">last&nbsp;name&nbsp;</span> <span class="U2">is&nbsp;an&nbsp;exac</span> <span class="U2">t&nbsp;match</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">257</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(re</span> <span class="U2">moveImprop</span> <span class="U2">erlyMatche</span> <span class="U2">dPatients)</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">258</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;improper</span> <span class="U2">lyMatchedP</span> <span class="U2">atients&nbsp;=&nbsp;</span> <span class="U2">_.remove(r</span> <span class="U2">esponse,&nbsp;f</span> <span class="U2">unction&nbsp;la</span> <span class="U2">stNameExac</span> <span class="U2">tMatch(val</span> <span class="U2">ue,&nbsp;index,</span> <span class="U2">&nbsp;array)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">259</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;var&nbsp;myNa</span> <span class="U2">me&nbsp;=&nbsp;_.get</span> <span class="U2">(value,&nbsp;'f</span> <span class="U2">ullName');</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">260</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;var&nbsp;rege</span> <span class="U2">x&nbsp;=&nbsp;new&nbsp;Re</span> <span class="U2">gExp('^'&nbsp;+</span> <span class="U2">&nbsp;_.escapeR</span> <span class="U2">egExp(sear</span> <span class="U2">chString),</span> <span class="U2">&nbsp;'gi');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">261</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;var&nbsp;matc</span> <span class="U2">hed&nbsp;=&nbsp;rege</span> <span class="U2">x.test(myN</span> <span class="U2">ame);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">262</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;//&nbsp;This&nbsp;</span> <span class="U2">is&nbsp;a&nbsp;rever</span> <span class="U2">sal&nbsp;of&nbsp;if&nbsp;</span> <span class="U2">we&nbsp;find&nbsp;a&nbsp;</span> <span class="U2">match.&nbsp;If&nbsp;</span> <span class="U2">we&nbsp;find&nbsp;th</span> <span class="U2">e&nbsp;match&nbsp;we</span> <span class="U2">&nbsp;are&nbsp;keepi</span> <span class="U2">ng&nbsp;it&nbsp;and&nbsp;</span> <span class="U2">not&nbsp;removi</span> <span class="U2">ng</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">263</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;!</span> <span class="U2">matched;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">264</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">265</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">q.logger.d</span> <span class="U2">ebug(impro</span> <span class="U2">perlyMatch</span> <span class="U2">edPatients</span> <span class="U2">,&nbsp;logMessa</span> <span class="U2">gePrefix&nbsp;+</span> <span class="U2">&nbsp;'&nbsp;comma&nbsp;s</span> <span class="U2">eparated&nbsp;v</span> <span class="U2">alue&nbsp;retur</span> <span class="U2">ned&nbsp;these'</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">266</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">267</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">268</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;async.</span> <span class="U2">mapSeries(</span> <span class="U2">response,&nbsp;</span> <span class="U2">function(p</span> <span class="U2">atient,&nbsp;cb</span> <span class="U2">)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">269</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">270</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pa</span> <span class="U2">tient&nbsp;=&nbsp;se</span> <span class="U2">nsitivityU</span> <span class="U2">tils.remov</span> <span class="U2">eSensitive</span> <span class="U2">Fields(pat</span> <span class="U2">ient);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">271</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">272</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;(patient.</span> <span class="U2">sensitive&nbsp;</span> <span class="U2">&amp;&amp;&nbsp;!sensit</span> <span class="U2">ivePatient</span> <span class="U2">Acknowlege</span> <span class="U2">d&nbsp;&amp;&amp;&nbsp;!hasD</span> <span class="U2">GAccess)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">273</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;patient&nbsp;</span> <span class="U2">=&nbsp;sensitiv</span> <span class="U2">ityUtils.h</span> <span class="U2">ideSensiti</span> <span class="U2">veFields(p</span> <span class="U2">atient);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">274</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">275</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">276</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pa</span> <span class="U2">tient&nbsp;=&nbsp;se</span> <span class="U2">archUtil.t</span> <span class="U2">ransformPa</span> <span class="U2">tient(pati</span> <span class="U2">ent,&nbsp;false</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">277</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;cb(nu</span> <span class="U2">ll,&nbsp;patien</span> <span class="U2">t);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">278</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">279</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;fun</span> <span class="U2">ction(err,</span> <span class="U2">&nbsp;patients)</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">280</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;retvalue</span> <span class="U2">&nbsp;=&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">281</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;data:&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">282</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tota</span> <span class="U2">lItems:&nbsp;0,</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">283</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curr</span> <span class="U2">entItemCou</span> <span class="U2">nt:&nbsp;0,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">284</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;item</span> <span class="U2">s:&nbsp;[]</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">285</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">286</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">287</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span> <span class="U2">format&nbsp;the</span> <span class="U2">&nbsp;RPC&nbsp;data&nbsp;</span> <span class="U2">to&nbsp;look&nbsp;li</span> <span class="U2">ke&nbsp;the&nbsp;JDS</span> <span class="U2">&nbsp;data&nbsp;that</span> <span class="U2">&nbsp;we&nbsp;used&nbsp;t</span> <span class="U2">o&nbsp;send&nbsp;bac</span> <span class="U2">k</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">288</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;(!_.isEmp</span> <span class="U2">ty(patient</span> <span class="U2">s))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">289</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;retvalue</span> <span class="U2">.data.tota</span> <span class="U2">lItems&nbsp;=&nbsp;p</span> <span class="U2">atients.le</span> <span class="U2">ngth;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">290</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;retvalue</span> <span class="U2">.data.curr</span> <span class="U2">entItemCou</span> <span class="U2">nt&nbsp;=&nbsp;patie</span> <span class="U2">nts.length</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">291</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;retvalue</span> <span class="U2">.data.item</span> <span class="U2">s&nbsp;=&nbsp;patien</span> <span class="U2">ts;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">292</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">293</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</span> <span class="U2">nalPatient</span> <span class="U2">SearchCall</span> <span class="U2">back(err,&nbsp;</span> <span class="U2">retvalue,&nbsp;</span> <span class="U2">logger,&nbsp;op</span> <span class="U2">tions);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">294</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;});</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">295</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">296</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">297</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">function&nbsp;f</span> <span class="U2">inalPatien</span> <span class="U2">tSearchCal</span> <span class="U2">lback(err,</span> <span class="U2">&nbsp;data,&nbsp;log</span> <span class="U2">ger,&nbsp;optio</span> <span class="U2">ns)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">298</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;lo</span> <span class="U2">gMessagePr</span> <span class="U2">efix&nbsp;=&nbsp;opt</span> <span class="U2">ions.logMe</span> <span class="U2">ssagePrefi</span> <span class="U2">x&nbsp;?&nbsp;option</span> <span class="U2">s.logMessa</span> <span class="U2">gePrefix&nbsp;+</span> <span class="U2">&nbsp;'.finalPa</span> <span class="U2">tientSearc</span> <span class="U2">hCallback'</span> <span class="U2">&nbsp;:&nbsp;'patien</span> <span class="U2">tSearch.fi</span> <span class="U2">nalPatient</span> <span class="U2">SearchCall</span> <span class="U2">back';</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">299</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(er</span> <span class="U2">r)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">300</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;optio</span> <span class="U2">ns.finalCB</span> <span class="U2">(err);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">301</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">302</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;data.s</span> <span class="U2">tatus&nbsp;=&nbsp;20</span> <span class="U2">0;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">303</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;logger</span> <span class="U2">.trace(dat</span> <span class="U2">a,&nbsp;logMess</span> <span class="U2">agePrefix&nbsp;</span> <span class="U2">+&nbsp;'&nbsp;return</span> <span class="U2">ing&nbsp;result</span> <span class="U2">');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">304</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;option</span> <span class="U2">s.finalCB(</span> <span class="U2">null,&nbsp;data</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">305</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">306</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">307</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">/**</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">308</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;Retriev</span> <span class="U2">es&nbsp;patient</span> <span class="U2">&nbsp;demograph</span> <span class="U2">ic&nbsp;informa</span> <span class="U2">tion&nbsp;from&nbsp;</span> <span class="U2">JDS&nbsp;based&nbsp;</span> <span class="U2">on&nbsp;a&nbsp;given</span> <span class="U2">&nbsp;PID.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">309</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">310</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">{Object}&nbsp;r</span> <span class="U2">eq&nbsp;-&nbsp;The&nbsp;r</span> <span class="U2">equest&nbsp;obj</span> <span class="U2">ect.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">311</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">{string}&nbsp;l</span> <span class="U2">ogMessageP</span> <span class="U2">refix&nbsp;-&nbsp;Us</span> <span class="U2">ed&nbsp;when&nbsp;lo</span> <span class="U2">gging&nbsp;mess</span> <span class="U2">ages&nbsp;to&nbsp;sh</span> <span class="U2">ow&nbsp;who&nbsp;is&nbsp;</span> <span class="U2">calling&nbsp;th</span> <span class="U2">is&nbsp;-&nbsp;usefu</span> <span class="U2">l&nbsp;for&nbsp;debu</span> <span class="U2">gging.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">312</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">{string}&nbsp;s</span> <span class="U2">ite&nbsp;-&nbsp;The&nbsp;</span> <span class="U2">site&nbsp;to&nbsp;se</span> <span class="U2">arch&nbsp;for&nbsp;p</span> <span class="U2">atients&nbsp;in</span> <span class="U2">.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">313</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">{string}&nbsp;s</span> <span class="U2">earchType&nbsp;</span> <span class="U2">-&nbsp;The&nbsp;type</span> <span class="U2">&nbsp;of&nbsp;search</span> <span class="U2">&nbsp;to&nbsp;perfor</span> <span class="U2">m.&nbsp;Can&nbsp;be&nbsp;</span> <span class="U2">ICN,&nbsp;PID,&nbsp;</span> <span class="U2">LAST5,&nbsp;or&nbsp;</span> <span class="U2">NAME.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">314</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">{string}&nbsp;p</span> <span class="U2">id&nbsp;-&nbsp;The&nbsp;P</span> <span class="U2">ID&nbsp;of&nbsp;the&nbsp;</span> <span class="U2">patient&nbsp;to</span> <span class="U2">&nbsp;search&nbsp;fo</span> <span class="U2">r.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">315</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">{function}</span> <span class="U2">&nbsp;callback&nbsp;</span> <span class="U2">-&nbsp;The&nbsp;func</span> <span class="U2">tion&nbsp;to&nbsp;ca</span> <span class="U2">ll&nbsp;when&nbsp;al</span> <span class="U2">l&nbsp;of&nbsp;the&nbsp;d</span> <span class="U2">ata&nbsp;has&nbsp;be</span> <span class="U2">en&nbsp;retriev</span> <span class="U2">ed.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">316</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*/</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">317</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">module.exp</span> <span class="U2">orts.callJ</span> <span class="U2">DSPatientS</span> <span class="U2">earch&nbsp;=&nbsp;fu</span> <span class="U2">nction(req</span> <span class="U2">,&nbsp;logMessa</span> <span class="U2">gePrefix,&nbsp;</span> <span class="U2">site,&nbsp;sear</span> <span class="U2">chType,&nbsp;pi</span> <span class="U2">d,&nbsp;callbac</span> <span class="U2">k)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">318</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;LO</span> <span class="U2">G_MESSAGE_</span> <span class="U2">PREFIX&nbsp;=&nbsp;'</span> <span class="U2">patient-se</span> <span class="U2">arch-util.</span> <span class="U2">callJDSPat</span> <span class="U2">ientSearch</span> <span class="U2">';</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">319</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!l</span> <span class="U2">ogMessageP</span> <span class="U2">refix)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">320</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gMessagePr</span> <span class="U2">efix&nbsp;=&nbsp;LOG</span> <span class="U2">_MESSAGE_P</span> <span class="U2">REFIX;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">321</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">322</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gMessagePr</span> <span class="U2">efix&nbsp;+=&nbsp;'.</span> <span class="U2">'&nbsp;+&nbsp;LOG_ME</span> <span class="U2">SSAGE_PREF</span> <span class="U2">IX;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">323</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">324</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;lo</span> <span class="U2">gger&nbsp;=&nbsp;req</span> <span class="U2">.logger;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">325</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;se</span> <span class="U2">nsitivePat</span> <span class="U2">ientAcknow</span> <span class="U2">leged&nbsp;=&nbsp;_.</span> <span class="U2">result(req</span> <span class="U2">,&nbsp;'query._</span> <span class="U2">ack')&nbsp;||&nbsp;_</span> <span class="U2">.result(re</span> <span class="U2">q,&nbsp;'params</span> <span class="U2">._ack')&nbsp;||</span> <span class="U2">&nbsp;_.result(</span> <span class="U2">req,&nbsp;'body</span> <span class="U2">._ack')&nbsp;||</span> <span class="U2">&nbsp;false;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">326</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">327</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ha</span> <span class="U2">sDGAccess&nbsp;</span> <span class="U2">=&nbsp;_.result</span> <span class="U2">(req,&nbsp;'ses</span> <span class="U2">sion.user.</span> <span class="U2">dgSensitiv</span> <span class="U2">eAccess',&nbsp;</span> <span class="U2">'false')&nbsp;=</span> <span class="U2">==&nbsp;'true';</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">328</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">329</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;op</span> <span class="U2">tions&nbsp;=&nbsp;_.</span> <span class="U2">extend({},</span> <span class="U2">&nbsp;req.app.c</span> <span class="U2">onfig.jdsS</span> <span class="U2">erver,&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">330</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ur</span> <span class="U2">l:&nbsp;'/vpr/'</span> <span class="U2">&nbsp;+&nbsp;pid,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">331</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger:&nbsp;logg</span> <span class="U2">er,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">332</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;js</span> <span class="U2">on:&nbsp;true</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">333</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;});</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">334</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;logger</span> <span class="U2">.debug(log</span> <span class="U2">MessagePre</span> <span class="U2">fix&nbsp;+&nbsp;'&nbsp;pe</span> <span class="U2">rforming&nbsp;s</span> <span class="U2">earch&nbsp;usin</span> <span class="U2">g&nbsp;pid='&nbsp;+&nbsp;</span> <span class="U2">pid);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">335</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;httpUt</span> <span class="U2">il.get(opt</span> <span class="U2">ions,&nbsp;func</span> <span class="U2">tion(error</span> <span class="U2">,&nbsp;response</span> <span class="U2">,&nbsp;result)&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">336</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;(error)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">337</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;logger.e</span> <span class="U2">rror(logMe</span> <span class="U2">ssagePrefi</span> <span class="U2">x&nbsp;+&nbsp;'&nbsp;Erro</span> <span class="U2">r&nbsp;performi</span> <span class="U2">ng&nbsp;search&nbsp;</span> <span class="U2">[%s]',&nbsp;(er</span> <span class="U2">ror.messag</span> <span class="U2">e&nbsp;||&nbsp;error</span> <span class="U2">));</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">338</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;error.me</span> <span class="U2">ssage&nbsp;=&nbsp;'T</span> <span class="U2">here&nbsp;was&nbsp;a</span> <span class="U2">n&nbsp;error&nbsp;pr</span> <span class="U2">ocessing&nbsp;y</span> <span class="U2">our&nbsp;reques</span> <span class="U2">t.&nbsp;The&nbsp;err</span> <span class="U2">or&nbsp;has&nbsp;bee</span> <span class="U2">n&nbsp;logged:&nbsp;</span> <span class="U2">';</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">339</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;c</span> <span class="U2">allback(lo</span> <span class="U2">gMessagePr</span> <span class="U2">efix&nbsp;+&nbsp;'&nbsp;'</span> <span class="U2">&nbsp;+&nbsp;error,&nbsp;</span> <span class="U2">null);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">340</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">341</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;(response</span> <span class="U2">.statusCod</span> <span class="U2">e&nbsp;&gt;=&nbsp;300)&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">342</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;logger.e</span> <span class="U2">rror(logMe</span> <span class="U2">ssagePrefi</span> <span class="U2">x&nbsp;+&nbsp;'&nbsp;resp</span> <span class="U2">onse.statu</span> <span class="U2">sCode&nbsp;[%s]</span> <span class="U2">',&nbsp;respons</span> <span class="U2">e.statusCo</span> <span class="U2">de);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">343</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;c</span> <span class="U2">allback({</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">344</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stat</span> <span class="U2">us:&nbsp;respon</span> <span class="U2">se.statusC</span> <span class="U2">ode,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">345</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mess</span> <span class="U2">age:&nbsp;resul</span> <span class="U2">t</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">346</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;},&nbsp;null)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">347</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">348</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;(_.isEmpt</span> <span class="U2">y(_.result</span> <span class="U2">(result,&nbsp;'</span> <span class="U2">data.items</span> <span class="U2">',&nbsp;{})))&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">349</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;c</span> <span class="U2">allback(nu</span> <span class="U2">ll,&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">350</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data</span> <span class="U2">:&nbsp;{}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">351</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;});</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">352</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">353</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_.</span> <span class="U2">each(resul</span> <span class="U2">t.data.ite</span> <span class="U2">ms,&nbsp;functi</span> <span class="U2">on(patient</span> <span class="U2">)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">354</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;(_.is</span> <span class="U2">Undefined(</span> <span class="U2">patient.se</span> <span class="U2">nsitive))&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">355</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pati</span> <span class="U2">ent.sensit</span> <span class="U2">ive&nbsp;=&nbsp;fals</span> <span class="U2">e;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">356</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">357</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;if&nbsp;(!pat</span> <span class="U2">ient.sensi</span> <span class="U2">tive&nbsp;||&nbsp;se</span> <span class="U2">nsitivePat</span> <span class="U2">ientAcknow</span> <span class="U2">leged&nbsp;||&nbsp;h</span> <span class="U2">asDGAccess</span> <span class="U2">)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">358</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pati</span> <span class="U2">ent&nbsp;=&nbsp;clea</span> <span class="U2">nJDSPatien</span> <span class="U2">tAttribute</span> <span class="U2">s(sensitiv</span> <span class="U2">ityUtils.r</span> <span class="U2">emoveSensi</span> <span class="U2">tiveFields</span> <span class="U2">(patient))</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">359</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}&nbsp;else&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">360</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pati</span> <span class="U2">ent&nbsp;=&nbsp;sens</span> <span class="U2">itivityUti</span> <span class="U2">ls.hideSen</span> <span class="U2">sitiveFiel</span> <span class="U2">ds(patient</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">361</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">362</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;patient&nbsp;</span> <span class="U2">=&nbsp;searchUt</span> <span class="U2">il.transfo</span> <span class="U2">rmPatient(</span> <span class="U2">patient,&nbsp;t</span> <span class="U2">rue);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">363</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">364</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">365</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;callb</span> <span class="U2">ack(null,&nbsp;</span> <span class="U2">result);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">366</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;});</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">367</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">368</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">369</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">/**</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">370</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;Removes</span> <span class="U2">&nbsp;unnecessa</span> <span class="U2">ry&nbsp;attribu</span> <span class="U2">tes&nbsp;from&nbsp;a</span> <span class="U2">&nbsp;patient.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">371</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">372</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">{object}&nbsp;p</span> <span class="U2">atient&nbsp;-&nbsp;T</span> <span class="U2">he&nbsp;patient</span> <span class="U2">&nbsp;to&nbsp;remove</span> <span class="U2">&nbsp;attribute</span> <span class="U2">s&nbsp;from.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">373</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@return</span> <span class="U2">&nbsp;{object}&nbsp;</span> <span class="U2">cleanedPat</span> <span class="U2">ient&nbsp;-&nbsp;The</span> <span class="U2">&nbsp;patient,&nbsp;</span> <span class="U2">with&nbsp;unnec</span> <span class="U2">essary&nbsp;att</span> <span class="U2">ributes&nbsp;re</span> <span class="U2">moved.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">374</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*/</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">375</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">function&nbsp;c</span> <span class="U2">leanJDSPat</span> <span class="U2">ientAttrib</span> <span class="U2">utes(patie</span> <span class="U2">nt)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">376</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;cl</span> <span class="U2">eanedPatie</span> <span class="U2">nt&nbsp;=&nbsp;_.pic</span> <span class="U2">k(patient,</span> <span class="U2">&nbsp;JDSPatien</span> <span class="U2">tAttribute</span> <span class="U2">Whitelist)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">377</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="U2">&nbsp;cleanedPa</span> <span class="U2">tient;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">378</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">379</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">380</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">function&nbsp;v</span> <span class="U2">alidRespon</span> <span class="U2">seDataItem</span> <span class="U2">s(logger,&nbsp;</span> <span class="U2">logMessage</span> <span class="U2">Prefix,&nbsp;re</span> <span class="U2">sponse)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">381</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//Chec</span> <span class="U2">k&nbsp;response</span> <span class="U2">.data.item</span> <span class="U2">s</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">382</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!r</span> <span class="U2">esponse)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">383</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.debug</span> <span class="U2">(logMessag</span> <span class="U2">ePrefix&nbsp;+&nbsp;</span> <span class="U2">'_validRes</span> <span class="U2">ponseDataI</span> <span class="U2">tems&nbsp;got&nbsp;a</span> <span class="U2">&nbsp;null&nbsp;resp</span> <span class="U2">onse&nbsp;objec</span> <span class="U2">t');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">384</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;false</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">385</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else</span> <span class="U2">&nbsp;if&nbsp;(!resp</span> <span class="U2">onse.data)</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">386</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.debug</span> <span class="U2">(logMessag</span> <span class="U2">ePrefix&nbsp;+&nbsp;</span> <span class="U2">'_validRes</span> <span class="U2">ponseDataI</span> <span class="U2">tems&nbsp;got&nbsp;a</span> <span class="U2">&nbsp;response&nbsp;</span> <span class="U2">object&nbsp;wit</span> <span class="U2">h&nbsp;no&nbsp;data'</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">387</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;false</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">388</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else</span> <span class="U2">&nbsp;if&nbsp;(!resp</span> <span class="U2">onse.data.</span> <span class="U2">items)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">389</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.debug</span> <span class="U2">(logMessag</span> <span class="U2">ePrefix&nbsp;+&nbsp;</span> <span class="U2">'_validRes</span> <span class="U2">ponseDataI</span> <span class="U2">tems&nbsp;got&nbsp;a</span> <span class="U2">&nbsp;response&nbsp;</span> <span class="U2">object&nbsp;wit</span> <span class="U2">h&nbsp;no&nbsp;data.</span> <span class="U2">items');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">390</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;false</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">391</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">392</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;logger</span> <span class="U2">.debug(log</span> <span class="U2">MessagePre</span> <span class="U2">fix&nbsp;+&nbsp;'_va</span> <span class="U2">lidRespons</span> <span class="U2">eDataItems</span> <span class="U2">&nbsp;got&nbsp;a&nbsp;val</span> <span class="U2">id&nbsp;respons</span> <span class="U2">e&nbsp;object')</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">393</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="U2">&nbsp;true;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">394</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">395</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">396</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">/**</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">397</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;Pass&nbsp;in</span> <span class="U2">&nbsp;'req.quer</span> <span class="U2">y.order'&nbsp;a</span> <span class="U2">nd&nbsp;the&nbsp;res</span> <span class="U2">ponse&nbsp;whic</span> <span class="U2">h&nbsp;contains</span> <span class="U2">&nbsp;data.item</span> <span class="U2">s&nbsp;that&nbsp;nee</span> <span class="U2">d&nbsp;to&nbsp;be&nbsp;or</span> <span class="U2">dered.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">398</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;Example</span> <span class="U2">:&nbsp;https://</span> <span class="U2">ehmp.vista</span> <span class="U2">core.us/re</span> <span class="U2">source/pat</span> <span class="U2">ient-searc</span> <span class="U2">h/full-nam</span> <span class="U2">e?name.ful</span> <span class="U2">l=Seven&amp;or</span> <span class="U2">der=givenN</span> <span class="U2">ames%20DES</span> <span class="U2">C</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">399</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">400</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">logger&nbsp;-&nbsp;r</span> <span class="U2">eq.logger&nbsp;</span> <span class="U2">-&nbsp;The&nbsp;logg</span> <span class="U2">er</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">401</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">logMessage</span> <span class="U2">Prefix&nbsp;-&nbsp;U</span> <span class="U2">sed&nbsp;when&nbsp;l</span> <span class="U2">ogging&nbsp;mes</span> <span class="U2">sages&nbsp;to&nbsp;s</span> <span class="U2">how&nbsp;who&nbsp;is</span> <span class="U2">&nbsp;calling&nbsp;t</span> <span class="U2">his&nbsp;-&nbsp;usef</span> <span class="U2">ul&nbsp;for&nbsp;deb</span> <span class="U2">ugging.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">402</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">order&nbsp;-&nbsp;th</span> <span class="U2">e&nbsp;field&nbsp;(i</span> <span class="U2">n&nbsp;an&nbsp;insta</span> <span class="U2">nce&nbsp;of&nbsp;dat</span> <span class="U2">a.items)&nbsp;t</span> <span class="U2">hat&nbsp;you&nbsp;wa</span> <span class="U2">nt&nbsp;to&nbsp;sear</span> <span class="U2">ch&nbsp;on.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">403</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;If&nbsp;this</span> <span class="U2">&nbsp;is&nbsp;not&nbsp;pa</span> <span class="U2">ssed&nbsp;in,&nbsp;t</span> <span class="U2">he&nbsp;data&nbsp;wi</span> <span class="U2">ll&nbsp;be&nbsp;retu</span> <span class="U2">rned&nbsp;as&nbsp;it</span> <span class="U2">&nbsp;is&nbsp;-&nbsp;no&nbsp;s</span> <span class="U2">orting&nbsp;wil</span> <span class="U2">l&nbsp;take&nbsp;pla</span> <span class="U2">ce.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">404</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;After&nbsp;t</span> <span class="U2">he&nbsp;field&nbsp;y</span> <span class="U2">ou&nbsp;want&nbsp;to</span> <span class="U2">&nbsp;search&nbsp;on</span> <span class="U2">,&nbsp;you&nbsp;can&nbsp;</span> <span class="U2">specify&nbsp;on</span> <span class="U2">e&nbsp;of&nbsp;two&nbsp;v</span> <span class="U2">alues:</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">405</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;'ASC'&nbsp;f</span> <span class="U2">or&nbsp;ascendi</span> <span class="U2">ng&nbsp;or&nbsp;'DES</span> <span class="U2">C'&nbsp;for&nbsp;des</span> <span class="U2">cending.&nbsp;&nbsp;</span> <span class="U2">If&nbsp;fieldNa</span> <span class="U2">me&nbsp;is&nbsp;supp</span> <span class="U2">lied&nbsp;but&nbsp;'</span> <span class="U2">ASC'&nbsp;or&nbsp;'D</span> <span class="U2">ESC'&nbsp;is&nbsp;no</span> <span class="U2">t&nbsp;supplied</span> <span class="U2">,&nbsp;'ASC'&nbsp;wi</span> <span class="U2">ll&nbsp;be&nbsp;assu</span> <span class="U2">med.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">406</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">response&nbsp;T</span> <span class="U2">he&nbsp;object&nbsp;</span> <span class="U2">containing</span> <span class="U2">&nbsp;data.item</span> <span class="U2">s&nbsp;that&nbsp;was</span> <span class="U2">&nbsp;returned&nbsp;</span> <span class="U2">from&nbsp;the&nbsp;c</span> <span class="U2">all&nbsp;to&nbsp;cal</span> <span class="U2">lPatientSe</span> <span class="U2">arch</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">407</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*/</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">408</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">module.exp</span> <span class="U2">orts.sort&nbsp;</span> <span class="U2">=&nbsp;function</span> <span class="U2">(logger,&nbsp;l</span> <span class="U2">ogMessageP</span> <span class="U2">refix,&nbsp;ord</span> <span class="U2">er,&nbsp;respon</span> <span class="U2">se)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">409</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;//Chec</span> <span class="U2">k&nbsp;order&nbsp;ob</span> <span class="U2">ject</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">410</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!o</span> <span class="U2">rder)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">411</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.debug</span> <span class="U2">(logMessag</span> <span class="U2">ePrefix&nbsp;+&nbsp;</span> <span class="U2">'_sort&nbsp;no&nbsp;</span> <span class="U2">sort&nbsp;speci</span> <span class="U2">fied&nbsp;-&nbsp;ret</span> <span class="U2">urning&nbsp;dat</span> <span class="U2">a&nbsp;as&nbsp;is');</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">412</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">413</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">414</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(va</span> <span class="U2">lidRespons</span> <span class="U2">eDataItems</span> <span class="U2">(logger,&nbsp;l</span> <span class="U2">ogMessageP</span> <span class="U2">refix&nbsp;+&nbsp;'_</span> <span class="U2">sort',&nbsp;res</span> <span class="U2">ponse)&nbsp;===</span> <span class="U2">&nbsp;false)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">415</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">416</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">417</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;fi</span> <span class="U2">eldAndOrde</span> <span class="U2">r&nbsp;=&nbsp;order.</span> <span class="U2">split('&nbsp;')</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">418</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;fi</span> <span class="U2">eld&nbsp;=&nbsp;fiel</span> <span class="U2">dAndOrder[</span> <span class="U2">0];</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">419</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;fi</span> <span class="U2">eldOrder&nbsp;=</span> <span class="U2">&nbsp;(fieldAnd</span> <span class="U2">Order.leng</span> <span class="U2">th&nbsp;===&nbsp;2&nbsp;?</span> <span class="U2">&nbsp;fieldAndO</span> <span class="U2">rder[1]&nbsp;:&nbsp;</span> <span class="U2">'ASC');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">420</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(fi</span> <span class="U2">eldOrder)&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">421</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</span> <span class="U2">eldOrder&nbsp;=</span> <span class="U2">&nbsp;fieldOrde</span> <span class="U2">r.toLowerC</span> <span class="U2">ase();</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">422</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">423</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;logger</span> <span class="U2">.debug(log</span> <span class="U2">MessagePre</span> <span class="U2">fix&nbsp;+&nbsp;'_so</span> <span class="U2">rt&nbsp;sorting</span> <span class="U2">&nbsp;by&nbsp;'&nbsp;+&nbsp;fi</span> <span class="U2">eldOrder);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">424</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(fi</span> <span class="U2">eldOrder&nbsp;=</span> <span class="U2">==&nbsp;'desc')</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">425</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">sponse.dat</span> <span class="U2">a.items&nbsp;=&nbsp;</span> <span class="U2">_.sortBy(r</span> <span class="U2">esponse.da</span> <span class="U2">ta.items,&nbsp;</span> <span class="U2">field).rev</span> <span class="U2">erse();</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">426</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">427</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">sponse.dat</span> <span class="U2">a.items&nbsp;=&nbsp;</span> <span class="U2">_.sortBy(r</span> <span class="U2">esponse.da</span> <span class="U2">ta.items,&nbsp;</span> <span class="U2">field);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">428</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">429</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">430</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">431</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">/**</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">432</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;Because</span> <span class="U2">&nbsp;lodash&nbsp;tr</span> <span class="U2">eats&nbsp;NaN&nbsp;a</span> <span class="U2">s&nbsp;a&nbsp;number</span> <span class="U2">,&nbsp;we&nbsp;need&nbsp;</span> <span class="U2">a&nbsp;way&nbsp;to&nbsp;e</span> <span class="U2">nsure&nbsp;that</span> <span class="U2">&nbsp;the&nbsp;value</span> <span class="U2">&nbsp;passed&nbsp;in</span> <span class="U2">&nbsp;is&nbsp;not&nbsp;on</span> <span class="U2">ly&nbsp;a&nbsp;numbe</span> <span class="U2">r&nbsp;but</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">433</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;that&nbsp;it</span> <span class="U2">&nbsp;is&nbsp;not&nbsp;a&nbsp;</span> <span class="U2">floating&nbsp;v</span> <span class="U2">alue.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">434</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">435</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">num&nbsp;the&nbsp;va</span> <span class="U2">riable&nbsp;to&nbsp;</span> <span class="U2">check&nbsp;to&nbsp;s</span> <span class="U2">ee&nbsp;if&nbsp;it's</span> <span class="U2">&nbsp;a&nbsp;whole&nbsp;n</span> <span class="U2">umber</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">436</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@return</span> <span class="U2">s&nbsp;{boolean</span> <span class="U2">}&nbsp;True&nbsp;if&nbsp;</span> <span class="U2">a&nbsp;whole&nbsp;nu</span> <span class="U2">mber.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">437</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*/</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">438</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">function&nbsp;i</span> <span class="U2">sWholeNumb</span> <span class="U2">er(num)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">439</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(nu</span> <span class="U2">llChecker.</span> <span class="U2">isNullish(</span> <span class="U2">num))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">440</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;false</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">441</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">442</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(ty</span> <span class="U2">peof&nbsp;num&nbsp;=</span> <span class="U2">==&nbsp;'string</span> <span class="U2">'&nbsp;&amp;&amp;&nbsp;_.isE</span> <span class="U2">mpty(num))</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">443</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;false</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">444</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">445</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="U2">&nbsp;num&nbsp;%&nbsp;1&nbsp;=</span> <span class="U2">==&nbsp;0;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">446</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">447</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">448</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">/**</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">449</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">450</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">logger&nbsp;-&nbsp;r</span> <span class="U2">eq.logger&nbsp;</span> <span class="U2">-&nbsp;The&nbsp;logg</span> <span class="U2">er</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">451</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">logMessage</span> <span class="U2">Prefix&nbsp;-&nbsp;U</span> <span class="U2">sed&nbsp;when&nbsp;l</span> <span class="U2">ogging&nbsp;mes</span> <span class="U2">sages&nbsp;to&nbsp;s</span> <span class="U2">how&nbsp;who&nbsp;is</span> <span class="U2">&nbsp;calling&nbsp;t</span> <span class="U2">his&nbsp;-&nbsp;usef</span> <span class="U2">ul&nbsp;for&nbsp;deb</span> <span class="U2">ugging.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">452</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">start&nbsp;Wher</span> <span class="U2">e&nbsp;do&nbsp;you&nbsp;w</span> <span class="U2">ant&nbsp;to&nbsp;sta</span> <span class="U2">rt&nbsp;returni</span> <span class="U2">ng&nbsp;results</span> <span class="U2">.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">453</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">limit&nbsp;How&nbsp;</span> <span class="U2">many&nbsp;resul</span> <span class="U2">ts&nbsp;do&nbsp;you&nbsp;</span> <span class="U2">want&nbsp;retur</span> <span class="U2">ned&nbsp;for&nbsp;ea</span> <span class="U2">ch&nbsp;page.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">454</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">response&nbsp;T</span> <span class="U2">he&nbsp;object&nbsp;</span> <span class="U2">containing</span> <span class="U2">&nbsp;data.item</span> <span class="U2">s&nbsp;that&nbsp;was</span> <span class="U2">&nbsp;returned&nbsp;</span> <span class="U2">from&nbsp;the&nbsp;c</span> <span class="U2">all&nbsp;to&nbsp;cal</span> <span class="U2">lPatientSe</span> <span class="U2">arch</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">455</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*/</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">456</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">module.exp</span> <span class="U2">orts.limit</span> <span class="U2">&nbsp;=&nbsp;functio</span> <span class="U2">n(logger,&nbsp;</span> <span class="U2">logMessage</span> <span class="U2">Prefix,&nbsp;st</span> <span class="U2">art,&nbsp;limit</span> <span class="U2">,&nbsp;response</span> <span class="U2">)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">457</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;logger</span> <span class="U2">.debug(log</span> <span class="U2">MessagePre</span> <span class="U2">fix&nbsp;+&nbsp;'_li</span> <span class="U2">mit&nbsp;start=</span> <span class="U2">'&nbsp;+&nbsp;start&nbsp;</span> <span class="U2">+&nbsp;',&nbsp;limit</span> <span class="U2">='&nbsp;+&nbsp;limit</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">458</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!l</span> <span class="U2">imit)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">459</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.debug</span> <span class="U2">(logMessag</span> <span class="U2">ePrefix&nbsp;+&nbsp;</span> <span class="U2">'_limit&nbsp;no</span> <span class="U2">&nbsp;limit&nbsp;spe</span> <span class="U2">cified&nbsp;-&nbsp;r</span> <span class="U2">eturning&nbsp;d</span> <span class="U2">ata&nbsp;as&nbsp;is'</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">460</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">461</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">462</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!i</span> <span class="U2">sWholeNumb</span> <span class="U2">er(limit))</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">463</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.debug</span> <span class="U2">(logMessag</span> <span class="U2">ePrefix&nbsp;+&nbsp;</span> <span class="U2">'_limit&nbsp;li</span> <span class="U2">mit&nbsp;specif</span> <span class="U2">ied&nbsp;was&nbsp;no</span> <span class="U2">t&nbsp;a&nbsp;whole&nbsp;</span> <span class="U2">number&nbsp;-&nbsp;r</span> <span class="U2">eturning&nbsp;d</span> <span class="U2">ata&nbsp;as&nbsp;is'</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">464</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">465</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">466</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!s</span> <span class="U2">tart)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">467</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;st</span> <span class="U2">art&nbsp;=&nbsp;0;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">468</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">469</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!i</span> <span class="U2">sWholeNumb</span> <span class="U2">er(start))</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">470</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.debug</span> <span class="U2">(logMessag</span> <span class="U2">ePrefix&nbsp;+&nbsp;</span> <span class="U2">'_limit&nbsp;st</span> <span class="U2">art&nbsp;specif</span> <span class="U2">ied&nbsp;was&nbsp;no</span> <span class="U2">t&nbsp;a&nbsp;whole&nbsp;</span> <span class="U2">number&nbsp;-&nbsp;s</span> <span class="U2">etting&nbsp;to&nbsp;</span> <span class="U2">zero');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">471</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;st</span> <span class="U2">art&nbsp;=&nbsp;0;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">472</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">473</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;limit&nbsp;</span> <span class="U2">=&nbsp;Number(l</span> <span class="U2">imit);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">474</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;start&nbsp;</span> <span class="U2">=&nbsp;Number(s</span> <span class="U2">tart);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">475</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(va</span> <span class="U2">lidRespons</span> <span class="U2">eDataItems</span> <span class="U2">(logger,&nbsp;l</span> <span class="U2">ogMessageP</span> <span class="U2">refix&nbsp;+&nbsp;'&nbsp;</span> <span class="U2">limit',&nbsp;re</span> <span class="U2">sponse)&nbsp;==</span> <span class="U2">=&nbsp;false)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">476</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.debug</span> <span class="U2">(logMessag</span> <span class="U2">ePrefix&nbsp;+&nbsp;</span> <span class="U2">'_limit&nbsp;va</span> <span class="U2">lidRespons</span> <span class="U2">eDataItems</span> <span class="U2">&nbsp;returned&nbsp;</span> <span class="U2">false&nbsp;-&nbsp;re</span> <span class="U2">turning&nbsp;da</span> <span class="U2">ta&nbsp;as&nbsp;is')</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">477</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">478</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">479</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;to</span> <span class="U2">talItems&nbsp;=</span> <span class="U2">&nbsp;response.</span> <span class="U2">data.items</span> <span class="U2">.length;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">480</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;limit&nbsp;</span> <span class="U2">=&nbsp;limit&nbsp;&lt;&nbsp;</span> <span class="U2">totalItems</span> <span class="U2">&nbsp;?&nbsp;limit&nbsp;:</span> <span class="U2">&nbsp;totalItem</span> <span class="U2">s;&nbsp;//If&nbsp;li</span> <span class="U2">mit&nbsp;is&nbsp;big</span> <span class="U2">ger&nbsp;than&nbsp;t</span> <span class="U2">otalItems,</span> <span class="U2">&nbsp;then&nbsp;just</span> <span class="U2">&nbsp;use&nbsp;total</span> <span class="U2">Items</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">481</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">482</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;respon</span> <span class="U2">se.data.it</span> <span class="U2">emsPerPage</span> <span class="U2">&nbsp;=&nbsp;limit;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">483</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;respon</span> <span class="U2">se.data.st</span> <span class="U2">artIndex&nbsp;=</span> <span class="U2">&nbsp;start;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">484</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;respon</span> <span class="U2">se.data.pa</span> <span class="U2">geIndex&nbsp;=&nbsp;</span> <span class="U2">(start&nbsp;/&nbsp;l</span> <span class="U2">imit&nbsp;|&nbsp;0);</span> <span class="U2">&nbsp;//&nbsp;jshint</span> <span class="U2">&nbsp;ignore:li</span> <span class="U2">ne</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">485</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;respon</span> <span class="U2">se.data.to</span> <span class="U2">talPages&nbsp;=</span> <span class="U2">&nbsp;(totalIte</span> <span class="U2">ms&nbsp;/&nbsp;limit</span> <span class="U2">&nbsp;|&nbsp;0)&nbsp;+&nbsp;(t</span> <span class="U2">otalItems&nbsp;</span> <span class="U2">%&nbsp;limit&nbsp;&gt;&nbsp;</span> <span class="U2">0&nbsp;?&nbsp;1&nbsp;:&nbsp;0)</span> <span class="U2">;&nbsp;//&nbsp;jshin</span> <span class="U2">t&nbsp;ignore:l</span> <span class="U2">ine</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">486</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;logger</span> <span class="U2">.debug({</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">487</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;li</span> <span class="U2">mit:&nbsp;limit</span> <span class="U2">,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">488</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it</span> <span class="U2">emsPerPage</span> <span class="U2">:&nbsp;_.result</span> <span class="U2">(response,</span> <span class="U2">&nbsp;'data.ite</span> <span class="U2">msPerPage'</span> <span class="U2">,&nbsp;'No&nbsp;item</span> <span class="U2">s&nbsp;per&nbsp;page</span> <span class="U2">&nbsp;found'),</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">489</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;st</span> <span class="U2">art:&nbsp;_.res</span> <span class="U2">ult(respon</span> <span class="U2">se,&nbsp;'data.</span> <span class="U2">startIndex</span> <span class="U2">',&nbsp;'No&nbsp;sta</span> <span class="U2">rt&nbsp;found')</span> <span class="U2">,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">490</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pa</span> <span class="U2">geIndex:&nbsp;_</span> <span class="U2">.result(re</span> <span class="U2">sponse,&nbsp;'d</span> <span class="U2">ata.pageIn</span> <span class="U2">dex',&nbsp;'No&nbsp;</span> <span class="U2">page&nbsp;index</span> <span class="U2">&nbsp;found'),</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">491</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to</span> <span class="U2">talPages:&nbsp;</span> <span class="U2">_.result(r</span> <span class="U2">esponse,&nbsp;'</span> <span class="U2">data.total</span> <span class="U2">Pages',&nbsp;'N</span> <span class="U2">o&nbsp;total&nbsp;pa</span> <span class="U2">ges&nbsp;found'</span> <span class="U2">),</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">492</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to</span> <span class="U2">talItems:&nbsp;</span> <span class="U2">_.result(r</span> <span class="U2">esponse,&nbsp;'</span> <span class="U2">data.total</span> <span class="U2">Items',&nbsp;'N</span> <span class="U2">o&nbsp;total&nbsp;it</span> <span class="U2">ems&nbsp;count&nbsp;</span> <span class="U2">found')</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">493</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;log</span> <span class="U2">MessagePre</span> <span class="U2">fix&nbsp;+&nbsp;'res</span> <span class="U2">ponse&nbsp;data</span> <span class="U2">');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">494</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">495</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(li</span> <span class="U2">mit&nbsp;&gt;&nbsp;0)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">496</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.debug</span> <span class="U2">(logMessag</span> <span class="U2">ePrefix&nbsp;+&nbsp;</span> <span class="U2">'_limit&nbsp;st</span> <span class="U2">art('&nbsp;+&nbsp;ty</span> <span class="U2">peof&nbsp;start</span> <span class="U2">&nbsp;+&nbsp;')='&nbsp;+&nbsp;</span> <span class="U2">start&nbsp;+&nbsp;',</span> <span class="U2">&nbsp;limit('&nbsp;+</span> <span class="U2">&nbsp;typeof&nbsp;li</span> <span class="U2">mit&nbsp;+&nbsp;')='</span> <span class="U2">&nbsp;+&nbsp;limit);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">497</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;end&nbsp;=&nbsp;st</span> <span class="U2">art&nbsp;+&nbsp;limi</span> <span class="U2">t;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">498</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.debug</span> <span class="U2">({</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">499</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;items:&nbsp;r</span> <span class="U2">esponse.da</span> <span class="U2">ta.items</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">500</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</span> <span class="U2">&nbsp;logMessag</span> <span class="U2">ePrefix&nbsp;+&nbsp;</span> <span class="U2">'_limit&nbsp;re</span> <span class="U2">sponse.dat</span> <span class="U2">a.items&nbsp;-&nbsp;</span> <span class="U2">before&nbsp;sli</span> <span class="U2">ce('&nbsp;+&nbsp;sta</span> <span class="U2">rt&nbsp;+&nbsp;',&nbsp;'&nbsp;</span> <span class="U2">+&nbsp;end&nbsp;+&nbsp;')</span> <span class="U2">');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">501</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">sponse.dat</span> <span class="U2">a.items&nbsp;=&nbsp;</span> <span class="U2">response.d</span> <span class="U2">ata.items.</span> <span class="U2">slice(star</span> <span class="U2">t,&nbsp;end);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">502</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.debug</span> <span class="U2">({</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">503</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;items:&nbsp;r</span> <span class="U2">esponse.da</span> <span class="U2">ta.items</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">504</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</span> <span class="U2">&nbsp;logMessag</span> <span class="U2">ePrefix&nbsp;+&nbsp;</span> <span class="U2">'_limit&nbsp;re</span> <span class="U2">sponse.dat</span> <span class="U2">a.items&nbsp;-&nbsp;</span> <span class="U2">after&nbsp;slic</span> <span class="U2">e('&nbsp;+&nbsp;star</span> <span class="U2">t&nbsp;+&nbsp;',&nbsp;'&nbsp;+</span> <span class="U2">&nbsp;end&nbsp;+&nbsp;')'</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">505</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">506</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.debug</span> <span class="U2">({</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">507</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;items:&nbsp;r</span> <span class="U2">esponse.da</span> <span class="U2">ta.items</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">508</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</span> <span class="U2">&nbsp;logMessag</span> <span class="U2">ePrefix&nbsp;+&nbsp;</span> <span class="U2">'_limit&nbsp;re</span> <span class="U2">sponse.dat</span> <span class="U2">a.items&nbsp;-&nbsp;</span> <span class="U2">before&nbsp;sli</span> <span class="U2">ce('&nbsp;+&nbsp;sta</span> <span class="U2">rt&nbsp;+&nbsp;')');</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">509</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">sponse.dat</span> <span class="U2">a.items&nbsp;=&nbsp;</span> <span class="U2">response.d</span> <span class="U2">ata.items.</span> <span class="U2">slice(star</span> <span class="U2">t);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">510</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.debug</span> <span class="U2">({</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">511</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;items:&nbsp;r</span> <span class="U2">esponse.da</span> <span class="U2">ta.items</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">512</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</span> <span class="U2">&nbsp;logMessag</span> <span class="U2">ePrefix&nbsp;+&nbsp;</span> <span class="U2">'_limit&nbsp;re</span> <span class="U2">sponse.dat</span> <span class="U2">a.items&nbsp;-&nbsp;</span> <span class="U2">after&nbsp;slic</span> <span class="U2">e('&nbsp;+&nbsp;star</span> <span class="U2">t&nbsp;+&nbsp;')');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">513</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">514</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;logger</span> <span class="U2">.debug(log</span> <span class="U2">MessagePre</span> <span class="U2">fix&nbsp;+&nbsp;'_li</span> <span class="U2">mit&nbsp;respon</span> <span class="U2">se.data.it</span> <span class="U2">ems.length</span> <span class="U2">:&nbsp;'&nbsp;+&nbsp;resp</span> <span class="U2">onse.data.</span> <span class="U2">items.leng</span> <span class="U2">th);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">515</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;respon</span> <span class="U2">se.data.cu</span> <span class="U2">rrentItemC</span> <span class="U2">ount&nbsp;=&nbsp;res</span> <span class="U2">ponse.data</span> <span class="U2">.items.len</span> <span class="U2">gth;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">516</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;logger</span> <span class="U2">.debug(log</span> <span class="U2">MessagePre</span> <span class="U2">fix&nbsp;+&nbsp;'_li</span> <span class="U2">mit&nbsp;respon</span> <span class="U2">se.data.cu</span> <span class="U2">rrentItemC</span> <span class="U2">ount:&nbsp;'&nbsp;+&nbsp;</span> <span class="U2">response.d</span> <span class="U2">ata.curren</span> <span class="U2">tItemCount</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">517</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">518</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">519</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">function&nbsp;v</span> <span class="U2">alidateFil</span> <span class="U2">ter(logger</span> <span class="U2">,&nbsp;logMessa</span> <span class="U2">gePrefix,&nbsp;</span> <span class="U2">filter,&nbsp;re</span> <span class="U2">sponse)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">520</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!f</span> <span class="U2">ilter)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">521</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.debug</span> <span class="U2">(logMessag</span> <span class="U2">ePrefix&nbsp;+&nbsp;</span> <span class="U2">'_validate</span> <span class="U2">Filter&nbsp;no&nbsp;</span> <span class="U2">filter&nbsp;spe</span> <span class="U2">cified&nbsp;-&nbsp;r</span> <span class="U2">eturning&nbsp;d</span> <span class="U2">ata&nbsp;as&nbsp;is'</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">522</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;false</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">523</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">524</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(va</span> <span class="U2">lidRespons</span> <span class="U2">eDataItems</span> <span class="U2">(logger,&nbsp;l</span> <span class="U2">ogMessageP</span> <span class="U2">refix&nbsp;+&nbsp;'&nbsp;</span> <span class="U2">filter',&nbsp;r</span> <span class="U2">esponse)&nbsp;=</span> <span class="U2">==&nbsp;false)&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">525</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;false</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">526</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">527</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!_</span> <span class="U2">.startsWit</span> <span class="U2">h(filter,&nbsp;</span> <span class="U2">'eq('))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">528</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.warn(</span> <span class="U2">logMessage</span> <span class="U2">Prefix&nbsp;+&nbsp;'</span> <span class="U2">_validateF</span> <span class="U2">ilter&nbsp;filt</span> <span class="U2">er&nbsp;was&nbsp;not</span> <span class="U2">&nbsp;eq&nbsp;-&nbsp;retu</span> <span class="U2">rning&nbsp;data</span> <span class="U2">&nbsp;as&nbsp;is');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">529</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;false</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">530</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">531</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!_</span> <span class="U2">.endsWith(</span> <span class="U2">filter,&nbsp;')</span> <span class="U2">'))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">532</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.warn(</span> <span class="U2">logMessage</span> <span class="U2">Prefix&nbsp;+&nbsp;'</span> <span class="U2">_validateF</span> <span class="U2">ilter&nbsp;filt</span> <span class="U2">er&nbsp;was&nbsp;not</span> <span class="U2">&nbsp;of&nbsp;the&nbsp;fo</span> <span class="U2">rm&nbsp;eq(fiel</span> <span class="U2">dName,"fie</span> <span class="U2">ldValue")&nbsp;</span> <span class="U2">-&nbsp;no&nbsp;closi</span> <span class="U2">ng&nbsp;paren&nbsp;-</span> <span class="U2">&nbsp;returning</span> <span class="U2">&nbsp;data&nbsp;as&nbsp;i</span> <span class="U2">s');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">533</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;false</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">534</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">535</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(_.</span> <span class="U2">indexOf(fi</span> <span class="U2">lter,&nbsp;',')</span> <span class="U2">&nbsp;===&nbsp;-1)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">536</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.warn(</span> <span class="U2">logMessage</span> <span class="U2">Prefix&nbsp;+&nbsp;'</span> <span class="U2">_validateF</span> <span class="U2">ilter&nbsp;filt</span> <span class="U2">er&nbsp;was&nbsp;not</span> <span class="U2">&nbsp;of&nbsp;the&nbsp;fo</span> <span class="U2">rm&nbsp;eq(fiel</span> <span class="U2">dName,"fie</span> <span class="U2">ldValue")&nbsp;</span> <span class="U2">-&nbsp;no&nbsp;comma</span> <span class="U2">&nbsp;-&nbsp;returni</span> <span class="U2">ng&nbsp;data&nbsp;as</span> <span class="U2">&nbsp;is');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">537</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;false</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">538</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">539</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="U2">&nbsp;true;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">540</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">541</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">542</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">function&nbsp;p</span> <span class="U2">arseFilter</span> <span class="U2">(logger,&nbsp;l</span> <span class="U2">ogMessageP</span> <span class="U2">refix,&nbsp;fil</span> <span class="U2">ter)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">543</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;st</span> <span class="U2">r&nbsp;=&nbsp;filter</span> <span class="U2">.slice(3,&nbsp;</span> <span class="U2">filter.len</span> <span class="U2">gth&nbsp;-&nbsp;1);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">544</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;fi</span> <span class="U2">eldName&nbsp;=&nbsp;</span> <span class="U2">_.trim(str</span> <span class="U2">.slice(0,&nbsp;</span> <span class="U2">_.indexOf(</span> <span class="U2">str,&nbsp;','))</span> <span class="U2">,&nbsp;'\'"');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">545</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;fi</span> <span class="U2">eldValue&nbsp;=</span> <span class="U2">&nbsp;_.trim(st</span> <span class="U2">r.slice(_.</span> <span class="U2">indexOf(st</span> <span class="U2">r,&nbsp;',')&nbsp;+&nbsp;</span> <span class="U2">1,&nbsp;str.len</span> <span class="U2">gth),&nbsp;'\'"</span> <span class="U2">');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">546</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">547</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</span> <span class="U2">eldName:&nbsp;f</span> <span class="U2">ieldName,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">548</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</span> <span class="U2">eldValue:&nbsp;</span> <span class="U2">fieldValue</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">549</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">550</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">551</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">/**</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">552</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;Pass&nbsp;in</span> <span class="U2">&nbsp;'req.quer</span> <span class="U2">y.filter'&nbsp;</span> <span class="U2">and&nbsp;the&nbsp;re</span> <span class="U2">sponse&nbsp;whi</span> <span class="U2">ch&nbsp;contain</span> <span class="U2">s&nbsp;data.ite</span> <span class="U2">ms&nbsp;that&nbsp;ne</span> <span class="U2">ed&nbsp;to&nbsp;be&nbsp;o</span> <span class="U2">rdered.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="C2 ln-no" style="text-align: right;">553</td>  
     <td class="nbgC2"><span class="I2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;Example</span> <span class="U2">:&nbsp;http://</span> <span class="C2">IP&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;</span> <span class="U2">/resource/</span> <span class="U2">locations/</span> <span class="U2">clinics/pa</span> <span class="U2">tients?uid</span> <span class="U2">=urn:va:lo</span> <span class="U2">cation:9E7</span> <span class="U2">A:23&amp;filte</span> <span class="U2">r=eq(famil</span> <span class="U2">yName,%22E</span> <span class="U2">IGHT%22)</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">554</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">555</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">logger&nbsp;-&nbsp;r</span> <span class="U2">eq.logger&nbsp;</span> <span class="U2">-&nbsp;The&nbsp;logg</span> <span class="U2">er</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">556</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">logMessage</span> <span class="U2">Prefix&nbsp;-&nbsp;U</span> <span class="U2">sed&nbsp;when&nbsp;l</span> <span class="U2">ogging&nbsp;mes</span> <span class="U2">sages&nbsp;to&nbsp;s</span> <span class="U2">how&nbsp;who&nbsp;is</span> <span class="U2">&nbsp;calling&nbsp;t</span> <span class="U2">his&nbsp;-&nbsp;usef</span> <span class="U2">ul&nbsp;for&nbsp;deb</span> <span class="U2">ugging.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">557</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">filter&nbsp;-&nbsp;t</span> <span class="U2">he&nbsp;filter&nbsp;</span> <span class="U2">that&nbsp;follo</span> <span class="U2">ws&nbsp;the&nbsp;pat</span> <span class="U2">tern&nbsp;&amp;quot</span> <span class="U2">;eq(fieldN</span> <span class="U2">ame,"field</span> <span class="U2">Value")&amp;qu</span> <span class="U2">ot;.&nbsp;&nbsp;Only</span> <span class="U2">&nbsp;eq&nbsp;is&nbsp;sup</span> <span class="U2">ported</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">558</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;and&nbsp;if&nbsp;</span> <span class="U2">this&nbsp;patte</span> <span class="U2">rn&nbsp;is&nbsp;not&nbsp;</span> <span class="U2">found,&nbsp;we&nbsp;</span> <span class="U2">just&nbsp;retur</span> <span class="U2">n&nbsp;the&nbsp;data</span> <span class="U2">&nbsp;as&nbsp;it&nbsp;is.</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">559</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">response&nbsp;T</span> <span class="U2">he&nbsp;object&nbsp;</span> <span class="U2">containing</span> <span class="U2">&nbsp;data.item</span> <span class="U2">s&nbsp;that&nbsp;was</span> <span class="U2">&nbsp;returned&nbsp;</span> <span class="U2">from&nbsp;the&nbsp;c</span> <span class="U2">all&nbsp;to&nbsp;cal</span> <span class="U2">lPatientSe</span> <span class="U2">arch</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">560</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*/</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">561</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">module.exp</span> <span class="U2">orts.filte</span> <span class="U2">r&nbsp;=&nbsp;functi</span> <span class="U2">on(logger,</span> <span class="U2">&nbsp;logMessag</span> <span class="U2">ePrefix,&nbsp;f</span> <span class="U2">ilter,&nbsp;res</span> <span class="U2">ponse)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">562</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;logger</span> <span class="U2">.debug(log</span> <span class="U2">MessagePre</span> <span class="U2">fix&nbsp;+&nbsp;'_fi</span> <span class="U2">lter&nbsp;filte</span> <span class="U2">ring&nbsp;by&nbsp;'&nbsp;</span> <span class="U2">+&nbsp;filter);</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">563</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!v</span> <span class="U2">alidateFil</span> <span class="U2">ter(logger</span> <span class="U2">,&nbsp;logMessa</span> <span class="U2">gePrefix&nbsp;+</span> <span class="U2">&nbsp;'_filter'</span> <span class="U2">,&nbsp;filter,&nbsp;</span> <span class="U2">response))</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">564</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">565</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">566</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;fi</span> <span class="U2">eldNameAnd</span> <span class="U2">Value&nbsp;=&nbsp;pa</span> <span class="U2">rseFilter(</span> <span class="U2">logger,&nbsp;lo</span> <span class="U2">gMessagePr</span> <span class="U2">efix&nbsp;+&nbsp;'_f</span> <span class="U2">ilter',&nbsp;fi</span> <span class="U2">lter);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">567</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;fi</span> <span class="U2">eldName&nbsp;=&nbsp;</span> <span class="U2">fieldNameA</span> <span class="U2">ndValue.fi</span> <span class="U2">eldName;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">568</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;fi</span> <span class="U2">eldValue&nbsp;=</span> <span class="U2">&nbsp;fieldName</span> <span class="U2">AndValue.f</span> <span class="U2">ieldValue;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">569</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;logger</span> <span class="U2">.debug({</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">570</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</span> <span class="U2">eldName:&nbsp;f</span> <span class="U2">ieldName,</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">571</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fi</span> <span class="U2">eldValue:&nbsp;</span> <span class="U2">fieldValue</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">572</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;log</span> <span class="U2">MessagePre</span> <span class="U2">fix&nbsp;+&nbsp;'_fi</span> <span class="U2">lter&nbsp;field</span> <span class="U2">Name&nbsp;and&nbsp;f</span> <span class="U2">ieldValue'</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">573</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">574</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;fieldV</span> <span class="U2">alue&nbsp;=&nbsp;fie</span> <span class="U2">ldValue.to</span> <span class="U2">LowerCase(</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">575</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;ne</span> <span class="U2">wItems&nbsp;=&nbsp;_</span> <span class="U2">.filter(re</span> <span class="U2">sponse.dat</span> <span class="U2">a.items,&nbsp;f</span> <span class="U2">unction(it</span> <span class="U2">em)&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">576</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.trace</span> <span class="U2">({</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">577</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;item:&nbsp;it</span> <span class="U2">em</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">578</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</span> <span class="U2">&nbsp;logMessag</span> <span class="U2">ePrefix&nbsp;+&nbsp;</span> <span class="U2">'_filter&nbsp;p</span> <span class="U2">erforming&nbsp;</span> <span class="U2">filter');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">579</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">580</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va</span> <span class="U2">r&nbsp;actualVa</span> <span class="U2">lue&nbsp;=&nbsp;item</span> <span class="U2">[fieldName</span> <span class="U2">];</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">581</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.debug</span> <span class="U2">(logMessag</span> <span class="U2">ePrefix&nbsp;+&nbsp;</span> <span class="U2">'_filter&nbsp;a</span> <span class="U2">ctualValue</span> <span class="U2">&nbsp;is&nbsp;'&nbsp;+&nbsp;ac</span> <span class="U2">tualValue)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">582</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">583</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;(nullChec</span> <span class="U2">ker.isNotN</span> <span class="U2">ullish(act</span> <span class="U2">ualValue))</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">584</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;actualVa</span> <span class="U2">lue&nbsp;=&nbsp;actu</span> <span class="U2">alValue.to</span> <span class="U2">LowerCase(</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">585</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">586</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lo</span> <span class="U2">gger.debug</span> <span class="U2">(logMessag</span> <span class="U2">ePrefix&nbsp;+&nbsp;</span> <span class="U2">'_filter&nbsp;p</span> <span class="U2">erforming&nbsp;</span> <span class="U2">actualValu</span> <span class="U2">e&nbsp;is&nbsp;now&nbsp;'</span> <span class="U2">&nbsp;+&nbsp;actualV</span> <span class="U2">alue);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">587</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">588</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;(actualVa</span> <span class="U2">lue&nbsp;===&nbsp;fi</span> <span class="U2">eldValue)&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">589</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;logger.d</span> <span class="U2">ebug(logMe</span> <span class="U2">ssagePrefi</span> <span class="U2">x&nbsp;+&nbsp;'_filt</span> <span class="U2">er&nbsp;actualV</span> <span class="U2">alue&nbsp;('&nbsp;+&nbsp;</span> <span class="U2">actualValu</span> <span class="U2">e&nbsp;+&nbsp;')&nbsp;mat</span> <span class="U2">ches&nbsp;field</span> <span class="U2">Value&nbsp;('&nbsp;+</span> <span class="U2">&nbsp;fieldValu</span> <span class="U2">e&nbsp;+&nbsp;')');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">590</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;t</span> <span class="U2">rue;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">591</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span> <span class="U2">else&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">592</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;logger.d</span> <span class="U2">ebug(logMe</span> <span class="U2">ssagePrefi</span> <span class="U2">x&nbsp;+&nbsp;'_filt</span> <span class="U2">er&nbsp;actualV</span> <span class="U2">alue&nbsp;('&nbsp;+&nbsp;</span> <span class="U2">actualValu</span> <span class="U2">e&nbsp;+&nbsp;')&nbsp;doe</span> <span class="U2">s&nbsp;NOT&nbsp;matc</span> <span class="U2">h&nbsp;fieldVal</span> <span class="U2">ue&nbsp;('&nbsp;+&nbsp;fi</span> <span class="U2">eldValue&nbsp;+</span> <span class="U2">&nbsp;')');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">593</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;f</span> <span class="U2">alse;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">594</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">595</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;});</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">596</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;logger</span> <span class="U2">.debug(log</span> <span class="U2">MessagePre</span> <span class="U2">fix&nbsp;+&nbsp;'_fi</span> <span class="U2">lter&nbsp;filte</span> <span class="U2">ring&nbsp;finis</span> <span class="U2">hed');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">597</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;respon</span> <span class="U2">se.totalIt</span> <span class="U2">ems&nbsp;=&nbsp;newI</span> <span class="U2">tems.lengt</span> <span class="U2">h;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">598</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;respon</span> <span class="U2">se.current</span> <span class="U2">ItemCount&nbsp;</span> <span class="U2">=&nbsp;newItems</span> <span class="U2">.length;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">599</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;respon</span> <span class="U2">se.data.it</span> <span class="U2">ems&nbsp;=&nbsp;newI</span> <span class="U2">tems;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">600</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">601</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">602</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">function&nbsp;g</span> <span class="U2">etSiteFrom</span> <span class="U2">Pid(pid)&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">603</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(nu</span> <span class="U2">llChecker.</span> <span class="U2">isNotNulli</span> <span class="U2">sh(pid)&nbsp;&amp;&amp;</span> <span class="U2">&nbsp;S(pid).co</span> <span class="U2">ntains(';'</span> <span class="U2">))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">604</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;pid.s</span> <span class="U2">plit(';')[</span> <span class="U2">0];</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">605</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">606</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="U2">&nbsp;undefined</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">607</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">608</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">609</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">/**</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">610</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;Retriev</span> <span class="U2">es&nbsp;the&nbsp;sit</span> <span class="U2">e&nbsp;from&nbsp;the</span> <span class="U2">&nbsp;session,&nbsp;</span> <span class="U2">pid,&nbsp;or&nbsp;re</span> <span class="U2">quest&nbsp;-&nbsp;if</span> <span class="U2">&nbsp;not&nbsp;found</span> <span class="U2">,&nbsp;null&nbsp;is&nbsp;</span> <span class="U2">returned.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">611</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">612</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">logger&nbsp;-&nbsp;r</span> <span class="U2">eq.logger&nbsp;</span> <span class="U2">-&nbsp;The&nbsp;logg</span> <span class="U2">er</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">613</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">logMessage</span> <span class="U2">Prefix&nbsp;-&nbsp;U</span> <span class="U2">sed&nbsp;when&nbsp;l</span> <span class="U2">ogging&nbsp;mes</span> <span class="U2">sages&nbsp;to&nbsp;s</span> <span class="U2">how&nbsp;who&nbsp;is</span> <span class="U2">&nbsp;calling&nbsp;t</span> <span class="U2">his&nbsp;-&nbsp;usef</span> <span class="U2">ul&nbsp;for&nbsp;deb</span> <span class="U2">ugging.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">614</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">pid&nbsp;-&nbsp;the&nbsp;</span> <span class="U2">pid&nbsp;that&nbsp;c</span> <span class="U2">ould&nbsp;conta</span> <span class="U2">in&nbsp;the&nbsp;sit</span> <span class="U2">e.</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">615</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*&nbsp;@param&nbsp;</span> <span class="U2">req&nbsp;The&nbsp;re</span> <span class="U2">quest&nbsp;that</span> <span class="U2">&nbsp;could&nbsp;con</span> <span class="U2">tain&nbsp;the&nbsp;s</span> <span class="U2">ite</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">616</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;*/</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">617</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">module.exp</span> <span class="U2">orts.getSi</span> <span class="U2">te&nbsp;=&nbsp;funct</span> <span class="U2">ion(logger</span> <span class="U2">,&nbsp;logMessa</span> <span class="U2">gePrefix,&nbsp;</span> <span class="U2">pid,&nbsp;req)&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">618</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;logger</span> <span class="U2">.debug(log</span> <span class="U2">MessagePre</span> <span class="U2">fix&nbsp;+&nbsp;'_ge</span> <span class="U2">tSite&nbsp;retr</span> <span class="U2">ieving&nbsp;sit</span> <span class="U2">e');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">619</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;si</span> <span class="U2">te;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">620</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;req.lo</span> <span class="U2">gger.debug</span> <span class="U2">(logMessag</span> <span class="U2">ePrefix&nbsp;+&nbsp;</span> <span class="U2">'_getSite&nbsp;</span> <span class="U2">pid='&nbsp;+&nbsp;pi</span> <span class="U2">d);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">621</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;site&nbsp;=</span> <span class="U2">&nbsp;getSiteFr</span> <span class="U2">omPid(pid)</span> <span class="U2">;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">622</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(nu</span> <span class="U2">llChecker.</span> <span class="U2">isNotNulli</span> <span class="U2">sh(site))&nbsp;</span> <span class="U2">{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">623</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">q.logger.d</span> <span class="U2">ebug(logMe</span> <span class="U2">ssagePrefi</span> <span class="U2">x&nbsp;+&nbsp;'_getS</span> <span class="U2">ite&nbsp;obtain</span> <span class="U2">ed&nbsp;site&nbsp;('</span> <span class="U2">&nbsp;+&nbsp;site&nbsp;+&nbsp;</span> <span class="U2">')&nbsp;from&nbsp;pi</span> <span class="U2">d');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">624</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;site;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">625</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">626</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(nu</span> <span class="U2">llChecker.</span> <span class="U2">isNotNulli</span> <span class="U2">sh(req))&nbsp;{</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">627</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;si</span> <span class="U2">te&nbsp;=&nbsp;req.p</span> <span class="U2">aram('site</span> <span class="U2">');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">628</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</span> <span class="U2">&nbsp;(nullChec</span> <span class="U2">ker.isNotN</span> <span class="U2">ullish(sit</span> <span class="U2">e))&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">629</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;req.logg</span> <span class="U2">er.debug(l</span> <span class="U2">ogMessageP</span> <span class="U2">refix&nbsp;+&nbsp;'_</span> <span class="U2">getSite&nbsp;ob</span> <span class="U2">tained&nbsp;sit</span> <span class="U2">e&nbsp;('&nbsp;+&nbsp;sit</span> <span class="U2">e&nbsp;+&nbsp;')&nbsp;fro</span> <span class="U2">m&nbsp;request'</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">630</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span class="U2">&nbsp;&nbsp;return&nbsp;s</span> <span class="U2">ite;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">631</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">632</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">633</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(_.</span> <span class="U2">has(req,&nbsp;'</span> <span class="U2">session.us</span> <span class="U2">er.site'))</span> <span class="U2">&nbsp;{</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">634</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;si</span> <span class="U2">te&nbsp;=&nbsp;req.s</span> <span class="U2">ession.use</span> <span class="U2">r.site;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">635</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">q.logger.d</span> <span class="U2">ebug(logMe</span> <span class="U2">ssagePrefi</span> <span class="U2">x&nbsp;+&nbsp;'_getS</span> <span class="U2">ite&nbsp;obtain</span> <span class="U2">ed&nbsp;site&nbsp;('</span> <span class="U2">&nbsp;+&nbsp;site&nbsp;+&nbsp;</span> <span class="U2">')&nbsp;from&nbsp;re</span> <span class="U2">q.session.</span> <span class="U2">user.site'</span> <span class="U2">);</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">636</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re</span> <span class="U2">turn&nbsp;site;</span> <span class="U2"></span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">637</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;}</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">638</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;req.lo</span> <span class="U2">gger.error</span> <span class="U2">(logMessag</span> <span class="U2">ePrefix&nbsp;+&nbsp;</span> <span class="U2">'_getSite&nbsp;</span> <span class="U2">unable&nbsp;to&nbsp;</span> <span class="U2">obtain&nbsp;sit</span> <span class="U2">e&nbsp;from&nbsp;req</span> <span class="U2">uest');</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">639</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="U2">&nbsp;null;</span> </td> 
    </tr> 
    <tr>    
     <td>&nbsp;</td> 
     <td class="U2 ln-no" style="text-align: right;">640</td>  
     <td class="U2"><span class="U2">&nbsp;</span> <span class="U2">};</span> </td> 
    </tr> 
   </tbody>
  </table> 
  <p class="copyright" style="margin-top: 25px; padding-top: 2px; border-top: solid #a0a0a0 1px; max-width: none;">Araxis Merge (but not the data content of this report) is Copyright Â© 1993-2016 Araxis Ltd (<a href="http://www.araxis.com/" title="Link to the Araxis corporate web site">www.araxis.com</a>). All rights reserved.</p>   
 </body>
</html>