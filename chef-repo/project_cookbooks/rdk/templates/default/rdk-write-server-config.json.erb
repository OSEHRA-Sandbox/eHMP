{
    "//notice": "This file is automatically generated. Any edits will be overwritten.",
    "name": "The writeback service running configuration",
    "edition": "ONC",
    "corsEnabled": false,
    "rootPath": "/resource/write-health-data",
    "environment": "development",
    "externalProtocol": "http",
    "secret": <%= @secure_passcode_list %>,
    "sessionLength": 900000,
    "appServer": {
        "port": <%= @port %>
    },
    "fetchServer": {
        "baseUrl": "http://<%= @fetch_host %>"
    },
    "pickListServer": {
        "baseUrl": "http://<%= @pick_list_host %>"
    },
    "vxSyncServer": {
        "baseUrl": "http://<%= @vxsync['ipaddress']%>:8080"
    },
    "vxSyncWritebackServer": {
        "baseUrl": "http://<%= @vxsync['ipaddress']%>:9090"
    },
    "timeoutMillis": 120000,
    "responseTimeoutMillis": 420000,
    "maxListeners": 50,
    "requestTrace": {
        "active": true,
        "logIdParam": "logId",
        "requestIdParam": "requestId"
    },
    "pdpConfig": {
        "ruleFile": "./rules.js"
    },
    "rpcConfig": {
        "context": "HMP UI CONTEXT"
    },
    "vistaSites": {
        <% @vista_sites.each_with_index do |site, index| %>
        "<%= site['vista']['site_id']%>": {
            "name": "<%= site['vista']['site']%>",
            "division": "<%= site['vista']['station_number']%>",
            "host": "<%= site['ipaddress']%>",
            "localIP": "172.16.2.1",
            "localAddress": "localhost",
            "port": 9210,
            "production": false,
            "accessCode": "<%= site['vista']['access_code']%>",
            "verifyCode": "<%= site['vista']['verify_code']%>",
            "infoButtonOid": "1.3.6.1.4.1.3768"
        }<%= ',' unless index == @vista_sites.size - 1 %>
        <% end %>
    },
    "mvi": {
        "baseUrl": "http://<%= @mvi['ipaddress']%>:8896",
        "senderCode": "200EHMP",
        "search": {
            "path": "/mvi"
        },
        "sync": {
            "path": "/mvi"
        }
    },
    "vhic": {
        "baseUrl": "http://<%= @vhic['ipaddress']%>:8896",
        "senderCode": "200EHMP",
        "search": {
            "path": "/vhic"
        },
        "sync": {
            "path": "/vhic"
        }
    },
    "solrServer": {
        "baseUrl": "http://<%= @solr['ipaddress']%>:8983",
        "url": "/solr/vpr"
    },
    "asu": {
        "evaluateRuleService": {
            "timeout": 30000,
            "url": "/asu/rules/accessDocument",
            "port": 9000
        }
    },
    "asuServer": {
        "baseUrl": "http://<%= @vxsync['ipaddress']%>:9000",
        "timeout": 30000
    },
    "jdsServer": {
        "baseUrl": "http://<%= @jds['ipaddress']%>:9080"
    },
    "generalPurposeJdsServer": {
        "baseUrl": "http://<%= @pjds['ipaddress']%>:9080"
    },
    <% if !@jbpm.nil? %>
    "jbpm": {
        "baseUrl": "http://<%= @jbpm['ipaddress']%>:8080",
        "apiPath": "/business-central/rest",
        "adminUser": {
            "username": "<%= @jbpm[:jbpm][:install][:admin_user] %>",
            "password": "<%= @jbpm_admin_password %>"
        },
        "nurseUser": {
            "username": "Susan",
            "password": "<%= @jbpm_nurseuser_password %>"
        },
        "healthcheckEndpoint": "/history/instances",
        "deployments": {
            "All": "example:testproject:1.3.0"
        }
    },
    <% end %>
    "jdsSync": {
        "settings": {
            "waitMillis": 1000,
            "timeoutMillis": 420000
        }
    },
    "resync": {
        "openJobsTimeoutMillis": 21600000,
        "inProgressTimeoutMillis": 86400000
    },
    "vxSyncComplexNote": {
        "getComplexNote": {
            "timeout": 120000,
            "port": <%= @complex_note_port %>,
            "rejectUnauthorized": false,
            "requestCert": true,
            "agent": false
        }
    },
    "loggers": [
        {
            "name": "res-server",
            "level": "debug"
        },
        {
            "name": "audit",
            "level": "info"
        }
    ],
    "interceptors": {
        "authentication": {
            "disabled": false
        },
        "pep": {
            "disabled": false
        },
        "operationalDataCheck": {
            "disabled": false
        },
        "synchronize": {
            "disabled": false
        }
    }
}
