{
    "//notice": "This file is automatically generated. Any edits will be overwritten.",
    "parallelPublish": 20,
    "beanstalk": {
        "repoUniversal": {
            "priority": <%= @vxsync['vxsync']['beanstalk_priority'] %>,
            "delay": <%= @vxsync['vxsync']['beanstalk_delay'] %>,
            "ttr": <%= @vxsync['vxsync']['beanstalk_ttr'] %>,
            "timeout": <%= @vxsync['vxsync']['beanstalk_timeout'] %>,
            "initMillis": <%= @vxsync['vxsync']['beanstalk_init_millis'] %>,
            "maxMillis": <%= @vxsync['vxsync']['beanstalk_max_millis'] %>,
            "incMillis": <%= @vxsync['vxsync']['beanstalk_inc_millis'] %>
        },
        "repoDefaults": {
            "host": "<%= @vxsync['ipaddress'] %>",
            "port": <%= @vxsync['vxsync']['beanstalk_processes']['jobrepo']['config']['port'] %>,
            "tubename": "<%= @vxsync['vxsync']['beanstalk_processes']['jobrepo']['config']['tube_name'] %>",
            "tubePrefix": "<%= @vxsync['vxsync']['beanstalk_processes']['jobrepo']['config']['tube_prefix'] %>",
            "jobTypeForTube": <%= @vxsync['vxsync']['beanstalk_processes']['jobrepo']['config']['job_type'] %>
        },
        "jobTypes": {
            "error-request": {
                "workerCount": <%= @node['rdk']['activity_handler']['beanstalk']['jobTypes']['error-request']['worker_count'] %>
            },
            "activity-management-event": {
                "workerCount": <%= @node['rdk']['activity_handler']['beanstalk']['jobTypes']['activity-management-event']['worker_count'] %>
            }
        }
    },
    "jdsServer": {
        "baseUrl": "http://<%= @jds['ipaddress']%>:<%= @jds['jds']['cache_listener_ports']['general']%>",
        "timeout": 120000
    },
    "generalPurposeJdsServer": {
       "baseUrl": "http://<%= @pjds['ipaddress']%>:<%= @pjds['jds']['cache_listener_ports']['general']%>",
       "urlLengthLimit": 120
    },
    "vistaSites": {
        <% @vista_sites.each_with_index do |site, index| %>
        "<%= site['vista']['site_id']%>": {
            "division": <%= site['vista']['division'].to_json %>,
            "host": "<%= site['ipaddress']%>",
            "localIP": "IP      ",
            "localAddress": "localhost",
            "port": <%= site['vista']['rpc_port']%>,
            "production": <%= site['vista']['production']%>,
            "accessCode": "<%= site['vista']['access_code']%>",
            "verifyCode": "<%= site['vista']['verify_code']%>",
            "infoButtonOid": "1.3.6.1.4.1.3768",
            "abbreviation": "<%= site['vista']['abbreviation']%>"
        }<%= ',' unless index == @vista_sites.size - 1 %>
        <% end %>
    },
    <% if !@jbpm.nil? %>
    "jbpm": {
        "baseUrl": "http://<%= @jbpm['ipaddress']%>:8080",
        "apiPath": "/business-central/rest",
        "adminUser": {
            "username": "<%= @jbpm['jbpm']['install']['admin_user'] %>",
            "password": "<%= @jbpm_admin_password %>"
        },
        "healthcheckEndpoint": "/history/instances",
        "activityDatabase": {
            "user": "activitydbuser",
            "password": "<%= @jbpm_activitydbuser_password %>",
            "connectString": "<%= @oracle_ip %>:<%= @oracle_port %>/<%= @oracle_sid %>"
        },
        "notifsDatabase": {
            "user": "notifdb",
            "password": "<%= @jbpm_notifdb_password %>",
            "connectString": "<%= @oracle_ip %>:<%= @oracle_port %>/<%= @oracle_sid %>"

        }
    },
    <% end %>
    "activityManagementJobRetryLimit": <%= @node['rdk']['activity_handler']['activityManagementJobRetryLimit'] %>,
    "defaultWorkerCount": <%= @node['rdk']['activity_handler']['worker_count'] %>,
    "log-level": "<%= @node['rdk']['log_level']['activity_handler'] %>"
}
