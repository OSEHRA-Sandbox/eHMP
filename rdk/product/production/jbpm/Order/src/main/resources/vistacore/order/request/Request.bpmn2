<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.omg.org/bpmn20" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:bpsim="http://www.bpsim.org/schemas/1.0" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:drools="http://www.jboss.org/drools" id="_Iv6MAHkKEeaVRfG2jKN_-A" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd http://www.jboss.org/drools drools.xsd http://www.bpsim.org/schemas/1.0 bpsim.xsd" exporter="jBPM Designer" exporterVersion="6.2.0" expressionLanguage="http://www.mvel.org/2.0" targetNamespace="http://www.omg.org/bpmn20" typeLanguage="http://www.java.com/javaTypes">
  <bpmn2:itemDefinition id="_icnItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_pidItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_pjdsRecordItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_stateItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_serviceResponseItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_clinicalObjectUidItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_requestActivityItem" structureRef="vistacore.order.request.RequestActivity"/>
  <bpmn2:itemDefinition id="_processInstanceIdItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_formActionItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_actorItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_groupsItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_instanceNameItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_earliestDateItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_dueDateItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_assignedToItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_commentsItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_urgencyItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_activityItem" structureRef="vistacore.order.Activity"/>
  <bpmn2:itemDefinition id="_responseItem" structureRef="vistacore.order.request.Request"/>
  <bpmn2:itemDefinition id="_requestItem" structureRef="vistacore.order.request.Request"/>
  <bpmn2:itemDefinition id="_requestSignalDataItem" structureRef="vistacore.order.request.RequestSignal"/>
  <bpmn2:itemDefinition id="_subDomainItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_updatedRequestActivityItem" structureRef="vistacore.order.request.RequestActivity"/>
  <bpmn2:itemDefinition id="_noteObjectItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_hasNoteObjectItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_typeItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_descriptionItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_facilityItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_taskHistoryItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_taskHistoryActionItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_actionItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_activityHealthDescriptionItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_activityHealthyItem" structureRef="Boolean"/>
  <bpmn2:itemDefinition id="_signalNameItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_signalHistoryItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_signalActionItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_signalOwnerItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_responseNotificationDaysItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_requestNotificationDaysItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_notificationTextItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_notificationIdItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_destinationFacilityItem" structureRef="String"/>
  <bpmn2:signal id="EDIT" name="EDIT"/>
  <bpmn2:signal id="END" name="END"/>
  <bpmn2:itemDefinition id="__BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_clinicalObjectInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_uidInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_pidInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_ServiceResponseOutputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__42636481-27A3-47D1-A895-CCA7CA339092_clinicalObjectInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__42636481-27A3-47D1-A895-CCA7CA339092_uidInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__42636481-27A3-47D1-A895-CCA7CA339092_pidInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__42636481-27A3-47D1-A895-CCA7CA339092_ServiceResponseOutputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_navigationInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_definitionIdInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_permissionInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_GroupIdInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_SkippableInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_CommentInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_PriorityInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_updatedRequestInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_formActionInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_activityInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_DueDateInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_EarlyDateInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_out_requestOutputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_out_activityOutputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_out_formActionOutputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__444ED617-D0CC-4B1A-951E-19FE9F0A2438_pidInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__444ED617-D0CC-4B1A-951E-19FE9F0A2438_uidInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__444ED617-D0CC-4B1A-951E-19FE9F0A2438_clinicalObjectInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__444ED617-D0CC-4B1A-951E-19FE9F0A2438_ServiceResponseOutputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__F018026B-E5E1-4ABD-AB2D-8E05883B8945_notificationInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__F018026B-E5E1-4ABD-AB2D-8E05883B8945_ServiceResponseOutputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__6527D4F7-2BD5-4A51-A841-3409346E5DAF_historyInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__6527D4F7-2BD5-4A51-A841-3409346E5DAF_actionInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__6527D4F7-2BD5-4A51-A841-3409346E5DAF_nameInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__6527D4F7-2BD5-4A51-A841-3409346E5DAF_ownerInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__6527D4F7-2BD5-4A51-A841-3409346E5DAF_ServiceResponseOutputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__65C24730-187C-4786-9AF6-35FE160A7AD4_notificationInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__65C24730-187C-4786-9AF6-35FE160A7AD4_notificationIdInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__65C24730-187C-4786-9AF6-35FE160A7AD4_ServiceResponseOutputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__B8FAB136-A3C3-444E-B9BA-2A7A665535DB_notificationInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__B8FAB136-A3C3-444E-B9BA-2A7A665535DB_notificationIdInputXItem" structureRef="Object"/>
  <bpmn2:itemDefinition id="__B8FAB136-A3C3-444E-B9BA-2A7A665535DB_ServiceResponseOutputXItem" structureRef="Object"/>
  <bpmn2:process id="Order.Request" drools:packageName="org.jbpm" drools:version="1.0" name="Request">
    <bpmn2:extensionElements>
      <drools:import name="com.google.gson.Gson"/>
      <drools:import name="org.joda.time.DateTime"/>
      <drools:import name="org.joda.time.format.ISODateTimeFormat"/>
      <drools:import name="org.joda.time.format.DateTimeFormatter"/>
      <drools:import name="org.joda.time.format.DateTimeFormat"/>
      <drools:import name="java.util.concurrent.TimeUnit"/>
      <drools:import name="org.joda.time.Days"/>
      <drools:import name="org.joda.time.DateTimeZone"/>
      <drools:import name="org.joda.time.Duration"/>
      <drools:import name="com.google.gson.JsonObject"/>
      <drools:import name="com.google.gson.JsonParser"/>
      <drools:import name="com.google.gson.JsonElement"/>
      <drools:import name="org.joda.time.Duration"/>
      <drools:import name="org.joda.time.Seconds"/>
    </bpmn2:extensionElements>
    <bpmn2:property id="icn" itemSubjectRef="_icnItem"/>
    <bpmn2:property id="pid" itemSubjectRef="_pidItem"/>
    <bpmn2:property id="pjdsRecord" itemSubjectRef="_pjdsRecordItem"/>
    <bpmn2:property id="state" itemSubjectRef="_stateItem"/>
    <bpmn2:property id="serviceResponse" itemSubjectRef="_serviceResponseItem"/>
    <bpmn2:property id="clinicalObjectUid" itemSubjectRef="_clinicalObjectUidItem"/>
    <bpmn2:property id="requestActivity" itemSubjectRef="_requestActivityItem"/>
    <bpmn2:property id="processInstanceId" itemSubjectRef="_processInstanceIdItem"/>
    <bpmn2:property id="formAction" itemSubjectRef="_formActionItem"/>
    <bpmn2:property id="actor" itemSubjectRef="_actorItem"/>
    <bpmn2:property id="groups" itemSubjectRef="_groupsItem"/>
    <bpmn2:property id="instanceName" itemSubjectRef="_instanceNameItem"/>
    <bpmn2:property id="earliestDate" itemSubjectRef="_earliestDateItem"/>
    <bpmn2:property id="dueDate" itemSubjectRef="_dueDateItem"/>
    <bpmn2:property id="assignedTo" itemSubjectRef="_assignedToItem"/>
    <bpmn2:property id="comments" itemSubjectRef="_commentsItem"/>
    <bpmn2:property id="urgency" itemSubjectRef="_urgencyItem"/>
    <bpmn2:property id="activity" itemSubjectRef="_activityItem"/>
    <bpmn2:property id="response" itemSubjectRef="_responseItem"/>
    <bpmn2:property id="request" itemSubjectRef="_requestItem"/>
    <bpmn2:property id="requestSignalData" itemSubjectRef="_requestSignalDataItem"/>
    <bpmn2:property id="subDomain" itemSubjectRef="_subDomainItem"/>
    <bpmn2:property id="updatedRequestActivity" itemSubjectRef="_updatedRequestActivityItem"/>
    <bpmn2:property id="noteObject" itemSubjectRef="_noteObjectItem"/>
    <bpmn2:property id="hasNoteObject" itemSubjectRef="_hasNoteObjectItem"/>
    <bpmn2:property id="type" itemSubjectRef="_typeItem"/>
    <bpmn2:property id="description" itemSubjectRef="_descriptionItem"/>
    <bpmn2:property id="facility" itemSubjectRef="_facilityItem"/>
    <bpmn2:property id="taskHistory" itemSubjectRef="_taskHistoryItem"/>
    <bpmn2:property id="taskHistoryAction" itemSubjectRef="_taskHistoryActionItem"/>
    <bpmn2:property id="action" itemSubjectRef="_actionItem"/>
    <bpmn2:property id="activityHealthDescription" itemSubjectRef="_activityHealthDescriptionItem"/>
    <bpmn2:property id="activityHealthy" itemSubjectRef="_activityHealthyItem"/>
    <bpmn2:property id="signalName" itemSubjectRef="_signalNameItem"/>
    <bpmn2:property id="signalHistory" itemSubjectRef="_signalHistoryItem"/>
    <bpmn2:property id="signalAction" itemSubjectRef="_signalActionItem"/>
    <bpmn2:property id="signalOwner" itemSubjectRef="_signalOwnerItem"/>
    <bpmn2:property id="responseNotificationDays" itemSubjectRef="_responseNotificationDaysItem"/>
    <bpmn2:property id="requestNotificationDays" itemSubjectRef="_requestNotificationDaysItem"/>
    <bpmn2:property id="notificationText" itemSubjectRef="_notificationTextItem"/>
    <bpmn2:property id="notificationId" itemSubjectRef="_notificationIdItem"/>
    <bpmn2:property id="destinationFacility" itemSubjectRef="_destinationFacilityItem"/>
    <bpmn2:startEvent id="_C952A77D-50BA-47E7-8AF7-BA662091481F" drools:bgcolor="#9acd32" drools:selectable="true" name="">
      <bpmn2:documentation id="_Iv6MAXkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:outgoing>_3030E4A5-5391-463D-B4D4-4B0F2541123E</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:scriptTask id="_036DA54F-E5A9-4A92-9531-203054AA8CB2" drools:selectable="true" name="Prepare pJDS Record" scriptFormat="http://www.java.com/java">
      <bpmn2:documentation id="_Iv6MAnkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:incoming>_1332E809-6163-4C32-9044-FC09EBDCF28E</bpmn2:incoming>
      <bpmn2:outgoing>_C8E0A294-8596-48CF-86E8-D93F6608C1D0</bpmn2:outgoing>
      <bpmn2:script><![CDATA[try{
        System.out.println("Inside Process Variables formAction "+formAction);
        System.out.println("Inside Process Variables domain "+subDomain);
        Gson gson=new Gson();
        kcontext.setVariable("responseNotificationDays",null);
        kcontext.setVariable("requestNotificationDays",null);

        String ehmpStateComputed="draft";
        String stateComputed="Draft";
        if(formAction==null||formAction=="draft"){
        formAction="Draft";
        ehmpStateComputed="draft";
        }else if(formAction.equals("accepted")){
        ehmpStateComputed="active";
        stateComputed="Active: Pending Response";
        }else if(formAction.equals("deleted")||formAction.equals("discontinued")){
        ehmpStateComputed="deleted";
        stateComputed="Deleted";
        }


        System.out.println("Inside Process Variables formAction before setting instance");
        System.out.println("Inside Process Variables formAction requestActivity.getData() "+requestActivity.getData());
        System.out.println("Inside Process Variables formAction requestActivity.getData().getActivity(). "+requestActivity.getData().getActivity());
        System.out.println("Inside Process Variables formAction requestActivity.getData().getProcessInstanceId()  "+requestActivity.getData().getActivity().getProcessInstanceId());

        if(requestActivity.getData().getActivity().getProcessInstanceId()!=null){
        requestActivity.getData().getActivity().setProcessInstanceId(Long.toString(kcontext.getProcessInstance().getId()));
        }

        System.out.println("Inside Process Variables formAction after setting instance");

        requestActivity.setEhmpState(ehmpStateComputed);
        String json=gson.toJson(requestActivity);

        System.out.println("Inside Process Variables formAction after conv*******");

        kcontext.setVariable("pjdsRecord",json);
        kcontext.setVariable("state",stateComputed);
        kcontext.setVariable("clinicalObjectUid",requestActivity.getUid());

        System.out.println("Inside Process Variables formAction after all variables "+requestActivity.getData().getActivity().getUrgency());

//reset performance indicators

        activityHealthy=true;
        activityHealthDescription="";
        kcontext.setVariable("activityHealthy",activityHealthy);
        kcontext.setVariable("activityHealthDescription",activityHealthDescription);

        kcontext.setVariable("requestActivity",requestActivity);


        System.out.println("End of Process Variables");
        } catch (Exception e) {
                System.out.println("RequestActivity: Process Variables - An unexpected condition has happened: " + e.getMessage());
        }]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:exclusiveGateway id="_72476D58-4303-4D54-8F20-1049B7AC9B21" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="" name="" gatewayDirection="Diverging">
      <bpmn2:documentation id="_Iv6MA3kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:incoming>_DA9C3672-2EA8-4189-96F8-876A59B8A857</bpmn2:incoming>
      <bpmn2:outgoing>_15CE415F-10A5-4447-A736-E4204EB27F0B</bpmn2:outgoing>
      <bpmn2:outgoing>_CD2964A5-93F4-4EE7-8FB3-3A05DD526A76</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:task id="_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A" drools:bgcolor="#33CCCC" drools:selectable="true" drools:taskName="ClinicalObjectWriteService" name="Save pJDS Record">
      <bpmn2:extensionElements>
        <drools:onExit-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println("pJDS serviceResponse: " + serviceResponse);\nSystem.out.println("requestActivity: " + requestActivity);\nJsonParser parser = new JsonParser();\nJsonObject obj = parser.parse(serviceResponse).getAsJsonObject();\nJsonElement dataElement = obj.get("status");\nif (dataElement == null){\n	throw new Exception("Invalid response received(status is missing) from ClinicalObjectWriteService");\n}\nif (dataElement.getAsInt() != 200) {\n	dataElement = obj.get("error");\n	if (dataElement != null && !dataElement.getAsString().isEmpty()){\n		throw new Exception(dataElement.getAsString());\n	}\n 	else {\n		throw new Exception("UNKNOWN ERROR");\n	}\n}\ndataElement = obj.get("uid");\nif (dataElement == null){\nthrow new Exception("Invalid response received(uid is missing) from ClinicalObjectWriteService");\n} \n\nString uid = dataElement.getAsString();\nkcontext.setVariable("clinicalObjectUid", uid);\nrequestActivity.setUid(uid);\nkcontext.setVariable("requestActivity", requestActivity);]]></drools:script>
        </drools:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_C8E0A294-8596-48CF-86E8-D93F6608C1D0</bpmn2:incoming>
      <bpmn2:outgoing>_082030F5-0EA9-4CA9-9626-5D1ADCBE651A</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_Iv6MBHkKEeaVRfG2jKN_-A">
        <bpmn2:dataInput id="_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_TaskNameInputX" name="TaskName"/>
        <bpmn2:dataInput id="_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_clinicalObjectInputX" drools:dtype="String" itemSubjectRef="__BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_clinicalObjectInputXItem" name="clinicalObject"/>
        <bpmn2:dataInput id="_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_uidInputX" drools:dtype="String" itemSubjectRef="__BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_uidInputXItem" name="uid"/>
        <bpmn2:dataInput id="_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_pidInputX" drools:dtype="String" itemSubjectRef="__BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_pidInputXItem" name="pid"/>
        <bpmn2:dataOutput id="_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_ServiceResponseOutputX" drools:dtype="String" itemSubjectRef="__BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_ServiceResponseOutputXItem" name="ServiceResponse"/>
        <bpmn2:inputSet id="_Iv6MBXkKEeaVRfG2jKN_-A">
          <bpmn2:dataInputRefs>_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_clinicalObjectInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_uidInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_pidInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_TaskNameInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_Iv6MBnkKEeaVRfG2jKN_-A">
          <bpmn2:dataOutputRefs>_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_ServiceResponseOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_Iv6MB3kKEeaVRfG2jKN_-A">
        <bpmn2:targetRef>_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_TaskNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Iv6MCHkKEeaVRfG2jKN_-A">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6MCXkKEeaVRfG2jKN_-A">ClinicalObjectWriteService</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6MCnkKEeaVRfG2jKN_-A">_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_TaskNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6MC3kKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>pjdsRecord</bpmn2:sourceRef>
        <bpmn2:targetRef>_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_clinicalObjectInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6MDHkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>icn</bpmn2:sourceRef>
        <bpmn2:targetRef>_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_pidInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6MDXkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>clinicalObjectUid</bpmn2:sourceRef>
        <bpmn2:targetRef>_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_uidInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_Iv6MDnkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A_ServiceResponseOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>serviceResponse</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:exclusiveGateway id="_B0EA6E58-3892-48B1-B76D-2060043328DF" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="" name="" gatewayDirection="Converging">
      <bpmn2:documentation id="_Iv6MD3kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:incoming>_0DE39FEC-C26C-4306-B3BF-FB51840D64A6</bpmn2:incoming>
      <bpmn2:incoming>_BF878365-47F2-4AF2-89F6-33130C3FD0DB</bpmn2:incoming>
      <bpmn2:incoming>_3030E4A5-5391-463D-B4D4-4B0F2541123E</bpmn2:incoming>
      <bpmn2:outgoing>_1332E809-6163-4C32-9044-FC09EBDCF28E</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="_1332E809-6163-4C32-9044-FC09EBDCF28E" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_B0EA6E58-3892-48B1-B76D-2060043328DF" targetRef="_036DA54F-E5A9-4A92-9531-203054AA8CB2">
      <bpmn2:documentation id="_Iv6MEHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_C8E0A294-8596-48CF-86E8-D93F6608C1D0" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_036DA54F-E5A9-4A92-9531-203054AA8CB2" targetRef="_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A">
      <bpmn2:documentation id="_Iv6MEXkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
    </bpmn2:sequenceFlow>
    <bpmn2:exclusiveGateway id="_26C11EC4-D200-49AA-9BD8-5B8AF19680F2" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="" name="" gatewayDirection="Diverging">
      <bpmn2:documentation id="_Iv6MEnkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:incoming>_082030F5-0EA9-4CA9-9626-5D1ADCBE651A</bpmn2:incoming>
      <bpmn2:outgoing>_5CD6B5C0-2EC9-43AF-BA2A-6668C5C118CD</bpmn2:outgoing>
      <bpmn2:outgoing>_1FB1F668-671C-46A7-ABDD-D54CE74251BC</bpmn2:outgoing>
      <bpmn2:outgoing>_B13B8AA7-C8C7-4A67-A3A7-4E13A4C040AA</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="_082030F5-0EA9-4CA9-9626-5D1ADCBE651A" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A" targetRef="_26C11EC4-D200-49AA-9BD8-5B8AF19680F2">
      <bpmn2:documentation id="_Iv6ME3kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
    </bpmn2:sequenceFlow>
    <bpmn2:intermediateCatchEvent id="_56B6AC64-C696-4FEB-B1D0-BBF83DF020DB" drools:bgcolor="#f5deb3" drools:selectable="true" drools:bordercolor="#a0522d" drools:boundaryca="" name="EDIT">
      <bpmn2:documentation id="_Iv6MFHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:incoming>_5CD6B5C0-2EC9-43AF-BA2A-6668C5C118CD</bpmn2:incoming>
      <bpmn2:outgoing>_B929D9C1-02C4-496B-AFD0-8EB38FC89BD3</bpmn2:outgoing>
      <bpmn2:dataOutput id="_56B6AC64-C696-4FEB-B1D0-BBF83DF020DB_requestActivity" name="requestActivity"/>
      <bpmn2:dataOutputAssociation id="_Iv6MFnkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>_56B6AC64-C696-4FEB-B1D0-BBF83DF020DB_requestActivity</bpmn2:sourceRef>
        <bpmn2:targetRef>requestActivity</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
      <bpmn2:outputSet id="_Iv6MFXkKEeaVRfG2jKN_-A">
        <bpmn2:dataOutputRefs>_56B6AC64-C696-4FEB-B1D0-BBF83DF020DB_requestActivity</bpmn2:dataOutputRefs>
      </bpmn2:outputSet>
      <bpmn2:signalEventDefinition id="_Iv6MF3kKEeaVRfG2jKN_-A" signalRef="EDIT"/>
    </bpmn2:intermediateCatchEvent>
    <bpmn2:sequenceFlow id="_5CD6B5C0-2EC9-43AF-BA2A-6668C5C118CD" drools:bgcolor="#000000" drools:selectable="true" name="Draft" sourceRef="_26C11EC4-D200-49AA-9BD8-5B8AF19680F2" targetRef="_56B6AC64-C696-4FEB-B1D0-BBF83DF020DB">
      <bpmn2:documentation id="_Iv6MGHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6MGXkKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[return KieFunctions.equalsTo(formAction, "draft");]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:scriptTask id="_0CD4B622-EBA4-4B6D-AC8E-B050227762D8" drools:selectable="true" name="Set formAction" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_B929D9C1-02C4-496B-AFD0-8EB38FC89BD3</bpmn2:incoming>
      <bpmn2:outgoing>_BF878365-47F2-4AF2-89F6-33130C3FD0DB</bpmn2:outgoing>
      <bpmn2:script><![CDATA[try{
        System.out.println("Received Signal witj formAction " + requestActivity.getFormAction());
        kcontext.setVariable("formAction", requestActivity.getFormAction());
        kcontext.setVariable("instanceName", requestActivity.getInstanceName());
        kcontext.setVariable("clinicalObjectUid", requestActivity.getUid());
        } catch (Exception e) {
                System.out.println("RequestActivity: setFormAction - An unexpected condition has happened: " + e.getMessage());
        }]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="_B929D9C1-02C4-496B-AFD0-8EB38FC89BD3" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_56B6AC64-C696-4FEB-B1D0-BBF83DF020DB" targetRef="_0CD4B622-EBA4-4B6D-AC8E-B050227762D8">
      <bpmn2:documentation id="_Iv6MGnkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
    </bpmn2:sequenceFlow>
    <bpmn2:exclusiveGateway id="_FFAC9F72-D411-446D-80B7-B3827DBC7546" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="_8EA23D77-E008-4A5E-B6E5-6D8E6D2C960C" name="" gatewayDirection="Converging" default="_8EA23D77-E008-4A5E-B6E5-6D8E6D2C960C">
      <bpmn2:documentation id="_Iv6MG3kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:incoming>_1FB1F668-671C-46A7-ABDD-D54CE74251BC</bpmn2:incoming>
      <bpmn2:incoming>_15CE415F-10A5-4447-A736-E4204EB27F0B</bpmn2:incoming>
      <bpmn2:outgoing>_8EA23D77-E008-4A5E-B6E5-6D8E6D2C960C</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:task id="_42636481-27A3-47D1-A895-CCA7CA339092" drools:bgcolor="#33CCCC" drools:selectable="true" drools:taskName="ClinicalObjectWriteService" name="Save pJDS Record">
      <bpmn2:extensionElements>
        <drools:onExit-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println("pJDS serviceResponse: " + serviceResponse);\nJsonParser parser = new JsonParser();\nJsonObject obj = parser.parse(serviceResponse).getAsJsonObject();\nJsonElement dataElement = obj.get("status");\nif (dataElement == null){\n	throw new Exception("Invalid response received(status is missing) from ClinicalObjectWriteService");\n}\nif (dataElement.getAsInt() != 200) {\n	dataElement = obj.get("error");\n	if (dataElement != null && !dataElement.getAsString().isEmpty()){\n		throw new Exception(dataElement.getAsString());\n	}\n 	else {\n		throw new Exception("UNKNOWN ERROR");\n	}\n}\n]]></drools:script>
        </drools:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_EA75DB13-AA5A-40AD-9997-AEDEB9DAB56D</bpmn2:incoming>
      <bpmn2:outgoing>_DA9C3672-2EA8-4189-96F8-876A59B8A857</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_Iv6MHHkKEeaVRfG2jKN_-A">
        <bpmn2:dataInput id="_42636481-27A3-47D1-A895-CCA7CA339092_TaskNameInputX" name="TaskName"/>
        <bpmn2:dataInput id="_42636481-27A3-47D1-A895-CCA7CA339092_clinicalObjectInputX" drools:dtype="String" itemSubjectRef="__42636481-27A3-47D1-A895-CCA7CA339092_clinicalObjectInputXItem" name="clinicalObject"/>
        <bpmn2:dataInput id="_42636481-27A3-47D1-A895-CCA7CA339092_uidInputX" drools:dtype="String" itemSubjectRef="__42636481-27A3-47D1-A895-CCA7CA339092_uidInputXItem" name="uid"/>
        <bpmn2:dataInput id="_42636481-27A3-47D1-A895-CCA7CA339092_pidInputX" drools:dtype="String" itemSubjectRef="__42636481-27A3-47D1-A895-CCA7CA339092_pidInputXItem" name="pid"/>
        <bpmn2:dataOutput id="_42636481-27A3-47D1-A895-CCA7CA339092_ServiceResponseOutputX" drools:dtype="String" itemSubjectRef="__42636481-27A3-47D1-A895-CCA7CA339092_ServiceResponseOutputXItem" name="ServiceResponse"/>
        <bpmn2:inputSet id="_Iv6MHXkKEeaVRfG2jKN_-A">
          <bpmn2:dataInputRefs>_42636481-27A3-47D1-A895-CCA7CA339092_clinicalObjectInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_42636481-27A3-47D1-A895-CCA7CA339092_uidInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_42636481-27A3-47D1-A895-CCA7CA339092_pidInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_42636481-27A3-47D1-A895-CCA7CA339092_TaskNameInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_Iv6MHnkKEeaVRfG2jKN_-A">
          <bpmn2:dataOutputRefs>_42636481-27A3-47D1-A895-CCA7CA339092_ServiceResponseOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_Iv6MH3kKEeaVRfG2jKN_-A">
        <bpmn2:targetRef>_42636481-27A3-47D1-A895-CCA7CA339092_TaskNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Iv6MIHkKEeaVRfG2jKN_-A">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6MIXkKEeaVRfG2jKN_-A">ClinicalObjectWriteService</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6MInkKEeaVRfG2jKN_-A">_42636481-27A3-47D1-A895-CCA7CA339092_TaskNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6MI3kKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>pjdsRecord</bpmn2:sourceRef>
        <bpmn2:targetRef>_42636481-27A3-47D1-A895-CCA7CA339092_clinicalObjectInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6MJHkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>icn</bpmn2:sourceRef>
        <bpmn2:targetRef>_42636481-27A3-47D1-A895-CCA7CA339092_pidInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6MJXkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>clinicalObjectUid</bpmn2:sourceRef>
        <bpmn2:targetRef>_42636481-27A3-47D1-A895-CCA7CA339092_uidInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_Iv6MJnkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>_42636481-27A3-47D1-A895-CCA7CA339092_ServiceResponseOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>serviceResponse</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:scriptTask id="_7D5F3AA7-A887-4F48-89B3-CD3181C97841" drools:selectable="true" name="Prepare pJDS Record" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_CB8A8197-C845-44C2-95ED-C840E58964C9</bpmn2:incoming>
      <bpmn2:outgoing>_EA75DB13-AA5A-40AD-9997-AEDEB9DAB56D</bpmn2:outgoing>
      <bpmn2:script><![CDATA[try{
        System.out.println("Prepare pJDS Record " + formAction);
        Gson gson = new Gson();

        String ehmpStateComputed = "active";
        String stateComputed = "Completed";
        if (formAction.equals("discontinue")) {
        stateComputed = "Discontinued";
        } else if (action.equals("clarification")) {
        stateComputed = "Active: Clarification Requested";
        } else if (action.equals("decline")) {
        stateComputed = "Active: Declined";
        }

        requestActivity.setEhmpState(ehmpStateComputed);
        String json = gson.toJson(requestActivity);

        kcontext.setVariable("pjdsRecord", json);
        kcontext.setVariable("state", stateComputed);
        kcontext.setVariable("clinicalObjectUid", requestActivity.getUid());

        System.out.println("Prepare pJDS Record " + json);

//reset performance indicators

        activityHealthy = true;
        activityHealthDescription = "";
        kcontext.setVariable("activityHealthy", activityHealthy);
        kcontext.setVariable("activityHealthDescription",activityHealthDescription);


        } catch (Exception e) {
                System.out.println("RequestActivity: Prepare pJDS Record - An unexpected condition has happened: " + e.getMessage());
        }]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="_DA9C3672-2EA8-4189-96F8-876A59B8A857" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_42636481-27A3-47D1-A895-CCA7CA339092" targetRef="_72476D58-4303-4D54-8F20-1049B7AC9B21">
      <bpmn2:documentation id="_Iv6MJ3kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
    </bpmn2:sequenceFlow>
    <bpmn2:parallelGateway id="_4CFA74AE-5479-4928-9FFB-39304C01FE4E" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" name="" gatewayDirection="Diverging">
      <bpmn2:documentation id="_Iv6MKHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:incoming>_D7900D05-35F4-432D-A8C6-FDCC9181C3FA</bpmn2:incoming>
      <bpmn2:outgoing>_62C63D4C-44C5-4D49-983B-2791D0BB3237</bpmn2:outgoing>
      <bpmn2:outgoing>_939B5B3F-BF86-4C82-AEAF-801D21BC6A3A</bpmn2:outgoing>
    </bpmn2:parallelGateway>
    <bpmn2:intermediateCatchEvent id="_0785A662-B32C-4103-AA70-A418F127E190" drools:bgcolor="#f5deb3" drools:selectable="true" drools:bordercolor="#a0522d" drools:boundaryca="" name="END">
      <bpmn2:incoming>_62C63D4C-44C5-4D49-983B-2791D0BB3237</bpmn2:incoming>
      <bpmn2:outgoing>_7EFA9F42-C909-42CB-9D7D-6E0C882C10E7</bpmn2:outgoing>
      <bpmn2:dataOutput id="_0785A662-B32C-4103-AA70-A418F127E190_signalBody" name="signalBody"/>
      <bpmn2:dataOutputAssociation id="_Iv6MKnkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>_0785A662-B32C-4103-AA70-A418F127E190_signalBody</bpmn2:sourceRef>
        <bpmn2:targetRef>requestSignalData</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
      <bpmn2:outputSet id="_Iv6MKXkKEeaVRfG2jKN_-A">
        <bpmn2:dataOutputRefs>_0785A662-B32C-4103-AA70-A418F127E190_signalBody</bpmn2:dataOutputRefs>
      </bpmn2:outputSet>
      <bpmn2:signalEventDefinition id="_Iv6MK3kKEeaVRfG2jKN_-A" signalRef="END"/>
    </bpmn2:intermediateCatchEvent>
    <bpmn2:sequenceFlow id="_62C63D4C-44C5-4D49-983B-2791D0BB3237" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_4CFA74AE-5479-4928-9FFB-39304C01FE4E" targetRef="_0785A662-B32C-4103-AA70-A418F127E190">
      <bpmn2:documentation id="_Iv6MLHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
    </bpmn2:sequenceFlow>
    <bpmn2:endEvent id="_8C0BC698-03C0-4875-98FF-222301B3357C" drools:bgcolor="#ff6347" drools:selectable="true" name="">
      <bpmn2:documentation id="_Iv6MLXkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:incoming>_8EA23D77-E008-4A5E-B6E5-6D8E6D2C960C</bpmn2:incoming>
      <bpmn2:terminateEventDefinition id="_Iv6MLnkKEeaVRfG2jKN_-A"/>
    </bpmn2:endEvent>
    <bpmn2:sequenceFlow id="_8EA23D77-E008-4A5E-B6E5-6D8E6D2C960C" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_FFAC9F72-D411-446D-80B7-B3827DBC7546" targetRef="_8C0BC698-03C0-4875-98FF-222301B3357C">
      <bpmn2:documentation id="_Iv6ML3kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6MMHkKEeaVRfG2jKN_-A"></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_15CE415F-10A5-4447-A736-E4204EB27F0B" drools:bgcolor="#000000" drools:selectable="true" name="Complete" sourceRef="_72476D58-4303-4D54-8F20-1049B7AC9B21" targetRef="_FFAC9F72-D411-446D-80B7-B3827DBC7546">
      <bpmn2:documentation id="_Iv6MMXkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6MMnkKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[return  ( KieFunctions.equalsTo(action, "complete") || KieFunctions.equalsTo(action, "discontinue") );]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_1FB1F668-671C-46A7-ABDD-D54CE74251BC" drools:bgcolor="#000000" drools:selectable="true" name="Deleted" sourceRef="_26C11EC4-D200-49AA-9BD8-5B8AF19680F2" targetRef="_FFAC9F72-D411-446D-80B7-B3827DBC7546">
      <bpmn2:documentation id="_Iv6MM3kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6MNHkKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[return KieFunctions.equalsTo(formAction, "deleted");]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_3030E4A5-5391-463D-B4D4-4B0F2541123E" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_C952A77D-50BA-47E7-8AF7-BA662091481F" targetRef="_B0EA6E58-3892-48B1-B76D-2060043328DF">
      <bpmn2:documentation id="_Iv6MNXkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
    </bpmn2:sequenceFlow>
    <bpmn2:exclusiveGateway id="_C097FA35-93EF-4F89-8C06-BF2424A75BC5" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="_C1DA356C-FF0D-4B50-9973-CA45DD6D9822" name="" gatewayDirection="Converging" default="_C1DA356C-FF0D-4B50-9973-CA45DD6D9822">
      <bpmn2:documentation id="_Iv6MNnkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:incoming>_1A32715E-2413-4E97-92AC-8052B613F57F</bpmn2:incoming>
      <bpmn2:incoming>_26EFF922-A1F0-4FF6-A6FE-688B1DBFFF5E</bpmn2:incoming>
      <bpmn2:outgoing>_C1DA356C-FF0D-4B50-9973-CA45DD6D9822</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:userTask id="_82665E0B-8C32-4ED7-8F7B-251AEE746F79" drools:bgcolor="#99CC00" drools:selectable="true" drools:scriptFormat="http://www.java.com/java" name="Review">
      <bpmn2:extensionElements>
        <drools:onEntry-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println("On Entry Action of Request");\n\nString rc = requestActivity.getData().getActivity().getAssignedTo();\nSystem.out.println("On Entry Action of Request RoutingCode " + rc);\n\njava.util.List<vistacore.order.request.Request> reqs = requestActivity.getData().getResponses();\nvistacore.order.request.Request latestResponse = reqs.get(reqs.size()-1);\n\nSystem.out.println("On Entry Action of Request assignTo " + latestResponse.getAssignTo());\n\nif(latestResponse.getAssignTo().equals("Me") ) {\n  System.out.println("On Entry Action of Request setting actor ");\n  kcontext.setVariable("actor", rc);\n  kcontext.setVariable("groups", null);\n  System.out.println("On Entry Action of Request after setting actor ");\n} else if(latestResponse.getAssignTo().equals("Person")) {\n  kcontext.setVariable("actor", rc);\n  kcontext.setVariable("groups", null);\n} else {\n  kcontext.setVariable("groups", rc);\n  kcontext.setVariable("actor", null);\n}\n\nkcontext.setVariable("comments", latestResponse.getRequest());\nkcontext.setVariable("assignedTo", rc);\n\nDateTimeFormatter formatter = DateTimeFormat.forPattern("yyyyMMddHHmmss").withZone(DateTimeZone.UTC);\nDateTime eDate = formatter.parseDateTime(latestResponse.getEarliestDate());\nkcontext.setVariable("earliestDate", eDate.toString(ISODateTimeFormat.dateTimeNoMillis()));\n\nDateTime lDate = formatter.parseDateTime(latestResponse.getLatestDate());\nString lDateISO = lDate.toString(ISODateTimeFormat.dateTimeNoMillis());\nkcontext.setVariable("dueDate", lDateISO);\n\nDateTime currentDate = new DateTime(DateTimeZone.UTC);\nDateTimeFormatter notifcationFormatter = DateTimeFormat.forPattern("yyyy-MM-dd'T'HH:mm:ss'Z'").withZone(DateTimeZone.UTC);\nDateTime taskDueDateTime = notifcationFormatter.parseDateTime(lDateISO);\nint secsDiff = Seconds.secondsBetween(currentDate, taskDueDateTime).getSeconds();\n\nString notifTime = "0";\nif(secsDiff > 0) {\n\nint days = secsDiff/(3600*24);\nint remSeconds = secsDiff - days*3600*24;\nint hours = remSeconds/3600;\nremSeconds = remSeconds - hours*3600;\nint minutes = remSeconds/60;\nremSeconds = remSeconds - minutes*60;\n\nnotifTime = days + "d" + hours + "h" + minutes  + "m" + remSeconds + "s" ;\n}\n\nSystem.out.println("Request notifTime " + notifTime);\nkcontext.setVariable("requestNotificationDays", notifTime);\n\nSystem.out.println("earliestDate set " + eDate.toString(ISODateTimeFormat.dateTimeNoMillis()));\n\nSystem.out.println("p_dueDate set " + lDate.toString(ISODateTimeFormat.dateTimeNoMillis()));]]></drools:script>
        </drools:onEntry-script>
        <drools:onExit-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println("On exit of request out_formAction " + formAction); \nSystem.out.println("On exit of request updatedRequest " + request); \nSystem.out.println("On exit of request activity " + activity); \nkcontext.setVariable("formAction", formAction);\n\nrequestActivity.getData().setActivity(activity);\n\nif(requestActivity.getData().getRequests() == null) {\n  requestActivity.getData().setRequests(new java.util.ArrayList<vistacore.order.request.Request> ());\n}\n\nrequestActivity.getData().getRequests().add(request);\n\nkcontext.setVariable("requestActivity", requestActivity);\n\nkcontext.setVariable("instanceName", activity.getInstanceName());\nkcontext.setVariable("urgency", activity.getUrgency().toString());\nkcontext.setVariable("assignedTo", activity.getAssignedTo());\n\nString taskHistory = request.getRequest();\nkcontext.setVariable("taskHistory", taskHistory);\nkcontext.setVariable("taskHistoryAction", null);]]></drools:script>
        </drools:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_CD2964A5-93F4-4EE7-8FB3-3A05DD526A76</bpmn2:incoming>
      <bpmn2:outgoing>_EFC8F95A-CE33-4A98-B8B0-9ED2673CD986</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_Iv6MN3kKEeaVRfG2jKN_-A">
        <bpmn2:dataInput id="_82665E0B-8C32-4ED7-8F7B-251AEE746F79_TaskNameInputX" name="TaskName"/>
        <bpmn2:dataInput id="_82665E0B-8C32-4ED7-8F7B-251AEE746F79_navigationInputX" drools:dtype="Object" itemSubjectRef="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_navigationInputXItem" name="navigation"/>
        <bpmn2:dataInput id="_82665E0B-8C32-4ED7-8F7B-251AEE746F79_definitionIdInputX" drools:dtype="Object" itemSubjectRef="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_definitionIdInputXItem" name="definitionId"/>
        <bpmn2:dataInput id="_82665E0B-8C32-4ED7-8F7B-251AEE746F79_permissionInputX" drools:dtype="Object" itemSubjectRef="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_permissionInputXItem" name="permission"/>
        <bpmn2:dataInput id="_82665E0B-8C32-4ED7-8F7B-251AEE746F79_GroupIdInputX" drools:dtype="Object" itemSubjectRef="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_GroupIdInputXItem" name="GroupId"/>
        <bpmn2:dataInput id="_82665E0B-8C32-4ED7-8F7B-251AEE746F79_SkippableInputX" drools:dtype="Object" itemSubjectRef="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_SkippableInputXItem" name="Skippable"/>
        <bpmn2:dataInput id="_82665E0B-8C32-4ED7-8F7B-251AEE746F79_CommentInputX" drools:dtype="Object" itemSubjectRef="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_CommentInputXItem" name="Comment"/>
        <bpmn2:dataInput id="_82665E0B-8C32-4ED7-8F7B-251AEE746F79_PriorityInputX" drools:dtype="Object" itemSubjectRef="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_PriorityInputXItem" name="Priority"/>
        <bpmn2:dataInput id="_82665E0B-8C32-4ED7-8F7B-251AEE746F79_updatedRequestInputX" drools:dtype="Object" itemSubjectRef="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_updatedRequestInputXItem" name="updatedRequest"/>
        <bpmn2:dataInput id="_82665E0B-8C32-4ED7-8F7B-251AEE746F79_formActionInputX" drools:dtype="Object" itemSubjectRef="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_formActionInputXItem" name="formAction"/>
        <bpmn2:dataInput id="_82665E0B-8C32-4ED7-8F7B-251AEE746F79_activityInputX" drools:dtype="Object" itemSubjectRef="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_activityInputXItem" name="activity"/>
        <bpmn2:dataInput id="_82665E0B-8C32-4ED7-8F7B-251AEE746F79_DueDateInputX" drools:dtype="Object" itemSubjectRef="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_DueDateInputXItem" name="DueDate"/>
        <bpmn2:dataInput id="_82665E0B-8C32-4ED7-8F7B-251AEE746F79_EarlyDateInputX" drools:dtype="Object" itemSubjectRef="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_EarlyDateInputXItem" name="EarlyDate"/>
        <bpmn2:dataOutput id="_82665E0B-8C32-4ED7-8F7B-251AEE746F79_out_requestOutputX" drools:dtype="Object" itemSubjectRef="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_out_requestOutputXItem" name="out_request"/>
        <bpmn2:dataOutput id="_82665E0B-8C32-4ED7-8F7B-251AEE746F79_out_activityOutputX" drools:dtype="Object" itemSubjectRef="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_out_activityOutputXItem" name="out_activity"/>
        <bpmn2:dataOutput id="_82665E0B-8C32-4ED7-8F7B-251AEE746F79_out_formActionOutputX" drools:dtype="Object" itemSubjectRef="__82665E0B-8C32-4ED7-8F7B-251AEE746F79_out_formActionOutputXItem" name="out_formAction"/>
        <bpmn2:inputSet id="_Iv6MOHkKEeaVRfG2jKN_-A">
          <bpmn2:dataInputRefs>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_navigationInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_definitionIdInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_permissionInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_GroupIdInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_SkippableInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_CommentInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_PriorityInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_updatedRequestInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_formActionInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_activityInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_DueDateInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_EarlyDateInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_TaskNameInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_Iv6MOXkKEeaVRfG2jKN_-A">
          <bpmn2:dataOutputRefs>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_out_requestOutputX</bpmn2:dataOutputRefs>
          <bpmn2:dataOutputRefs>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_out_activityOutputX</bpmn2:dataOutputRefs>
          <bpmn2:dataOutputRefs>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_out_formActionOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_Iv6MOnkKEeaVRfG2jKN_-A">
        <bpmn2:targetRef>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_TaskNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Iv6MO3kKEeaVRfG2jKN_-A">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6MPHkKEeaVRfG2jKN_-A">Review</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6MPXkKEeaVRfG2jKN_-A">_82665E0B-8C32-4ED7-8F7B-251AEE746F79_TaskNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6MPnkKEeaVRfG2jKN_-A">
        <bpmn2:targetRef>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_navigationInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Iv6MP3kKEeaVRfG2jKN_-A">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6MQHkKEeaVRfG2jKN_-A"><![CDATA[{    "channel": "activity-management",    "event": "show:form" }]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6MQXkKEeaVRfG2jKN_-A">_82665E0B-8C32-4ED7-8F7B-251AEE746F79_navigationInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6MQnkKEeaVRfG2jKN_-A">
        <bpmn2:targetRef>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_definitionIdInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Iv6MQ3kKEeaVRfG2jKN_-A">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6MRHkKEeaVRfG2jKN_-A"><![CDATA[Request.Request]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6MRXkKEeaVRfG2jKN_-A">_82665E0B-8C32-4ED7-8F7B-251AEE746F79_definitionIdInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6MRnkKEeaVRfG2jKN_-A">
        <bpmn2:targetRef>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_permissionInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Iv6MR3kKEeaVRfG2jKN_-A">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6MSHkKEeaVRfG2jKN_-A"><![CDATA[{ "ehmp": [],"pcmm": [],"user": []}]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6MSXkKEeaVRfG2jKN_-A">_82665E0B-8C32-4ED7-8F7B-251AEE746F79_permissionInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6MSnkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>dueDate</bpmn2:sourceRef>
        <bpmn2:targetRef>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_DueDateInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6MS3kKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>earliestDate</bpmn2:sourceRef>
        <bpmn2:targetRef>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_EarlyDateInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6MTHkKEeaVRfG2jKN_-A">
        <bpmn2:targetRef>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_GroupIdInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Iv6MTXkKEeaVRfG2jKN_-A">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6MTnkKEeaVRfG2jKN_-A"><![CDATA[#{groups}]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6MT3kKEeaVRfG2jKN_-A">_82665E0B-8C32-4ED7-8F7B-251AEE746F79_GroupIdInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6MUHkKEeaVRfG2jKN_-A">
        <bpmn2:targetRef>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_SkippableInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Iv6MUXkKEeaVRfG2jKN_-A">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6MUnkKEeaVRfG2jKN_-A">true</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6MU3kKEeaVRfG2jKN_-A">_82665E0B-8C32-4ED7-8F7B-251AEE746F79_SkippableInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6MVHkKEeaVRfG2jKN_-A">
        <bpmn2:targetRef>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_CommentInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Iv6MVXkKEeaVRfG2jKN_-A">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6MVnkKEeaVRfG2jKN_-A"><![CDATA[#{comments}]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6MV3kKEeaVRfG2jKN_-A">_82665E0B-8C32-4ED7-8F7B-251AEE746F79_CommentInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6MWHkKEeaVRfG2jKN_-A">
        <bpmn2:targetRef>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_PriorityInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Iv6MWXkKEeaVRfG2jKN_-A">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6MWnkKEeaVRfG2jKN_-A">#{urgency}</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6MW3kKEeaVRfG2jKN_-A">_82665E0B-8C32-4ED7-8F7B-251AEE746F79_PriorityInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_Iv6MXHkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_out_formActionOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>formAction</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
      <bpmn2:dataOutputAssociation id="_Iv6MXXkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_out_requestOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>request</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
      <bpmn2:dataOutputAssociation id="_Iv6MXnkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>_82665E0B-8C32-4ED7-8F7B-251AEE746F79_out_activityOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>activity</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
      <bpmn2:potentialOwner id="_Iv6MX3kKEeaVRfG2jKN_-A">
        <bpmn2:resourceAssignmentExpression id="_Iv6MYHkKEeaVRfG2jKN_-A">
          <bpmn2:formalExpression id="_Iv6MYXkKEeaVRfG2jKN_-A">#{actor}</bpmn2:formalExpression>
        </bpmn2:resourceAssignmentExpression>
      </bpmn2:potentialOwner>
    </bpmn2:userTask>
    <bpmn2:sequenceFlow id="_CD2964A5-93F4-4EE7-8FB3-3A05DD526A76" drools:bgcolor="#000000" drools:selectable="true" name="Active: Clarification Requested, Active: Declined" sourceRef="_72476D58-4303-4D54-8F20-1049B7AC9B21" targetRef="_82665E0B-8C32-4ED7-8F7B-251AEE746F79">
      <bpmn2:documentation id="_Iv6MYnkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6MY3kKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[return  ( !KieFunctions.equalsTo(action, "complete") && !KieFunctions.equalsTo(action, "discontinue") );]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:scriptTask id="_AA4974E6-C802-4DE7-9AB6-FE9FCAD5CA23" drools:selectable="true" name="Set Data" scriptFormat="http://www.java.com/java">
      <bpmn2:incoming>_7EFA9F42-C909-42CB-9D7D-6E0C882C10E7</bpmn2:incoming>
      <bpmn2:outgoing>_069FC319-90DF-4674-A772-C213161FBA0E</bpmn2:outgoing>
      <bpmn2:script><![CDATA[try{
        System.out.println("Processing discontinue data*** " + requestSignalData.getData().getComment());

        if(requestActivity.getData().getSignals() == null) {
        requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());
        }

        DateTime currentDate = new DateTime(DateTimeZone.UTC);
        DateTimeFormatter dtformatter = DateTimeFormat.forPattern("YYYYMMddHHmmss+0000");
        String currentDateString = currentDate.toString(dtformatter);
        requestSignalData.setExecutionDateTime(currentDateString);

        requestActivity.getData().getSignals().add(requestSignalData);

        kcontext.setVariable("requestActivity", requestActivity);
        kcontext.setVariable("formAction", requestSignalData.getActionText());
        kcontext.setVariable("state", "Discontinued");
        kcontext.setVariable("clinicalObjectUid", requestActivity.getUid());
        kcontext.setVariable("action", "discontinue");

//reset performance indicators
        activityHealthy = true;
        activityHealthDescription = "";
        kcontext.setVariable("activityHealthy", activityHealthy);
        kcontext.setVariable("activityHealthDescription",activityHealthDescription);


//set signal data
        kcontext.setVariable("signalName", requestSignalData.getName());
        kcontext.setVariable("signalHistory", requestSignalData.getData().getComment());
        kcontext.setVariable("signalAction", "Discontinue");
        kcontext.setVariable("signalOwner", requestSignalData.getExecutionUserId());
        kcontext.setVariable("actionId",  Integer.parseInt(requestSignalData.getActionId()));

        } catch (Exception e) {
                System.out.println("RequestActivity: discontinueDataPrep - An unexpected condition has happened: " + e.getMessage());
        }]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="_7EFA9F42-C909-42CB-9D7D-6E0C882C10E7" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_0785A662-B32C-4103-AA70-A418F127E190" targetRef="_AA4974E6-C802-4DE7-9AB6-FE9FCAD5CA23">
      <bpmn2:documentation id="_Iv6MZHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_EA75DB13-AA5A-40AD-9997-AEDEB9DAB56D" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_7D5F3AA7-A887-4F48-89B3-CD3181C97841" targetRef="_42636481-27A3-47D1-A895-CCA7CA339092">
      <bpmn2:documentation id="_Iv6zEHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
    </bpmn2:sequenceFlow>
    <bpmn2:scriptTask id="_34B8B69C-1524-4A34-B4EB-22DB001B584F" drools:selectable="true" name="Prepare noteObject" scriptFormat="http://www.java.com/java">
      <bpmn2:documentation id="_Iv6zEXkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:incoming>_0F283C3B-73C8-49D1-BAD0-20C5175D8B16</bpmn2:incoming>
      <bpmn2:outgoing>_41F29975-554E-4345-AAFC-DBC5AC696E4E</bpmn2:outgoing>
      <bpmn2:script><![CDATA[try{
        //Prepare an Initial RequestActivity NoteObject

        System.out.println("ENTERING RequestActivity note object ***");
        if (requestActivity == null) {
        System.out.println("requestActivity parameter is NULL");
        } else if (requestActivity.getVisit() == null) {
        System.out.println("requestActivity.getVisit is NULL");
        } else {
        System.out.println("requestActivity.getVisit().getLocation()" + requestActivity.getVisit().getLocation());
        System.out.println("requestActivity.getVisit().getServiceCategory()" + requestActivity.getVisit().getServiceCategory());
        System.out.println("requestActivity.getVisit().getDateTime()" + requestActivity.getVisit().getDateTime());
        }

        vistacore.order.Visit visit = new vistacore.order.Visit();
        visit = requestActivity.getVisit();
        String visitLocation = visit.getLocation();
        String visitServiceCategory = visit.getServiceCategory();
        String visitDateTime = visit.getDateTime();
        System.out.println("visitLocation: " + visitLocation);
        System.out.println("visitServiceCategory: " + visitServiceCategory);
        System.out.println("visitDateTime:" + visitDateTime);

        String noteObjectId = requestActivity.getAuthorUid().substring(12).replace(":",";");
        System.out.println("noteObjectId:" + noteObjectId);
        kcontext.setVariable("hasNoteObject",noteObjectId);


        String newNoteObject = "{" +
        "\"patientUid\": " + "\"" + requestActivity.getPatientUid() + "\"," +
        "\"authorUid\": " + "\"" + requestActivity.getAuthorUid() + "\"," +
        "\"domain\": \"ehmp-note\"," +
        "\"subDomain\": \"noteObject\"," +
        "\"visit\" : " +
        "{" +
        "\"location\": " + "\"" + visitLocation + "\"," +
        "\"serviceCategory\": " + "\"" + visitServiceCategory + "\"," +
        "\"dateTime\": " + "\"" + visitDateTime + "\"" +
        "}," +
        "\"ehmpState\" : \"active\"," +
        "\"data\": " +
        "{" +
        "\"sourceUid\" : " + "\"" + clinicalObjectUid + "\"" +
        "}" +
        "}";
        kcontext.setVariable("noteObject",newNoteObject);
        System.out.println("noteObject: " + newNoteObject);
        System.out.println("NOTE OBJECT PREP COMPLETED ****");

        } catch (Exception e) {
                System.out.println("RequestActivity: NoteObjectPrep - An unexpected condition has happened: " + e.getMessage());
        }]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:task id="_444ED617-D0CC-4B1A-951E-19FE9F0A2438" drools:bgcolor="#00CCFF" drools:selectable="true" drools:taskName="ClinicalObjectWriteService" name="Save noteObject to pJDS">
      <bpmn2:extensionElements>
        <drools:onExit-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[if (serviceResponse.indexOf("error") >= 0) {\n  System.out.println("**** Process Failed to save note object to pJDS **** " + serviceResponse);\n} else {\n  System.out.println("**** Note Object Saved to pJDS : **** " + serviceResponse);\n}]]></drools:script>
        </drools:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_41F29975-554E-4345-AAFC-DBC5AC696E4E</bpmn2:incoming>
      <bpmn2:outgoing>_10EB251B-BFB4-4B46-86C9-49713C1B1954</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_Iv6zEnkKEeaVRfG2jKN_-A">
        <bpmn2:dataInput id="_444ED617-D0CC-4B1A-951E-19FE9F0A2438_TaskNameInputX" name="TaskName"/>
        <bpmn2:dataInput id="_444ED617-D0CC-4B1A-951E-19FE9F0A2438_pidInputX" drools:dtype="String" itemSubjectRef="__444ED617-D0CC-4B1A-951E-19FE9F0A2438_pidInputXItem" name="pid"/>
        <bpmn2:dataInput id="_444ED617-D0CC-4B1A-951E-19FE9F0A2438_uidInputX" drools:dtype="String" itemSubjectRef="__444ED617-D0CC-4B1A-951E-19FE9F0A2438_uidInputXItem" name="uid"/>
        <bpmn2:dataInput id="_444ED617-D0CC-4B1A-951E-19FE9F0A2438_clinicalObjectInputX" drools:dtype="String" itemSubjectRef="__444ED617-D0CC-4B1A-951E-19FE9F0A2438_clinicalObjectInputXItem" name="clinicalObject"/>
        <bpmn2:dataOutput id="_444ED617-D0CC-4B1A-951E-19FE9F0A2438_ServiceResponseOutputX" drools:dtype="String" itemSubjectRef="__444ED617-D0CC-4B1A-951E-19FE9F0A2438_ServiceResponseOutputXItem" name="ServiceResponse"/>
        <bpmn2:inputSet id="_Iv6zE3kKEeaVRfG2jKN_-A">
          <bpmn2:dataInputRefs>_444ED617-D0CC-4B1A-951E-19FE9F0A2438_pidInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_444ED617-D0CC-4B1A-951E-19FE9F0A2438_uidInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_444ED617-D0CC-4B1A-951E-19FE9F0A2438_clinicalObjectInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_444ED617-D0CC-4B1A-951E-19FE9F0A2438_TaskNameInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_Iv6zFHkKEeaVRfG2jKN_-A">
          <bpmn2:dataOutputRefs>_444ED617-D0CC-4B1A-951E-19FE9F0A2438_ServiceResponseOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_Iv6zFXkKEeaVRfG2jKN_-A">
        <bpmn2:targetRef>_444ED617-D0CC-4B1A-951E-19FE9F0A2438_TaskNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Iv6zFnkKEeaVRfG2jKN_-A">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6zF3kKEeaVRfG2jKN_-A">ClinicalObjectWriteService</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6zGHkKEeaVRfG2jKN_-A">_444ED617-D0CC-4B1A-951E-19FE9F0A2438_TaskNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6zGXkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>noteObject</bpmn2:sourceRef>
        <bpmn2:targetRef>_444ED617-D0CC-4B1A-951E-19FE9F0A2438_clinicalObjectInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6zGnkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>icn</bpmn2:sourceRef>
        <bpmn2:targetRef>_444ED617-D0CC-4B1A-951E-19FE9F0A2438_pidInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_Iv6zG3kKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>_444ED617-D0CC-4B1A-951E-19FE9F0A2438_ServiceResponseOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>serviceResponse</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:sequenceFlow id="_41F29975-554E-4345-AAFC-DBC5AC696E4E" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_34B8B69C-1524-4A34-B4EB-22DB001B584F" targetRef="_444ED617-D0CC-4B1A-951E-19FE9F0A2438">
      <bpmn2:documentation id="_Iv6zHHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_B13B8AA7-C8C7-4A67-A3A7-4E13A4C040AA" drools:bgcolor="#000000" drools:selectable="true" name="Accepted" sourceRef="_26C11EC4-D200-49AA-9BD8-5B8AF19680F2" targetRef="_F14EDD36-6D38-4E7B-A65D-3992989F5D6D">
      <bpmn2:documentation id="_Iv6zHXkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6zHnkKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[return  KieFunctions.equalsTo(formAction, "accepted");]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:scriptTask id="_3B1EBF85-1D58-4322-8E6A-4BB39A49AF9E" drools:selectable="true" name="Notification/Perf Indicator" scriptFormat="http://www.java.com/java">
      <bpmn2:documentation id="_Iv6zH3kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:incoming>_34C366FD-B38A-4425-A063-4644370578CB</bpmn2:incoming>
      <bpmn2:outgoing>_2CD92001-41C9-4986-B3C3-CDE48456AB27</bpmn2:outgoing>
      <bpmn2:script><![CDATA[try{
        System.out.println("User Did Not Respond Notification Preparation: entering");
        String recipient = requestActivity.getData().getActivity().getAssignedTo();
        System.out.println("recipient " + recipient);
        String site = icn.split(";")[0];
        String dfn = icn.split(";")[1];
        String displayName = requestActivity.getDisplayName();
        String subject = "Complete Returned Request";
        String message = displayName +", Request has been returned and Is currently past due.";

        Long taskId = (Long)kcontext.getVariable("currentTaskInstanceId");

        notificationText = "{\"recipients\": [{\"recipient\": {\"userId\": \"" + recipient + "\"},\"salience\": 4}],\"producer\": {\"description\": \"workflow: Request\"},\"patientId\": \"" + site + ";" + dfn + "\",\"message\": {\"subject\": \"" + subject + "\",\"body\": \"" + message + "\"},\"resolution\": \"producer\", \"associatedItems\": [\"ehmp:task:" + taskId + "\"] }";
        kcontext.setVariable("notificationText", notificationText);

//Set performance indicators
        java.util.List<vistacore.order.request.Request> reqs = requestActivity.getData().getResponses();
        vistacore.order.request.Request latestResponse = reqs.get(reqs.size()-1);
        DateTimeFormatter formatter = DateTimeFormat.forPattern("yyyyMMddHHmmss");
        DateTime date = formatter.parseDateTime(latestResponse.getLatestDate());

        formatter = DateTimeFormat.forPattern("MM/dd/yyyy");
        String dateString = formatter.print(date);

        activityHealthy = false;
        activityHealthDescription = "Request not completed or discontinued by " + dateString;
        kcontext.setVariable("activityHealthy", activityHealthy);
        kcontext.setVariable("activityHealthDescription",activityHealthDescription);
        } catch (Exception e) {
                System.out.println("RequestActivity: NotificationPrep - An unexpected condition has happened: " + e.getMessage());
        }]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:task id="_F018026B-E5E1-4ABD-AB2D-8E05883B8945" drools:bgcolor="#33CCCC" drools:selectable="true" drools:taskName="NotificationsWriteService" name="NotificationsWriteService">
      <bpmn2:extensionElements>
        <drools:onExit-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println("**** Notif Save serviceResponse: **** " + serviceResponse);\n\nGson gson = new Gson();\njava.util.Map<String,String> map=new java.util.HashMap<String,String>();\nmap=(java.util.Map<String,String>) gson.fromJson(serviceResponse, map.getClass());\n\nSystem.out.println("NotificationId: "+ map.get("notificationid"));\n\n kcontext.setVariable("notificationId", map.get("notificationid"));]]></drools:script>
        </drools:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_2CD92001-41C9-4986-B3C3-CDE48456AB27</bpmn2:incoming>
      <bpmn2:outgoing>_99CF3088-5D08-4572-85E8-631B6FCF34A7</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_Iv6zIHkKEeaVRfG2jKN_-A">
        <bpmn2:dataInput id="_F018026B-E5E1-4ABD-AB2D-8E05883B8945_TaskNameInputX" name="TaskName"/>
        <bpmn2:dataInput id="_F018026B-E5E1-4ABD-AB2D-8E05883B8945_notificationInputX" drools:dtype="Object" itemSubjectRef="__F018026B-E5E1-4ABD-AB2D-8E05883B8945_notificationInputXItem" name="notification"/>
        <bpmn2:dataOutput id="_F018026B-E5E1-4ABD-AB2D-8E05883B8945_ServiceResponseOutputX" drools:dtype="Object" itemSubjectRef="__F018026B-E5E1-4ABD-AB2D-8E05883B8945_ServiceResponseOutputXItem" name="ServiceResponse"/>
        <bpmn2:inputSet id="_Iv6zIXkKEeaVRfG2jKN_-A">
          <bpmn2:dataInputRefs>_F018026B-E5E1-4ABD-AB2D-8E05883B8945_notificationInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_F018026B-E5E1-4ABD-AB2D-8E05883B8945_TaskNameInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_Iv6zInkKEeaVRfG2jKN_-A">
          <bpmn2:dataOutputRefs>_F018026B-E5E1-4ABD-AB2D-8E05883B8945_ServiceResponseOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_Iv6zI3kKEeaVRfG2jKN_-A">
        <bpmn2:targetRef>_F018026B-E5E1-4ABD-AB2D-8E05883B8945_TaskNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Iv6zJHkKEeaVRfG2jKN_-A">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6zJXkKEeaVRfG2jKN_-A">NotificationsWriteService</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6zJnkKEeaVRfG2jKN_-A">_F018026B-E5E1-4ABD-AB2D-8E05883B8945_TaskNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6zJ3kKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>notificationText</bpmn2:sourceRef>
        <bpmn2:targetRef>_F018026B-E5E1-4ABD-AB2D-8E05883B8945_notificationInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_Iv6zKHkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>_F018026B-E5E1-4ABD-AB2D-8E05883B8945_ServiceResponseOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>serviceResponse</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:sequenceFlow id="_2CD92001-41C9-4986-B3C3-CDE48456AB27" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_3B1EBF85-1D58-4322-8E6A-4BB39A49AF9E" targetRef="_F018026B-E5E1-4ABD-AB2D-8E05883B8945">
      <bpmn2:documentation id="_Iv6zKXkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
    </bpmn2:sequenceFlow>
    <bpmn2:endEvent id="_F5EB4761-7F3A-454F-B2E0-1E907E0E4F81" drools:bgcolor="#ff6347" drools:selectable="true" name="">
      <bpmn2:documentation id="_Iv6zKnkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:incoming>_99CF3088-5D08-4572-85E8-631B6FCF34A7</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:sequenceFlow id="_99CF3088-5D08-4572-85E8-631B6FCF34A7" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_F018026B-E5E1-4ABD-AB2D-8E05883B8945" targetRef="_F5EB4761-7F3A-454F-B2E0-1E907E0E4F81">
      <bpmn2:documentation id="_Iv6zK3kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
    </bpmn2:sequenceFlow>
    <bpmn2:exclusiveGateway id="_F14EDD36-6D38-4E7B-A65D-3992989F5D6D" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="has NoteObject  : _F741014F-C835-49D0-9D41-202AAE51C67C" name="" gatewayDirection="Diverging" default="_F741014F-C835-49D0-9D41-202AAE51C67C">
      <bpmn2:documentation id="_Iv6zLHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:incoming>_B13B8AA7-C8C7-4A67-A3A7-4E13A4C040AA</bpmn2:incoming>
      <bpmn2:outgoing>_0F283C3B-73C8-49D1-BAD0-20C5175D8B16</bpmn2:outgoing>
      <bpmn2:outgoing>_F741014F-C835-49D0-9D41-202AAE51C67C</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="_0F283C3B-73C8-49D1-BAD0-20C5175D8B16" drools:bgcolor="#000000" drools:selectable="true" name="no NoteObject" sourceRef="_F14EDD36-6D38-4E7B-A65D-3992989F5D6D" targetRef="_34B8B69C-1524-4A34-B4EB-22DB001B584F">
      <bpmn2:documentation id="_Iv6zLXkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6zLnkKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[return  KieFunctions.isEmpty(hasNoteObject);]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:exclusiveGateway id="_AEA88340-8A1B-41FF-9C55-CC1709440572" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="_D7900D05-35F4-432D-A8C6-FDCC9181C3FA" name="" gatewayDirection="Converging" default="_D7900D05-35F4-432D-A8C6-FDCC9181C3FA">
      <bpmn2:documentation id="_Iv6zL3kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:incoming>_966F17AB-5C81-4ADB-8E7C-0E529AC3CADE</bpmn2:incoming>
      <bpmn2:incoming>_10EB251B-BFB4-4B46-86C9-49713C1B1954</bpmn2:incoming>
      <bpmn2:incoming>_F741014F-C835-49D0-9D41-202AAE51C67C</bpmn2:incoming>
      <bpmn2:outgoing>_D7900D05-35F4-432D-A8C6-FDCC9181C3FA</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="_F741014F-C835-49D0-9D41-202AAE51C67C" drools:bgcolor="#000000" drools:selectable="true" name="has NoteObject " sourceRef="_F14EDD36-6D38-4E7B-A65D-3992989F5D6D" targetRef="_AEA88340-8A1B-41FF-9C55-CC1709440572">
      <bpmn2:documentation id="_Iv6zMHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6zMXkKEeaVRfG2jKN_-A"></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_D7900D05-35F4-432D-A8C6-FDCC9181C3FA" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_AEA88340-8A1B-41FF-9C55-CC1709440572" targetRef="_4CFA74AE-5479-4928-9FFB-39304C01FE4E">
      <bpmn2:documentation id="_Iv6zMnkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6zM3kKEeaVRfG2jKN_-A"></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_10EB251B-BFB4-4B46-86C9-49713C1B1954" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_444ED617-D0CC-4B1A-951E-19FE9F0A2438" targetRef="_AEA88340-8A1B-41FF-9C55-CC1709440572">
      <bpmn2:documentation id="_Iv6zNHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
    </bpmn2:sequenceFlow>
    <bpmn2:subProcess id="_29C00353-1475-46AD-92BB-D886773AB7B5" drools:selectable="true" name="">
      <bpmn2:incoming>_939B5B3F-BF86-4C82-AEAF-801D21BC6A3A</bpmn2:incoming>
      <bpmn2:outgoing>_26EFF922-A1F0-4FF6-A6FE-688B1DBFFF5E</bpmn2:outgoing>
      <bpmn2:startEvent id="_38A4905D-71D6-48AA-9A37-CDD17705C5DB" drools:bgcolor="#9acd32" drools:selectable="true" name="">
        <bpmn2:documentation id="_Iv6zNXkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
        <bpmn2:outgoing>_D644C573-FFEB-4069-A30D-5506AFAD6381</bpmn2:outgoing>
      </bpmn2:startEvent>
      <bpmn2:parallelGateway id="_B2B75267-76E4-4D1C-B0C0-9C9AE963D142" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" name="" gatewayDirection="Diverging">
        <bpmn2:documentation id="_Iv6zNnkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
        <bpmn2:incoming>_D644C573-FFEB-4069-A30D-5506AFAD6381</bpmn2:incoming>
        <bpmn2:outgoing>_A4AD2111-E51A-4CDD-B9FB-A81B0E534D8F</bpmn2:outgoing>
        <bpmn2:outgoing>_57B7E111-50C8-4DEA-AD22-359EB962FAEC</bpmn2:outgoing>
      </bpmn2:parallelGateway>
      <bpmn2:intermediateCatchEvent id="_FB4F000D-914E-413A-A840-BC1968E1A814" drools:bgcolor="#f5deb3" drools:selectable="true" drools:bordercolor="#a0522d" drools:boundaryca="" name="EDIT">
        <bpmn2:incoming>_57B7E111-50C8-4DEA-AD22-359EB962FAEC</bpmn2:incoming>
        <bpmn2:outgoing>_AEEB82AE-2505-4D8C-9203-5F8D66E3267B</bpmn2:outgoing>
        <bpmn2:dataOutput id="_FB4F000D-914E-413A-A840-BC1968E1A814_requestActivity" name="requestActivity"/>
        <bpmn2:dataOutputAssociation id="_Iv6zOHkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>_FB4F000D-914E-413A-A840-BC1968E1A814_requestActivity</bpmn2:sourceRef>
          <bpmn2:targetRef>updatedRequestActivity</bpmn2:targetRef>
        </bpmn2:dataOutputAssociation>
        <bpmn2:outputSet id="_Iv6zN3kKEeaVRfG2jKN_-A">
          <bpmn2:dataOutputRefs>_FB4F000D-914E-413A-A840-BC1968E1A814_requestActivity</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
        <bpmn2:signalEventDefinition id="_Iv6zOXkKEeaVRfG2jKN_-A" signalRef="EDIT"/>
      </bpmn2:intermediateCatchEvent>
      <bpmn2:userTask id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516" drools:bgcolor="#99CC00" drools:selectable="true" drools:scriptFormat="http://www.java.com/java" name="Response">
        <bpmn2:extensionElements>
          <drools:onEntry-script scriptFormat="http://www.java.com/java">
            <drools:script><![CDATA[System.out.println("On Entry Action of Response");\n\n\nString rc = requestActivity.getData().getActivity().getAssignedTo();\nSystem.out.println("On Entry Action of Response RoutingCode " + rc);\n\njava.util.List < vistacore.order.request.Request > reqs = requestActivity.getData().getRequests();\nvistacore.order.request.Request latestRequest = reqs.get(reqs.size() - 1);\n\nString assignTo = latestRequest.getAssignTo();\n\nif(action != null && action.equals("reassign")) {\n   java.util.List<vistacore.order.request.Request> ress =        requestActivity.getData().getResponses();\nvistacore.order.request.Request latestResponse = ress.get(ress.size()-1);\n  assignTo = latestResponse.getAssignTo();\n}\n\nif (assignTo.equals("Me")) {\n        System.out.println("On Entry Action of Response setting actor ");\n        kcontext.setVariable("actor", rc);\n        kcontext.setVariable("groups", null);\n} else if (assignTo.equals("Person")) {\n        kcontext.setVariable("actor", rc);\n        kcontext.setVariable("groups", null);\n} else {\n        kcontext.setVariable("actor", null);\n        kcontext.setVariable("groups", rc);\n}\n\nkcontext.setVariable("comments", latestRequest.getRequest());\n\nDateTimeFormatter formatter = DateTimeFormat.forPattern("yyyyMMddHHmmss").withZone(DateTimeZone.UTC);\nDateTime eDate = formatter.parseDateTime(latestRequest.getEarliestDate());\nkcontext.setVariable("earliestDate", eDate.toString(ISODateTimeFormat.dateTimeNoMillis()));\n\nSystem.out.println("earliestDate " + eDate.toString(ISODateTimeFormat.dateTimeNoMillis()));\n\nDateTime lDate = formatter.parseDateTime(latestRequest.getLatestDate());\nString lDateISO = lDate.toString(ISODateTimeFormat.dateTimeNoMillis());\nkcontext.setVariable("dueDate", lDateISO);\n\nSystem.out.println("dueDate " + lDateISO);\n\nDateTime currentDate = new DateTime(DateTimeZone.UTC);\nDateTimeFormatter notifcationFormatter = DateTimeFormat.forPattern("yyyy-MM-dd'T'HH:mm:ss'Z'").withZone(DateTimeZone.UTC);\nDateTime taskDueDateTime = notifcationFormatter.parseDateTime(lDateISO);\n\nString notifTime = "0";\nint secsDiff = Seconds.secondsBetween(currentDate, taskDueDateTime).getSeconds();\n\nif(secsDiff > 0) {\nint days = secsDiff/(3600*24);\nint remSeconds = secsDiff - days*3600*24;\nint hours = remSeconds/3600;\nremSeconds = remSeconds - hours*3600;\nint minutes = remSeconds/60;\nremSeconds = remSeconds - minutes*60;\nnotifTime = days + "d" + hours + "h" + minutes  + "m" + remSeconds + "s" ;\n}\n\nSystem.out.println("responseNotificationDays " + notifTime);\n\nkcontext.setVariable("responseNotificationDays", notifTime);\n\nSystem.out.println("earliestDate set " + eDate.toString(ISODateTimeFormat.dateTimeNoMillis()));\n\nSystem.out.println("p_dueDate set " + lDate.toString(ISODateTimeFormat.dateTimeNoMillis()));]]></drools:script>
          </drools:onEntry-script>
          <drools:onExit-script scriptFormat="http://www.java.com/java">
            <drools:script><![CDATA[System.out.println("On exit of response action " + action); \nSystem.out.println("On exit of response response " + response.getRoute()); \nSystem.out.println("On exit of response activity " + activity); \n\nkcontext.setVariable("formAction", formAction);\n\nrequestActivity.getData().setActivity(activity);\nkcontext.setVariable("action", action);\n\nif(requestActivity.getData().getResponses() == null) {\n  requestActivity.getData().setResponses(new java.util.ArrayList<vistacore.order.request.Request> ());\n}\n\nrequestActivity.getData().getResponses().add(response);\n\nkcontext.setVariable("requestActivity", requestActivity);\n\nString taskHistory = response.getRequest();\nkcontext.setVariable("taskHistory", taskHistory);\n\nString taskHistoryAction =  vistacore.order.request.ActionMap.valueOf(action.toUpperCase()).getLabel();\n\nkcontext.setVariable("taskHistoryAction", taskHistoryAction);]]></drools:script>
          </drools:onExit-script>
        </bpmn2:extensionElements>
        <bpmn2:incoming>_7528D24C-26C8-4AB7-9427-1701BF737AFE</bpmn2:incoming>
        <bpmn2:outgoing>_20497049-20E2-4DE1-A006-FAA6C22CCE54</bpmn2:outgoing>
        <bpmn2:ioSpecification id="_Iv6zOnkKEeaVRfG2jKN_-A">
          <bpmn2:dataInput id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_TaskNameInputX" name="TaskName"/>
          <bpmn2:dataInput id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_icnInputX" drools:dtype="Object" name="icn"/>
          <bpmn2:dataInput id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_patientUidInputX" drools:dtype="Object" name="patientUid"/>
          <bpmn2:dataInput id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_authorUidInputX" drools:dtype="Object" name="authorUid"/>
          <bpmn2:dataInput id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_stateInputX" drools:dtype="Object" name="state"/>
          <bpmn2:dataInput id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_SkippableInputX" drools:dtype="Object" name="Skippable"/>
          <bpmn2:dataInput id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_navigationInputX" drools:dtype="Object" name="navigation"/>
          <bpmn2:dataInput id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_definitionIdInputX" drools:dtype="Object" name="definitionId"/>
          <bpmn2:dataInput id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_GroupIdInputX" drools:dtype="Object" name="GroupId"/>
          <bpmn2:dataInput id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_CommentInputX" drools:dtype="Object" name="Comment"/>
          <bpmn2:dataInput id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_DueDateInputX" drools:dtype="Object" name="DueDate"/>
          <bpmn2:dataInput id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_EarlyDateInputX" drools:dtype="Object" name="EarlyDate"/>
          <bpmn2:dataInput id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_requestActivityInputX" drools:dtype="Object" name="requestActivity"/>
          <bpmn2:dataInput id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_PriorityInputX" drools:dtype="Object" name="Priority"/>
          <bpmn2:dataInput id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_permissionInputX" drools:dtype="Object" name="permission"/>
          <bpmn2:dataOutput id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_stateOutputX" drools:dtype="Object" name="state"/>
          <bpmn2:dataOutput id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_out_formActionOutputX" drools:dtype="Object" name="out_formAction"/>
          <bpmn2:dataOutput id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_out_activityOutputX" drools:dtype="Object" name="out_activity"/>
          <bpmn2:dataOutput id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_out_responseOutputX" drools:dtype="Object" name="out_response"/>
          <bpmn2:dataOutput id="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_out_actionOutputX" drools:dtype="Object" name="out_action"/>
          <bpmn2:inputSet id="_Iv6zO3kKEeaVRfG2jKN_-A">
            <bpmn2:dataInputRefs>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_icnInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_patientUidInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_authorUidInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_stateInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_SkippableInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_navigationInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_definitionIdInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_GroupIdInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_CommentInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_DueDateInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_EarlyDateInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_requestActivityInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_PriorityInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_permissionInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_TaskNameInputX</bpmn2:dataInputRefs>
          </bpmn2:inputSet>
          <bpmn2:outputSet id="_Iv6zPHkKEeaVRfG2jKN_-A">
            <bpmn2:dataOutputRefs>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_stateOutputX</bpmn2:dataOutputRefs>
            <bpmn2:dataOutputRefs>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_out_formActionOutputX</bpmn2:dataOutputRefs>
            <bpmn2:dataOutputRefs>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_out_activityOutputX</bpmn2:dataOutputRefs>
            <bpmn2:dataOutputRefs>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_out_responseOutputX</bpmn2:dataOutputRefs>
            <bpmn2:dataOutputRefs>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_out_actionOutputX</bpmn2:dataOutputRefs>
          </bpmn2:outputSet>
        </bpmn2:ioSpecification>
        <bpmn2:dataInputAssociation id="_Iv6zPXkKEeaVRfG2jKN_-A">
          <bpmn2:targetRef>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_TaskNameInputX</bpmn2:targetRef>
          <bpmn2:assignment id="_Iv6zPnkKEeaVRfG2jKN_-A">
            <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6zP3kKEeaVRfG2jKN_-A">Response</bpmn2:from>
            <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6zQHkKEeaVRfG2jKN_-A">_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_TaskNameInputX</bpmn2:to>
          </bpmn2:assignment>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zQXkKEeaVRfG2jKN_-A">
          <bpmn2:targetRef>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_navigationInputX</bpmn2:targetRef>
          <bpmn2:assignment id="_Iv6zQnkKEeaVRfG2jKN_-A">
            <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6zQ3kKEeaVRfG2jKN_-A"><![CDATA[{    "channel": "activity-management",    "event": "show:form" }]]></bpmn2:from>
            <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6zRHkKEeaVRfG2jKN_-A">_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_navigationInputX</bpmn2:to>
          </bpmn2:assignment>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zRXkKEeaVRfG2jKN_-A">
          <bpmn2:targetRef>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_definitionIdInputX</bpmn2:targetRef>
          <bpmn2:assignment id="_Iv6zRnkKEeaVRfG2jKN_-A">
            <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6zR3kKEeaVRfG2jKN_-A"><![CDATA[Request.Response]]></bpmn2:from>
            <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6zSHkKEeaVRfG2jKN_-A">_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_definitionIdInputX</bpmn2:to>
          </bpmn2:assignment>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zSXkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>earliestDate</bpmn2:sourceRef>
          <bpmn2:targetRef>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_EarlyDateInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zSnkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>dueDate</bpmn2:sourceRef>
          <bpmn2:targetRef>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_DueDateInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zS3kKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>requestActivity</bpmn2:sourceRef>
          <bpmn2:targetRef>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_requestActivityInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zTHkKEeaVRfG2jKN_-A">
          <bpmn2:targetRef>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_permissionInputX</bpmn2:targetRef>
          <bpmn2:assignment id="_Iv6zTXkKEeaVRfG2jKN_-A">
            <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6zTnkKEeaVRfG2jKN_-A"><![CDATA[{ "ehmp": [],"pcmm": [],"user": []}]]></bpmn2:from>
            <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6zT3kKEeaVRfG2jKN_-A">_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_permissionInputX</bpmn2:to>
          </bpmn2:assignment>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zUHkKEeaVRfG2jKN_-A">
          <bpmn2:targetRef>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_GroupIdInputX</bpmn2:targetRef>
          <bpmn2:assignment id="_Iv6zUXkKEeaVRfG2jKN_-A">
            <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6zUnkKEeaVRfG2jKN_-A"><![CDATA[#{groups}]]></bpmn2:from>
            <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6zU3kKEeaVRfG2jKN_-A">_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_GroupIdInputX</bpmn2:to>
          </bpmn2:assignment>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zVHkKEeaVRfG2jKN_-A">
          <bpmn2:targetRef>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_SkippableInputX</bpmn2:targetRef>
          <bpmn2:assignment id="_Iv6zVXkKEeaVRfG2jKN_-A">
            <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6zVnkKEeaVRfG2jKN_-A">true</bpmn2:from>
            <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6zV3kKEeaVRfG2jKN_-A">_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_SkippableInputX</bpmn2:to>
          </bpmn2:assignment>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zWHkKEeaVRfG2jKN_-A">
          <bpmn2:targetRef>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_CommentInputX</bpmn2:targetRef>
          <bpmn2:assignment id="_Iv6zWXkKEeaVRfG2jKN_-A">
            <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6zWnkKEeaVRfG2jKN_-A"><![CDATA[#{comments}]]></bpmn2:from>
            <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6zW3kKEeaVRfG2jKN_-A">_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_CommentInputX</bpmn2:to>
          </bpmn2:assignment>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zXHkKEeaVRfG2jKN_-A">
          <bpmn2:targetRef>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_PriorityInputX</bpmn2:targetRef>
          <bpmn2:assignment id="_Iv6zXXkKEeaVRfG2jKN_-A">
            <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6zXnkKEeaVRfG2jKN_-A">#{urgency}</bpmn2:from>
            <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6zX3kKEeaVRfG2jKN_-A">_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_PriorityInputX</bpmn2:to>
          </bpmn2:assignment>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataOutputAssociation id="_Iv6zYHkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_out_formActionOutputX</bpmn2:sourceRef>
          <bpmn2:targetRef>formAction</bpmn2:targetRef>
        </bpmn2:dataOutputAssociation>
        <bpmn2:dataOutputAssociation id="_Iv6zYXkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_out_activityOutputX</bpmn2:sourceRef>
          <bpmn2:targetRef>activity</bpmn2:targetRef>
        </bpmn2:dataOutputAssociation>
        <bpmn2:dataOutputAssociation id="_Iv6zYnkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_out_responseOutputX</bpmn2:sourceRef>
          <bpmn2:targetRef>response</bpmn2:targetRef>
        </bpmn2:dataOutputAssociation>
        <bpmn2:dataOutputAssociation id="_Iv6zY3kKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>_5EBE04DC-C34B-46F2-A6EE-9D37A6795516_out_actionOutputX</bpmn2:sourceRef>
          <bpmn2:targetRef>action</bpmn2:targetRef>
        </bpmn2:dataOutputAssociation>
        <bpmn2:potentialOwner id="_Iv6zZHkKEeaVRfG2jKN_-A">
          <bpmn2:resourceAssignmentExpression id="_Iv6zZXkKEeaVRfG2jKN_-A">
            <bpmn2:formalExpression id="_Iv6zZnkKEeaVRfG2jKN_-A">#{actor}</bpmn2:formalExpression>
          </bpmn2:resourceAssignmentExpression>
        </bpmn2:potentialOwner>
      </bpmn2:userTask>
      <bpmn2:scriptTask id="_7C996D18-3533-4C4B-9EAC-381B4CDC8AFC" drools:selectable="true" name="Set Data" scriptFormat="http://www.java.com/java">
        <bpmn2:incoming>_AEEB82AE-2505-4D8C-9203-5F8D66E3267B</bpmn2:incoming>
        <bpmn2:outgoing>_ABC2D458-AC91-4FF6-B876-B2E521A1007D</bpmn2:outgoing>
        <bpmn2:script><![CDATA[try{

        System.out.println("Inside EDIT data ");

        kcontext.setVariable("action", "EDIT");

        if(requestActivity.getData().getSignals() == null) {
        requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());
        }

        java.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();
        java.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();

        java.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();

        String executionUserId = null;
        Integer actionId = null;
        String name = null;

        if(signals != null && signals.size() >= 1) {
        vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);
        DateTime currentDate = new DateTime(DateTimeZone.UTC);
        DateTimeFormatter dtformatter = DateTimeFormat.forPattern("YYYYMMddHHmmss+0000");
        String currentDateString = currentDate.toString(dtformatter);
        latestSignal.setExecutionDateTime(currentDateString);

        requestActivity.getData().getSignals().add(latestSignal);
        executionUserId = latestSignal.getExecutionUserId();
        actionId = Integer.parseInt(latestSignal.getActionId());
        name = latestSignal.getName();
        }
        if(reqs != null && reqs.size() >= 1) {
        vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);
        requestActivity.getData().getRequests().add(latestRequest);
        kcontext.setVariable("comments", latestRequest.getRequest());
        }

        if(res != null && res.size() >= 1) {
        vistacore.order.request.Request latestResponse = res.get(res.size()-1);
        requestActivity.getData().getResponses().add(latestResponse);
        }

        requestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());

        requestActivity.setFormAction(updatedRequestActivity.getFormAction());
        requestActivity.setInstanceName(updatedRequestActivity.getInstanceName());

        requestActivity.setPatientUid(updatedRequestActivity.getPatientUid());
        requestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());
        requestActivity.setDomain(updatedRequestActivity.getDomain());
        requestActivity.setSubDomain(updatedRequestActivity.getSubDomain());
        requestActivity.setDisplayName(updatedRequestActivity.getDisplayName());
        requestActivity.setReferenceId(updatedRequestActivity.getReferenceId());
        requestActivity.setUrgency(updatedRequestActivity.getUrgency());
        kcontext.setVariable("destinationFacility", updatedRequestActivity.getData().getActivity().getDestinationFacilityId());
        kcontext.setVariable("facility", updatedRequestActivity.getData().getActivity().getSourceFacilityId());

        System.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());

        Gson gson = new Gson();
        String json = gson.toJson(requestActivity);

        kcontext.setVariable("pjdsRecord", json);
        kcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));
        kcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());
        kcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());
        kcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());

//set signal data
        kcontext.setVariable("signalName", name);
        kcontext.setVariable("signalHistory", "");
        kcontext.setVariable("signalAction", "Edit");
        kcontext.setVariable("signalOwner", executionUserId);
        kcontext.setVariable("actionId", actionId);





//reset performance indicators

        activityHealthy = true;
        activityHealthDescription = "";
        kcontext.setVariable("activityHealthy", activityHealthy);
        kcontext.setVariable("activityHealthDescription",activityHealthDescription);


        System.out.println("END OF EDIT DATA");

        } catch (Exception e) {
                System.out.println("RequestActivity: Edit Data - An unexpected condition has happened: " + e.getMessage());
        }]]></bpmn2:script>
      </bpmn2:scriptTask>
      <bpmn2:endEvent id="_D7862388-DB01-4015-B17B-965B2C13486F" drools:bgcolor="#ff6347" drools:selectable="true" name="">
        <bpmn2:documentation id="_Iv6zZ3kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
        <bpmn2:incoming>_7C7B8B1F-15D5-4CBD-B423-BAC9CB153021</bpmn2:incoming>
        <bpmn2:terminateEventDefinition id="_Iv6zaHkKEeaVRfG2jKN_-A"/>
      </bpmn2:endEvent>
      <bpmn2:task id="_6EBBF042-7FEB-4344-B5A1-8C77F6C04060" drools:bgcolor="#33CCCC" drools:selectable="true" drools:taskName="ClinicalObjectWriteService" name="Save pJDS Record">
        <bpmn2:extensionElements>
          <drools:onExit-script scriptFormat="http://www.java.com/java">
            <drools:script><![CDATA[System.out.println("pJDS serviceResponse: " + serviceResponse);\nJsonParser parser = new JsonParser();\nJsonObject obj = parser.parse(serviceResponse).getAsJsonObject();\nJsonElement dataElement = obj.get("status");\nif (dataElement == null){\n	throw new Exception("Invalid response received(status is missing) from ClinicalObjectWriteService");\n}\nif (dataElement.getAsInt() != 200) {\n	dataElement = obj.get("error");\n	if (dataElement != null && !dataElement.getAsString().isEmpty()){\n		throw new Exception(dataElement.getAsString());\n	}\n 	else {\n		throw new Exception("UNKNOWN ERROR");\n	}\n}\n]]></drools:script>
          </drools:onExit-script>
        </bpmn2:extensionElements>
        <bpmn2:incoming>_2AE93272-FD82-4752-90F6-D7CDA187E0E8</bpmn2:incoming>
        <bpmn2:outgoing>_48F0E2D1-98BA-43D0-94C5-E5A40F7E19D5</bpmn2:outgoing>
        <bpmn2:ioSpecification id="_Iv6zaXkKEeaVRfG2jKN_-A">
          <bpmn2:dataInput id="_6EBBF042-7FEB-4344-B5A1-8C77F6C04060_TaskNameInputX" name="TaskName"/>
          <bpmn2:dataInput id="_6EBBF042-7FEB-4344-B5A1-8C77F6C04060_clinicalObjectInputX" drools:dtype="Object" name="clinicalObject"/>
          <bpmn2:dataInput id="_6EBBF042-7FEB-4344-B5A1-8C77F6C04060_uidInputX" drools:dtype="Object" name="uid"/>
          <bpmn2:dataInput id="_6EBBF042-7FEB-4344-B5A1-8C77F6C04060_pidInputX" drools:dtype="Object" name="pid"/>
          <bpmn2:dataOutput id="_6EBBF042-7FEB-4344-B5A1-8C77F6C04060_ServiceResponseOutputX" drools:dtype="Object" name="ServiceResponse"/>
          <bpmn2:inputSet id="_Iv6zankKEeaVRfG2jKN_-A">
            <bpmn2:dataInputRefs>_6EBBF042-7FEB-4344-B5A1-8C77F6C04060_clinicalObjectInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_6EBBF042-7FEB-4344-B5A1-8C77F6C04060_uidInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_6EBBF042-7FEB-4344-B5A1-8C77F6C04060_pidInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_6EBBF042-7FEB-4344-B5A1-8C77F6C04060_TaskNameInputX</bpmn2:dataInputRefs>
          </bpmn2:inputSet>
          <bpmn2:outputSet id="_Iv6za3kKEeaVRfG2jKN_-A">
            <bpmn2:dataOutputRefs>_6EBBF042-7FEB-4344-B5A1-8C77F6C04060_ServiceResponseOutputX</bpmn2:dataOutputRefs>
          </bpmn2:outputSet>
        </bpmn2:ioSpecification>
        <bpmn2:dataInputAssociation id="_Iv6zbHkKEeaVRfG2jKN_-A">
          <bpmn2:targetRef>_6EBBF042-7FEB-4344-B5A1-8C77F6C04060_TaskNameInputX</bpmn2:targetRef>
          <bpmn2:assignment id="_Iv6zbXkKEeaVRfG2jKN_-A">
            <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6zbnkKEeaVRfG2jKN_-A">ClinicalObjectWriteService</bpmn2:from>
            <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6zb3kKEeaVRfG2jKN_-A">_6EBBF042-7FEB-4344-B5A1-8C77F6C04060_TaskNameInputX</bpmn2:to>
          </bpmn2:assignment>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zcHkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>pjdsRecord</bpmn2:sourceRef>
          <bpmn2:targetRef>_6EBBF042-7FEB-4344-B5A1-8C77F6C04060_clinicalObjectInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zcXkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>icn</bpmn2:sourceRef>
          <bpmn2:targetRef>_6EBBF042-7FEB-4344-B5A1-8C77F6C04060_pidInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zcnkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>clinicalObjectUid</bpmn2:sourceRef>
          <bpmn2:targetRef>_6EBBF042-7FEB-4344-B5A1-8C77F6C04060_uidInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataOutputAssociation id="_Iv6zc3kKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>_6EBBF042-7FEB-4344-B5A1-8C77F6C04060_ServiceResponseOutputX</bpmn2:sourceRef>
          <bpmn2:targetRef>serviceResponse</bpmn2:targetRef>
        </bpmn2:dataOutputAssociation>
      </bpmn2:task>
      <bpmn2:task id="_2B26DAFB-F71E-41EF-B882-C73668423ECB" drools:bgcolor="#33CCCC" drools:selectable="true" drools:taskName="NotificationsWriteService" name="NotificationsWriteService">
        <bpmn2:extensionElements>
          <drools:onExit-script scriptFormat="http://www.java.com/java">
            <drools:script><![CDATA[System.out.println("**** Notif Save serviceResponse: **** " + serviceResponse);\n\nGson gson = new Gson();\njava.util.Map<String,String> map=new java.util.HashMap<String,String>();\nmap=(java.util.Map<String,String>) gson.fromJson(serviceResponse, map.getClass());\n\nSystem.out.println("notificationId: "+ map.get("notificationid"));\n\n kcontext.setVariable("notificationId", map.get("notificationid"));]]></drools:script>
          </drools:onExit-script>
        </bpmn2:extensionElements>
        <bpmn2:incoming>_FA410E1F-25BF-41BB-8C15-98C2A99FEABD</bpmn2:incoming>
        <bpmn2:outgoing>_3CCE1581-ADFE-40F4-9F99-0F84E8140EFC</bpmn2:outgoing>
        <bpmn2:ioSpecification id="_Iv6zdHkKEeaVRfG2jKN_-A">
          <bpmn2:dataInput id="_2B26DAFB-F71E-41EF-B882-C73668423ECB_TaskNameInputX" name="TaskName"/>
          <bpmn2:dataInput id="_2B26DAFB-F71E-41EF-B882-C73668423ECB_notificationInputX" drools:dtype="Object" name="notification"/>
          <bpmn2:dataOutput id="_2B26DAFB-F71E-41EF-B882-C73668423ECB_ServiceResponseOutputX" drools:dtype="Object" name="ServiceResponse"/>
          <bpmn2:inputSet id="_Iv6zdXkKEeaVRfG2jKN_-A">
            <bpmn2:dataInputRefs>_2B26DAFB-F71E-41EF-B882-C73668423ECB_notificationInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_2B26DAFB-F71E-41EF-B882-C73668423ECB_TaskNameInputX</bpmn2:dataInputRefs>
          </bpmn2:inputSet>
          <bpmn2:outputSet id="_Iv6zdnkKEeaVRfG2jKN_-A">
            <bpmn2:dataOutputRefs>_2B26DAFB-F71E-41EF-B882-C73668423ECB_ServiceResponseOutputX</bpmn2:dataOutputRefs>
          </bpmn2:outputSet>
        </bpmn2:ioSpecification>
        <bpmn2:dataInputAssociation id="_Iv6zd3kKEeaVRfG2jKN_-A">
          <bpmn2:targetRef>_2B26DAFB-F71E-41EF-B882-C73668423ECB_TaskNameInputX</bpmn2:targetRef>
          <bpmn2:assignment id="_Iv6zeHkKEeaVRfG2jKN_-A">
            <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6zeXkKEeaVRfG2jKN_-A">NotificationsWriteService</bpmn2:from>
            <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6zenkKEeaVRfG2jKN_-A">_2B26DAFB-F71E-41EF-B882-C73668423ECB_TaskNameInputX</bpmn2:to>
          </bpmn2:assignment>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6ze3kKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>notificationText</bpmn2:sourceRef>
          <bpmn2:targetRef>_2B26DAFB-F71E-41EF-B882-C73668423ECB_notificationInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataOutputAssociation id="_Iv6zfHkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>_2B26DAFB-F71E-41EF-B882-C73668423ECB_ServiceResponseOutputX</bpmn2:sourceRef>
          <bpmn2:targetRef>serviceResponse</bpmn2:targetRef>
        </bpmn2:dataOutputAssociation>
      </bpmn2:task>
      <bpmn2:endEvent id="_B83BF56B-0A9D-4632-8238-0A7607EF8AD8" drools:bgcolor="#ff6347" drools:selectable="true" name="">
        <bpmn2:documentation id="_Iv6zfXkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
        <bpmn2:incoming>_3CCE1581-ADFE-40F4-9F99-0F84E8140EFC</bpmn2:incoming>
      </bpmn2:endEvent>
      <bpmn2:scriptTask id="_008660B2-FE52-42DF-A4BF-74A6618E97C6" drools:selectable="true" name="Notification/PerfIndicators" scriptFormat="http://www.java.com/java">
        <bpmn2:incoming>_8F53FE59-5B88-41AD-85E2-E1FA6C2C882A</bpmn2:incoming>
        <bpmn2:outgoing>_FA410E1F-25BF-41BB-8C15-98C2A99FEABD</bpmn2:outgoing>
        <bpmn2:script><![CDATA[try{
        System.out.println("User Did Not Respond Notification Preparation: entering");
        String site = icn.split(";")[0];
        String dfn = icn.split(";")[1];
        String displayName = requestActivity.getDisplayName();
        String subject = "Request Past Due";
        String message = "Your Request, "+ displayName +", is past the latest date and has not been completed.";

        Long taskId = (Long)kcontext.getVariable("currentTaskInstanceId");
        String[] authorArray = requestActivity.getAuthorUid().split(":");
        String author = authorArray[3]+";"+authorArray[4];

        java.util.List<vistacore.order.request.Request> reqs = requestActivity.getData(). getRequests();
        vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);
        String recipient = "";

        String assignTo = latestRequest.getAssignTo();

        if(action != null && action.equals("reassign")) {
        java.util.List<vistacore.order.request.Request> ress =        requestActivity.getData().getResponses();
        vistacore.order.request.Request latestResponse = ress.get(ress.size()-1);
        assignTo = latestResponse.getAssignTo();
        }

        if(assignTo.equals("Me") || assignTo.equals("Person")) {
        String routingCode = requestActivity.getData().getActivity().getAssignedTo();
        System.out.println("recipient " + routingCode);
        recipient =" {\"recipient\": {\"userId\": \"" + routingCode + "\"},\"salience\": 4}";
        } else {
        String routes=requestActivity.getData().getActivity().getAssignedTo();
        String teamFacility = requestActivity.getData().getActivity().getDestinationFacilityId();
        String[]routesList=routes.split(",");

        for(String route: routesList){

        route=route.trim();
        if(route.isEmpty()){
        continue;
        }

        Integer team=null;
        Integer teamRole=null;
        boolean isValid=false;
        String subRouteCode = null;
        if(route.startsWith("[")){
        route=route.replace("[","").replace("]","");
        String[]subRoutes=route.split("/");


        if(!recipient.isEmpty())
        recipient = recipient + ",";

        for(String subRoute:subRoutes){
        subRoute=subRoute.trim();

        System.out.println("subRoute " + subRoute.toString());

        String category=subRoute.substring(0,2);
        int subRouteCodeBegin=subRoute.indexOf('(');
        int subRouteCodeEnd=subRoute.indexOf(')');

        subRouteCode=subRoute.substring(subRouteCodeBegin+1,subRouteCodeEnd);
        if(category.equals("TM")) {
        team=Integer.parseInt(subRouteCode);
        } else if(category.equals("TR")) {
        teamRole=Integer.parseInt(subRouteCode);
        }
        }

        recipient =  recipient +" {\"recipient\": {\"facility\": \"" + teamFacility + "\",\"teamId\": \""  + team + "\", \"teamRole\": \"" + teamRole + "\"},\"salience\": 4} ";
        }
        }
        }
        recipient =  recipient + ", {\"recipient\": {\"userId\": \"" +author + "\"},\"salience\": 4}";

        notificationText ="{\"recipients\": [" + recipient + "],\"producer\": {\"description\": \"workflow: Request\"}, \"patientId\": \"" + site + ";" + dfn + "\",\"message\": {\"subject\": \"" + subject + "\",\"body\": \"" + message + "\"},\"resolution\": \"producer\",  \"associatedItems\": [\"ehmp:task:" + taskId + "\"] }";

        System.out.println("User Did Not Respond Notification Preparation notificationText:" + notificationText);
        kcontext.setVariable("notificationText", notificationText);
        System.out.println("User Did Not Respond Notification Preparation: exiting");

//set performance indicators
        DateTimeFormatter formatter = DateTimeFormat.forPattern("yyyyMMddHHmmss");
        DateTime date = formatter.parseDateTime(latestRequest.getLatestDate());

        formatter = DateTimeFormat.forPattern("MM/dd/yyyy");
        String dateString = formatter.print(date);

        activityHealthy = false;
        activityHealthDescription = "Request not completed or discontinued by " + dateString;
        kcontext.setVariable("activityHealthy", activityHealthy);
        kcontext.setVariable("activityHealthDescription",activityHealthDescription);


        } catch (Exception e) {
                System.out.println("RequestActivity: Notification Preparation - An unexpected condition has happened: " + e.getMessage());
        }]]></bpmn2:script>
      </bpmn2:scriptTask>
      <bpmn2:exclusiveGateway id="_2CAEDC25-5907-4A6D-AD66-40C19AB7E985" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="" name="" gatewayDirection="Diverging">
        <bpmn2:documentation id="_Iv6zfnkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
        <bpmn2:incoming>_4EEB0446-BA94-4636-B61E-FC2D87354C5F</bpmn2:incoming>
        <bpmn2:outgoing>_EB47D8F2-82CA-4E01-9419-4D4175B87785</bpmn2:outgoing>
        <bpmn2:outgoing>_7C7B8B1F-15D5-4CBD-B423-BAC9CB153021</bpmn2:outgoing>
      </bpmn2:exclusiveGateway>
      <bpmn2:scriptTask id="_F3179ED8-614D-4187-AE50-833FA93A054D" drools:selectable="true" name="Set Reassign data " scriptFormat="http://www.java.com/java">
        <bpmn2:incoming>_EB47D8F2-82CA-4E01-9419-4D4175B87785</bpmn2:incoming>
        <bpmn2:outgoing>_A1D870CC-33F2-484E-87FF-3DEA5EE392A0</bpmn2:outgoing>
        <bpmn2:script><![CDATA[try{
        System.out.println("On Entry Action of Reassign");

        String rc = requestActivity.getData().getActivity().getAssignedTo();
        System.out.println("On Entry Action of Reassign Request RoutingCode " + rc);

        java.util.List<vistacore.order.request.Request> reqs = requestActivity.getData().getResponses();
        vistacore.order.request.Request latestResponse = reqs.get(reqs.size()-1);

        System.out.println("On Entry Action of Reassign Request assignTo " + latestResponse.getAssignTo());

        if(latestResponse.getAssignTo().equals("Me") ) {
        System.out.println("On Entry Action of Request setting actor ");
        kcontext.setVariable("actor", rc);
        kcontext.setVariable("groups", null);
        System.out.println("On Entry Action of Request after setting actor ");
        } else if(latestResponse.getAssignTo().equals("Person")) {
        kcontext.setVariable("actor", rc);
        kcontext.setVariable("groups", null);
        } else {
        kcontext.setVariable("groups", rc);
        kcontext.setVariable("actor", null);
        }
        } catch (Exception e) {
                System.out.println("RequestActivity: Entry Action of Reassign - An unexpected condition has happened: " + e.getMessage());
        }]]></bpmn2:script>
      </bpmn2:scriptTask>
      <bpmn2:scriptTask id="_18E7B07C-A07A-4B9F-A58C-E0F45A4CB2EA" drools:selectable="true" name="Set Data" scriptFormat="http://www.java.com/java">
        <bpmn2:documentation id="_Iv6zf3kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
        <bpmn2:incoming>_A1D870CC-33F2-484E-87FF-3DEA5EE392A0</bpmn2:incoming>
        <bpmn2:outgoing>_853D63FA-4E31-4576-8F76-A1CBF55AF624</bpmn2:outgoing>
        <bpmn2:script><![CDATA[try{
        System.out.println("Prepare pJDS Record for Reassign " + formAction);
        Gson gson = new Gson();

        String ehmpStateComputed = "active";
        String stateComputed = "Active: Reassign";

        requestActivity.setEhmpState(ehmpStateComputed);
        String json = gson.toJson(requestActivity);

        kcontext.setVariable("pjdsRecord", json);
        kcontext.setVariable("state", stateComputed);
        kcontext.setVariable("clinicalObjectUid", requestActivity.getUid());

        System.out.println("Completed pJDS Record for Reassign " + json);



        } catch (Exception e) {
                System.out.println("RequestActivity: pJDS Record for Reassign - An unexpected condition has happened: " + e.getMessage());
        }]]></bpmn2:script>
      </bpmn2:scriptTask>
      <bpmn2:task id="_613748AB-8896-4E4B-8C36-F202EDFC8F7A" drools:bgcolor="#33CCCC" drools:selectable="true" drools:taskName="ClinicalObjectWriteService" name="Save pJDS Record">
        <bpmn2:incoming>_853D63FA-4E31-4576-8F76-A1CBF55AF624</bpmn2:incoming>
        <bpmn2:outgoing>_D7354536-2400-4ED2-8B04-D99996993FA3</bpmn2:outgoing>
        <bpmn2:ioSpecification id="_Iv6zgHkKEeaVRfG2jKN_-A">
          <bpmn2:dataInput id="_613748AB-8896-4E4B-8C36-F202EDFC8F7A_TaskNameInputX" name="TaskName"/>
          <bpmn2:dataInput id="_613748AB-8896-4E4B-8C36-F202EDFC8F7A_clinicalObjectInputX" drools:dtype="Object" name="clinicalObject"/>
          <bpmn2:dataInput id="_613748AB-8896-4E4B-8C36-F202EDFC8F7A_uidInputX" drools:dtype="Object" name="uid"/>
          <bpmn2:dataInput id="_613748AB-8896-4E4B-8C36-F202EDFC8F7A_pidInputX" drools:dtype="Object" name="pid"/>
          <bpmn2:dataOutput id="_613748AB-8896-4E4B-8C36-F202EDFC8F7A_ServiceResponseOutputX" drools:dtype="Object" name="ServiceResponse"/>
          <bpmn2:inputSet id="_Iv6zgXkKEeaVRfG2jKN_-A">
            <bpmn2:dataInputRefs>_613748AB-8896-4E4B-8C36-F202EDFC8F7A_clinicalObjectInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_613748AB-8896-4E4B-8C36-F202EDFC8F7A_uidInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_613748AB-8896-4E4B-8C36-F202EDFC8F7A_pidInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_613748AB-8896-4E4B-8C36-F202EDFC8F7A_TaskNameInputX</bpmn2:dataInputRefs>
          </bpmn2:inputSet>
          <bpmn2:outputSet id="_Iv6zgnkKEeaVRfG2jKN_-A">
            <bpmn2:dataOutputRefs>_613748AB-8896-4E4B-8C36-F202EDFC8F7A_ServiceResponseOutputX</bpmn2:dataOutputRefs>
          </bpmn2:outputSet>
        </bpmn2:ioSpecification>
        <bpmn2:dataInputAssociation id="_Iv6zg3kKEeaVRfG2jKN_-A">
          <bpmn2:targetRef>_613748AB-8896-4E4B-8C36-F202EDFC8F7A_TaskNameInputX</bpmn2:targetRef>
          <bpmn2:assignment id="_Iv6zhHkKEeaVRfG2jKN_-A">
            <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6zhXkKEeaVRfG2jKN_-A">ClinicalObjectWriteService</bpmn2:from>
            <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6zhnkKEeaVRfG2jKN_-A">_613748AB-8896-4E4B-8C36-F202EDFC8F7A_TaskNameInputX</bpmn2:to>
          </bpmn2:assignment>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zh3kKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>pjdsRecord</bpmn2:sourceRef>
          <bpmn2:targetRef>_613748AB-8896-4E4B-8C36-F202EDFC8F7A_clinicalObjectInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6ziHkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>icn</bpmn2:sourceRef>
          <bpmn2:targetRef>_613748AB-8896-4E4B-8C36-F202EDFC8F7A_pidInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6ziXkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>clinicalObjectUid</bpmn2:sourceRef>
          <bpmn2:targetRef>_613748AB-8896-4E4B-8C36-F202EDFC8F7A_uidInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataOutputAssociation id="_Iv6zinkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>_613748AB-8896-4E4B-8C36-F202EDFC8F7A_ServiceResponseOutputX</bpmn2:sourceRef>
          <bpmn2:targetRef>serviceResponse</bpmn2:targetRef>
        </bpmn2:dataOutputAssociation>
      </bpmn2:task>
      <bpmn2:scriptTask id="_ECF3D56B-3886-4DCB-B80D-CDADF00DFDC4" drools:selectable="true" name="Prepare noteObject" scriptFormat="http://www.java.com/java">
        <bpmn2:documentation id="_Iv6zi3kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
        <bpmn2:incoming>_04750F7B-71BD-456E-8765-0D4289DF19E9</bpmn2:incoming>
        <bpmn2:outgoing>_9AFB7EAD-2271-4990-A183-9514B486A91F</bpmn2:outgoing>
        <bpmn2:script><![CDATA[try{
        System.out.println("ENTERING Reassign note object ***");
        if (requestActivity == null) {
        System.out.println("requestActivity parameter is NULL");
        } else if (requestActivity.getVisit() == null) {
        System.out.println("requestActivity.getVisit is NULL");
        } else {
        System.out.println("requestActivity.getVisit().getLocation()" + requestActivity.getVisit().getLocation());
        System.out.println("requestActivity.getVisit().getServiceCategory()" + requestActivity.getVisit().getServiceCategory());
        System.out.println("requestActivity.getVisit().getDateTime()" + requestActivity.getVisit().getDateTime());
        }

        vistacore.order.Visit visit = new vistacore.order.Visit();
        visit = requestActivity.getVisit();
        String visitLocation = visit.getLocation();
        String visitServiceCategory = visit.getServiceCategory();
        String visitDateTime = visit.getDateTime();
        System.out.println("visitLocation: " + visitLocation);
        System.out.println("visitServiceCategory: " + visitServiceCategory);
        System.out.println("visitDateTime:" + visitDateTime);

        String authorId = "urn:va:user:"+requestActivity.getData().getActivity().getAssignedTo().replaceAll(";",":");

        String newNoteObject = "{" +
        "\"patientUid\": " + "\"" + requestActivity.getPatientUid() + "\"," +
        "\"authorUid\": " + "\"" + authorId + "\"," +
        "\"domain\": \"ehmp-note\"," +
        "\"subDomain\": \"noteObject\"," +
        "\"visit\" : " +
        "{" +
        "\"location\": " + "\"" + visitLocation + "\"," +
        "\"serviceCategory\": " + "\"" + visitServiceCategory + "\"," +
        "\"dateTime\": " + "\"" + visitDateTime + "\"" +
        "}," +
        "\"ehmpState\" : \"active\"," +
        "\"data\": " +
        "{" +
        "\"sourceUid\" : " + "\"" + clinicalObjectUid + "\"" +
        "}" +
        "}";
        kcontext.setVariable("noteObject",newNoteObject);
        System.out.println("noteObject: " + newNoteObject);
        System.out.println("NOTE OBJECT PREP COMPLETED ****");


        } catch (Exception e) {
                System.out.println("RequestActivity: Reassign note object - An unexpected condition has happened: " + e.getMessage());
        }]]></bpmn2:script>
      </bpmn2:scriptTask>
      <bpmn2:scriptTask id="_EACA314E-12ED-4C05-8828-4981602E4069" drools:selectable="true" name="Prepare noteObject" scriptFormat="http://www.java.com/java">
        <bpmn2:documentation id="_Iv6zjHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
        <bpmn2:incoming>_713F75C4-C58B-4054-8763-6B7B351996C6</bpmn2:incoming>
        <bpmn2:outgoing>_88927176-9C31-4ADD-9473-E93602412FCE</bpmn2:outgoing>
        <bpmn2:script><![CDATA[try{
        System.out.println("ENTERING Request note object ***");
        if (requestActivity == null) {
        System.out.println("requestActivity parameter is NULL");
        } else if (requestActivity.getVisit() == null) {
        System.out.println("requestActivity.getVisit is NULL");
        } else {
        System.out.println("requestActivity.getVisit().getLocation()" + requestActivity.getVisit().getLocation());
        System.out.println("requestActivity.getVisit().getServiceCategory()" + requestActivity.getVisit().getServiceCategory());
        System.out.println("requestActivity.getVisit().getDateTime()" + requestActivity.getVisit().getDateTime());
        }

        vistacore.order.Visit visit = new vistacore.order.Visit();
        visit = requestActivity.getVisit();
        String visitLocation = visit.getLocation();
        String visitServiceCategory = visit.getServiceCategory();
        String visitDateTime = visit.getDateTime();
        System.out.println("visitLocation: " + visitLocation);
        System.out.println("visitServiceCategory: " + visitServiceCategory);
        System.out.println("visitDateTime:" + visitDateTime);

        String authorId = "urn:va:user:"+requestActivity.getData().getActivity().getAssignedTo().replaceAll(";",":");

        String newNoteObject = "{" +
        "\"patientUid\": " + "\"" + requestActivity.getPatientUid() + "\"," +
        "\"authorUid\": " + "\"" + authorId + "\"," +
        "\"domain\": \"ehmp-note\"," +
        "\"subDomain\": \"noteObject\"," +
        "\"visit\" : " +
        "{" +
        "\"location\": " + "\"" + visitLocation + "\"," +
        "\"serviceCategory\": " + "\"" + visitServiceCategory + "\"," +
        "\"dateTime\": " + "\"" + visitDateTime + "\"" +
        "}," +
        "\"ehmpState\" : \"active\"," +
        "\"data\": " +
        "{" +
        "\"sourceUid\" : " + "\"" + clinicalObjectUid + "\"" +
        "}" +
        "}";
        kcontext.setVariable("noteObject",newNoteObject);
        System.out.println("noteObject: " + newNoteObject);
        System.out.println("NOTE OBJECT PREP COMPLETED ****");

        } catch (Exception e) {
                System.out.println("RequestActivity: Request note object - An unexpected condition has happened: " + e.getMessage());
        }]]></bpmn2:script>
      </bpmn2:scriptTask>
      <bpmn2:task id="_11C6DED1-C188-4AC9-97E7-05AC3BB7173D" drools:bgcolor="#00CCFF" drools:selectable="true" drools:taskName="ClinicalObjectWriteService" name="Save noteObject to pJDS">
        <bpmn2:extensionElements>
          <drools:onExit-script scriptFormat="http://www.java.com/java">
            <drools:script><![CDATA[if (serviceResponse.indexOf("error") >= 0) {\n  System.out.println("**** Process Failed to save note object to pJDS **** " + serviceResponse);\n} else {\n  System.out.println("**** Note Object Saved to pJDS : **** " + serviceResponse);\n}]]></drools:script>
          </drools:onExit-script>
        </bpmn2:extensionElements>
        <bpmn2:incoming>_6154274A-791B-4314-8714-784AC772FC82</bpmn2:incoming>
        <bpmn2:outgoing>_5477C5AE-2C97-48C1-92D3-CF785584369A</bpmn2:outgoing>
        <bpmn2:ioSpecification id="_Iv6zjXkKEeaVRfG2jKN_-A">
          <bpmn2:dataInput id="_11C6DED1-C188-4AC9-97E7-05AC3BB7173D_TaskNameInputX" name="TaskName"/>
          <bpmn2:dataInput id="_11C6DED1-C188-4AC9-97E7-05AC3BB7173D_pidInputX" drools:dtype="Object" name="pid"/>
          <bpmn2:dataInput id="_11C6DED1-C188-4AC9-97E7-05AC3BB7173D_uidInputX" drools:dtype="Object" name="uid"/>
          <bpmn2:dataInput id="_11C6DED1-C188-4AC9-97E7-05AC3BB7173D_clinicalObjectInputX" drools:dtype="Object" name="clinicalObject"/>
          <bpmn2:dataOutput id="_11C6DED1-C188-4AC9-97E7-05AC3BB7173D_ServiceResponseOutputX" drools:dtype="Object" name="ServiceResponse"/>
          <bpmn2:inputSet id="_Iv6zjnkKEeaVRfG2jKN_-A">
            <bpmn2:dataInputRefs>_11C6DED1-C188-4AC9-97E7-05AC3BB7173D_pidInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_11C6DED1-C188-4AC9-97E7-05AC3BB7173D_uidInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_11C6DED1-C188-4AC9-97E7-05AC3BB7173D_clinicalObjectInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_11C6DED1-C188-4AC9-97E7-05AC3BB7173D_TaskNameInputX</bpmn2:dataInputRefs>
          </bpmn2:inputSet>
          <bpmn2:outputSet id="_Iv6zj3kKEeaVRfG2jKN_-A">
            <bpmn2:dataOutputRefs>_11C6DED1-C188-4AC9-97E7-05AC3BB7173D_ServiceResponseOutputX</bpmn2:dataOutputRefs>
          </bpmn2:outputSet>
        </bpmn2:ioSpecification>
        <bpmn2:dataInputAssociation id="_Iv6zkHkKEeaVRfG2jKN_-A">
          <bpmn2:targetRef>_11C6DED1-C188-4AC9-97E7-05AC3BB7173D_TaskNameInputX</bpmn2:targetRef>
          <bpmn2:assignment id="_Iv6zkXkKEeaVRfG2jKN_-A">
            <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6zknkKEeaVRfG2jKN_-A">ClinicalObjectWriteService</bpmn2:from>
            <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6zk3kKEeaVRfG2jKN_-A">_11C6DED1-C188-4AC9-97E7-05AC3BB7173D_TaskNameInputX</bpmn2:to>
          </bpmn2:assignment>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zlHkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>noteObject</bpmn2:sourceRef>
          <bpmn2:targetRef>_11C6DED1-C188-4AC9-97E7-05AC3BB7173D_clinicalObjectInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zlXkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>icn</bpmn2:sourceRef>
          <bpmn2:targetRef>_11C6DED1-C188-4AC9-97E7-05AC3BB7173D_pidInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataOutputAssociation id="_Iv6zlnkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>_11C6DED1-C188-4AC9-97E7-05AC3BB7173D_ServiceResponseOutputX</bpmn2:sourceRef>
          <bpmn2:targetRef>serviceResponse</bpmn2:targetRef>
        </bpmn2:dataOutputAssociation>
      </bpmn2:task>
      <bpmn2:exclusiveGateway id="_623EF2A8-0D57-442A-AAAD-2502765A212C" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="NoteObjectExists : _A84E51F0-B136-4180-893A-30DFA15ABD0E" name="" gatewayDirection="Diverging" default="_A84E51F0-B136-4180-893A-30DFA15ABD0E">
        <bpmn2:documentation id="_Iv6zl3kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
        <bpmn2:incoming>_A4AD2111-E51A-4CDD-B9FB-A81B0E534D8F</bpmn2:incoming>
        <bpmn2:outgoing>_713F75C4-C58B-4054-8763-6B7B351996C6</bpmn2:outgoing>
        <bpmn2:outgoing>_A84E51F0-B136-4180-893A-30DFA15ABD0E</bpmn2:outgoing>
      </bpmn2:exclusiveGateway>
      <bpmn2:exclusiveGateway id="_6260BC6E-6F64-499D-B852-FC620D5EF326" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="" name="" gatewayDirection="Converging">
        <bpmn2:documentation id="_Iv6zmHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
        <bpmn2:incoming>_1427182D-64B0-441A-AE8B-6BC412CDAEA9</bpmn2:incoming>
        <bpmn2:incoming>_A84E51F0-B136-4180-893A-30DFA15ABD0E</bpmn2:incoming>
        <bpmn2:incoming>_5477C5AE-2C97-48C1-92D3-CF785584369A</bpmn2:incoming>
        <bpmn2:outgoing>_7528D24C-26C8-4AB7-9427-1701BF737AFE</bpmn2:outgoing>
      </bpmn2:exclusiveGateway>
      <bpmn2:exclusiveGateway id="_54980DB7-6925-455D-81B0-83222CEA297F" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="" name="" gatewayDirection="Diverging">
        <bpmn2:documentation id="_Iv6zmXkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
        <bpmn2:incoming>_D7354536-2400-4ED2-8B04-D99996993FA3</bpmn2:incoming>
        <bpmn2:outgoing>_04750F7B-71BD-456E-8765-0D4289DF19E9</bpmn2:outgoing>
        <bpmn2:outgoing>_1427182D-64B0-441A-AE8B-6BC412CDAEA9</bpmn2:outgoing>
      </bpmn2:exclusiveGateway>
      <bpmn2:exclusiveGateway id="_908878DF-FC05-4E02-9494-191EC98F9DDE" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="" name="" gatewayDirection="Converging">
        <bpmn2:documentation id="_Iv6zmnkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
        <bpmn2:incoming>_9AFB7EAD-2271-4990-A183-9514B486A91F</bpmn2:incoming>
        <bpmn2:incoming>_88927176-9C31-4ADD-9473-E93602412FCE</bpmn2:incoming>
        <bpmn2:outgoing>_6154274A-791B-4314-8714-784AC772FC82</bpmn2:outgoing>
      </bpmn2:exclusiveGateway>
      <bpmn2:task id="_BF8D2825-9301-4084-AA9E-A0197F1EA12A" drools:bgcolor="#33CCCC" drools:selectable="true" drools:taskName="SignalWriteService" name="SignalWriteService">
        <bpmn2:incoming>_ABC2D458-AC91-4FF6-B876-B2E521A1007D</bpmn2:incoming>
        <bpmn2:outgoing>_2AE93272-FD82-4752-90F6-D7CDA187E0E8</bpmn2:outgoing>
        <bpmn2:ioSpecification id="_Iv6zm3kKEeaVRfG2jKN_-A">
          <bpmn2:dataInput id="_BF8D2825-9301-4084-AA9E-A0197F1EA12A_TaskNameInputX" name="TaskName"/>
          <bpmn2:dataInput id="_BF8D2825-9301-4084-AA9E-A0197F1EA12A_historyInputX" drools:dtype="Object" name="history"/>
          <bpmn2:dataInput id="_BF8D2825-9301-4084-AA9E-A0197F1EA12A_ownerInputX" drools:dtype="Object" name="owner"/>
          <bpmn2:dataInput id="_BF8D2825-9301-4084-AA9E-A0197F1EA12A_actionInputX" drools:dtype="Object" name="action"/>
          <bpmn2:dataInput id="_BF8D2825-9301-4084-AA9E-A0197F1EA12A_nameInputX" drools:dtype="Object" name="name"/>
          <bpmn2:dataOutput id="_BF8D2825-9301-4084-AA9E-A0197F1EA12A_ServiceResponseOutputX" drools:dtype="Object" name="ServiceResponse"/>
          <bpmn2:inputSet id="_Iv6znHkKEeaVRfG2jKN_-A">
            <bpmn2:dataInputRefs>_BF8D2825-9301-4084-AA9E-A0197F1EA12A_historyInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_BF8D2825-9301-4084-AA9E-A0197F1EA12A_ownerInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_BF8D2825-9301-4084-AA9E-A0197F1EA12A_actionInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_BF8D2825-9301-4084-AA9E-A0197F1EA12A_nameInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_BF8D2825-9301-4084-AA9E-A0197F1EA12A_TaskNameInputX</bpmn2:dataInputRefs>
          </bpmn2:inputSet>
          <bpmn2:outputSet id="_Iv6znXkKEeaVRfG2jKN_-A">
            <bpmn2:dataOutputRefs>_BF8D2825-9301-4084-AA9E-A0197F1EA12A_ServiceResponseOutputX</bpmn2:dataOutputRefs>
          </bpmn2:outputSet>
        </bpmn2:ioSpecification>
        <bpmn2:dataInputAssociation id="_Iv6znnkKEeaVRfG2jKN_-A">
          <bpmn2:targetRef>_BF8D2825-9301-4084-AA9E-A0197F1EA12A_TaskNameInputX</bpmn2:targetRef>
          <bpmn2:assignment id="_Iv6zn3kKEeaVRfG2jKN_-A">
            <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6zoHkKEeaVRfG2jKN_-A">SignalWriteService</bpmn2:from>
            <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6zoXkKEeaVRfG2jKN_-A">_BF8D2825-9301-4084-AA9E-A0197F1EA12A_TaskNameInputX</bpmn2:to>
          </bpmn2:assignment>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zonkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>signalName</bpmn2:sourceRef>
          <bpmn2:targetRef>_BF8D2825-9301-4084-AA9E-A0197F1EA12A_nameInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zo3kKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>signalHistory</bpmn2:sourceRef>
          <bpmn2:targetRef>_BF8D2825-9301-4084-AA9E-A0197F1EA12A_historyInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zpHkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>signalAction</bpmn2:sourceRef>
          <bpmn2:targetRef>_BF8D2825-9301-4084-AA9E-A0197F1EA12A_actionInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zpXkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>signalOwner</bpmn2:sourceRef>
          <bpmn2:targetRef>_BF8D2825-9301-4084-AA9E-A0197F1EA12A_ownerInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
      </bpmn2:task>
      <bpmn2:task id="_56367C3E-ED84-47BD-A195-2B4A559B57C9" drools:bgcolor="#33CCCC" drools:selectable="true" drools:taskName="NotificationsWriteService" name="Notifications Resolve">
        <bpmn2:extensionElements>
          <drools:onEntry-script scriptFormat="http://www.java.com/java">
            <drools:script><![CDATA[System.out.println("Resolve Notification Preparation: entering");\nString recipient = requestActivity.getData().getActivity().getAssignedTo();\nSystem.out.println("recipient " + recipient);\n\nnotificationText = "{\"userId\": \"" + recipient + "\"}";\nkcontext.setVariable("notificationText", notificationText);]]></drools:script>
          </drools:onEntry-script>
          <drools:onExit-script scriptFormat="http://www.java.com/java">
            <drools:script><![CDATA[System.out.println("**** Notif Resolve serviceResponse: **** " + serviceResponse);\n\nkcontext.setVariable("notificationId", null);]]></drools:script>
          </drools:onExit-script>
        </bpmn2:extensionElements>
        <bpmn2:incoming>_B9BDE9A7-3087-4DCE-9FB6-56E2FA9717EF</bpmn2:incoming>
        <bpmn2:outgoing>_CFCF2711-022B-4B8A-B7C9-7102486757EB</bpmn2:outgoing>
        <bpmn2:ioSpecification id="_Iv6zpnkKEeaVRfG2jKN_-A">
          <bpmn2:dataInput id="_56367C3E-ED84-47BD-A195-2B4A559B57C9_TaskNameInputX" name="TaskName"/>
          <bpmn2:dataInput id="_56367C3E-ED84-47BD-A195-2B4A559B57C9_notificationInputX" drools:dtype="Object" name="notification"/>
          <bpmn2:dataInput id="_56367C3E-ED84-47BD-A195-2B4A559B57C9_notificationIdInputX" drools:dtype="Object" name="notificationId"/>
          <bpmn2:dataOutput id="_56367C3E-ED84-47BD-A195-2B4A559B57C9_ServiceResponseOutputX" drools:dtype="Object" name="ServiceResponse"/>
          <bpmn2:inputSet id="_Iv6zp3kKEeaVRfG2jKN_-A">
            <bpmn2:dataInputRefs>_56367C3E-ED84-47BD-A195-2B4A559B57C9_notificationInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_56367C3E-ED84-47BD-A195-2B4A559B57C9_notificationIdInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_56367C3E-ED84-47BD-A195-2B4A559B57C9_TaskNameInputX</bpmn2:dataInputRefs>
          </bpmn2:inputSet>
          <bpmn2:outputSet id="_Iv6zqHkKEeaVRfG2jKN_-A">
            <bpmn2:dataOutputRefs>_56367C3E-ED84-47BD-A195-2B4A559B57C9_ServiceResponseOutputX</bpmn2:dataOutputRefs>
          </bpmn2:outputSet>
        </bpmn2:ioSpecification>
        <bpmn2:dataInputAssociation id="_Iv6zqXkKEeaVRfG2jKN_-A">
          <bpmn2:targetRef>_56367C3E-ED84-47BD-A195-2B4A559B57C9_TaskNameInputX</bpmn2:targetRef>
          <bpmn2:assignment id="_Iv6zqnkKEeaVRfG2jKN_-A">
            <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6zq3kKEeaVRfG2jKN_-A">NotificationsWriteService</bpmn2:from>
            <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6zrHkKEeaVRfG2jKN_-A">_56367C3E-ED84-47BD-A195-2B4A559B57C9_TaskNameInputX</bpmn2:to>
          </bpmn2:assignment>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zrXkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>notificationText</bpmn2:sourceRef>
          <bpmn2:targetRef>_56367C3E-ED84-47BD-A195-2B4A559B57C9_notificationInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_Iv6zrnkKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>notificationId</bpmn2:sourceRef>
          <bpmn2:targetRef>_56367C3E-ED84-47BD-A195-2B4A559B57C9_notificationIdInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataOutputAssociation id="_Iv6zr3kKEeaVRfG2jKN_-A">
          <bpmn2:sourceRef>_56367C3E-ED84-47BD-A195-2B4A559B57C9_ServiceResponseOutputX</bpmn2:sourceRef>
          <bpmn2:targetRef>serviceResponse</bpmn2:targetRef>
        </bpmn2:dataOutputAssociation>
      </bpmn2:task>
      <bpmn2:exclusiveGateway id="_A310FE22-1D89-4675-910A-410AF8ECE207" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="" name="" gatewayDirection="Diverging">
        <bpmn2:incoming>_E374E4D2-51F5-446B-B594-7038953FC36C</bpmn2:incoming>
        <bpmn2:outgoing>_B9BDE9A7-3087-4DCE-9FB6-56E2FA9717EF</bpmn2:outgoing>
        <bpmn2:outgoing>_E7253F3C-7DC8-4AAB-807B-E854632895D7</bpmn2:outgoing>
      </bpmn2:exclusiveGateway>
      <bpmn2:exclusiveGateway id="_08C4DE72-020D-4F3E-9975-4FACB5D872E4" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="" name="" gatewayDirection="Converging">
        <bpmn2:incoming>_CFCF2711-022B-4B8A-B7C9-7102486757EB</bpmn2:incoming>
        <bpmn2:incoming>_E7253F3C-7DC8-4AAB-807B-E854632895D7</bpmn2:incoming>
        <bpmn2:outgoing>_4EEB0446-BA94-4636-B61E-FC2D87354C5F</bpmn2:outgoing>
      </bpmn2:exclusiveGateway>
      <bpmn2:exclusiveGateway id="_2755C8C7-424B-4573-A376-5BC51A2B4357" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="" name="" gatewayDirection="Converging">
        <bpmn2:incoming>_48F0E2D1-98BA-43D0-94C5-E5A40F7E19D5</bpmn2:incoming>
        <bpmn2:incoming>_20497049-20E2-4DE1-A006-FAA6C22CCE54</bpmn2:incoming>
        <bpmn2:outgoing>_E374E4D2-51F5-446B-B594-7038953FC36C</bpmn2:outgoing>
      </bpmn2:exclusiveGateway>
      <bpmn2:sequenceFlow id="_D644C573-FFEB-4069-A30D-5506AFAD6381" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_38A4905D-71D6-48AA-9A37-CDD17705C5DB" targetRef="_B2B75267-76E4-4D1C-B0C0-9C9AE963D142">
        <bpmn2:documentation id="_Iv6zsHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_AEEB82AE-2505-4D8C-9203-5F8D66E3267B" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_FB4F000D-914E-413A-A840-BC1968E1A814" targetRef="_7C996D18-3533-4C4B-9EAC-381B4CDC8AFC">
        <bpmn2:documentation id="_Iv6zsXkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_ABC2D458-AC91-4FF6-B876-B2E521A1007D" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_7C996D18-3533-4C4B-9EAC-381B4CDC8AFC" targetRef="_BF8D2825-9301-4084-AA9E-A0197F1EA12A">
        <bpmn2:documentation id="_Iv6zsnkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_3CCE1581-ADFE-40F4-9F99-0F84E8140EFC" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_2B26DAFB-F71E-41EF-B882-C73668423ECB" targetRef="_B83BF56B-0A9D-4632-8238-0A7607EF8AD8">
        <bpmn2:documentation id="_Iv6zs3kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_FA410E1F-25BF-41BB-8C15-98C2A99FEABD" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_008660B2-FE52-42DF-A4BF-74A6618E97C6" targetRef="_2B26DAFB-F71E-41EF-B882-C73668423ECB">
        <bpmn2:documentation id="_Iv6ztHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_8F53FE59-5B88-41AD-85E2-E1FA6C2C882A" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_A715EE06-3F76-4634-81F4-37BFB078586B" targetRef="_008660B2-FE52-42DF-A4BF-74A6618E97C6">
        <bpmn2:documentation id="_Iv6ztXkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_EB47D8F2-82CA-4E01-9419-4D4175B87785" drools:bgcolor="#000000" drools:selectable="true" name="Reassign" sourceRef="_2CAEDC25-5907-4A6D-AD66-40C19AB7E985" targetRef="_F3179ED8-614D-4187-AE50-833FA93A054D">
        <bpmn2:documentation id="_Iv6ztnkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
        <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6zt3kKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[return  KieFunctions.equalsTo(action, "reassign");]]></bpmn2:conditionExpression>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_7C7B8B1F-15D5-4CBD-B423-BAC9CB153021" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_2CAEDC25-5907-4A6D-AD66-40C19AB7E985" targetRef="_D7862388-DB01-4015-B17B-965B2C13486F">
        <bpmn2:documentation id="_Iv6zuHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
        <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6zuXkKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[return true;]]></bpmn2:conditionExpression>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_A1D870CC-33F2-484E-87FF-3DEA5EE392A0" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_F3179ED8-614D-4187-AE50-833FA93A054D" targetRef="_18E7B07C-A07A-4B9F-A58C-E0F45A4CB2EA">
        <bpmn2:documentation id="_Iv6zunkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_853D63FA-4E31-4576-8F76-A1CBF55AF624" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_18E7B07C-A07A-4B9F-A58C-E0F45A4CB2EA" targetRef="_613748AB-8896-4E4B-8C36-F202EDFC8F7A">
        <bpmn2:documentation id="_Iv6zu3kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_713F75C4-C58B-4054-8763-6B7B351996C6" drools:bgcolor="#000000" drools:selectable="true" name="no NoteObject " sourceRef="_623EF2A8-0D57-442A-AAAD-2502765A212C" targetRef="_EACA314E-12ED-4C05-8828-4981602E4069">
        <bpmn2:documentation id="_Iv6zvHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
        <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6zvXkKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[System.out.println("ENTERING Request noteObject Evaluation ***");

java.util.List<vistacore.order.request.Request> reqs = requestActivity.getData().getRequests();
vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);

String noteId = ""; // Me
if( "Person".equals(latestRequest.getAssignTo())) {
 noteId = latestRequest.getRoute().getPerson(); 
} else if ( !("Me".equals(latestRequest.getAssignTo())) ) {
  noteId = latestRequest.getRoute().getRoutingCode(); 
}

System.out.println("Current noteId = "+noteId);
System.out.println("Current noteObjects = "+hasNoteObject);

if( ! noteId.isEmpty() && hasNoteObject.indexOf(noteId) == -1) {
  kcontext.setVariable("hasNoteObject", hasNoteObject + noteId);
  return true;
} else {
  return false;
}
]]></bpmn2:conditionExpression>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_A84E51F0-B136-4180-893A-30DFA15ABD0E" drools:bgcolor="#000000" drools:selectable="true" name="NoteObjectExists" sourceRef="_623EF2A8-0D57-442A-AAAD-2502765A212C" targetRef="_6260BC6E-6F64-499D-B852-FC620D5EF326">
        <bpmn2:documentation id="_Iv6zvnkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
        <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6zv3kKEeaVRfG2jKN_-A"></bpmn2:conditionExpression>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_5477C5AE-2C97-48C1-92D3-CF785584369A" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_11C6DED1-C188-4AC9-97E7-05AC3BB7173D" targetRef="_6260BC6E-6F64-499D-B852-FC620D5EF326">
        <bpmn2:documentation id="_Iv6zwHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_7528D24C-26C8-4AB7-9427-1701BF737AFE" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_6260BC6E-6F64-499D-B852-FC620D5EF326" targetRef="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516">
        <bpmn2:documentation id="_Iv6zwXkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_A4AD2111-E51A-4CDD-B9FB-A81B0E534D8F" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_B2B75267-76E4-4D1C-B0C0-9C9AE963D142" targetRef="_623EF2A8-0D57-442A-AAAD-2502765A212C">
        <bpmn2:documentation id="_Iv6zwnkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_D7354536-2400-4ED2-8B04-D99996993FA3" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_613748AB-8896-4E4B-8C36-F202EDFC8F7A" targetRef="_54980DB7-6925-455D-81B0-83222CEA297F">
        <bpmn2:documentation id="_Iv6zw3kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_04750F7B-71BD-456E-8765-0D4289DF19E9" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_54980DB7-6925-455D-81B0-83222CEA297F" targetRef="_ECF3D56B-3886-4DCB-B80D-CDADF00DFDC4">
        <bpmn2:documentation id="_Iv6zxHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
        <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6zxXkKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[System.out.println("ENTERING Reassign noteObject Evaluation ***");

java.util.List<vistacore.order.request.Request> reqs = requestActivity.getData().getRequests();
vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);

String noteId = requestActivity.getData().getActivity().getAssignedTo();

System.out.println("Current noteId = "+noteId);
System.out.println("Current noteObjects = "+hasNoteObject);

if( ! noteId.isEmpty() && hasNoteObject.indexOf(noteId) == -1) {
  hasNoteObject += noteId;
  return true;
} else {
  return false;
}]]></bpmn2:conditionExpression>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_9AFB7EAD-2271-4990-A183-9514B486A91F" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_ECF3D56B-3886-4DCB-B80D-CDADF00DFDC4" targetRef="_908878DF-FC05-4E02-9494-191EC98F9DDE">
        <bpmn2:documentation id="_Iv6zxnkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_6154274A-791B-4314-8714-784AC772FC82" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_908878DF-FC05-4E02-9494-191EC98F9DDE" targetRef="_11C6DED1-C188-4AC9-97E7-05AC3BB7173D">
        <bpmn2:documentation id="_Iv6zx3kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_88927176-9C31-4ADD-9473-E93602412FCE" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_EACA314E-12ED-4C05-8828-4981602E4069" targetRef="_908878DF-FC05-4E02-9494-191EC98F9DDE">
        <bpmn2:documentation id="_Iv6zyHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_1427182D-64B0-441A-AE8B-6BC412CDAEA9" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_54980DB7-6925-455D-81B0-83222CEA297F" targetRef="_6260BC6E-6F64-499D-B852-FC620D5EF326">
        <bpmn2:documentation id="_Iv6zyXkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
        <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6zynkKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[return true;]]></bpmn2:conditionExpression>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_57B7E111-50C8-4DEA-AD22-359EB962FAEC" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_B2B75267-76E4-4D1C-B0C0-9C9AE963D142" targetRef="_FB4F000D-914E-413A-A840-BC1968E1A814">
        <bpmn2:documentation id="_Iv6zy3kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_2AE93272-FD82-4752-90F6-D7CDA187E0E8" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_BF8D2825-9301-4084-AA9E-A0197F1EA12A" targetRef="_6EBBF042-7FEB-4344-B5A1-8C77F6C04060">
        <bpmn2:documentation id="_Iv6zzHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_B9BDE9A7-3087-4DCE-9FB6-56E2FA9717EF" drools:bgcolor="#000000" drools:selectable="true" name="cleanup Notif" sourceRef="_A310FE22-1D89-4675-910A-410AF8ECE207" targetRef="_56367C3E-ED84-47BD-A195-2B4A559B57C9">
        <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6zzXkKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[return  !KieFunctions.isNull(notificationId);]]></bpmn2:conditionExpression>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_E7253F3C-7DC8-4AAB-807B-E854632895D7" drools:bgcolor="#000000" drools:selectable="true" name="No Notif" sourceRef="_A310FE22-1D89-4675-910A-410AF8ECE207" targetRef="_08C4DE72-020D-4F3E-9975-4FACB5D872E4">
        <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6zznkKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[return  KieFunctions.isNull(notificationId);]]></bpmn2:conditionExpression>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_4EEB0446-BA94-4636-B61E-FC2D87354C5F" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_08C4DE72-020D-4F3E-9975-4FACB5D872E4" targetRef="_2CAEDC25-5907-4A6D-AD66-40C19AB7E985"/>
      <bpmn2:sequenceFlow id="_CFCF2711-022B-4B8A-B7C9-7102486757EB" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_56367C3E-ED84-47BD-A195-2B4A559B57C9" targetRef="_08C4DE72-020D-4F3E-9975-4FACB5D872E4"/>
      <bpmn2:sequenceFlow id="_48F0E2D1-98BA-43D0-94C5-E5A40F7E19D5" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_6EBBF042-7FEB-4344-B5A1-8C77F6C04060" targetRef="_2755C8C7-424B-4573-A376-5BC51A2B4357"/>
      <bpmn2:sequenceFlow id="_20497049-20E2-4DE1-A006-FAA6C22CCE54" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516" targetRef="_2755C8C7-424B-4573-A376-5BC51A2B4357"/>
      <bpmn2:sequenceFlow id="_E374E4D2-51F5-446B-B594-7038953FC36C" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_2755C8C7-424B-4573-A376-5BC51A2B4357" targetRef="_A310FE22-1D89-4675-910A-410AF8ECE207"/>
      <bpmn2:boundaryEvent id="_A715EE06-3F76-4634-81F4-37BFB078586B" drools:bgcolor="#f5deb3" drools:selectable="true" drools:bordercolor="#a0522d" drools:boundaryca="false" name="" attachedToRef="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516" cancelActivity="false">
        <bpmn2:outgoing>_8F53FE59-5B88-41AD-85E2-E1FA6C2C882A</bpmn2:outgoing>
        <bpmn2:timerEventDefinition id="_Iv6zz3kKEeaVRfG2jKN_-A">
          <bpmn2:timeDuration xsi:type="bpmn2:tFormalExpression" id="_Iv6z0HkKEeaVRfG2jKN_-A">#{responseNotificationDays}</bpmn2:timeDuration>
        </bpmn2:timerEventDefinition>
      </bpmn2:boundaryEvent>
    </bpmn2:subProcess>
    <bpmn2:sequenceFlow id="_939B5B3F-BF86-4C82-AEAF-801D21BC6A3A" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_4CFA74AE-5479-4928-9FFB-39304C01FE4E" targetRef="_29C00353-1475-46AD-92BB-D886773AB7B5">
      <bpmn2:documentation id="_Iv6z0XkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_26EFF922-A1F0-4FF6-A6FE-688B1DBFFF5E" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_29C00353-1475-46AD-92BB-D886773AB7B5" targetRef="_C097FA35-93EF-4F89-8C06-BF2424A75BC5">
      <bpmn2:documentation id="_Iv6z0nkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
    </bpmn2:sequenceFlow>
    <bpmn2:exclusiveGateway id="_CF506C03-B0EE-4469-B414-D1E989B2E3A2" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="" name="" gatewayDirection="Diverging">
      <bpmn2:documentation id="_Iv6z03kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:incoming>_C1DA356C-FF0D-4B50-9973-CA45DD6D9822</bpmn2:incoming>
      <bpmn2:outgoing>_966F17AB-5C81-4ADB-8E7C-0E529AC3CADE</bpmn2:outgoing>
      <bpmn2:outgoing>_CB8A8197-C845-44C2-95ED-C840E58964C9</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="_C1DA356C-FF0D-4B50-9973-CA45DD6D9822" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_C097FA35-93EF-4F89-8C06-BF2424A75BC5" targetRef="_CF506C03-B0EE-4469-B414-D1E989B2E3A2">
      <bpmn2:documentation id="_Iv6z1HkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6z1XkKEeaVRfG2jKN_-A"></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_966F17AB-5C81-4ADB-8E7C-0E529AC3CADE" drools:bgcolor="#000000" drools:selectable="true" name="EDIT" sourceRef="_CF506C03-B0EE-4469-B414-D1E989B2E3A2" targetRef="_AEA88340-8A1B-41FF-9C55-CC1709440572">
      <bpmn2:documentation id="_Iv6z1nkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6z13kKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[return  KieFunctions.equalsTo(action, "EDIT");]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:task id="_6527D4F7-2BD5-4A51-A841-3409346E5DAF" drools:bgcolor="#33CCCC" drools:selectable="true" drools:taskName="SignalWriteService" name="Write Signal History">
      <bpmn2:incoming>_069FC319-90DF-4674-A772-C213161FBA0E</bpmn2:incoming>
      <bpmn2:outgoing>_FB58D9A3-5294-4BAE-BF5B-09B9E8EF8EA2</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_Iv6z2HkKEeaVRfG2jKN_-A">
        <bpmn2:dataInput id="_6527D4F7-2BD5-4A51-A841-3409346E5DAF_TaskNameInputX" name="TaskName"/>
        <bpmn2:dataInput id="_6527D4F7-2BD5-4A51-A841-3409346E5DAF_historyInputX" drools:dtype="String" itemSubjectRef="__6527D4F7-2BD5-4A51-A841-3409346E5DAF_historyInputXItem" name="history"/>
        <bpmn2:dataInput id="_6527D4F7-2BD5-4A51-A841-3409346E5DAF_actionInputX" drools:dtype="String" itemSubjectRef="__6527D4F7-2BD5-4A51-A841-3409346E5DAF_actionInputXItem" name="action"/>
        <bpmn2:dataInput id="_6527D4F7-2BD5-4A51-A841-3409346E5DAF_nameInputX" drools:dtype="String" itemSubjectRef="__6527D4F7-2BD5-4A51-A841-3409346E5DAF_nameInputXItem" name="name"/>
        <bpmn2:dataInput id="_6527D4F7-2BD5-4A51-A841-3409346E5DAF_ownerInputX" drools:dtype="String" itemSubjectRef="__6527D4F7-2BD5-4A51-A841-3409346E5DAF_ownerInputXItem" name="owner"/>
        <bpmn2:dataOutput id="_6527D4F7-2BD5-4A51-A841-3409346E5DAF_ServiceResponseOutputX" drools:dtype="String" itemSubjectRef="__6527D4F7-2BD5-4A51-A841-3409346E5DAF_ServiceResponseOutputXItem" name="ServiceResponse"/>
        <bpmn2:inputSet id="_Iv6z2XkKEeaVRfG2jKN_-A">
          <bpmn2:dataInputRefs>_6527D4F7-2BD5-4A51-A841-3409346E5DAF_historyInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_6527D4F7-2BD5-4A51-A841-3409346E5DAF_actionInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_6527D4F7-2BD5-4A51-A841-3409346E5DAF_nameInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_6527D4F7-2BD5-4A51-A841-3409346E5DAF_ownerInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_6527D4F7-2BD5-4A51-A841-3409346E5DAF_TaskNameInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_Iv6z2nkKEeaVRfG2jKN_-A">
          <bpmn2:dataOutputRefs>_6527D4F7-2BD5-4A51-A841-3409346E5DAF_ServiceResponseOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_Iv6z23kKEeaVRfG2jKN_-A">
        <bpmn2:targetRef>_6527D4F7-2BD5-4A51-A841-3409346E5DAF_TaskNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Iv6z3HkKEeaVRfG2jKN_-A">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6z3XkKEeaVRfG2jKN_-A">SignalWriteService</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6z3nkKEeaVRfG2jKN_-A">_6527D4F7-2BD5-4A51-A841-3409346E5DAF_TaskNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6z33kKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>signalName</bpmn2:sourceRef>
        <bpmn2:targetRef>_6527D4F7-2BD5-4A51-A841-3409346E5DAF_nameInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6z4HkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>signalOwner</bpmn2:sourceRef>
        <bpmn2:targetRef>_6527D4F7-2BD5-4A51-A841-3409346E5DAF_ownerInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6z4XkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>signalAction</bpmn2:sourceRef>
        <bpmn2:targetRef>_6527D4F7-2BD5-4A51-A841-3409346E5DAF_actionInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6z4nkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>signalHistory</bpmn2:sourceRef>
        <bpmn2:targetRef>_6527D4F7-2BD5-4A51-A841-3409346E5DAF_historyInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
    </bpmn2:task>
    <bpmn2:sequenceFlow id="_069FC319-90DF-4674-A772-C213161FBA0E" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_AA4974E6-C802-4DE7-9AB6-FE9FCAD5CA23" targetRef="_6527D4F7-2BD5-4A51-A841-3409346E5DAF">
      <bpmn2:documentation id="_Iv6z43kKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_CB8A8197-C845-44C2-95ED-C840E58964C9" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_CF506C03-B0EE-4469-B414-D1E989B2E3A2" targetRef="_7D5F3AA7-A887-4F48-89B3-CD3181C97841">
      <bpmn2:documentation id="_Iv6z5HkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6z5XkKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[return  !KieFunctions.equalsTo(action, "EDIT");]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_BF878365-47F2-4AF2-89F6-33130C3FD0DB" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_0CD4B622-EBA4-4B6D-AC8E-B050227762D8" targetRef="_B0EA6E58-3892-48B1-B76D-2060043328DF"/>
    <bpmn2:task id="_65C24730-187C-4786-9AF6-35FE160A7AD4" drools:bgcolor="#33CCCC" drools:selectable="true" drools:taskName="NotificationsWriteService" name="Notifications Resolve">
      <bpmn2:extensionElements>
        <drools:onEntry-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println("Resolve Notification Preparation: entering");\nString recipient = requestActivity.getData().getActivity().getAssignedTo();\nSystem.out.println("recipient " + recipient);\n\nnotificationText = "{\"userId\": \"" + recipient + "\"}";\nkcontext.setVariable("notificationText", notificationText);]]></drools:script>
        </drools:onEntry-script>
        <drools:onExit-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println("**** Notif Resolve serviceResponse: **** " + serviceResponse);\n\nkcontext.setVariable("notificationId", null);]]></drools:script>
        </drools:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_314A3924-5425-4828-BDAB-205EEBAC0402</bpmn2:incoming>
      <bpmn2:outgoing>_1E5AA0E8-BC65-4DEA-B3B8-2AE7364BAB96</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_Iv6z5nkKEeaVRfG2jKN_-A">
        <bpmn2:dataInput id="_65C24730-187C-4786-9AF6-35FE160A7AD4_TaskNameInputX" name="TaskName"/>
        <bpmn2:dataInput id="_65C24730-187C-4786-9AF6-35FE160A7AD4_notificationInputX" drools:dtype="Object" itemSubjectRef="__65C24730-187C-4786-9AF6-35FE160A7AD4_notificationInputXItem" name="notification"/>
        <bpmn2:dataInput id="_65C24730-187C-4786-9AF6-35FE160A7AD4_notificationIdInputX" drools:dtype="Object" itemSubjectRef="__65C24730-187C-4786-9AF6-35FE160A7AD4_notificationIdInputXItem" name="notificationId"/>
        <bpmn2:dataOutput id="_65C24730-187C-4786-9AF6-35FE160A7AD4_ServiceResponseOutputX" drools:dtype="Object" itemSubjectRef="__65C24730-187C-4786-9AF6-35FE160A7AD4_ServiceResponseOutputXItem" name="ServiceResponse"/>
        <bpmn2:inputSet id="_Iv6z53kKEeaVRfG2jKN_-A">
          <bpmn2:dataInputRefs>_65C24730-187C-4786-9AF6-35FE160A7AD4_notificationInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_65C24730-187C-4786-9AF6-35FE160A7AD4_notificationIdInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_65C24730-187C-4786-9AF6-35FE160A7AD4_TaskNameInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_Iv6z6HkKEeaVRfG2jKN_-A">
          <bpmn2:dataOutputRefs>_65C24730-187C-4786-9AF6-35FE160A7AD4_ServiceResponseOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_Iv6z6XkKEeaVRfG2jKN_-A">
        <bpmn2:targetRef>_65C24730-187C-4786-9AF6-35FE160A7AD4_TaskNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Iv6z6nkKEeaVRfG2jKN_-A">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6z63kKEeaVRfG2jKN_-A">NotificationsWriteService</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6z7HkKEeaVRfG2jKN_-A">_65C24730-187C-4786-9AF6-35FE160A7AD4_TaskNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6z7XkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>notificationText</bpmn2:sourceRef>
        <bpmn2:targetRef>_65C24730-187C-4786-9AF6-35FE160A7AD4_notificationInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6z7nkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>notificationId</bpmn2:sourceRef>
        <bpmn2:targetRef>_65C24730-187C-4786-9AF6-35FE160A7AD4_notificationIdInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_Iv6z73kKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>_65C24730-187C-4786-9AF6-35FE160A7AD4_ServiceResponseOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>serviceResponse</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:exclusiveGateway id="_6BC387B7-6CAF-4F28-A42C-6F479719C651" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="" name="" gatewayDirection="Diverging">
      <bpmn2:incoming>_EFC8F95A-CE33-4A98-B8B0-9ED2673CD986</bpmn2:incoming>
      <bpmn2:outgoing>_314A3924-5425-4828-BDAB-205EEBAC0402</bpmn2:outgoing>
      <bpmn2:outgoing>_E9E7737B-2F7A-4C28-A075-624400CC6F7D</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="_EFC8F95A-CE33-4A98-B8B0-9ED2673CD986" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_82665E0B-8C32-4ED7-8F7B-251AEE746F79" targetRef="_6BC387B7-6CAF-4F28-A42C-6F479719C651"/>
    <bpmn2:sequenceFlow id="_314A3924-5425-4828-BDAB-205EEBAC0402" drools:bgcolor="#000000" drools:selectable="true" name="cleanup Notif" sourceRef="_6BC387B7-6CAF-4F28-A42C-6F479719C651" targetRef="_65C24730-187C-4786-9AF6-35FE160A7AD4">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6z8HkKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[return  !KieFunctions.isNull(notificationId);]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:exclusiveGateway id="_D0F8147F-D412-43CA-B3BF-1D0552C8964E" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="" name="" gatewayDirection="Converging">
      <bpmn2:incoming>_1E5AA0E8-BC65-4DEA-B3B8-2AE7364BAB96</bpmn2:incoming>
      <bpmn2:incoming>_E9E7737B-2F7A-4C28-A075-624400CC6F7D</bpmn2:incoming>
      <bpmn2:outgoing>_0DE39FEC-C26C-4306-B3BF-FB51840D64A6</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="_E9E7737B-2F7A-4C28-A075-624400CC6F7D" drools:bgcolor="#000000" drools:selectable="true" name="No cleanup" sourceRef="_6BC387B7-6CAF-4F28-A42C-6F479719C651" targetRef="_D0F8147F-D412-43CA-B3BF-1D0552C8964E">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6z8XkKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[return  KieFunctions.isNull(notificationId);]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_0DE39FEC-C26C-4306-B3BF-FB51840D64A6" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_D0F8147F-D412-43CA-B3BF-1D0552C8964E" targetRef="_B0EA6E58-3892-48B1-B76D-2060043328DF"/>
    <bpmn2:sequenceFlow id="_1E5AA0E8-BC65-4DEA-B3B8-2AE7364BAB96" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_65C24730-187C-4786-9AF6-35FE160A7AD4" targetRef="_D0F8147F-D412-43CA-B3BF-1D0552C8964E"/>
    <bpmn2:exclusiveGateway id="_FFC08474-B754-4AD7-BAFB-D6B6EF979860" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="" name="" gatewayDirection="Diverging">
      <bpmn2:incoming>_FB58D9A3-5294-4BAE-BF5B-09B9E8EF8EA2</bpmn2:incoming>
      <bpmn2:outgoing>_9B83F107-E989-4880-A875-6A5D41A16404</bpmn2:outgoing>
      <bpmn2:outgoing>_84753796-09FD-4D1F-8CEE-49BD3F89BB03</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="_FB58D9A3-5294-4BAE-BF5B-09B9E8EF8EA2" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_6527D4F7-2BD5-4A51-A841-3409346E5DAF" targetRef="_FFC08474-B754-4AD7-BAFB-D6B6EF979860"/>
    <bpmn2:task id="_B8FAB136-A3C3-444E-B9BA-2A7A665535DB" drools:bgcolor="#33CCCC" drools:selectable="true" drools:taskName="NotificationsWriteService" name="Notifications Resolve">
      <bpmn2:extensionElements>
        <drools:onEntry-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println("Resolve Notification Preparation: entering");\nString recipient = requestActivity.getData().getActivity().getAssignedTo();\nSystem.out.println("recipient " + recipient);\n\nnotificationText = "{\"userId\": \"" + recipient + "\"}";\nkcontext.setVariable("notificationText", notificationText);]]></drools:script>
        </drools:onEntry-script>
        <drools:onExit-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println("**** Notif Resolve serviceResponse: **** " + serviceResponse);\n\nkcontext.setVariable("notificationId", null);]]></drools:script>
        </drools:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_9B83F107-E989-4880-A875-6A5D41A16404</bpmn2:incoming>
      <bpmn2:outgoing>_86C90E4C-7A47-494D-816D-D89A178FB959</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_Iv6z8nkKEeaVRfG2jKN_-A">
        <bpmn2:dataInput id="_B8FAB136-A3C3-444E-B9BA-2A7A665535DB_TaskNameInputX" name="TaskName"/>
        <bpmn2:dataInput id="_B8FAB136-A3C3-444E-B9BA-2A7A665535DB_notificationInputX" drools:dtype="Object" itemSubjectRef="__B8FAB136-A3C3-444E-B9BA-2A7A665535DB_notificationInputXItem" name="notification"/>
        <bpmn2:dataInput id="_B8FAB136-A3C3-444E-B9BA-2A7A665535DB_notificationIdInputX" drools:dtype="Object" itemSubjectRef="__B8FAB136-A3C3-444E-B9BA-2A7A665535DB_notificationIdInputXItem" name="notificationId"/>
        <bpmn2:dataOutput id="_B8FAB136-A3C3-444E-B9BA-2A7A665535DB_ServiceResponseOutputX" drools:dtype="Object" itemSubjectRef="__B8FAB136-A3C3-444E-B9BA-2A7A665535DB_ServiceResponseOutputXItem" name="ServiceResponse"/>
        <bpmn2:inputSet id="_Iv6z83kKEeaVRfG2jKN_-A">
          <bpmn2:dataInputRefs>_B8FAB136-A3C3-444E-B9BA-2A7A665535DB_notificationInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_B8FAB136-A3C3-444E-B9BA-2A7A665535DB_notificationIdInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_B8FAB136-A3C3-444E-B9BA-2A7A665535DB_TaskNameInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_Iv6z9HkKEeaVRfG2jKN_-A">
          <bpmn2:dataOutputRefs>_B8FAB136-A3C3-444E-B9BA-2A7A665535DB_ServiceResponseOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_Iv6z9XkKEeaVRfG2jKN_-A">
        <bpmn2:targetRef>_B8FAB136-A3C3-444E-B9BA-2A7A665535DB_TaskNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Iv6z9nkKEeaVRfG2jKN_-A">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Iv6z93kKEeaVRfG2jKN_-A">NotificationsWriteService</bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Iv6z-HkKEeaVRfG2jKN_-A">_B8FAB136-A3C3-444E-B9BA-2A7A665535DB_TaskNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6z-XkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>notificationText</bpmn2:sourceRef>
        <bpmn2:targetRef>_B8FAB136-A3C3-444E-B9BA-2A7A665535DB_notificationInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Iv6z-nkKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>notificationId</bpmn2:sourceRef>
        <bpmn2:targetRef>_B8FAB136-A3C3-444E-B9BA-2A7A665535DB_notificationIdInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_Iv6z-3kKEeaVRfG2jKN_-A">
        <bpmn2:sourceRef>_B8FAB136-A3C3-444E-B9BA-2A7A665535DB_ServiceResponseOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>serviceResponse</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:sequenceFlow id="_9B83F107-E989-4880-A875-6A5D41A16404" drools:bgcolor="#000000" drools:selectable="true" name="clear" sourceRef="_FFC08474-B754-4AD7-BAFB-D6B6EF979860" targetRef="_B8FAB136-A3C3-444E-B9BA-2A7A665535DB">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6z_HkKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[return  !KieFunctions.isNull(notificationId);]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:exclusiveGateway id="_1B906BAF-FC44-49B1-AEC3-CA3A3CC7CE95" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="" name="" gatewayDirection="Converging">
      <bpmn2:incoming>_86C90E4C-7A47-494D-816D-D89A178FB959</bpmn2:incoming>
      <bpmn2:incoming>_84753796-09FD-4D1F-8CEE-49BD3F89BB03</bpmn2:incoming>
      <bpmn2:outgoing>_1A32715E-2413-4E97-92AC-8052B613F57F</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="_84753796-09FD-4D1F-8CEE-49BD3F89BB03" drools:bgcolor="#000000" drools:selectable="true" name="No notif" sourceRef="_FFC08474-B754-4AD7-BAFB-D6B6EF979860" targetRef="_1B906BAF-FC44-49B1-AEC3-CA3A3CC7CE95">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6z_XkKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[return  KieFunctions.isNull(notificationId);]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_86C90E4C-7A47-494D-816D-D89A178FB959" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_B8FAB136-A3C3-444E-B9BA-2A7A665535DB" targetRef="_1B906BAF-FC44-49B1-AEC3-CA3A3CC7CE95"/>
    <bpmn2:sequenceFlow id="_1A32715E-2413-4E97-92AC-8052B613F57F" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_1B906BAF-FC44-49B1-AEC3-CA3A3CC7CE95" targetRef="_C097FA35-93EF-4F89-8C06-BF2424A75BC5"/>
    <bpmn2:exclusiveGateway id="_A6B55BA7-C52A-4B18-8EDE-3A90D21BAC63" drools:bgcolor="#f0e68c" drools:selectable="true" drools:bordercolor="#a67f00" drools:dg="_34C366FD-B38A-4425-A063-4644370578CB" name="" gatewayDirection="Diverging" default="_34C366FD-B38A-4425-A063-4644370578CB">
      <bpmn2:incoming>_A8022EDC-2D30-462D-B80F-AE6211F79B91</bpmn2:incoming>
      <bpmn2:outgoing>_CE68F333-5F45-416C-AE97-E10D44C7F00B</bpmn2:outgoing>
      <bpmn2:outgoing>_34C366FD-B38A-4425-A063-4644370578CB</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="_A8022EDC-2D30-462D-B80F-AE6211F79B91" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_FFC6CA03-8159-46EE-A467-47E1FEC0B49F" targetRef="_A6B55BA7-C52A-4B18-8EDE-3A90D21BAC63"/>
    <bpmn2:sequenceFlow id="_CE68F333-5F45-416C-AE97-E10D44C7F00B" drools:bgcolor="#000000" drools:selectable="true" name="decline" sourceRef="_A6B55BA7-C52A-4B18-8EDE-3A90D21BAC63" targetRef="_8AEB6C48-0D50-4F6A-8CA3-D639CF2E6147">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6z_nkKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[return KieFunctions.equalsTo(action, "decline");]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_34C366FD-B38A-4425-A063-4644370578CB" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_A6B55BA7-C52A-4B18-8EDE-3A90D21BAC63" targetRef="_3B1EBF85-1D58-4322-8E6A-4BB39A49AF9E">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression" id="_Iv6z_3kKEeaVRfG2jKN_-A" language="http://www.java.com/java"><![CDATA[return !KieFunctions.equalsTo(action, "decline");]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:scriptTask id="_8AEB6C48-0D50-4F6A-8CA3-D639CF2E6147" drools:selectable="true" name="Set Perf Indicator" scriptFormat="http://www.java.com/java">
      <bpmn2:documentation id="_Iv7aIHkKEeaVRfG2jKN_-A"><![CDATA[\n\nSystem.out.println("Inside EDIT data ");\n\nkcontext.setVariable("action", "EDIT");\n\nif(requestActivity.getData().getSignals() == null) {\n    requestActivity.getData().setSignals(new java.util.ArrayList<vistacore.order.request.RequestSignal> ());\n}\n    \njava.util.List<vistacore.order.request.Request> reqs = updatedRequestActivity.getData().getRequests();\njava.util.List<vistacore.order.request.Request> res = updatedRequestActivity.getData().getResponses();\n\njava.util.List<vistacore.order.request.RequestSignal> signals = updatedRequestActivity.getData().getSignals();\n\nString executionUserId = null;\n\nif(signals != null && signals.size() >= 1) {\n  vistacore.order.request.RequestSignal latestSignal = signals.get(signals.size()-1);\n  requestActivity.getData().getSignals().add(latestSignal);\n  executionUserId = latestSignal.getExecutionUserId();\n}\nif(reqs != null && reqs.size() >= 1) {\n  vistacore.order.request.Request latestRequest = reqs.get(reqs.size()-1);\n  requestActivity.getData().getRequests().add(latestRequest);\n  kcontext.setVariable("comments", latestRequest.getRequest());\n}\n\nif(res != null && res.size() >= 1) {\n  vistacore.order.request.Request latestResponse = res.get(res.size()-1);\n  requestActivity.getData().getResponses().add(latestResponse);\n}\n\nrequestActivity.getData().setActivity(updatedRequestActivity.getData().getActivity());\n\nrequestActivity.setFormAction(updatedRequestActivity.getFormAction());\nrequestActivity.setInstanceName(updatedRequestActivity.getInstanceName());\n\nrequestActivity.setPatientUid(updatedRequestActivity.getPatientUid());\nrequestActivity.setAuthorUid(updatedRequestActivity.getAuthorUid());\nrequestActivity.setDomain(updatedRequestActivity.getDomain());\nrequestActivity.setSubDomain(updatedRequestActivity.getSubDomain());\nrequestActivity.setDisplayName(updatedRequestActivity.getDisplayName());\nrequestActivity.setReferenceId(updatedRequestActivity.getReferenceId());\nrequestActivity.setUrgency(updatedRequestActivity.getUrgency());\n\nSystem.out.println("after updating request activity " + updatedRequestActivity.getInstanceName());\n\nGson gson = new Gson();\nString json = gson.toJson(requestActivity);\n\nkcontext.setVariable("pjdsRecord", json);\nkcontext.setVariable("urgency", Integer.toString(updatedRequestActivity.getData().getActivity().getUrgency()));\nkcontext.setVariable("assignedTo", updatedRequestActivity.getData().getActivity().getAssignedTo());\nkcontext.setVariable("subDomain", updatedRequestActivity.getData().getActivity().getDomain());\nkcontext.setVariable("instanceName", updatedRequestActivity.getData().getActivity().getInstanceName());\n\n//set signal data\nkcontext.setVariable("signalName", "Edit");\nkcontext.setVariable("signalHistory", "");\nkcontext.setVariable("signalAction", "Edit");\nkcontext.setVariable("signalOwner", executionUserId);\n\n\n//reset performance indicators\n\nactivityHealthy = true;\nactivityHealthDescription = "";\nkcontext.setVariable("activityHealthy", activityHealthy);\nkcontext.setVariable("activityHealthDescription",activityHealthDescription);\n\n\nSystem.out.println("END OF EDIT DATA");\n]]></bpmn2:documentation>
      <bpmn2:incoming>_CE68F333-5F45-416C-AE97-E10D44C7F00B</bpmn2:incoming>
      <bpmn2:outgoing>_D9E894DE-1A52-48E1-BB70-AC6048FC2EFB</bpmn2:outgoing>
      <bpmn2:script><![CDATA[try{
        System.out.println("Declined Request, setting perf indicator");
      
//Set performance indicators
        java.util.List<vistacore.order.request.Request> reqs = requestActivity.getData().getResponses();
        vistacore.order.request.Request latestResponse = reqs.get(reqs.size()-1);
        DateTimeFormatter formatter = DateTimeFormat.forPattern("yyyyMMddHHmmss");
        DateTime date = formatter.parseDateTime(latestResponse.getLatestDate());

        formatter = DateTimeFormat.forPattern("MM/dd/yyyy");
        String dateString = formatter.print(date);

        activityHealthy = false;
        activityHealthDescription = "Request not completed or discontinued by " + dateString;
        kcontext.setVariable("activityHealthy", activityHealthy);
        kcontext.setVariable("activityHealthDescription",activityHealthDescription);
        } catch (Exception e) {
                System.out.println("RequestActivity: setting perf indicator - An unexpected condition has happened: " + e.getMessage());
        }]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:endEvent id="_6D380993-406E-420F-A29B-1F1497A0AB99" drools:bgcolor="#ff6347" drools:selectable="true" name="">
      <bpmn2:incoming>_D9E894DE-1A52-48E1-BB70-AC6048FC2EFB</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:sequenceFlow id="_D9E894DE-1A52-48E1-BB70-AC6048FC2EFB" drools:bgcolor="#000000" drools:selectable="true" sourceRef="_8AEB6C48-0D50-4F6A-8CA3-D639CF2E6147" targetRef="_6D380993-406E-420F-A29B-1F1497A0AB99"/>
    <bpmn2:boundaryEvent id="_FFC6CA03-8159-46EE-A467-47E1FEC0B49F" drools:bgcolor="#f5deb3" drools:selectable="true" drools:bordercolor="#a0522d" drools:boundaryca="false" name="" attachedToRef="_82665E0B-8C32-4ED7-8F7B-251AEE746F79" cancelActivity="false">
      <bpmn2:outgoing>_A8022EDC-2D30-462D-B80F-AE6211F79B91</bpmn2:outgoing>
      <bpmn2:timerEventDefinition id="_Iv7aIXkKEeaVRfG2jKN_-A">
        <bpmn2:timeDuration xsi:type="bpmn2:tFormalExpression" id="_Iv7aInkKEeaVRfG2jKN_-A">#{requestNotificationDays}</bpmn2:timeDuration>
      </bpmn2:timerEventDefinition>
    </bpmn2:boundaryEvent>
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="_Iv7aI3kKEeaVRfG2jKN_-A">
    <bpmndi:BPMNPlane id="_Iv7aJHkKEeaVRfG2jKN_-A" bpmnElement="Order.Request">
      <bpmndi:BPMNShape id="_Iv7aJXkKEeaVRfG2jKN_-A" bpmnElement="_C952A77D-50BA-47E7-8AF7-BA662091481F">
        <dc:Bounds height="30.0" width="30.0" x="30.0" y="592.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aJnkKEeaVRfG2jKN_-A" bpmnElement="_036DA54F-E5A9-4A92-9531-203054AA8CB2">
        <dc:Bounds height="54.0" width="135.0" x="240.0" y="570.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aJ3kKEeaVRfG2jKN_-A" bpmnElement="_72476D58-4303-4D54-8F20-1049B7AC9B21">
        <dc:Bounds height="40.0" width="40.0" x="1586.0" y="889.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aKHkKEeaVRfG2jKN_-A" bpmnElement="_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A">
        <dc:Bounds height="48.0" width="104.0" x="435.0" y="570.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aKXkKEeaVRfG2jKN_-A" bpmnElement="_B0EA6E58-3892-48B1-B76D-2060043328DF">
        <dc:Bounds height="40.0" width="40.0" x="132.0" y="587.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7aKnkKEeaVRfG2jKN_-A" bpmnElement="_1332E809-6163-4C32-9044-FC09EBDCF28E">
        <di:waypoint xsi:type="dc:Point" x="152.0" y="607.0"/>
        <di:waypoint xsi:type="dc:Point" x="206.0" y="607.0"/>
        <di:waypoint xsi:type="dc:Point" x="206.0" y="597.0"/>
        <di:waypoint xsi:type="dc:Point" x="307.5" y="597.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7aK3kKEeaVRfG2jKN_-A" bpmnElement="_C8E0A294-8596-48CF-86E8-D93F6608C1D0">
        <di:waypoint xsi:type="dc:Point" x="307.5" y="597.0"/>
        <di:waypoint xsi:type="dc:Point" x="411.0" y="597.0"/>
        <di:waypoint xsi:type="dc:Point" x="411.0" y="594.0"/>
        <di:waypoint xsi:type="dc:Point" x="487.0" y="594.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7aLHkKEeaVRfG2jKN_-A" bpmnElement="_26C11EC4-D200-49AA-9BD8-5B8AF19680F2">
        <dc:Bounds height="40.0" width="40.0" x="657.0" y="587.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7aLXkKEeaVRfG2jKN_-A" bpmnElement="_082030F5-0EA9-4CA9-9626-5D1ADCBE651A">
        <di:waypoint xsi:type="dc:Point" x="487.0" y="594.0"/>
        <di:waypoint xsi:type="dc:Point" x="598.0" y="594.0"/>
        <di:waypoint xsi:type="dc:Point" x="598.0" y="607.0"/>
        <di:waypoint xsi:type="dc:Point" x="677.0" y="607.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7aLnkKEeaVRfG2jKN_-A" bpmnElement="_56B6AC64-C696-4FEB-B1D0-BBF83DF020DB">
        <dc:Bounds height="30.0" width="30.0" x="567.0" y="446.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7aL3kKEeaVRfG2jKN_-A" bpmnElement="_5CD6B5C0-2EC9-43AF-BA2A-6668C5C118CD">
        <di:waypoint xsi:type="dc:Point" x="677.0" y="607.0"/>
        <di:waypoint xsi:type="dc:Point" x="677.0" y="461.0"/>
        <di:waypoint xsi:type="dc:Point" x="582.0" y="461.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7aMHkKEeaVRfG2jKN_-A" bpmnElement="_0CD4B622-EBA4-4B6D-AC8E-B050227762D8">
        <dc:Bounds height="44.0" width="74.0" x="390.0" y="435.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7aMXkKEeaVRfG2jKN_-A" bpmnElement="_B929D9C1-02C4-496B-AFD0-8EB38FC89BD3">
        <di:waypoint xsi:type="dc:Point" x="582.0" y="461.0"/>
        <di:waypoint xsi:type="dc:Point" x="515.0" y="461.0"/>
        <di:waypoint xsi:type="dc:Point" x="515.0" y="457.0"/>
        <di:waypoint xsi:type="dc:Point" x="427.0" y="457.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7aMnkKEeaVRfG2jKN_-A" bpmnElement="_FFAC9F72-D411-446D-80B7-B3827DBC7546">
        <dc:Bounds height="40.0" width="40.0" x="1770.0" y="675.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aM3kKEeaVRfG2jKN_-A" bpmnElement="_42636481-27A3-47D1-A895-CCA7CA339092">
        <dc:Bounds height="57.0" width="93.0" x="1665.0" y="810.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aNHkKEeaVRfG2jKN_-A" bpmnElement="_7D5F3AA7-A887-4F48-89B3-CD3181C97841">
        <dc:Bounds height="66.0" width="103.0" x="1650.0" y="705.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7aNXkKEeaVRfG2jKN_-A" bpmnElement="_DA9C3672-2EA8-4189-96F8-876A59B8A857">
        <di:waypoint xsi:type="dc:Point" x="1711.5" y="838.5"/>
        <di:waypoint xsi:type="dc:Point" x="1606.0" y="838.0"/>
        <di:waypoint xsi:type="dc:Point" x="1606.0" y="909.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7aNnkKEeaVRfG2jKN_-A" bpmnElement="_4CFA74AE-5479-4928-9FFB-39304C01FE4E">
        <dc:Bounds height="40.0" width="40.0" x="1170.0" y="587.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aN3kKEeaVRfG2jKN_-A" bpmnElement="_0785A662-B32C-4103-AA70-A418F127E190">
        <dc:Bounds height="30.0" width="30.0" x="1245.0" y="585.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7aOHkKEeaVRfG2jKN_-A" bpmnElement="_62C63D4C-44C5-4D49-983B-2791D0BB3237">
        <di:waypoint xsi:type="dc:Point" x="1190.0" y="607.0"/>
        <di:waypoint xsi:type="dc:Point" x="1260.0" y="600.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7aOXkKEeaVRfG2jKN_-A" bpmnElement="_8C0BC698-03C0-4875-98FF-222301B3357C">
        <dc:Bounds height="28.0" width="28.0" x="1965.0" y="685.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7aOnkKEeaVRfG2jKN_-A" bpmnElement="_8EA23D77-E008-4A5E-B6E5-6D8E6D2C960C">
        <di:waypoint xsi:type="dc:Point" x="1790.0" y="695.0"/>
        <di:waypoint xsi:type="dc:Point" x="1887.0" y="695.0"/>
        <di:waypoint xsi:type="dc:Point" x="1887.0" y="699.0"/>
        <di:waypoint xsi:type="dc:Point" x="1979.0" y="699.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7aO3kKEeaVRfG2jKN_-A" bpmnElement="_15CE415F-10A5-4447-A736-E4204EB27F0B">
        <di:waypoint xsi:type="dc:Point" x="1606.0" y="909.0"/>
        <di:waypoint xsi:type="dc:Point" x="1790.0" y="909.0"/>
        <di:waypoint xsi:type="dc:Point" x="1790.0" y="695.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7aPHkKEeaVRfG2jKN_-A" bpmnElement="_1FB1F668-671C-46A7-ABDD-D54CE74251BC">
        <di:waypoint xsi:type="dc:Point" x="677.0" y="607.0"/>
        <di:waypoint xsi:type="dc:Point" x="677.0" y="695.0"/>
        <di:waypoint xsi:type="dc:Point" x="1790.0" y="695.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7aPXkKEeaVRfG2jKN_-A" bpmnElement="_3030E4A5-5391-463D-B4D4-4B0F2541123E">
        <di:waypoint xsi:type="dc:Point" x="45.0" y="607.0"/>
        <di:waypoint xsi:type="dc:Point" x="152.0" y="607.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7aPnkKEeaVRfG2jKN_-A" bpmnElement="_C097FA35-93EF-4F89-8C06-BF2424A75BC5">
        <dc:Bounds height="40.0" width="40.0" x="1590.0" y="585.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aP3kKEeaVRfG2jKN_-A" bpmnElement="_82665E0B-8C32-4ED7-8F7B-251AEE746F79">
        <dc:Bounds height="80.0" width="100.0" x="390.0" y="810.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7aQHkKEeaVRfG2jKN_-A" bpmnElement="_CD2964A5-93F4-4EE7-8FB3-3A05DD526A76">
        <di:waypoint xsi:type="dc:Point" x="1606.0" y="909.0"/>
        <di:waypoint xsi:type="dc:Point" x="1047.0" y="909.0"/>
        <di:waypoint xsi:type="dc:Point" x="1047.0" y="850.0"/>
        <di:waypoint xsi:type="dc:Point" x="440.0" y="850.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7aQXkKEeaVRfG2jKN_-A" bpmnElement="_AA4974E6-C802-4DE7-9AB6-FE9FCAD5CA23">
        <dc:Bounds height="54.0" width="92.0" x="1305.0" y="570.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7aQnkKEeaVRfG2jKN_-A" bpmnElement="_7EFA9F42-C909-42CB-9D7D-6E0C882C10E7">
        <di:waypoint xsi:type="dc:Point" x="1260.0" y="600.0"/>
        <di:waypoint xsi:type="dc:Point" x="1351.0" y="597.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7aQ3kKEeaVRfG2jKN_-A" bpmnElement="_EA75DB13-AA5A-40AD-9997-AEDEB9DAB56D">
        <di:waypoint xsi:type="dc:Point" x="1701.5" y="738.0"/>
        <di:waypoint xsi:type="dc:Point" x="1711.5" y="838.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7aRHkKEeaVRfG2jKN_-A" bpmnElement="_34B8B69C-1524-4A34-B4EB-22DB001B584F">
        <dc:Bounds height="54.0" width="92.0" x="810.0" y="480.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aRXkKEeaVRfG2jKN_-A" bpmnElement="_444ED617-D0CC-4B1A-951E-19FE9F0A2438">
        <dc:Bounds height="66.0" width="98.0" x="945.0" y="495.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7aRnkKEeaVRfG2jKN_-A" bpmnElement="_41F29975-554E-4345-AAFC-DBC5AC696E4E">
        <di:waypoint xsi:type="dc:Point" x="856.0" y="507.0"/>
        <di:waypoint xsi:type="dc:Point" x="923.0" y="507.0"/>
        <di:waypoint xsi:type="dc:Point" x="923.0" y="528.0"/>
        <di:waypoint xsi:type="dc:Point" x="994.0" y="528.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7aR3kKEeaVRfG2jKN_-A" bpmnElement="_B13B8AA7-C8C7-4A67-A3A7-4E13A4C040AA">
        <di:waypoint xsi:type="dc:Point" x="677.0" y="607.0"/>
        <di:waypoint xsi:type="dc:Point" x="759.0" y="607.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7aSHkKEeaVRfG2jKN_-A" bpmnElement="_3B1EBF85-1D58-4322-8E6A-4BB39A49AF9E">
        <dc:Bounds height="55.0" width="88.0" x="443.0" y="667.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aSXkKEeaVRfG2jKN_-A" bpmnElement="_F018026B-E5E1-4ABD-AB2D-8E05883B8945">
        <dc:Bounds height="61.0" width="94.0" x="285.0" y="664.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7aSnkKEeaVRfG2jKN_-A" bpmnElement="_2CD92001-41C9-4986-B3C3-CDE48456AB27">
        <di:waypoint xsi:type="dc:Point" x="487.0" y="694.5"/>
        <di:waypoint xsi:type="dc:Point" x="332.0" y="694.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7aS3kKEeaVRfG2jKN_-A" bpmnElement="_F5EB4761-7F3A-454F-B2E0-1E907E0E4F81">
        <dc:Bounds height="28.0" width="28.0" x="195.0" y="681.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7aTHkKEeaVRfG2jKN_-A" bpmnElement="_99CF3088-5D08-4572-85E8-631B6FCF34A7">
        <di:waypoint xsi:type="dc:Point" x="332.0" y="694.5"/>
        <di:waypoint xsi:type="dc:Point" x="209.0" y="695.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7aTXkKEeaVRfG2jKN_-A" bpmnElement="_F14EDD36-6D38-4E7B-A65D-3992989F5D6D">
        <dc:Bounds height="40.0" width="40.0" x="739.0" y="587.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7aTnkKEeaVRfG2jKN_-A" bpmnElement="_0F283C3B-73C8-49D1-BAD0-20C5175D8B16">
        <di:waypoint xsi:type="dc:Point" x="759.0" y="607.0"/>
        <di:waypoint xsi:type="dc:Point" x="759.0" y="507.0"/>
        <di:waypoint xsi:type="dc:Point" x="856.0" y="507.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7aT3kKEeaVRfG2jKN_-A" bpmnElement="_AEA88340-8A1B-41FF-9C55-CC1709440572">
        <dc:Bounds height="40.0" width="40.0" x="1069.0" y="587.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7aUHkKEeaVRfG2jKN_-A" bpmnElement="_F741014F-C835-49D0-9D41-202AAE51C67C">
        <di:waypoint xsi:type="dc:Point" x="759.0" y="607.0"/>
        <di:waypoint xsi:type="dc:Point" x="1089.0" y="607.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7aUXkKEeaVRfG2jKN_-A" bpmnElement="_D7900D05-35F4-432D-A8C6-FDCC9181C3FA">
        <di:waypoint xsi:type="dc:Point" x="1089.0" y="607.0"/>
        <di:waypoint xsi:type="dc:Point" x="1190.0" y="607.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7aUnkKEeaVRfG2jKN_-A" bpmnElement="_10EB251B-BFB4-4B46-86C9-49713C1B1954">
        <di:waypoint xsi:type="dc:Point" x="994.0" y="528.0"/>
        <di:waypoint xsi:type="dc:Point" x="1089.0" y="528.0"/>
        <di:waypoint xsi:type="dc:Point" x="1089.0" y="607.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7aU3kKEeaVRfG2jKN_-A" bpmnElement="_29C00353-1475-46AD-92BB-D886773AB7B5">
        <dc:Bounds height="463.0" width="1158.0" x="1245.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aVHkKEeaVRfG2jKN_-A" bpmnElement="_38A4905D-71D6-48AA-9A37-CDD17705C5DB">
        <dc:Bounds height="30.0" width="30.0" x="1267.0" y="246.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aVXkKEeaVRfG2jKN_-A" bpmnElement="_B2B75267-76E4-4D1C-B0C0-9C9AE963D142">
        <dc:Bounds height="40.0" width="40.0" x="1340.0" y="241.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aVnkKEeaVRfG2jKN_-A" bpmnElement="_FB4F000D-914E-413A-A840-BC1968E1A814">
        <dc:Bounds height="30.0" width="30.0" x="1335.0" y="345.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aV3kKEeaVRfG2jKN_-A" bpmnElement="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516">
        <dc:Bounds height="54.0" width="99.0" x="1800.0" y="195.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aWHkKEeaVRfG2jKN_-A" bpmnElement="_7C996D18-3533-4C4B-9EAC-381B4CDC8AFC">
        <dc:Bounds height="42.0" width="72.0" x="1440.0" y="330.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aWXkKEeaVRfG2jKN_-A" bpmnElement="_D7862388-DB01-4015-B17B-965B2C13486F">
        <dc:Bounds height="28.0" width="28.0" x="2340.0" y="247.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aWnkKEeaVRfG2jKN_-A" bpmnElement="_6EBBF042-7FEB-4344-B5A1-8C77F6C04060">
        <dc:Bounds height="40.0" width="101.0" x="1740.0" y="330.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aW3kKEeaVRfG2jKN_-A" bpmnElement="_2B26DAFB-F71E-41EF-B882-C73668423ECB">
        <dc:Bounds height="61.0" width="94.0" x="2054.0" y="135.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aXHkKEeaVRfG2jKN_-A" bpmnElement="_B83BF56B-0A9D-4632-8238-0A7607EF8AD8">
        <dc:Bounds height="28.0" width="28.0" x="2340.0" y="151.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aXXkKEeaVRfG2jKN_-A" bpmnElement="_008660B2-FE52-42DF-A4BF-74A6618E97C6">
        <dc:Bounds height="55.0" width="88.0" x="1815.0" y="112.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aXnkKEeaVRfG2jKN_-A" bpmnElement="_2CAEDC25-5907-4A6D-AD66-40C19AB7E985">
        <dc:Bounds height="40.0" width="40.0" x="2235.0" y="232.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aX3kKEeaVRfG2jKN_-A" bpmnElement="_F3179ED8-614D-4187-AE50-833FA93A054D">
        <dc:Bounds height="80.0" width="100.0" x="2205.0" y="32.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aYHkKEeaVRfG2jKN_-A" bpmnElement="_18E7B07C-A07A-4B9F-A58C-E0F45A4CB2EA">
        <dc:Bounds height="57.0" width="93.0" x="2054.0" y="43.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aYXkKEeaVRfG2jKN_-A" bpmnElement="_613748AB-8896-4E4B-8C36-F202EDFC8F7A">
        <dc:Bounds height="57.0" width="93.0" x="1908.0" y="43.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aYnkKEeaVRfG2jKN_-A" bpmnElement="_ECF3D56B-3886-4DCB-B80D-CDADF00DFDC4">
        <dc:Bounds height="54.0" width="92.0" x="1549.0" y="44.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aY3kKEeaVRfG2jKN_-A" bpmnElement="_EACA314E-12ED-4C05-8828-4981602E4069">
        <dc:Bounds height="40.0" width="84.0" x="1380.0" y="90.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aZHkKEeaVRfG2jKN_-A" bpmnElement="_11C6DED1-C188-4AC9-97E7-05AC3BB7173D">
        <dc:Bounds height="50.0" width="88.0" x="1551.0" y="180.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aZXkKEeaVRfG2jKN_-A" bpmnElement="_623EF2A8-0D57-442A-AAAD-2502765A212C">
        <dc:Bounds height="40.0" width="40.0" x="1410.0" y="241.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aZnkKEeaVRfG2jKN_-A" bpmnElement="_6260BC6E-6F64-499D-B852-FC620D5EF326">
        <dc:Bounds height="40.0" width="40.0" x="1725.0" y="241.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aZ3kKEeaVRfG2jKN_-A" bpmnElement="_54980DB7-6925-455D-81B0-83222CEA297F">
        <dc:Bounds height="40.0" width="40.0" x="1725.0" y="51.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aaHkKEeaVRfG2jKN_-A" bpmnElement="_908878DF-FC05-4E02-9494-191EC98F9DDE">
        <dc:Bounds height="40.0" width="40.0" x="1575.0" y="120.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aaXkKEeaVRfG2jKN_-A" bpmnElement="_BF8D2825-9301-4084-AA9E-A0197F1EA12A">
        <dc:Bounds height="53.0" width="92.0" x="1575.0" y="333.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aankKEeaVRfG2jKN_-A" bpmnElement="_56367C3E-ED84-47BD-A195-2B4A559B57C9">
        <dc:Bounds height="61.0" width="94.0" x="2022.0" y="375.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7aa3kKEeaVRfG2jKN_-A" bpmnElement="_A310FE22-1D89-4675-910A-410AF8ECE207">
        <dc:Bounds height="40.0" width="40.0" x="2049.0" y="232.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7abHkKEeaVRfG2jKN_-A" bpmnElement="_08C4DE72-020D-4F3E-9975-4FACB5D872E4">
        <dc:Bounds height="40.0" width="40.0" x="2145.0" y="232.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7abXkKEeaVRfG2jKN_-A" bpmnElement="_2755C8C7-424B-4573-A376-5BC51A2B4357">
        <dc:Bounds height="40.0" width="40.0" x="1909.0" y="331.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7abnkKEeaVRfG2jKN_-A" bpmnElement="_D644C573-FFEB-4069-A30D-5506AFAD6381">
        <di:waypoint xsi:type="dc:Point" x="37.0" y="261.0"/>
        <di:waypoint xsi:type="dc:Point" x="115.0" y="261.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7ab3kKEeaVRfG2jKN_-A" bpmnElement="_AEEB82AE-2505-4D8C-9203-5F8D66E3267B">
        <di:waypoint xsi:type="dc:Point" x="105.0" y="360.0"/>
        <di:waypoint xsi:type="dc:Point" x="1402.0" y="360.0"/>
        <di:waypoint xsi:type="dc:Point" x="1402.0" y="351.0"/>
        <di:waypoint xsi:type="dc:Point" x="231.0" y="351.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7acHkKEeaVRfG2jKN_-A" bpmnElement="_ABC2D458-AC91-4FF6-B876-B2E521A1007D">
        <di:waypoint xsi:type="dc:Point" x="231.0" y="351.0"/>
        <di:waypoint xsi:type="dc:Point" x="1543.0" y="351.0"/>
        <di:waypoint xsi:type="dc:Point" x="1543.0" y="359.0"/>
        <di:waypoint xsi:type="dc:Point" x="376.0" y="359.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7acXkKEeaVRfG2jKN_-A" bpmnElement="_3CCE1581-ADFE-40F4-9F99-0F84E8140EFC">
        <di:waypoint xsi:type="dc:Point" x="856.0" y="165.5"/>
        <di:waypoint xsi:type="dc:Point" x="1109.0" y="165.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7acnkKEeaVRfG2jKN_-A" bpmnElement="_FA410E1F-25BF-41BB-8C15-98C2A99FEABD">
        <di:waypoint xsi:type="dc:Point" x="614.0" y="139.5"/>
        <di:waypoint xsi:type="dc:Point" x="1993.0" y="139.0"/>
        <di:waypoint xsi:type="dc:Point" x="1993.0" y="165.0"/>
        <di:waypoint xsi:type="dc:Point" x="856.0" y="165.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7ac3kKEeaVRfG2jKN_-A" bpmnElement="_8F53FE59-5B88-41AD-85E2-E1FA6C2C882A">
        <di:waypoint xsi:type="dc:Point" x="600.0" y="194.0"/>
        <di:waypoint xsi:type="dc:Point" x="1883.0" y="226.0"/>
        <di:waypoint xsi:type="dc:Point" x="614.0" y="139.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7adHkKEeaVRfG2jKN_-A" bpmnElement="_EB47D8F2-82CA-4E01-9419-4D4175B87785">
        <di:waypoint xsi:type="dc:Point" x="1010.0" y="252.0"/>
        <di:waypoint xsi:type="dc:Point" x="1010.0" y="72.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7adXkKEeaVRfG2jKN_-A" bpmnElement="_7C7B8B1F-15D5-4CBD-B423-BAC9CB153021">
        <di:waypoint xsi:type="dc:Point" x="1010.0" y="252.0"/>
        <di:waypoint xsi:type="dc:Point" x="2307.0" y="252.0"/>
        <di:waypoint xsi:type="dc:Point" x="2307.0" y="261.0"/>
        <di:waypoint xsi:type="dc:Point" x="1109.0" y="261.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7adnkKEeaVRfG2jKN_-A" bpmnElement="_A1D870CC-33F2-484E-87FF-3DEA5EE392A0">
        <di:waypoint xsi:type="dc:Point" x="1010.0" y="72.0"/>
        <di:waypoint xsi:type="dc:Point" x="855.5" y="71.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7ad3kKEeaVRfG2jKN_-A" bpmnElement="_853D63FA-4E31-4576-8F76-A1CBF55AF624">
        <di:waypoint xsi:type="dc:Point" x="855.5" y="71.5"/>
        <di:waypoint xsi:type="dc:Point" x="709.5" y="71.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7aeHkKEeaVRfG2jKN_-A" bpmnElement="_713F75C4-C58B-4054-8763-6B7B351996C6">
        <di:waypoint xsi:type="dc:Point" x="185.0" y="261.0"/>
        <di:waypoint xsi:type="dc:Point" x="1430.0" y="185.0"/>
        <di:waypoint xsi:type="dc:Point" x="1422.0" y="185.0"/>
        <di:waypoint xsi:type="dc:Point" x="177.0" y="110.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7aeXkKEeaVRfG2jKN_-A" bpmnElement="_A84E51F0-B136-4180-893A-30DFA15ABD0E">
        <di:waypoint xsi:type="dc:Point" x="185.0" y="261.0"/>
        <di:waypoint xsi:type="dc:Point" x="500.0" y="261.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7aenkKEeaVRfG2jKN_-A" bpmnElement="_5477C5AE-2C97-48C1-92D3-CF785584369A">
        <di:waypoint xsi:type="dc:Point" x="350.0" y="205.0"/>
        <di:waypoint xsi:type="dc:Point" x="1745.0" y="205.0"/>
        <di:waypoint xsi:type="dc:Point" x="500.0" y="261.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7ae3kKEeaVRfG2jKN_-A" bpmnElement="_7528D24C-26C8-4AB7-9427-1701BF737AFE">
        <di:waypoint xsi:type="dc:Point" x="500.0" y="261.0"/>
        <di:waypoint xsi:type="dc:Point" x="1745.0" y="222.0"/>
        <di:waypoint xsi:type="dc:Point" x="604.5" y="222.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7afHkKEeaVRfG2jKN_-A" bpmnElement="_A4AD2111-E51A-4CDD-B9FB-A81B0E534D8F">
        <di:waypoint xsi:type="dc:Point" x="115.0" y="261.0"/>
        <di:waypoint xsi:type="dc:Point" x="185.0" y="261.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7afXkKEeaVRfG2jKN_-A" bpmnElement="_D7354536-2400-4ED2-8B04-D99996993FA3">
        <di:waypoint xsi:type="dc:Point" x="709.5" y="71.5"/>
        <di:waypoint xsi:type="dc:Point" x="500.0" y="71.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7afnkKEeaVRfG2jKN_-A" bpmnElement="_04750F7B-71BD-456E-8765-0D4289DF19E9">
        <di:waypoint xsi:type="dc:Point" x="500.0" y="71.0"/>
        <di:waypoint xsi:type="dc:Point" x="350.0" y="71.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7af3kKEeaVRfG2jKN_-A" bpmnElement="_9AFB7EAD-2271-4990-A183-9514B486A91F">
        <di:waypoint xsi:type="dc:Point" x="350.0" y="71.0"/>
        <di:waypoint xsi:type="dc:Point" x="350.0" y="140.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7agHkKEeaVRfG2jKN_-A" bpmnElement="_6154274A-791B-4314-8714-784AC772FC82">
        <di:waypoint xsi:type="dc:Point" x="350.0" y="140.0"/>
        <di:waypoint xsi:type="dc:Point" x="350.0" y="205.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7agXkKEeaVRfG2jKN_-A" bpmnElement="_88927176-9C31-4ADD-9473-E93602412FCE">
        <di:waypoint xsi:type="dc:Point" x="177.0" y="110.0"/>
        <di:waypoint xsi:type="dc:Point" x="1523.0" y="110.0"/>
        <di:waypoint xsi:type="dc:Point" x="1523.0" y="140.0"/>
        <di:waypoint xsi:type="dc:Point" x="350.0" y="140.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7agnkKEeaVRfG2jKN_-A" bpmnElement="_1427182D-64B0-441A-AE8B-6BC412CDAEA9">
        <di:waypoint xsi:type="dc:Point" x="500.0" y="71.0"/>
        <di:waypoint xsi:type="dc:Point" x="500.0" y="261.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7ag3kKEeaVRfG2jKN_-A" bpmnElement="_57B7E111-50C8-4DEA-AD22-359EB962FAEC">
        <di:waypoint xsi:type="dc:Point" x="115.0" y="261.0"/>
        <di:waypoint xsi:type="dc:Point" x="1360.0" y="313.0"/>
        <di:waypoint xsi:type="dc:Point" x="1350.0" y="313.0"/>
        <di:waypoint xsi:type="dc:Point" x="105.0" y="360.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7ahHkKEeaVRfG2jKN_-A" bpmnElement="_2AE93272-FD82-4752-90F6-D7CDA187E0E8">
        <di:waypoint xsi:type="dc:Point" x="376.0" y="359.5"/>
        <di:waypoint xsi:type="dc:Point" x="1703.0" y="359.0"/>
        <di:waypoint xsi:type="dc:Point" x="1703.0" y="350.0"/>
        <di:waypoint xsi:type="dc:Point" x="545.5" y="350.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7ahXkKEeaVRfG2jKN_-A" bpmnElement="_B9BDE9A7-3087-4DCE-9FB6-56E2FA9717EF">
        <di:waypoint xsi:type="dc:Point" x="824.0" y="252.0"/>
        <di:waypoint xsi:type="dc:Point" x="824.0" y="405.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7ahnkKEeaVRfG2jKN_-A" bpmnElement="_E7253F3C-7DC8-4AAB-807B-E854632895D7">
        <di:waypoint xsi:type="dc:Point" x="824.0" y="252.0"/>
        <di:waypoint xsi:type="dc:Point" x="920.0" y="252.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7ah3kKEeaVRfG2jKN_-A" bpmnElement="_4EEB0446-BA94-4636-B61E-FC2D87354C5F">
        <di:waypoint xsi:type="dc:Point" x="920.0" y="252.0"/>
        <di:waypoint xsi:type="dc:Point" x="1010.0" y="252.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7aiHkKEeaVRfG2jKN_-A" bpmnElement="_CFCF2711-022B-4B8A-B7C9-7102486757EB">
        <di:waypoint xsi:type="dc:Point" x="824.0" y="405.5"/>
        <di:waypoint xsi:type="dc:Point" x="2165.0" y="405.0"/>
        <di:waypoint xsi:type="dc:Point" x="920.0" y="252.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7aiXkKEeaVRfG2jKN_-A" bpmnElement="_48F0E2D1-98BA-43D0-94C5-E5A40F7E19D5">
        <di:waypoint xsi:type="dc:Point" x="545.5" y="350.0"/>
        <di:waypoint xsi:type="dc:Point" x="1875.0" y="350.0"/>
        <di:waypoint xsi:type="dc:Point" x="1875.0" y="351.0"/>
        <di:waypoint xsi:type="dc:Point" x="684.0" y="351.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7ainkKEeaVRfG2jKN_-A" bpmnElement="_20497049-20E2-4DE1-A006-FAA6C22CCE54">
        <di:waypoint xsi:type="dc:Point" x="604.5" y="222.0"/>
        <di:waypoint xsi:type="dc:Point" x="1849.0" y="351.0"/>
        <di:waypoint xsi:type="dc:Point" x="684.0" y="351.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7ai3kKEeaVRfG2jKN_-A" bpmnElement="_E374E4D2-51F5-446B-B594-7038953FC36C">
        <di:waypoint xsi:type="dc:Point" x="684.0" y="351.0"/>
        <di:waypoint xsi:type="dc:Point" x="1929.0" y="252.0"/>
        <di:waypoint xsi:type="dc:Point" x="824.0" y="252.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7ajHkKEeaVRfG2jKN_-A" bpmnElement="_A715EE06-3F76-4634-81F4-37BFB078586B">
        <dc:Bounds height="30.0" width="30.0" x="1830.0" y="179.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7ajXkKEeaVRfG2jKN_-A" bpmnElement="_A715EE06-3F76-4634-81F4-37BFB078586B">
        <di:waypoint xsi:type="dc:Point" x="46.0" y="5.0"/>
        <di:waypoint xsi:type="dc:Point" x="46.0" y="5.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7ajnkKEeaVRfG2jKN_-A" bpmnElement="_939B5B3F-BF86-4C82-AEAF-801D21BC6A3A">
        <di:waypoint xsi:type="dc:Point" x="1190.0" y="607.0"/>
        <di:waypoint xsi:type="dc:Point" x="1190.0" y="231.0"/>
        <di:waypoint xsi:type="dc:Point" x="1824.0" y="231.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7aj3kKEeaVRfG2jKN_-A" bpmnElement="_26EFF922-A1F0-4FF6-A6FE-688B1DBFFF5E">
        <di:waypoint xsi:type="dc:Point" x="1824.0" y="231.5"/>
        <di:waypoint xsi:type="dc:Point" x="1610.0" y="605.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7akHkKEeaVRfG2jKN_-A" bpmnElement="_CF506C03-B0EE-4469-B414-D1E989B2E3A2">
        <dc:Bounds height="40.0" width="40.0" x="1665.0" y="585.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7akXkKEeaVRfG2jKN_-A" bpmnElement="_C1DA356C-FF0D-4B50-9973-CA45DD6D9822">
        <di:waypoint xsi:type="dc:Point" x="1610.0" y="605.0"/>
        <di:waypoint xsi:type="dc:Point" x="1685.0" y="605.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7aknkKEeaVRfG2jKN_-A" bpmnElement="_966F17AB-5C81-4ADB-8E7C-0E529AC3CADE">
        <di:waypoint xsi:type="dc:Point" x="1685.0" y="605.0"/>
        <di:waypoint xsi:type="dc:Point" x="1682.0" y="672.0"/>
        <di:waypoint xsi:type="dc:Point" x="1089.0" y="673.0"/>
        <di:waypoint xsi:type="dc:Point" x="1089.0" y="607.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7ak3kKEeaVRfG2jKN_-A" bpmnElement="_6527D4F7-2BD5-4A51-A841-3409346E5DAF">
        <dc:Bounds height="60.0" width="99.0" x="1300.0" y="477.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7alHkKEeaVRfG2jKN_-A" bpmnElement="_069FC319-90DF-4674-A772-C213161FBA0E">
        <di:waypoint xsi:type="dc:Point" x="1351.0" y="597.0"/>
        <di:waypoint xsi:type="dc:Point" x="1349.5" y="507.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7alXkKEeaVRfG2jKN_-A" bpmnElement="_CB8A8197-C845-44C2-95ED-C840E58964C9">
        <di:waypoint xsi:type="dc:Point" x="1685.0" y="605.0"/>
        <di:waypoint xsi:type="dc:Point" x="1738.0" y="603.0"/>
        <di:waypoint xsi:type="dc:Point" x="1701.5" y="738.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7alnkKEeaVRfG2jKN_-A" bpmnElement="_BF878365-47F2-4AF2-89F6-33130C3FD0DB">
        <di:waypoint xsi:type="dc:Point" x="427.0" y="457.0"/>
        <di:waypoint xsi:type="dc:Point" x="152.0" y="457.0"/>
        <di:waypoint xsi:type="dc:Point" x="152.0" y="607.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7al3kKEeaVRfG2jKN_-A" bpmnElement="_65C24730-187C-4786-9AF6-35FE160A7AD4">
        <dc:Bounds height="61.0" width="94.0" x="393.0" y="1080.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7amHkKEeaVRfG2jKN_-A" bpmnElement="_6BC387B7-6CAF-4F28-A42C-6F479719C651">
        <dc:Bounds height="40.0" width="40.0" x="420.0" y="955.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7amXkKEeaVRfG2jKN_-A" bpmnElement="_EFC8F95A-CE33-4A98-B8B0-9ED2673CD986">
        <di:waypoint xsi:type="dc:Point" x="440.0" y="850.0"/>
        <di:waypoint xsi:type="dc:Point" x="440.0" y="975.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7amnkKEeaVRfG2jKN_-A" bpmnElement="_314A3924-5425-4828-BDAB-205EEBAC0402">
        <di:waypoint xsi:type="dc:Point" x="440.0" y="975.0"/>
        <di:waypoint xsi:type="dc:Point" x="440.0" y="1110.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7am3kKEeaVRfG2jKN_-A" bpmnElement="_D0F8147F-D412-43CA-B3BF-1D0552C8964E">
        <dc:Bounds height="40.0" width="40.0" x="255.0" y="955.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7anHkKEeaVRfG2jKN_-A" bpmnElement="_E9E7737B-2F7A-4C28-A075-624400CC6F7D">
        <di:waypoint xsi:type="dc:Point" x="440.0" y="975.0"/>
        <di:waypoint xsi:type="dc:Point" x="275.0" y="975.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7anXkKEeaVRfG2jKN_-A" bpmnElement="_0DE39FEC-C26C-4306-B3BF-FB51840D64A6">
        <di:waypoint xsi:type="dc:Point" x="275.0" y="975.0"/>
        <di:waypoint xsi:type="dc:Point" x="275.0" y="791.0"/>
        <di:waypoint xsi:type="dc:Point" x="152.0" y="791.0"/>
        <di:waypoint xsi:type="dc:Point" x="152.0" y="607.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7annkKEeaVRfG2jKN_-A" bpmnElement="_1E5AA0E8-BC65-4DEA-B3B8-2AE7364BAB96">
        <di:waypoint xsi:type="dc:Point" x="440.0" y="1110.5"/>
        <di:waypoint xsi:type="dc:Point" x="275.0" y="1110.0"/>
        <di:waypoint xsi:type="dc:Point" x="275.0" y="975.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7an3kKEeaVRfG2jKN_-A" bpmnElement="_FFC08474-B754-4AD7-BAFB-D6B6EF979860">
        <dc:Bounds height="40.0" width="40.0" x="1444.0" y="487.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7aoHkKEeaVRfG2jKN_-A" bpmnElement="_FB58D9A3-5294-4BAE-BF5B-09B9E8EF8EA2">
        <di:waypoint xsi:type="dc:Point" x="1349.5" y="507.0"/>
        <di:waypoint xsi:type="dc:Point" x="1464.0" y="507.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7aoXkKEeaVRfG2jKN_-A" bpmnElement="_B8FAB136-A3C3-444E-B9BA-2A7A665535DB">
        <dc:Bounds height="61.0" width="94.0" x="1515.0" y="476.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7aonkKEeaVRfG2jKN_-A" bpmnElement="_9B83F107-E989-4880-A875-6A5D41A16404">
        <di:waypoint xsi:type="dc:Point" x="1464.0" y="507.0"/>
        <di:waypoint xsi:type="dc:Point" x="1562.0" y="506.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7ao3kKEeaVRfG2jKN_-A" bpmnElement="_1B906BAF-FC44-49B1-AEC3-CA3A3CC7CE95">
        <dc:Bounds height="40.0" width="40.0" x="1444.0" y="580.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7apHkKEeaVRfG2jKN_-A" bpmnElement="_84753796-09FD-4D1F-8CEE-49BD3F89BB03">
        <di:waypoint xsi:type="dc:Point" x="1464.0" y="507.0"/>
        <di:waypoint xsi:type="dc:Point" x="1464.0" y="600.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7apXkKEeaVRfG2jKN_-A" bpmnElement="_86C90E4C-7A47-494D-816D-D89A178FB959">
        <di:waypoint xsi:type="dc:Point" x="1562.0" y="506.5"/>
        <di:waypoint xsi:type="dc:Point" x="1464.0" y="600.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7apnkKEeaVRfG2jKN_-A" bpmnElement="_1A32715E-2413-4E97-92AC-8052B613F57F">
        <di:waypoint xsi:type="dc:Point" x="1464.0" y="600.0"/>
        <di:waypoint xsi:type="dc:Point" x="1537.0" y="600.0"/>
        <di:waypoint xsi:type="dc:Point" x="1537.0" y="605.0"/>
        <di:waypoint xsi:type="dc:Point" x="1610.0" y="605.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7ap3kKEeaVRfG2jKN_-A" bpmnElement="_A6B55BA7-C52A-4B18-8EDE-3A90D21BAC63">
        <dc:Bounds height="40.0" width="40.0" x="540.0" y="750.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7aqHkKEeaVRfG2jKN_-A" bpmnElement="_A8022EDC-2D30-462D-B80F-AE6211F79B91">
        <di:waypoint xsi:type="dc:Point" x="435.0" y="809.0"/>
        <di:waypoint xsi:type="dc:Point" x="435.0" y="770.0"/>
        <di:waypoint xsi:type="dc:Point" x="560.0" y="770.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7aqXkKEeaVRfG2jKN_-A" bpmnElement="_CE68F333-5F45-416C-AE97-E10D44C7F00B">
        <di:waypoint xsi:type="dc:Point" x="560.0" y="770.0"/>
        <di:waypoint xsi:type="dc:Point" x="719.0" y="769.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="_Iv7aqnkKEeaVRfG2jKN_-A" bpmnElement="_34C366FD-B38A-4425-A063-4644370578CB">
        <di:waypoint xsi:type="dc:Point" x="560.0" y="770.0"/>
        <di:waypoint xsi:type="dc:Point" x="560.0" y="694.0"/>
        <di:waypoint xsi:type="dc:Point" x="487.0" y="694.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7aq3kKEeaVRfG2jKN_-A" bpmnElement="_8AEB6C48-0D50-4F6A-8CA3-D639CF2E6147">
        <dc:Bounds height="55.0" width="88.0" x="675.0" y="742.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_Iv7arHkKEeaVRfG2jKN_-A" bpmnElement="_6D380993-406E-420F-A29B-1F1497A0AB99">
        <dc:Bounds height="28.0" width="28.0" x="810.0" y="756.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7arXkKEeaVRfG2jKN_-A" bpmnElement="_D9E894DE-1A52-48E1-BB70-AC6048FC2EFB">
        <di:waypoint xsi:type="dc:Point" x="719.0" y="769.5"/>
        <di:waypoint xsi:type="dc:Point" x="824.0" y="770.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_Iv7arnkKEeaVRfG2jKN_-A" bpmnElement="_FFC6CA03-8159-46EE-A467-47E1FEC0B49F">
        <dc:Bounds height="30.0" width="30.0" x="420.0" y="794.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="_Iv7ar3kKEeaVRfG2jKN_-A" bpmnElement="_FFC6CA03-8159-46EE-A467-47E1FEC0B49F">
        <di:waypoint xsi:type="dc:Point" x="46.0" y="5.0"/>
        <di:waypoint xsi:type="dc:Point" x="46.0" y="5.0"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
  <bpmn2:relationship id="_Iv7asHkKEeaVRfG2jKN_-A" type="BPSimData">
    <bpmn2:extensionElements>
      <bpsim:BPSimData>
        <bpsim:Scenario xsi:type="bpsim:Scenario" id="default" name="Simulationscenario">
          <bpsim:ScenarioParameters xsi:type="bpsim:ScenarioParameters" baseTimeUnit="min"/>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_42636481-27A3-47D1-A895-CCA7CA339092" id="_Iv7asXkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_EA75DB13-AA5A-40AD-9997-AEDEB9DAB56D" id="_Iv7asnkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_4EEB0446-BA94-4636-B61E-FC2D87354C5F" id="_Iv7as3kKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_0DE39FEC-C26C-4306-B3BF-FB51840D64A6" id="_Iv7atHkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_7C996D18-3533-4C4B-9EAC-381B4CDC8AFC" id="_Iv7atXkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_F3179ED8-614D-4187-AE50-833FA93A054D" id="_Iv7atnkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_1E5AA0E8-BC65-4DEA-B3B8-2AE7364BAB96" id="_Iv7at3kKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_82665E0B-8C32-4ED7-8F7B-251AEE746F79" id="_Iv7auHkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ResourceParameters xsi:type="bpsim:ResourceParameters">
              <bpsim:Availability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="8.0"/>
              </bpsim:Availability>
              <bpsim:Quantity xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="1.0"/>
              </bpsim:Quantity>
            </bpsim:ResourceParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_57B7E111-50C8-4DEA-AD22-359EB962FAEC" id="_Iv7auXkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_0785A662-B32C-4103-AA70-A418F127E190" id="_Iv7aunkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_C952A77D-50BA-47E7-8AF7-BA662091481F" id="_Iv7au3kKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_7528D24C-26C8-4AB7-9427-1701BF737AFE" id="_Iv7avHkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_5477C5AE-2C97-48C1-92D3-CF785584369A" id="_Iv7avXkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_B8FAB136-A3C3-444E-B9BA-2A7A665535DB" id="_Iv7avnkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_29C00353-1475-46AD-92BB-D886773AB7B5" id="_Iv7av3kKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_99CF3088-5D08-4572-85E8-631B6FCF34A7" id="_Iv7awHkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_D7900D05-35F4-432D-A8C6-FDCC9181C3FA" id="_Iv7awXkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_7C7B8B1F-15D5-4CBD-B423-BAC9CB153021" id="_Iv7awnkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_34C366FD-B38A-4425-A063-4644370578CB" id="_Iv7aw3kKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_26EFF922-A1F0-4FF6-A6FE-688B1DBFFF5E" id="_Iv7axHkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_CE68F333-5F45-416C-AE97-E10D44C7F00B" id="_Iv7axXkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_5CD6B5C0-2EC9-43AF-BA2A-6668C5C118CD" id="_Iv7axnkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_8EA23D77-E008-4A5E-B6E5-6D8E6D2C960C" id="_Iv7ax3kKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_853D63FA-4E31-4576-8F76-A1CBF55AF624" id="_Iv7ayHkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_036DA54F-E5A9-4A92-9531-203054AA8CB2" id="_Iv7ayXkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_082030F5-0EA9-4CA9-9626-5D1ADCBE651A" id="_Iv7aynkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_41F29975-554E-4345-AAFC-DBC5AC696E4E" id="_Iv7ay3kKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_B13B8AA7-C8C7-4A67-A3A7-4E13A4C040AA" id="_Iv7azHkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_DA9C3672-2EA8-4189-96F8-876A59B8A857" id="_Iv7azXkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_D7862388-DB01-4015-B17B-965B2C13486F" id="_Iv7aznkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_613748AB-8896-4E4B-8C36-F202EDFC8F7A" id="_Iv7az3kKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_A8022EDC-2D30-462D-B80F-AE6211F79B91" id="_Iv7a0HkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_AEEB82AE-2505-4D8C-9203-5F8D66E3267B" id="_Iv7a0XkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_BF8D2825-9301-4084-AA9E-A0197F1EA12A" id="_Iv7a0nkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_1FB1F668-671C-46A7-ABDD-D54CE74251BC" id="_Iv7a03kKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_2B26DAFB-F71E-41EF-B882-C73668423ECB" id="_Iv7a1HkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_069FC319-90DF-4674-A772-C213161FBA0E" id="_Iv7a1XkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_F018026B-E5E1-4ABD-AB2D-8E05883B8945" id="_Iv7a1nkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_EB47D8F2-82CA-4E01-9419-4D4175B87785" id="_Iv7a13kKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_CD2964A5-93F4-4EE7-8FB3-3A05DD526A76" id="_Iv7a2HkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_38A4905D-71D6-48AA-9A37-CDD17705C5DB" id="_Iv7a2XkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_0CD4B622-EBA4-4B6D-AC8E-B050227762D8" id="_Iv7a2nkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_D7354536-2400-4ED2-8B04-D99996993FA3" id="_Iv7a23kKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_A4AD2111-E51A-4CDD-B9FB-A81B0E534D8F" id="_Iv7a3HkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_5EBE04DC-C34B-46F2-A6EE-9D37A6795516" id="_Iv7a3XkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ResourceParameters xsi:type="bpsim:ResourceParameters">
              <bpsim:Availability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="8.0"/>
              </bpsim:Availability>
              <bpsim:Quantity xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="1.0"/>
              </bpsim:Quantity>
            </bpsim:ResourceParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_65C24730-187C-4786-9AF6-35FE160A7AD4" id="_Iv7a3nkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_E7253F3C-7DC8-4AAB-807B-E854632895D7" id="_Iv7a33kKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_966F17AB-5C81-4ADB-8E7C-0E529AC3CADE" id="_Iv7a4HkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_C1DA356C-FF0D-4B50-9973-CA45DD6D9822" id="_Iv7a4XkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_E374E4D2-51F5-446B-B594-7038953FC36C" id="_Iv7a4nkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_A1D870CC-33F2-484E-87FF-3DEA5EE392A0" id="_Iv7a43kKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_2AE93272-FD82-4752-90F6-D7CDA187E0E8" id="_Iv7a5HkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_FFC6CA03-8159-46EE-A467-47E1FEC0B49F" id="_Iv7a5XkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_6D380993-406E-420F-A29B-1F1497A0AB99" id="_Iv7a5nkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_D9E894DE-1A52-48E1-BB70-AC6048FC2EFB" id="_Iv7a53kKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_FA410E1F-25BF-41BB-8C15-98C2A99FEABD" id="_Iv7a6HkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_B929D9C1-02C4-496B-AFD0-8EB38FC89BD3" id="_Iv7a6XkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_EACA314E-12ED-4C05-8828-4981602E4069" id="_Iv7a6nkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_A84E51F0-B136-4180-893A-30DFA15ABD0E" id="_Iv7a63kKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_444ED617-D0CC-4B1A-951E-19FE9F0A2438" id="_Iv7a7HkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_56367C3E-ED84-47BD-A195-2B4A559B57C9" id="_Iv7a7XkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_B9BDE9A7-3087-4DCE-9FB6-56E2FA9717EF" id="_Iv7a7nkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_A715EE06-3F76-4634-81F4-37BFB078586B" id="_Iv7a73kKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_939B5B3F-BF86-4C82-AEAF-801D21BC6A3A" id="_Iv7a8HkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_7EFA9F42-C909-42CB-9D7D-6E0C882C10E7" id="_Iv7a8XkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_ECF3D56B-3886-4DCB-B80D-CDADF00DFDC4" id="_Iv7a8nkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_2CD92001-41C9-4986-B3C3-CDE48456AB27" id="_Iv7a83kKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_E9E7737B-2F7A-4C28-A075-624400CC6F7D" id="_Iv7a9HkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_BFC808D6-07CD-44A9-9E9A-1AD1F9047D4A" id="_Iv7a9XkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_713F75C4-C58B-4054-8763-6B7B351996C6" id="_Iv7a9nkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_FB4F000D-914E-413A-A840-BC1968E1A814" id="_Iv7a93kKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_D644C573-FFEB-4069-A30D-5506AFAD6381" id="_Iv7a-HkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_F741014F-C835-49D0-9D41-202AAE51C67C" id="_Iv7a-XkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_FB58D9A3-5294-4BAE-BF5B-09B9E8EF8EA2" id="_Iv7a-nkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_9AFB7EAD-2271-4990-A183-9514B486A91F" id="_Iv7a-3kKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_6154274A-791B-4314-8714-784AC772FC82" id="_Iv7a_HkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_48F0E2D1-98BA-43D0-94C5-E5A40F7E19D5" id="_Iv7a_XkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_C8E0A294-8596-48CF-86E8-D93F6608C1D0" id="_Iv7a_nkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_B83BF56B-0A9D-4632-8238-0A7607EF8AD8" id="_Iv7a_3kKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_9B83F107-E989-4880-A875-6A5D41A16404" id="_Iv7bAHkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_EFC8F95A-CE33-4A98-B8B0-9ED2673CD986" id="_Iv7bAXkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_04750F7B-71BD-456E-8765-0D4289DF19E9" id="_Iv7bAnkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_3CCE1581-ADFE-40F4-9F99-0F84E8140EFC" id="_Iv7bA3kKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_CB8A8197-C845-44C2-95ED-C840E58964C9" id="_Iv7bBHkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_34B8B69C-1524-4A34-B4EB-22DB001B584F" id="_Iv7bBXkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_0F283C3B-73C8-49D1-BAD0-20C5175D8B16" id="_Iv7bBnkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_7D5F3AA7-A887-4F48-89B3-CD3181C97841" id="_Iv7bB3kKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_314A3924-5425-4828-BDAB-205EEBAC0402" id="_Iv7bCHkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_84753796-09FD-4D1F-8CEE-49BD3F89BB03" id="_Iv7bCXkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_BF878365-47F2-4AF2-89F6-33130C3FD0DB" id="_Iv7bCnkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_62C63D4C-44C5-4D49-983B-2791D0BB3237" id="_Iv7bC3kKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_8C0BC698-03C0-4875-98FF-222301B3357C" id="_Iv7bDHkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_3030E4A5-5391-463D-B4D4-4B0F2541123E" id="_Iv7bDXkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_1332E809-6163-4C32-9044-FC09EBDCF28E" id="_Iv7bDnkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_86C90E4C-7A47-494D-816D-D89A178FB959" id="_Iv7bD3kKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_56B6AC64-C696-4FEB-B1D0-BBF83DF020DB" id="_Iv7bEHkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_15CE415F-10A5-4447-A736-E4204EB27F0B" id="_Iv7bEXkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_1A32715E-2413-4E97-92AC-8052B613F57F" id="_Iv7bEnkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_1427182D-64B0-441A-AE8B-6BC412CDAEA9" id="_Iv7bE3kKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_6EBBF042-7FEB-4344-B5A1-8C77F6C04060" id="_Iv7bFHkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_8AEB6C48-0D50-4F6A-8CA3-D639CF2E6147" id="_Iv7bFXkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_18E7B07C-A07A-4B9F-A58C-E0F45A4CB2EA" id="_Iv7bFnkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_11C6DED1-C188-4AC9-97E7-05AC3BB7173D" id="_Iv7bF3kKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_ABC2D458-AC91-4FF6-B876-B2E521A1007D" id="_Iv7bGHkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_10EB251B-BFB4-4B46-86C9-49713C1B1954" id="_Iv7bGXkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_008660B2-FE52-42DF-A4BF-74A6618E97C6" id="_Iv7bGnkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_3B1EBF85-1D58-4322-8E6A-4BB39A49AF9E" id="_Iv7bG3kKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_CFCF2711-022B-4B8A-B7C9-7102486757EB" id="_Iv7bHHkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_20497049-20E2-4DE1-A006-FAA6C22CCE54" id="_Iv7bHXkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_6527D4F7-2BD5-4A51-A841-3409346E5DAF" id="_Iv7bHnkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_AA4974E6-C802-4DE7-9AB6-FE9FCAD5CA23" id="_Iv7bH3kKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_88927176-9C31-4ADD-9473-E93602412FCE" id="_Iv7bIHkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_8F53FE59-5B88-41AD-85E2-E1FA6C2C882A" id="_Iv7bIXkKEeaVRfG2jKN_-A">
            <bpsim:ControlParameters xsi:type="bpsim:ControlParameters">
              <bpsim:Probability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="100.0"/>
              </bpsim:Probability>
            </bpsim:ControlParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_F5EB4761-7F3A-454F-B2E0-1E907E0E4F81" id="_Iv7bInkKEeaVRfG2jKN_-A">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:UniformDistribution max="10.0" min="5.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
          </bpsim:ElementParameters>
        </bpsim:Scenario>
      </bpsim:BPSimData>
    </bpmn2:extensionElements>
    <bpmn2:source>_Iv6MAHkKEeaVRfG2jKN_-A</bpmn2:source>
    <bpmn2:target>_Iv6MAHkKEeaVRfG2jKN_-A</bpmn2:target>
  </bpmn2:relationship>
</bpmn2:definitions>
